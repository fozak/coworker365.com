window.addEventListener("DOMContentLoaded",()=>{document.querySelector('.subscription-form').addEventListener('submit',function(event){event.preventDefault();const formData=new FormData(this);formData.set("email_group","ERPNext monthly newsletter")
fetch('/api/method/newsletter.newsletter.doctype.newsletter.newsletter.subscribe',{method:'POST',headers:{'Content-Type':'application/json',"X-Frappe-CSRF-Token":frappe.csrf_token},body:JSON.stringify(Object.fromEntries(formData)),}).then(response=>{if(!response.ok){throw new Error(`HTTP error! Status: ${response.status}`);}
return response.json();}).then(data=>{document.querySelector(".subscription-form").innerHTML="Thanks for your interest! Please check your inbox.";}).catch(error=>{document.querySelector(".subscription-form").innerHTML="Something went wrong!";});});});