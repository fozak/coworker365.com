(()=>{var nw=Object.create;var ea=Object.defineProperty,sw=Object.defineProperties,ow=Object.getOwnPropertyDescriptor,aw=Object.getOwnPropertyDescriptors,lw=Object.getOwnPropertyNames,Qo=Object.getOwnPropertySymbols,uw=Object.getPrototypeOf,xu=Object.prototype.hasOwnProperty,fh=Object.prototype.propertyIsEnumerable;var wu=(r,e,t)=>e in r?ea(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ze=(r,e)=>{for(var t in e||(e={}))xu.call(e,t)&&wu(r,t,e[t]);if(Qo)for(var t of Qo(e))fh.call(e,t)&&wu(r,t,e[t]);return r},Zt=(r,e)=>sw(r,aw(e));var Li=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var Au=(r,e)=>{var t={};for(var i in r)xu.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&Qo)for(var i of Qo(r))e.indexOf(i)<0&&fh.call(r,i)&&(t[i]=r[i]);return t};var Pe=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),cw=(r,e)=>{for(var t in e)ea(r,t,{get:e[t],enumerable:!0})},fw=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of lw(e))!xu.call(r,n)&&n!==t&&ea(r,n,{get:()=>e[n],enumerable:!(i=ow(e,n))||i.enumerable});return r};var ut=(r,e,t)=>(t=r!=null?nw(uw(r)):{},fw(e||!r||!r.__esModule?ea(t,"default",{value:r,enumerable:!0}):t,r));var he=(r,e,t)=>(wu(r,typeof e!="symbol"?e+"":e,t),t);var dh=Pe((exports,module)=>{var ta;frappe.ui.form.ControlInt=(ta=class extends frappe.ui.form.ControlData{make(){super.make()}make_input(){super.make_input(),this.$input.on("focus",()=>{var r,e;return(e=(r=document.activeElement)==null?void 0:r.select)==null||e.call(r),!1})}validate(r){return this.parse(r)}eval_expression(value){if(typeof value=="string"){let parsed_components=value.match(/[^\d.,]+|[\d.,]+/g);var parsed_value=value;if(parsed_components!==null&&(parsed_value=parsed_components.map(r=>isNaN(parseFloat(r))?r:flt(r)).join("")),parsed_value.match(/^[0-9+\-/*.() ]+$/))try{return eval(parsed_value)}catch(r){return value}}return value}parse(r){return cint(this.eval_expression(r),null)}},he(ta,"trigger_change_on_input_event",!1),he(ta,"input_mode","numeric"),ta);frappe.ui.form.ControlLongInt=frappe.ui.form.ControlInt});var Es=Pe((E5,ia)=>{(function(){var r=function(a,l){var f=this;r.count=(r.count||0)+1,this.count=r.count,this.isOpened=!1,this.input=n(a),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-expanded","false"),this.input.setAttribute("aria-owns","awesomplete_list_"+this.count),this.input.setAttribute("role","combobox"),this.options=l=l||{},t(this,{minChars:2,maxItems:10,autoFirst:!1,data:r.DATA,filter:r.FILTER_CONTAINS,sort:l.sort===!1?!1:r.SORT_BYLENGTH,container:r.CONTAINER,item:r.ITEM,replace:r.REPLACE,tabSelect:!1},l),this.index=-1,this.container=this.container(a),this.ul=n.create("ul",{hidden:"hidden",role:"listbox",id:"awesomplete_list_"+this.count,inside:this.container}),this.status=n.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-atomic":!0,inside:this.container,textContent:this.minChars!=0?"Type "+this.minChars+" or more characters for results.":"Begin typing for results."}),this._events={input:{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(m){var b=m.keyCode;f.opened&&(b===13&&f.selected?(m.preventDefault(),f.select(void 0,void 0,m)):b===9&&f.selected&&f.tabSelect?f.select(void 0,void 0,m):b===27?f.close({reason:"esc"}):(b===38||b===40)&&(m.preventDefault(),f[b===38?"previous":"next"]()))}},form:{submit:this.close.bind(this,{reason:"submit"})},ul:{mousedown:function(m){m.preventDefault()},click:function(m){var b=m.target;if(b!==this){for(;b&&!/li/i.test(b.nodeName);)b=b.parentNode;b&&m.button===0&&(m.preventDefault(),f.select(b,m.target,m))}}}},n.bind(this.input,this._events.input),n.bind(this.input.form,this._events.form),n.bind(this.ul,this._events.ul),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||l.list||[],r.all.push(this)};r.prototype={set list(a){if(Array.isArray(a))this._list=a;else if(typeof a=="string"&&a.indexOf(",")>-1)this._list=a.split(/\s*,\s*/);else if(a=n(a),a&&a.children){var l=[];i.apply(a.children).forEach(function(f){if(!f.disabled){var m=f.textContent.trim(),b=f.value||m,h=f.label||m;b!==""&&l.push({label:h,value:b})}}),this._list=l}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return this.isOpened},close:function(a){!this.opened||(this.input.setAttribute("aria-expanded","false"),this.ul.setAttribute("hidden",""),this.isOpened=!1,this.index=-1,this.status.setAttribute("hidden",""),n.fire(this.input,"awesomplete-close",a||{}))},open:function(){this.input.setAttribute("aria-expanded","true"),this.ul.removeAttribute("hidden"),this.isOpened=!0,this.status.removeAttribute("hidden"),this.autoFirst&&this.index===-1&&this.goto(0),n.fire(this.input,"awesomplete-open")},destroy:function(){if(n.unbind(this.input,this._events.input),n.unbind(this.input.form,this._events.form),!this.options.container){var a=this.container.parentNode;a.insertBefore(this.input,this.container),a.removeChild(this.container)}this.input.removeAttribute("autocomplete"),this.input.removeAttribute("aria-autocomplete");var l=r.all.indexOf(this);l!==-1&&r.all.splice(l,1)},next:function(){var a=this.ul.children.length;this.goto(this.index<a-1?this.index+1:a?0:-1)},previous:function(){var a=this.ul.children.length,l=this.index-1;this.goto(this.selected&&l!==-1?l:a-1)},goto:function(a){var l=this.ul.children;this.selected&&l[this.index].setAttribute("aria-selected","false"),this.index=a,a>-1&&l.length>0&&(l[a].setAttribute("aria-selected","true"),this.status.textContent=l[a].textContent+", list item "+(a+1)+" of "+l.length,this.input.setAttribute("aria-activedescendant",this.ul.id+"_item_"+this.index),this.ul.scrollTop=l[a].offsetTop-this.ul.clientHeight+l[a].clientHeight,n.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(a,l,f){if(a?this.index=n.siblingIndex(a):a=this.ul.children[this.index],a){var m=this.suggestions[this.index],b=n.fire(this.input,"awesomplete-select",{text:m,origin:l||a,originalEvent:f});b&&(this.replace(m),this.close({reason:"select"}),n.fire(this.input,"awesomplete-selectcomplete",{text:m,originalEvent:f}))}},evaluate:function(){var a=this,l=this.input.value;l.length>=this.minChars&&this._list&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(f){return new e(a.data(f,l))}).filter(function(f){return a.filter(f,l)}),this.sort!==!1&&(this.suggestions=this.suggestions.sort(this.sort)),this.suggestions=this.suggestions.slice(0,this.maxItems),this.suggestions.forEach(function(f,m){a.ul.appendChild(a.item(f,l,m))}),this.ul.children.length===0?(this.status.textContent="No results found",this.close({reason:"nomatches"})):(this.open(),this.status.textContent=this.ul.children.length+" results found")):(this.close({reason:"nomatches"}),this.status.textContent="No results found")}},r.all=[],r.FILTER_CONTAINS=function(a,l){return RegExp(n.regExpEscape(l.trim()),"i").test(a)},r.FILTER_STARTSWITH=function(a,l){return RegExp("^"+n.regExpEscape(l.trim()),"i").test(a)},r.SORT_BYLENGTH=function(a,l){return a.length!==l.length?a.length-l.length:a<l?-1:1},r.CONTAINER=function(a){return n.create("div",{className:"awesomplete",around:a})},r.ITEM=function(a,l,f){var m=l.trim()===""?a:a.replace(RegExp(n.regExpEscape(l.trim()),"gi"),"<mark>$&</mark>");return n.create("li",{innerHTML:m,role:"option","aria-selected":"false",id:"awesomplete_list_"+this.count+"_item_"+f})},r.REPLACE=function(a){this.input.value=a.value},r.DATA=function(a){return a};function e(a){var l=Array.isArray(a)?{label:a[0],value:a[1]}:typeof a=="object"&&"label"in a&&"value"in a?a:{label:a,value:a};this.label=l.label||l.value,this.value=l.value}Object.defineProperty(e.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),e.prototype.toString=e.prototype.valueOf=function(){return""+this.label};function t(a,l,f){for(var m in l){var b=l[m],h=a.input.getAttribute("data-"+m.toLowerCase());typeof b=="number"?a[m]=parseInt(h):b===!1?a[m]=h!==null:b instanceof Function?a[m]=null:a[m]=h,!a[m]&&a[m]!==0&&(a[m]=m in f?f[m]:b)}}var i=Array.prototype.slice;function n(a,l){return typeof a=="string"?(l||document).querySelector(a):a||null}function s(a,l){return i.call((l||document).querySelectorAll(a))}n.create=function(a,l){var f=document.createElement(a);for(var m in l){var b=l[m];if(m==="inside")n(b).appendChild(f);else if(m==="around"){var h=n(b);h.parentNode.insertBefore(f,h),f.appendChild(h),h.getAttribute("autofocus")!=null&&h.focus()}else m in f?f[m]=b:f.setAttribute(m,b)}return f},n.bind=function(a,l){if(a)for(var f in l){var m=l[f];f.split(/\s+/).forEach(function(b){a.addEventListener(b,m)})}},n.unbind=function(a,l){if(a)for(var f in l){var m=l[f];f.split(/\s+/).forEach(function(b){a.removeEventListener(b,m)})}},n.fire=function(a,l,f){var m=document.createEvent("HTMLEvents");m.initEvent(l,!0,!0);for(var b in f)m[b]=f[b];return a.dispatchEvent(m)},n.regExpEscape=function(a){return a.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},n.siblingIndex=function(a){for(var l=0;a=a.previousElementSibling;l++);return l};function o(){s("input.awesomplete").forEach(function(a){new r(a)})}return typeof self!="undefined"&&(self.Awesomplete=r),typeof Document!="undefined"&&(document.readyState!=="loading"?o():document.addEventListener("DOMContentLoaded",o)),r.$=n,r.$$=s,typeof ia=="object"&&ia.exports&&(ia.exports=r),r})()});var Rm=Pe((aB,$m)=>{var Xt=-1,Rt=1,At=0;function $s(r,e,t,i,n){if(r===e)return r?[[At,r]]:[];if(t!=null){var s=iS(r,e,t);if(s)return s}var o=zu(r,e),a=r.substring(0,o);r=r.substring(o),e=e.substring(o),o=Pa(r,e);var l=r.substring(r.length-o);r=r.substring(0,r.length-o),e=e.substring(0,e.length-o);var f=KO(r,e);return a&&f.unshift([At,a]),l&&f.push([At,l]),Uu(f,n),i&&XO(f),f}function KO(r,e){var t;if(!r)return[[Rt,e]];if(!e)return[[Xt,r]];var i=r.length>e.length?r:e,n=r.length>e.length?e:r,s=i.indexOf(n);if(s!==-1)return t=[[Rt,i.substring(0,s)],[At,n],[Rt,i.substring(s+n.length)]],r.length>e.length&&(t[0][0]=t[2][0]=Xt),t;if(n.length===1)return[[Xt,r],[Rt,e]];var o=ZO(r,e);if(o){var a=o[0],l=o[1],f=o[2],m=o[3],b=o[4],h=$s(a,f),p=$s(l,m);return h.concat([[At,b]],p)}return JO(r,e)}function JO(r,e){for(var t=r.length,i=e.length,n=Math.ceil((t+i)/2),s=n,o=2*n,a=new Array(o),l=new Array(o),f=0;f<o;f++)a[f]=-1,l[f]=-1;a[s+1]=0,l[s+1]=0;for(var m=t-i,b=m%2!==0,h=0,p=0,u=0,d=0,_=0;_<n;_++){for(var y=-_+h;y<=_-p;y+=2){var g=s+y,v;y===-_||y!==_&&a[g-1]<a[g+1]?v=a[g+1]:v=a[g-1]+1;for(var A=v-y;v<t&&A<i&&r.charAt(v)===e.charAt(A);)v++,A++;if(a[g]=v,v>t)p+=2;else if(A>i)h+=2;else if(b){var k=s+m-y;if(k>=0&&k<o&&l[k]!==-1){var w=t-l[k];if(v>=w)return Om(r,e,v,A)}}}for(var E=-_+u;E<=_-d;E+=2){var k=s+E,w;E===-_||E!==_&&l[k-1]<l[k+1]?w=l[k+1]:w=l[k-1]+1;for(var M=w-E;w<t&&M<i&&r.charAt(t-w-1)===e.charAt(i-M-1);)w++,M++;if(l[k]=w,w>t)d+=2;else if(M>i)u+=2;else if(!b){var g=s+m-E;if(g>=0&&g<o&&a[g]!==-1){var v=a[g],A=s+v-g;if(w=t-w,v>=w)return Om(r,e,v,A)}}}}return[[Xt,r],[Rt,e]]}function Om(r,e,t,i){var n=r.substring(0,t),s=e.substring(0,i),o=r.substring(t),a=e.substring(i),l=$s(n,s),f=$s(o,a);return l.concat(f)}function zu(r,e){if(!r||!e||r.charAt(0)!==e.charAt(0))return 0;for(var t=0,i=Math.min(r.length,e.length),n=i,s=0;t<n;)r.substring(s,n)==e.substring(s,n)?(t=n,s=t):i=n,n=Math.floor((i-t)/2+t);return Mm(r.charCodeAt(n-1))&&n--,n}function Sm(r,e){var t=r.length,i=e.length;if(t==0||i==0)return 0;t>i?r=r.substring(t-i):t<i&&(e=e.substring(0,t));var n=Math.min(t,i);if(r==e)return n;for(var s=0,o=1;;){var a=r.substring(n-o),l=e.indexOf(a);if(l==-1)return s;o+=l,(l==0||r.substring(n-o)==e.substring(0,o))&&(s=o,o++)}}function Pa(r,e){if(!r||!e||r.slice(-1)!==e.slice(-1))return 0;for(var t=0,i=Math.min(r.length,e.length),n=i,s=0;t<n;)r.substring(r.length-n,r.length-s)==e.substring(e.length-n,e.length-s)?(t=n,s=t):i=n,n=Math.floor((i-t)/2+t);return Pm(r.charCodeAt(r.length-n))&&n--,n}function ZO(r,e){var t=r.length>e.length?r:e,i=r.length>e.length?e:r;if(t.length<4||i.length*2<t.length)return null;function n(p,u,d){for(var _=p.substring(d,d+Math.floor(p.length/4)),y=-1,g="",v,A,k,w;(y=u.indexOf(_,y+1))!==-1;){var E=zu(p.substring(d),u.substring(y)),M=Pa(p.substring(0,d),u.substring(0,y));g.length<M+E&&(g=u.substring(y-M,y)+u.substring(y,y+E),v=p.substring(0,d-M),A=p.substring(d+E),k=u.substring(0,y-M),w=u.substring(y+E))}return g.length*2>=p.length?[v,A,k,w,g]:null}var s=n(t,i,Math.ceil(t.length/4)),o=n(t,i,Math.ceil(t.length/2)),a;if(!s&&!o)return null;o?s?a=s[4].length>o[4].length?s:o:a=o:a=s;var l,f,m,b;r.length>e.length?(l=a[0],f=a[1],m=a[2],b=a[3]):(m=a[0],b=a[1],l=a[2],f=a[3]);var h=a[4];return[l,f,m,b,h]}function XO(r){for(var e=!1,t=[],i=0,n=null,s=0,o=0,a=0,l=0,f=0;s<r.length;)r[s][0]==At?(t[i++]=s,o=l,a=f,l=0,f=0,n=r[s][1]):(r[s][0]==Rt?l+=r[s][1].length:f+=r[s][1].length,n&&n.length<=Math.max(o,a)&&n.length<=Math.max(l,f)&&(r.splice(t[i-1],0,[Xt,n]),r[t[i-1]+1][0]=Rt,i--,i--,s=i>0?t[i-1]:-1,o=0,a=0,l=0,f=0,n=null,e=!0)),s++;for(e&&Uu(r),tS(r),s=1;s<r.length;){if(r[s-1][0]==Xt&&r[s][0]==Rt){var m=r[s-1][1],b=r[s][1],h=Sm(m,b),p=Sm(b,m);h>=p?(h>=m.length/2||h>=b.length/2)&&(r.splice(s,0,[At,b.substring(0,h)]),r[s-1][1]=m.substring(0,m.length-h),r[s+1][1]=b.substring(h),s++):(p>=m.length/2||p>=b.length/2)&&(r.splice(s,0,[At,m.substring(0,p)]),r[s-1][0]=Rt,r[s-1][1]=b.substring(0,b.length-p),r[s+1][0]=Xt,r[s+1][1]=m.substring(p),s++),s++}s++}}var Tm=/[^a-zA-Z0-9]/,Cm=/\s/,Nm=/[\r\n]/,QO=/\n\r?\n$/,eS=/^\r?\n\r?\n/;function tS(r){function e(p,u){if(!p||!u)return 6;var d=p.charAt(p.length-1),_=u.charAt(0),y=d.match(Tm),g=_.match(Tm),v=y&&d.match(Cm),A=g&&_.match(Cm),k=v&&d.match(Nm),w=A&&_.match(Nm),E=k&&p.match(QO),M=w&&u.match(eS);return E||M?5:k||w?4:y&&!v&&A?3:v||A?2:y||g?1:0}for(var t=1;t<r.length-1;){if(r[t-1][0]==At&&r[t+1][0]==At){var i=r[t-1][1],n=r[t][1],s=r[t+1][1],o=Pa(i,n);if(o){var a=n.substring(n.length-o);i=i.substring(0,i.length-o),n=a+n.substring(0,n.length-o),s=a+s}for(var l=i,f=n,m=s,b=e(i,n)+e(n,s);n.charAt(0)===s.charAt(0);){i+=n.charAt(0),n=n.substring(1)+s.charAt(0),s=s.substring(1);var h=e(i,n)+e(n,s);h>=b&&(b=h,l=i,f=n,m=s)}r[t-1][1]!=l&&(l?r[t-1][1]=l:(r.splice(t-1,1),t--),r[t][1]=f,m?r[t+1][1]=m:(r.splice(t+1,1),t--))}t++}}function Uu(r,e){r.push([At,""]);for(var t=0,i=0,n=0,s="",o="",a;t<r.length;){if(t<r.length-1&&!r[t][1]){r.splice(t,1);continue}switch(r[t][0]){case Rt:n++,o+=r[t][1],t++;break;case Xt:i++,s+=r[t][1],t++;break;case At:var l=t-n-i-1;if(e){if(l>=0&&Lm(r[l][1])){var f=r[l][1].slice(-1);if(r[l][1]=r[l][1].slice(0,-1),s=f+s,o=f+o,!r[l][1]){r.splice(l,1),t--;var m=l-1;r[m]&&r[m][0]===Rt&&(n++,o=r[m][1]+o,m--),r[m]&&r[m][0]===Xt&&(i++,s=r[m][1]+s,m--),l=m}}if(Dm(r[t][1])){var f=r[t][1].charAt(0);r[t][1]=r[t][1].slice(1),s+=f,o+=f}}if(t<r.length-1&&!r[t][1]){r.splice(t,1);break}if(s.length>0||o.length>0){s.length>0&&o.length>0&&(a=zu(o,s),a!==0&&(l>=0?r[l][1]+=o.substring(0,a):(r.splice(0,0,[At,o.substring(0,a)]),t++),o=o.substring(a),s=s.substring(a)),a=Pa(o,s),a!==0&&(r[t][1]=o.substring(o.length-a)+r[t][1],o=o.substring(0,o.length-a),s=s.substring(0,s.length-a)));var b=n+i;s.length===0&&o.length===0?(r.splice(t-b,b),t=t-b):s.length===0?(r.splice(t-b,b,[Rt,o]),t=t-b+1):o.length===0?(r.splice(t-b,b,[Xt,s]),t=t-b+1):(r.splice(t-b,b,[Xt,s],[Rt,o]),t=t-b+2)}t!==0&&r[t-1][0]===At?(r[t-1][1]+=r[t][1],r.splice(t,1)):t++,n=0,i=0,s="",o="";break}}r[r.length-1][1]===""&&r.pop();var h=!1;for(t=1;t<r.length-1;)r[t-1][0]===At&&r[t+1][0]===At&&(r[t][1].substring(r[t][1].length-r[t-1][1].length)===r[t-1][1]?(r[t][1]=r[t-1][1]+r[t][1].substring(0,r[t][1].length-r[t-1][1].length),r[t+1][1]=r[t-1][1]+r[t+1][1],r.splice(t-1,1),h=!0):r[t][1].substring(0,r[t+1][1].length)==r[t+1][1]&&(r[t-1][1]+=r[t+1][1],r[t][1]=r[t][1].substring(r[t+1][1].length)+r[t+1][1],r.splice(t+1,1),h=!0)),t++;h&&Uu(r,e)}function Mm(r){return r>=55296&&r<=56319}function Pm(r){return r>=56320&&r<=57343}function Dm(r){return Pm(r.charCodeAt(0))}function Lm(r){return Mm(r.charCodeAt(r.length-1))}function rS(r){for(var e=[],t=0;t<r.length;t++)r[t][1].length>0&&e.push(r[t]);return e}function Fu(r,e,t,i){return Lm(r)||Dm(i)?null:rS([[At,r],[Xt,e],[Rt,t],[At,i]])}function iS(r,e,t){var i=typeof t=="number"?{index:t,length:0}:t.oldRange,n=typeof t=="number"?null:t.newRange,s=r.length,o=e.length;if(i.length===0&&(n===null||n.length===0)){var a=i.index,l=r.slice(0,a),f=r.slice(a),m=n?n.index:null;e:{var b=a+o-s;if(m!==null&&m!==b||b<0||b>o)break e;var h=e.slice(0,b),p=e.slice(b);if(p!==f)break e;var u=Math.min(a,b),d=l.slice(0,u),_=h.slice(0,u);if(d!==_)break e;var y=l.slice(u),g=h.slice(u);return Fu(d,y,g,f)}e:{if(m!==null&&m!==a)break e;var v=a,h=e.slice(0,v),p=e.slice(v);if(h!==l)break e;var A=Math.min(s-v,o-v),k=f.slice(f.length-A),w=p.slice(p.length-A);if(k!==w)break e;var y=f.slice(0,f.length-A),g=p.slice(0,p.length-A);return Fu(l,y,g,k)}}if(i.length>0&&n&&n.length===0){e:{var d=r.slice(0,i.index),k=r.slice(i.index+i.length),u=d.length,A=k.length;if(o<u+A)break e;var _=e.slice(0,u),w=e.slice(o-A);if(d!==_||k!==w)break e;var y=r.slice(u,s-A),g=e.slice(u,o-A);return Fu(d,y,g,k)}}return null}function Da(r,e,t,i){return $s(r,e,t,i,!0)}Da.INSERT=Rt;Da.DELETE=Xt;Da.EQUAL=At;$m.exports=Da});var nc=Pe((Rs,In)=>{var nS=200,Vm="__lodash_hash_undefined__",Km=9007199254740991,Zu="[object Arguments]",sS="[object Array]",Jm="[object Boolean]",Zm="[object Date]",oS="[object Error]",Xu="[object Function]",Xm="[object GeneratorFunction]",La="[object Map]",Qm="[object Number]",Qu="[object Object]",jm="[object Promise]",e_="[object RegExp]",$a="[object Set]",t_="[object String]",r_="[object Symbol]",Yu="[object WeakMap]",i_="[object ArrayBuffer]",Ra="[object DataView]",n_="[object Float32Array]",s_="[object Float64Array]",o_="[object Int8Array]",a_="[object Int16Array]",l_="[object Int32Array]",u_="[object Uint8Array]",c_="[object Uint8ClampedArray]",f_="[object Uint16Array]",d_="[object Uint32Array]",aS=/[\\^$.*+?()[\]{}|]/g,lS=/\w*$/,uS=/^\[object .+?Constructor\]$/,cS=/^(?:0|[1-9]\d*)$/,rt={};rt[Zu]=rt[sS]=rt[i_]=rt[Ra]=rt[Jm]=rt[Zm]=rt[n_]=rt[s_]=rt[o_]=rt[a_]=rt[l_]=rt[La]=rt[Qm]=rt[Qu]=rt[e_]=rt[$a]=rt[t_]=rt[r_]=rt[u_]=rt[c_]=rt[f_]=rt[d_]=!0;rt[oS]=rt[Xu]=rt[Yu]=!1;var fS=typeof global=="object"&&global&&global.Object===Object&&global,dS=typeof self=="object"&&self&&self.Object===Object&&self,Fr=fS||dS||Function("return this")(),h_=typeof Rs=="object"&&Rs&&!Rs.nodeType&&Rs,Im=h_&&typeof In=="object"&&In&&!In.nodeType&&In,hS=Im&&Im.exports===h_;function pS(r,e){return r.set(e[0],e[1]),r}function mS(r,e){return r.add(e),r}function _S(r,e){for(var t=-1,i=r?r.length:0;++t<i&&e(r[t],t,r)!==!1;);return r}function gS(r,e){for(var t=-1,i=e.length,n=r.length;++t<i;)r[n+t]=e[t];return r}function p_(r,e,t,i){var n=-1,s=r?r.length:0;for(i&&s&&(t=r[++n]);++n<s;)t=e(t,r[n],n,r);return t}function yS(r,e){for(var t=-1,i=Array(r);++t<r;)i[t]=e(t);return i}function bS(r,e){return r==null?void 0:r[e]}function m_(r){var e=!1;if(r!=null&&typeof r.toString!="function")try{e=!!(r+"")}catch(t){}return e}function qm(r){var e=-1,t=Array(r.size);return r.forEach(function(i,n){t[++e]=[n,i]}),t}function ec(r,e){return function(t){return r(e(t))}}function Bm(r){var e=-1,t=Array(r.size);return r.forEach(function(i){t[++e]=i}),t}var vS=Array.prototype,wS=Function.prototype,ja=Object.prototype,Hu=Fr["__core-js_shared__"],Fm=function(){var r=/[^.]+$/.exec(Hu&&Hu.keys&&Hu.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),g_=wS.toString,di=ja.hasOwnProperty,Ia=ja.toString,xS=RegExp("^"+g_.call(di).replace(aS,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zm=hS?Fr.Buffer:void 0,Um=Fr.Symbol,Hm=Fr.Uint8Array,AS=ec(Object.getPrototypeOf,Object),kS=Object.create,ES=ja.propertyIsEnumerable,OS=vS.splice,Ym=Object.getOwnPropertySymbols,SS=zm?zm.isBuffer:void 0,TS=ec(Object.keys,Object),Wu=Fn(Fr,"DataView"),js=Fn(Fr,"Map"),Gu=Fn(Fr,"Promise"),Vu=Fn(Fr,"Set"),Ku=Fn(Fr,"WeakMap"),Is=Fn(Object,"create"),CS=Bi(Wu),NS=Bi(js),MS=Bi(Gu),PS=Bi(Vu),DS=Bi(Ku),Wm=Um?Um.prototype:void 0,Gm=Wm?Wm.valueOf:void 0;function qi(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}function LS(){this.__data__=Is?Is(null):{}}function $S(r){return this.has(r)&&delete this.__data__[r]}function RS(r){var e=this.__data__;if(Is){var t=e[r];return t===Vm?void 0:t}return di.call(e,r)?e[r]:void 0}function jS(r){var e=this.__data__;return Is?e[r]!==void 0:di.call(e,r)}function IS(r,e){var t=this.__data__;return t[r]=Is&&e===void 0?Vm:e,this}qi.prototype.clear=LS;qi.prototype.delete=$S;qi.prototype.get=RS;qi.prototype.has=jS;qi.prototype.set=IS;function zr(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}function qS(){this.__data__=[]}function BS(r){var e=this.__data__,t=qa(e,r);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():OS.call(e,t,1),!0}function FS(r){var e=this.__data__,t=qa(e,r);return t<0?void 0:e[t][1]}function zS(r){return qa(this.__data__,r)>-1}function US(r,e){var t=this.__data__,i=qa(t,r);return i<0?t.push([r,e]):t[i][1]=e,this}zr.prototype.clear=qS;zr.prototype.delete=BS;zr.prototype.get=FS;zr.prototype.has=zS;zr.prototype.set=US;function qn(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}function HS(){this.__data__={hash:new qi,map:new(js||zr),string:new qi}}function YS(r){return Ba(this,r).delete(r)}function WS(r){return Ba(this,r).get(r)}function GS(r){return Ba(this,r).has(r)}function VS(r,e){return Ba(this,r).set(r,e),this}qn.prototype.clear=HS;qn.prototype.delete=YS;qn.prototype.get=WS;qn.prototype.has=GS;qn.prototype.set=VS;function Bn(r){this.__data__=new zr(r)}function KS(){this.__data__=new zr}function JS(r){return this.__data__.delete(r)}function ZS(r){return this.__data__.get(r)}function XS(r){return this.__data__.has(r)}function QS(r,e){var t=this.__data__;if(t instanceof zr){var i=t.__data__;if(!js||i.length<nS-1)return i.push([r,e]),this;t=this.__data__=new qn(i)}return t.set(r,e),this}Bn.prototype.clear=KS;Bn.prototype.delete=JS;Bn.prototype.get=ZS;Bn.prototype.has=XS;Bn.prototype.set=QS;function eT(r,e){var t=rc(r)||kT(r)?yS(r.length,String):[],i=t.length,n=!!i;for(var s in r)(e||di.call(r,s))&&!(n&&(s=="length"||vT(s,i)))&&t.push(s);return t}function y_(r,e,t){var i=r[e];(!(di.call(r,e)&&x_(i,t))||t===void 0&&!(e in r))&&(r[e]=t)}function qa(r,e){for(var t=r.length;t--;)if(x_(r[t][0],e))return t;return-1}function tT(r,e){return r&&b_(e,ic(e),r)}function Ju(r,e,t,i,n,s,o){var a;if(i&&(a=s?i(r,n,s,o):i(r)),a!==void 0)return a;if(!Fa(r))return r;var l=rc(r);if(l){if(a=gT(r),!e)return pT(r,a)}else{var f=Ii(r),m=f==Xu||f==Xm;if(OT(r))return aT(r,e);if(f==Qu||f==Zu||m&&!s){if(m_(r))return s?r:{};if(a=yT(m?{}:r),!e)return mT(r,tT(a,r))}else{if(!rt[f])return s?r:{};a=bT(r,f,Ju,e)}}o||(o=new Bn);var b=o.get(r);if(b)return b;if(o.set(r,a),!l)var h=t?_T(r):ic(r);return _S(h||r,function(p,u){h&&(u=p,p=r[u]),y_(a,u,Ju(p,e,t,i,u,r,o))}),a}function rT(r){return Fa(r)?kS(r):{}}function iT(r,e,t){var i=e(r);return rc(r)?i:gS(i,t(r))}function nT(r){return Ia.call(r)}function sT(r){if(!Fa(r)||xT(r))return!1;var e=k_(r)||m_(r)?xS:uS;return e.test(Bi(r))}function oT(r){if(!w_(r))return TS(r);var e=[];for(var t in Object(r))di.call(r,t)&&t!="constructor"&&e.push(t);return e}function aT(r,e){if(e)return r.slice();var t=new r.constructor(r.length);return r.copy(t),t}function tc(r){var e=new r.constructor(r.byteLength);return new Hm(e).set(new Hm(r)),e}function lT(r,e){var t=e?tc(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}function uT(r,e,t){var i=e?t(qm(r),!0):qm(r);return p_(i,pS,new r.constructor)}function cT(r){var e=new r.constructor(r.source,lS.exec(r));return e.lastIndex=r.lastIndex,e}function fT(r,e,t){var i=e?t(Bm(r),!0):Bm(r);return p_(i,mS,new r.constructor)}function dT(r){return Gm?Object(Gm.call(r)):{}}function hT(r,e){var t=e?tc(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}function pT(r,e){var t=-1,i=r.length;for(e||(e=Array(i));++t<i;)e[t]=r[t];return e}function b_(r,e,t,i){t||(t={});for(var n=-1,s=e.length;++n<s;){var o=e[n],a=i?i(t[o],r[o],o,t,r):void 0;y_(t,o,a===void 0?r[o]:a)}return t}function mT(r,e){return b_(r,v_(r),e)}function _T(r){return iT(r,ic,v_)}function Ba(r,e){var t=r.__data__;return wT(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Fn(r,e){var t=bS(r,e);return sT(t)?t:void 0}var v_=Ym?ec(Ym,Object):CT,Ii=nT;(Wu&&Ii(new Wu(new ArrayBuffer(1)))!=Ra||js&&Ii(new js)!=La||Gu&&Ii(Gu.resolve())!=jm||Vu&&Ii(new Vu)!=$a||Ku&&Ii(new Ku)!=Yu)&&(Ii=function(r){var e=Ia.call(r),t=e==Qu?r.constructor:void 0,i=t?Bi(t):void 0;if(i)switch(i){case CS:return Ra;case NS:return La;case MS:return jm;case PS:return $a;case DS:return Yu}return e});function gT(r){var e=r.length,t=r.constructor(e);return e&&typeof r[0]=="string"&&di.call(r,"index")&&(t.index=r.index,t.input=r.input),t}function yT(r){return typeof r.constructor=="function"&&!w_(r)?rT(AS(r)):{}}function bT(r,e,t,i){var n=r.constructor;switch(e){case i_:return tc(r);case Jm:case Zm:return new n(+r);case Ra:return lT(r,i);case n_:case s_:case o_:case a_:case l_:case u_:case c_:case f_:case d_:return hT(r,i);case La:return uT(r,i,t);case Qm:case t_:return new n(r);case e_:return cT(r);case $a:return fT(r,i,t);case r_:return dT(r)}}function vT(r,e){return e=e==null?Km:e,!!e&&(typeof r=="number"||cS.test(r))&&r>-1&&r%1==0&&r<e}function wT(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function xT(r){return!!Fm&&Fm in r}function w_(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||ja;return r===t}function Bi(r){if(r!=null){try{return g_.call(r)}catch(e){}try{return r+""}catch(e){}}return""}function AT(r){return Ju(r,!0,!0)}function x_(r,e){return r===e||r!==r&&e!==e}function kT(r){return ET(r)&&di.call(r,"callee")&&(!ES.call(r,"callee")||Ia.call(r)==Zu)}var rc=Array.isArray;function A_(r){return r!=null&&ST(r.length)&&!k_(r)}function ET(r){return TT(r)&&A_(r)}var OT=SS||NT;function k_(r){var e=Fa(r)?Ia.call(r):"";return e==Xu||e==Xm}function ST(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Km}function Fa(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function TT(r){return!!r&&typeof r=="object"}function ic(r){return A_(r)?eT(r):oT(r)}function CT(){return[]}function NT(){return!1}In.exports=AT});var _c=Pe((qs,Un)=>{var MT=200,mc="__lodash_hash_undefined__",Ka=1,R_=2,j_=9007199254740991,za="[object Arguments]",lc="[object Array]",PT="[object AsyncFunction]",I_="[object Boolean]",q_="[object Date]",B_="[object Error]",F_="[object Function]",DT="[object GeneratorFunction]",Ua="[object Map]",z_="[object Number]",LT="[object Null]",zn="[object Object]",E_="[object Promise]",$T="[object Proxy]",U_="[object RegExp]",Ha="[object Set]",H_="[object String]",RT="[object Symbol]",jT="[object Undefined]",uc="[object WeakMap]",Y_="[object ArrayBuffer]",Ya="[object DataView]",IT="[object Float32Array]",qT="[object Float64Array]",BT="[object Int8Array]",FT="[object Int16Array]",zT="[object Int32Array]",UT="[object Uint8Array]",HT="[object Uint8ClampedArray]",YT="[object Uint16Array]",WT="[object Uint32Array]",GT=/[\\^$.*+?()[\]{}|]/g,VT=/^\[object .+?Constructor\]$/,KT=/^(?:0|[1-9]\d*)$/,st={};st[IT]=st[qT]=st[BT]=st[FT]=st[zT]=st[UT]=st[HT]=st[YT]=st[WT]=!0;st[za]=st[lc]=st[Y_]=st[I_]=st[Ya]=st[q_]=st[B_]=st[F_]=st[Ua]=st[z_]=st[zn]=st[U_]=st[Ha]=st[H_]=st[uc]=!1;var W_=typeof global=="object"&&global&&global.Object===Object&&global,JT=typeof self=="object"&&self&&self.Object===Object&&self,Ur=W_||JT||Function("return this")(),G_=typeof qs=="object"&&qs&&!qs.nodeType&&qs,O_=G_&&typeof Un=="object"&&Un&&!Un.nodeType&&Un,V_=O_&&O_.exports===G_,sc=V_&&W_.process,S_=function(){try{return sc&&sc.binding&&sc.binding("util")}catch(r){}}(),T_=S_&&S_.isTypedArray;function ZT(r,e){for(var t=-1,i=r==null?0:r.length,n=0,s=[];++t<i;){var o=r[t];e(o,t,r)&&(s[n++]=o)}return s}function XT(r,e){for(var t=-1,i=e.length,n=r.length;++t<i;)r[n+t]=e[t];return r}function QT(r,e){for(var t=-1,i=r==null?0:r.length;++t<i;)if(e(r[t],t,r))return!0;return!1}function e2(r,e){for(var t=-1,i=Array(r);++t<r;)i[t]=e(t);return i}function t2(r){return function(e){return r(e)}}function r2(r,e){return r.has(e)}function i2(r,e){return r==null?void 0:r[e]}function n2(r){var e=-1,t=Array(r.size);return r.forEach(function(i,n){t[++e]=[n,i]}),t}function s2(r,e){return function(t){return r(e(t))}}function o2(r){var e=-1,t=Array(r.size);return r.forEach(function(i){t[++e]=i}),t}var a2=Array.prototype,l2=Function.prototype,Ja=Object.prototype,oc=Ur["__core-js_shared__"],K_=l2.toString,kr=Ja.hasOwnProperty,C_=function(){var r=/[^.]+$/.exec(oc&&oc.keys&&oc.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),J_=Ja.toString,u2=RegExp("^"+K_.call(kr).replace(GT,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N_=V_?Ur.Buffer:void 0,Wa=Ur.Symbol,M_=Ur.Uint8Array,Z_=Ja.propertyIsEnumerable,c2=a2.splice,Fi=Wa?Wa.toStringTag:void 0,P_=Object.getOwnPropertySymbols,f2=N_?N_.isBuffer:void 0,d2=s2(Object.keys,Object),cc=Hn(Ur,"DataView"),Bs=Hn(Ur,"Map"),fc=Hn(Ur,"Promise"),dc=Hn(Ur,"Set"),hc=Hn(Ur,"WeakMap"),Fs=Hn(Object,"create"),h2=Hi(cc),p2=Hi(Bs),m2=Hi(fc),_2=Hi(dc),g2=Hi(hc),D_=Wa?Wa.prototype:void 0,ac=D_?D_.valueOf:void 0;function zi(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}function y2(){this.__data__=Fs?Fs(null):{},this.size=0}function b2(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}function v2(r){var e=this.__data__;if(Fs){var t=e[r];return t===mc?void 0:t}return kr.call(e,r)?e[r]:void 0}function w2(r){var e=this.__data__;return Fs?e[r]!==void 0:kr.call(e,r)}function x2(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Fs&&e===void 0?mc:e,this}zi.prototype.clear=y2;zi.prototype.delete=b2;zi.prototype.get=v2;zi.prototype.has=w2;zi.prototype.set=x2;function Hr(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}function A2(){this.__data__=[],this.size=0}function k2(r){var e=this.__data__,t=Za(e,r);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():c2.call(e,t,1),--this.size,!0}function E2(r){var e=this.__data__,t=Za(e,r);return t<0?void 0:e[t][1]}function O2(r){return Za(this.__data__,r)>-1}function S2(r,e){var t=this.__data__,i=Za(t,r);return i<0?(++this.size,t.push([r,e])):t[i][1]=e,this}Hr.prototype.clear=A2;Hr.prototype.delete=k2;Hr.prototype.get=E2;Hr.prototype.has=O2;Hr.prototype.set=S2;function Ui(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}function T2(){this.size=0,this.__data__={hash:new zi,map:new(Bs||Hr),string:new zi}}function C2(r){var e=Xa(this,r).delete(r);return this.size-=e?1:0,e}function N2(r){return Xa(this,r).get(r)}function M2(r){return Xa(this,r).has(r)}function P2(r,e){var t=Xa(this,r),i=t.size;return t.set(r,e),this.size+=t.size==i?0:1,this}Ui.prototype.clear=T2;Ui.prototype.delete=C2;Ui.prototype.get=N2;Ui.prototype.has=M2;Ui.prototype.set=P2;function Ga(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new Ui;++e<t;)this.add(r[e])}function D2(r){return this.__data__.set(r,mc),this}function L2(r){return this.__data__.has(r)}Ga.prototype.add=Ga.prototype.push=D2;Ga.prototype.has=L2;function pi(r){var e=this.__data__=new Hr(r);this.size=e.size}function $2(){this.__data__=new Hr,this.size=0}function R2(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function j2(r){return this.__data__.get(r)}function I2(r){return this.__data__.has(r)}function q2(r,e){var t=this.__data__;if(t instanceof Hr){var i=t.__data__;if(!Bs||i.length<MT-1)return i.push([r,e]),this.size=++t.size,this;t=this.__data__=new Ui(i)}return t.set(r,e),this.size=t.size,this}pi.prototype.clear=$2;pi.prototype.delete=R2;pi.prototype.get=j2;pi.prototype.has=I2;pi.prototype.set=q2;function B2(r,e){var t=Va(r),i=!t&&tC(r),n=!t&&!i&&pc(r),s=!t&&!i&&!n&&ng(r),o=t||i||n||s,a=o?e2(r.length,String):[],l=a.length;for(var f in r)(e||kr.call(r,f))&&!(o&&(f=="length"||n&&(f=="offset"||f=="parent")||s&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||J2(f,l)))&&a.push(f);return a}function Za(r,e){for(var t=r.length;t--;)if(eg(r[t][0],e))return t;return-1}function F2(r,e,t){var i=e(r);return Va(r)?i:XT(i,t(r))}function Us(r){return r==null?r===void 0?jT:LT:Fi&&Fi in Object(r)?V2(r):eC(r)}function L_(r){return zs(r)&&Us(r)==za}function X_(r,e,t,i,n){return r===e?!0:r==null||e==null||!zs(r)&&!zs(e)?r!==r&&e!==e:z2(r,e,t,i,X_,n)}function z2(r,e,t,i,n,s){var o=Va(r),a=Va(e),l=o?lc:hi(r),f=a?lc:hi(e);l=l==za?zn:l,f=f==za?zn:f;var m=l==zn,b=f==zn,h=l==f;if(h&&pc(r)){if(!pc(e))return!1;o=!0,m=!1}if(h&&!m)return s||(s=new pi),o||ng(r)?Q_(r,e,t,i,n,s):W2(r,e,l,t,i,n,s);if(!(t&Ka)){var p=m&&kr.call(r,"__wrapped__"),u=b&&kr.call(e,"__wrapped__");if(p||u){var d=p?r.value():r,_=u?e.value():e;return s||(s=new pi),n(d,_,t,i,s)}}return h?(s||(s=new pi),G2(r,e,t,i,n,s)):!1}function U2(r){if(!ig(r)||X2(r))return!1;var e=tg(r)?u2:VT;return e.test(Hi(r))}function H2(r){return zs(r)&&rg(r.length)&&!!st[Us(r)]}function Y2(r){if(!Q2(r))return d2(r);var e=[];for(var t in Object(r))kr.call(r,t)&&t!="constructor"&&e.push(t);return e}function Q_(r,e,t,i,n,s){var o=t&Ka,a=r.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var f=s.get(r);if(f&&s.get(e))return f==e;var m=-1,b=!0,h=t&R_?new Ga:void 0;for(s.set(r,e),s.set(e,r);++m<a;){var p=r[m],u=e[m];if(i)var d=o?i(u,p,m,e,r,s):i(p,u,m,r,e,s);if(d!==void 0){if(d)continue;b=!1;break}if(h){if(!QT(e,function(_,y){if(!r2(h,y)&&(p===_||n(p,_,t,i,s)))return h.push(y)})){b=!1;break}}else if(!(p===u||n(p,u,t,i,s))){b=!1;break}}return s.delete(r),s.delete(e),b}function W2(r,e,t,i,n,s,o){switch(t){case Ya:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case Y_:return!(r.byteLength!=e.byteLength||!s(new M_(r),new M_(e)));case I_:case q_:case z_:return eg(+r,+e);case B_:return r.name==e.name&&r.message==e.message;case U_:case H_:return r==e+"";case Ua:var a=n2;case Ha:var l=i&Ka;if(a||(a=o2),r.size!=e.size&&!l)return!1;var f=o.get(r);if(f)return f==e;i|=R_,o.set(r,e);var m=Q_(a(r),a(e),i,n,s,o);return o.delete(r),m;case RT:if(ac)return ac.call(r)==ac.call(e)}return!1}function G2(r,e,t,i,n,s){var o=t&Ka,a=$_(r),l=a.length,f=$_(e),m=f.length;if(l!=m&&!o)return!1;for(var b=l;b--;){var h=a[b];if(!(o?h in e:kr.call(e,h)))return!1}var p=s.get(r);if(p&&s.get(e))return p==e;var u=!0;s.set(r,e),s.set(e,r);for(var d=o;++b<l;){h=a[b];var _=r[h],y=e[h];if(i)var g=o?i(y,_,h,e,r,s):i(_,y,h,r,e,s);if(!(g===void 0?_===y||n(_,y,t,i,s):g)){u=!1;break}d||(d=h=="constructor")}if(u&&!d){var v=r.constructor,A=e.constructor;v!=A&&"constructor"in r&&"constructor"in e&&!(typeof v=="function"&&v instanceof v&&typeof A=="function"&&A instanceof A)&&(u=!1)}return s.delete(r),s.delete(e),u}function $_(r){return F2(r,nC,K2)}function Xa(r,e){var t=r.__data__;return Z2(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Hn(r,e){var t=i2(r,e);return U2(t)?t:void 0}function V2(r){var e=kr.call(r,Fi),t=r[Fi];try{r[Fi]=void 0;var i=!0}catch(s){}var n=J_.call(r);return i&&(e?r[Fi]=t:delete r[Fi]),n}var K2=P_?function(r){return r==null?[]:(r=Object(r),ZT(P_(r),function(e){return Z_.call(r,e)}))}:sC,hi=Us;(cc&&hi(new cc(new ArrayBuffer(1)))!=Ya||Bs&&hi(new Bs)!=Ua||fc&&hi(fc.resolve())!=E_||dc&&hi(new dc)!=Ha||hc&&hi(new hc)!=uc)&&(hi=function(r){var e=Us(r),t=e==zn?r.constructor:void 0,i=t?Hi(t):"";if(i)switch(i){case h2:return Ya;case p2:return Ua;case m2:return E_;case _2:return Ha;case g2:return uc}return e});function J2(r,e){return e=e==null?j_:e,!!e&&(typeof r=="number"||KT.test(r))&&r>-1&&r%1==0&&r<e}function Z2(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function X2(r){return!!C_&&C_ in r}function Q2(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||Ja;return r===t}function eC(r){return J_.call(r)}function Hi(r){if(r!=null){try{return K_.call(r)}catch(e){}try{return r+""}catch(e){}}return""}function eg(r,e){return r===e||r!==r&&e!==e}var tC=L_(function(){return arguments}())?L_:function(r){return zs(r)&&kr.call(r,"callee")&&!Z_.call(r,"callee")},Va=Array.isArray;function rC(r){return r!=null&&rg(r.length)&&!tg(r)}var pc=f2||oC;function iC(r,e){return X_(r,e)}function tg(r){if(!ig(r))return!1;var e=Us(r);return e==F_||e==DT||e==PT||e==$T}function rg(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=j_}function ig(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}function zs(r){return r!=null&&typeof r=="object"}var ng=T_?t2(T_):H2;function nC(r){return rC(r)?B2(r):Y2(r)}function sC(){return[]}function oC(){return!1}Un.exports=iC});var sg=Pe(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});var aC=nc(),lC=_c(),gc;(function(r){function e(s={},o={},a=!1){typeof s!="object"&&(s={}),typeof o!="object"&&(o={});let l=aC(o);a||(l=Object.keys(l).reduce((f,m)=>(l[m]!=null&&(f[m]=l[m]),f),{}));for(let f in s)s[f]!==void 0&&o[f]===void 0&&(l[f]=s[f]);return Object.keys(l).length>0?l:void 0}r.compose=e;function t(s={},o={}){typeof s!="object"&&(s={}),typeof o!="object"&&(o={});let a=Object.keys(s).concat(Object.keys(o)).reduce((l,f)=>(lC(s[f],o[f])||(l[f]=o[f]===void 0?null:o[f]),l),{});return Object.keys(a).length>0?a:void 0}r.diff=t;function i(s={},o={}){s=s||{};let a=Object.keys(o).reduce((l,f)=>(o[f]!==s[f]&&s[f]!==void 0&&(l[f]=o[f]),l),{});return Object.keys(s).reduce((l,f)=>(s[f]!==o[f]&&o[f]===void 0&&(l[f]=null),l),a)}r.invert=i;function n(s,o,a=!1){if(typeof s!="object")return o;if(typeof o!="object")return;if(!a)return o;let l=Object.keys(o).reduce((f,m)=>(s[m]===void 0&&(f[m]=o[m]),f),{});return Object.keys(l).length>0?l:void 0}r.transform=n})(gc||(gc={}));yc.default=gc});var wc=Pe(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});var bc;(function(r){function e(t){return typeof t.delete=="number"?t.delete:typeof t.retain=="number"?t.retain:typeof t.retain=="object"&&t.retain!==null?1:typeof t.insert=="string"?t.insert.length:1}r.length=e})(bc||(bc={}));vc.default=bc});var ag=Pe(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});var og=wc(),xc=class{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);let t=this.ops[this.index];if(t){let i=this.offset,n=og.default.length(t);if(e>=n-i?(e=n-i,this.index+=1,this.offset=0):this.offset+=e,typeof t.delete=="number")return{delete:e};{let s={};return t.attributes&&(s.attributes=t.attributes),typeof t.retain=="number"?s.retain=e:typeof t.retain=="object"&&t.retain!==null?s.retain=t.retain:typeof t.insert=="string"?s.insert=t.insert.substr(i,e):s.insert=t.insert,s}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?og.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let e=this.ops[this.index];return e?typeof e.delete=="number"?"delete":typeof e.retain=="number"||typeof e.retain=="object"&&e.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{let e=this.offset,t=this.index,i=this.next(),n=this.ops.slice(this.index);return this.offset=e,this.index=t,[i].concat(n)}}else return[]}};Ac.default=xc});var Qt=Pe((Wr,el)=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.AttributeMap=Wr.OpIterator=Wr.Op=void 0;var Qa=Rm(),uC=nc(),kc=_c(),Yi=sg();Wr.AttributeMap=Yi.default;var Yr=wc();Wr.Op=Yr.default;var lr=ag();Wr.OpIterator=lr.default;var cC=String.fromCharCode(0),lg=(r,e)=>{if(typeof r!="object"||r===null)throw new Error(`cannot retain a ${typeof r}`);if(typeof e!="object"||e===null)throw new Error(`cannot retain a ${typeof e}`);let t=Object.keys(r)[0];if(!t||t!==Object.keys(e)[0])throw new Error(`embed types not matched: ${t} != ${Object.keys(e)[0]}`);return[t,r[t],e[t]]},ft=class{constructor(e){Array.isArray(e)?this.ops=e:e!=null&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}static registerEmbed(e,t){this.handlers[e]=t}static unregisterEmbed(e){delete this.handlers[e]}static getHandler(e){let t=this.handlers[e];if(!t)throw new Error(`no handlers for embed type "${e}"`);return t}insert(e,t){let i={};return typeof e=="string"&&e.length===0?this:(i.insert=e,t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(i.attributes=t),this.push(i))}delete(e){return e<=0?this:this.push({delete:e})}retain(e,t){if(typeof e=="number"&&e<=0)return this;let i={retain:e};return t!=null&&typeof t=="object"&&Object.keys(t).length>0&&(i.attributes=t),this.push(i)}push(e){let t=this.ops.length,i=this.ops[t-1];if(e=uC(e),typeof i=="object"){if(typeof e.delete=="number"&&typeof i.delete=="number")return this.ops[t-1]={delete:i.delete+e.delete},this;if(typeof i.delete=="number"&&e.insert!=null&&(t-=1,i=this.ops[t-1],typeof i!="object"))return this.ops.unshift(e),this;if(kc(e.attributes,i.attributes)){if(typeof e.insert=="string"&&typeof i.insert=="string")return this.ops[t-1]={insert:i.insert+e.insert},typeof e.attributes=="object"&&(this.ops[t-1].attributes=e.attributes),this;if(typeof e.retain=="number"&&typeof i.retain=="number")return this.ops[t-1]={retain:i.retain+e.retain},typeof e.attributes=="object"&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this}chop(){let e=this.ops[this.ops.length-1];return e&&typeof e.retain=="number"&&!e.attributes&&this.ops.pop(),this}filter(e){return this.ops.filter(e)}forEach(e){this.ops.forEach(e)}map(e){return this.ops.map(e)}partition(e){let t=[],i=[];return this.forEach(n=>{(e(n)?t:i).push(n)}),[t,i]}reduce(e,t){return this.ops.reduce(e,t)}changeLength(){return this.reduce((e,t)=>t.insert?e+Yr.default.length(t):t.delete?e-t.delete:e,0)}length(){return this.reduce((e,t)=>e+Yr.default.length(t),0)}slice(e=0,t=1/0){let i=[],n=new lr.default(this.ops),s=0;for(;s<t&&n.hasNext();){let o;s<e?o=n.next(e-s):(o=n.next(t-s),i.push(o)),s+=Yr.default.length(o)}return new ft(i)}compose(e){let t=new lr.default(this.ops),i=new lr.default(e.ops),n=[],s=i.peek();if(s!=null&&typeof s.retain=="number"&&s.attributes==null){let a=s.retain;for(;t.peekType()==="insert"&&t.peekLength()<=a;)a-=t.peekLength(),n.push(t.next());s.retain-a>0&&i.next(s.retain-a)}let o=new ft(n);for(;t.hasNext()||i.hasNext();)if(i.peekType()==="insert")o.push(i.next());else if(t.peekType()==="delete")o.push(t.next());else{let a=Math.min(t.peekLength(),i.peekLength()),l=t.next(a),f=i.next(a);if(f.retain){let m={};if(typeof l.retain=="number")m.retain=typeof f.retain=="number"?a:f.retain;else if(typeof f.retain=="number")l.retain==null?m.insert=l.insert:m.retain=l.retain;else{let h=l.retain==null?"insert":"retain",[p,u,d]=lg(l[h],f.retain),_=ft.getHandler(p);m[h]={[p]:_.compose(u,d,h==="retain")}}let b=Yi.default.compose(l.attributes,f.attributes,typeof l.retain=="number");if(b&&(m.attributes=b),o.push(m),!i.hasNext()&&kc(o.ops[o.ops.length-1],m)){let h=new ft(t.rest());return o.concat(h).chop()}}else typeof f.delete=="number"&&(typeof l.retain=="number"||typeof l.retain=="object"&&l.retain!==null)&&o.push(f)}return o.chop()}concat(e){let t=new ft(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t}diff(e,t){if(this.ops===e.ops)return new ft;let i=[this,e].map(l=>l.map(f=>{if(f.insert!=null)return typeof f.insert=="string"?f.insert:cC;let m=l===e?"on":"with";throw new Error("diff() called "+m+" non-document")}).join("")),n=new ft,s=Qa(i[0],i[1],t,!0),o=new lr.default(this.ops),a=new lr.default(e.ops);return s.forEach(l=>{let f=l[1].length;for(;f>0;){let m=0;switch(l[0]){case Qa.INSERT:m=Math.min(a.peekLength(),f),n.push(a.next(m));break;case Qa.DELETE:m=Math.min(f,o.peekLength()),o.next(m),n.delete(m);break;case Qa.EQUAL:m=Math.min(o.peekLength(),a.peekLength(),f);let b=o.next(m),h=a.next(m);kc(b.insert,h.insert)?n.retain(m,Yi.default.diff(b.attributes,h.attributes)):n.push(h).delete(m);break}f-=m}}),n.chop()}eachLine(e,t=`
`){let i=new lr.default(this.ops),n=new ft,s=0;for(;i.hasNext();){if(i.peekType()!=="insert")return;let o=i.peek(),a=Yr.default.length(o)-i.peekLength(),l=typeof o.insert=="string"?o.insert.indexOf(t,a)-a:-1;if(l<0)n.push(i.next());else if(l>0)n.push(i.next(l));else{if(e(n,i.next(1).attributes||{},s)===!1)return;s+=1,n=new ft}}n.length()>0&&e(n,{},s)}invert(e){let t=new ft;return this.reduce((i,n)=>{if(n.insert)t.delete(Yr.default.length(n));else{if(typeof n.retain=="number"&&n.attributes==null)return t.retain(n.retain),i+n.retain;if(n.delete||typeof n.retain=="number"){let s=n.delete||n.retain;return e.slice(i,i+s).forEach(a=>{n.delete?t.push(a):n.retain&&n.attributes&&t.retain(Yr.default.length(a),Yi.default.invert(n.attributes,a.attributes))}),i+s}else if(typeof n.retain=="object"&&n.retain!==null){let s=e.slice(i,i+1),o=new lr.default(s.ops).next(),[a,l,f]=lg(n.retain,o.insert),m=ft.getHandler(a);return t.retain({[a]:m.invert(l,f)},Yi.default.invert(n.attributes,o.attributes)),i+1}}return i},0),t.chop()}transform(e,t=!1){if(t=!!t,typeof e=="number")return this.transformPosition(e,t);let i=e,n=new lr.default(this.ops),s=new lr.default(i.ops),o=new ft;for(;n.hasNext()||s.hasNext();)if(n.peekType()==="insert"&&(t||s.peekType()!=="insert"))o.retain(Yr.default.length(n.next()));else if(s.peekType()==="insert")o.push(s.next());else{let a=Math.min(n.peekLength(),s.peekLength()),l=n.next(a),f=s.next(a);if(l.delete)continue;if(f.delete)o.push(f);else{let m=l.retain,b=f.retain,h=typeof b=="object"&&b!==null?b:a;if(typeof m=="object"&&m!==null&&typeof b=="object"&&b!==null){let p=Object.keys(m)[0];if(p===Object.keys(b)[0]){let u=ft.getHandler(p);u&&(h={[p]:u.transform(m[p],b[p],t)})}}o.retain(h,Yi.default.transform(l.attributes,f.attributes,t))}}return o.chop()}transformPosition(e,t=!1){t=!!t;let i=new lr.default(this.ops),n=0;for(;i.hasNext()&&n<=e;){let s=i.peekLength(),o=i.peekType();if(i.next(),o==="delete"){e-=Math.min(s,e-n);continue}else o==="insert"&&(n<e||!t)&&(e+=s);n+=s}return e}};ft.Op=Yr.default;ft.OpIterator=lr.default;ft.AttributeMap=Yi.default;ft.handlers={};Wr.default=ft;typeof el=="object"&&(el.exports=ft,el.exports.default=ft)});var fg=Pe((SB,Sc)=>{"use strict";var dC=Object.prototype.hasOwnProperty,jt="~";function Ws(){}Object.create&&(Ws.prototype=Object.create(null),new Ws().__proto__||(jt=!1));function hC(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function cg(r,e,t,i,n){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new hC(t,i||r,n),o=jt?jt+e:e;return r._events[o]?r._events[o].fn?r._events[o]=[r._events[o],s]:r._events[o].push(s):(r._events[o]=s,r._eventsCount++),r}function tl(r,e){--r._eventsCount===0?r._events=new Ws:delete r._events[e]}function Nt(){this._events=new Ws,this._eventsCount=0}Nt.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)dC.call(t,i)&&e.push(jt?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Nt.prototype.listeners=function(e){var t=jt?jt+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=new Array(s);n<s;n++)o[n]=i[n].fn;return o};Nt.prototype.listenerCount=function(e){var t=jt?jt+e:e,i=this._events[t];return i?i.fn?1:i.length:0};Nt.prototype.emit=function(e,t,i,n,s,o){var a=jt?jt+e:e;if(!this._events[a])return!1;var l=this._events[a],f=arguments.length,m,b;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,s),!0;case 6:return l.fn.call(l.context,t,i,n,s,o),!0}for(b=1,m=new Array(f-1);b<f;b++)m[b-1]=arguments[b];l.fn.apply(l.context,m)}else{var h=l.length,p;for(b=0;b<h;b++)switch(l[b].once&&this.removeListener(e,l[b].fn,void 0,!0),f){case 1:l[b].fn.call(l[b].context);break;case 2:l[b].fn.call(l[b].context,t);break;case 3:l[b].fn.call(l[b].context,t,i);break;case 4:l[b].fn.call(l[b].context,t,i,n);break;default:if(!m)for(p=1,m=new Array(f-1);p<f;p++)m[p-1]=arguments[p];l[b].fn.apply(l[b].context,m)}}return!0};Nt.prototype.on=function(e,t,i){return cg(this,e,t,i,!1)};Nt.prototype.once=function(e,t,i){return cg(this,e,t,i,!0)};Nt.prototype.removeListener=function(e,t,i,n){var s=jt?jt+e:e;if(!this._events[s])return this;if(!t)return tl(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!n||o.once)&&(!i||o.context===i)&&tl(this,s);else{for(var a=0,l=[],f=o.length;a<f;a++)(o[a].fn!==t||n&&!o[a].once||i&&o[a].context!==i)&&l.push(o[a]);l.length?this._events[s]=l.length===1?l[0]:l:tl(this,s)}return this};Nt.prototype.removeAllListeners=function(e){var t;return e?(t=jt?jt+e:e,this._events[t]&&tl(this,t)):(this._events=new Ws,this._eventsCount=0),this};Nt.prototype.off=Nt.prototype.removeListener;Nt.prototype.addListener=Nt.prototype.on;Nt.prefixed=jt;Nt.EventEmitter=Nt;typeof Sc!="undefined"&&(Sc.exports=Nt)});var f0=Pe((go,hf)=>{(function(r,e){typeof go=="object"&&typeof hf=="object"?hf.exports=e():typeof define=="function"&&define.amd?define([],e):typeof go=="object"?go.ImageResize=e():r.ImageResize=e()})(go,function(){return function(r){function e(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return r[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var t={};return e.m=r,e.c=t,e.i=function(i){return i},e.d=function(i,n,s){e.o(i,n)||Object.defineProperty(i,n,{configurable:!1,enumerable:!0,get:s})},e.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(n,"a",n),n},e.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},e.p="",e(e.s=41)}([function(r,e){function t(i){var n=typeof i;return i!=null&&(n=="object"||n=="function")}r.exports=t},function(r,e,t){var i=t(23),n=typeof self=="object"&&self&&self.Object===Object&&self,s=i||n||Function("return this")();r.exports=s},function(r,e){function t(i){return i!=null&&typeof i=="object"}r.exports=t},function(r,e,t){function i(f){var m=-1,b=f==null?0:f.length;for(this.clear();++m<b;){var h=f[m];this.set(h[0],h[1])}}var n=t(82),s=t(83),o=t(84),a=t(85),l=t(86);i.prototype.clear=n,i.prototype.delete=s,i.prototype.get=o,i.prototype.has=a,i.prototype.set=l,r.exports=i},function(r,e,t){function i(s,o){for(var a=s.length;a--;)if(n(s[a][0],o))return a;return-1}var n=t(8);r.exports=i},function(r,e,t){function i(m){return m==null?m===void 0?l:a:f&&f in Object(m)?s(m):o(m)}var n=t(17),s=t(71),o=t(94),a="[object Null]",l="[object Undefined]",f=n?n.toStringTag:void 0;r.exports=i},function(r,e,t){function i(s,o){var a=s.__data__;return n(o)?a[typeof o=="string"?"string":"hash"]:a.map}var n=t(80);r.exports=i},function(r,e,t){var i=t(11),n=i(Object,"create");r.exports=n},function(r,e){function t(i,n){return i===n||i!==i&&n!==n}r.exports=t},function(r,e,t){"use strict";function i(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}t.d(e,"a",function(){return n});var n=function s(o){i(this,s),this.onCreate=function(){},this.onDestroy=function(){},this.onUpdate=function(){},this.overlay=o.overlay,this.img=o.img,this.options=o.options,this.requestUpdate=o.onUpdate}},function(r,e,t){function i(s,o,a){o=="__proto__"&&n?n(s,o,{configurable:!0,enumerable:!0,value:a,writable:!0}):s[o]=a}var n=t(22);r.exports=i},function(r,e,t){function i(o,a){var l=s(o,a);return n(l)?l:void 0}var n=t(55),s=t(72);r.exports=i},function(r,e,t){function i(o){return o!=null&&s(o.length)&&!n(o)}var n=t(13),s=t(32);r.exports=i},function(r,e,t){function i(m){if(!s(m))return!1;var b=n(m);return b==a||b==l||b==o||b==f}var n=t(5),s=t(0),o="[object AsyncFunction]",a="[object Function]",l="[object GeneratorFunction]",f="[object Proxy]";r.exports=i},function(r,e){r.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(r,e,t){(function(i){(function(n,s){r.exports=s()})(typeof self!="undefined"&&self,function(){return function(n){function s(a){if(o[a])return o[a].exports;var l=o[a]={i:a,l:!1,exports:{}};return n[a].call(l.exports,l,l.exports,s),l.l=!0,l.exports}var o={};return s.m=n,s.c=o,s.d=function(a,l,f){s.o(a,l)||Object.defineProperty(a,l,{configurable:!1,enumerable:!0,get:f})},s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,"a",l),l},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.p="",s(s.s=109)}([function(n,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=o(17),l=o(18),f=o(19),m=o(45),b=o(46),h=o(47),p=o(48),u=o(49),d=o(12),_=o(32),y=o(33),g=o(31),v=o(1),A={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:a.default,Format:l.default,Leaf:f.default,Embed:p.default,Scroll:m.default,Block:h.default,Inline:b.default,Text:u.default,Attributor:{Attribute:d.default,Class:_.default,Style:y.default,Store:g.default}};s.default=A},function(n,s,o){"use strict";function a(g,v){var A=f(g);if(A==null)throw new h("Unable to create "+g+" blot");var k=A;return new k(g instanceof Node||g.nodeType===Node.TEXT_NODE?g:k.create(v),v)}function l(g,v){return v===void 0&&(v=!1),g==null?null:g[s.DATA_KEY]!=null?g[s.DATA_KEY].blot:v?l(g.parentNode,v):null}function f(g,v){v===void 0&&(v=y.ANY);var A;if(typeof g=="string")A=_[g]||p[g];else if(g instanceof Text||g.nodeType===Node.TEXT_NODE)A=_.text;else if(typeof g=="number")g&y.LEVEL&y.BLOCK?A=_.block:g&y.LEVEL&y.INLINE&&(A=_.inline);else if(g instanceof HTMLElement){var k=(g.getAttribute("class")||"").split(/\s+/);for(var w in k)if(A=u[k[w]])break;A=A||d[g.tagName]}return A==null?null:v&y.LEVEL&A.scope&&v&y.TYPE&A.scope?A:null}function m(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];if(g.length>1)return g.map(function(w){return m(w)});var A=g[0];if(typeof A.blotName!="string"&&typeof A.attrName!="string")throw new h("Invalid definition");if(A.blotName==="abstract")throw new h("Cannot register abstract class");if(_[A.blotName||A.attrName]=A,typeof A.keyName=="string")p[A.keyName]=A;else if(A.className!=null&&(u[A.className]=A),A.tagName!=null){Array.isArray(A.tagName)?A.tagName=A.tagName.map(function(w){return w.toUpperCase()}):A.tagName=A.tagName.toUpperCase();var k=Array.isArray(A.tagName)?A.tagName:[A.tagName];k.forEach(function(w){d[w]!=null&&A.className!=null||(d[w]=A)})}return A}var b=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,A){v.__proto__=A}||function(v,A){for(var k in A)A.hasOwnProperty(k)&&(v[k]=A[k])};return function(v,A){function k(){this.constructor=v}g(v,A),v.prototype=A===null?Object.create(A):(k.prototype=A.prototype,new k)}}();Object.defineProperty(s,"__esModule",{value:!0});var h=function(g){function v(A){var k=this;return A="[Parchment] "+A,k=g.call(this,A)||this,k.message=A,k.name=k.constructor.name,k}return b(v,g),v}(Error);s.ParchmentError=h;var p={},u={},d={},_={};s.DATA_KEY="__blot";var y;(function(g){g[g.TYPE=3]="TYPE",g[g.LEVEL=12]="LEVEL",g[g.ATTRIBUTE=13]="ATTRIBUTE",g[g.BLOT=14]="BLOT",g[g.INLINE=7]="INLINE",g[g.BLOCK=11]="BLOCK",g[g.BLOCK_BLOT=10]="BLOCK_BLOT",g[g.INLINE_BLOT=6]="INLINE_BLOT",g[g.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",g[g.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",g[g.ANY=15]="ANY"})(y=s.Scope||(s.Scope={})),s.create=a,s.find=l,s.query=f,s.register=m},function(n,s,o){var a=o(51),l=o(11),f=o(3),m=o(20),b=String.fromCharCode(0),h=function(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]};h.prototype.insert=function(p,u){var d={};return p.length===0?this:(d.insert=p,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(d.attributes=u),this.push(d))},h.prototype.delete=function(p){return p<=0?this:this.push({delete:p})},h.prototype.retain=function(p,u){if(p<=0)return this;var d={retain:p};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(d.attributes=u),this.push(d)},h.prototype.push=function(p){var u=this.ops.length,d=this.ops[u-1];if(p=f(!0,{},p),typeof d=="object"){if(typeof p.delete=="number"&&typeof d.delete=="number")return this.ops[u-1]={delete:d.delete+p.delete},this;if(typeof d.delete=="number"&&p.insert!=null&&(u-=1,typeof(d=this.ops[u-1])!="object"))return this.ops.unshift(p),this;if(l(p.attributes,d.attributes)){if(typeof p.insert=="string"&&typeof d.insert=="string")return this.ops[u-1]={insert:d.insert+p.insert},typeof p.attributes=="object"&&(this.ops[u-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof d.retain=="number")return this.ops[u-1]={retain:d.retain+p.retain},typeof p.attributes=="object"&&(this.ops[u-1].attributes=p.attributes),this}}return u===this.ops.length?this.ops.push(p):this.ops.splice(u,0,p),this},h.prototype.chop=function(){var p=this.ops[this.ops.length-1];return p&&p.retain&&!p.attributes&&this.ops.pop(),this},h.prototype.filter=function(p){return this.ops.filter(p)},h.prototype.forEach=function(p){this.ops.forEach(p)},h.prototype.map=function(p){return this.ops.map(p)},h.prototype.partition=function(p){var u=[],d=[];return this.forEach(function(_){(p(_)?u:d).push(_)}),[u,d]},h.prototype.reduce=function(p,u){return this.ops.reduce(p,u)},h.prototype.changeLength=function(){return this.reduce(function(p,u){return u.insert?p+m.length(u):u.delete?p-u.delete:p},0)},h.prototype.length=function(){return this.reduce(function(p,u){return p+m.length(u)},0)},h.prototype.slice=function(p,u){p=p||0,typeof u!="number"&&(u=1/0);for(var d=[],_=m.iterator(this.ops),y=0;y<u&&_.hasNext();){var g;y<p?g=_.next(p-y):(g=_.next(u-y),d.push(g)),y+=m.length(g)}return new h(d)},h.prototype.compose=function(p){var u=m.iterator(this.ops),d=m.iterator(p.ops),_=[],y=d.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){for(var g=y.retain;u.peekType()==="insert"&&u.peekLength()<=g;)g-=u.peekLength(),_.push(u.next());y.retain-g>0&&d.next(y.retain-g)}for(var v=new h(_);u.hasNext()||d.hasNext();)if(d.peekType()==="insert")v.push(d.next());else if(u.peekType()==="delete")v.push(u.next());else{var A=Math.min(u.peekLength(),d.peekLength()),k=u.next(A),w=d.next(A);if(typeof w.retain=="number"){var E={};typeof k.retain=="number"?E.retain=A:E.insert=k.insert;var M=m.attributes.compose(k.attributes,w.attributes,typeof k.retain=="number");if(M&&(E.attributes=M),v.push(E),!d.hasNext()&&l(v.ops[v.ops.length-1],E)){var j=new h(u.rest());return v.concat(j).chop()}}else typeof w.delete=="number"&&typeof k.retain=="number"&&v.push(w)}return v.chop()},h.prototype.concat=function(p){var u=new h(this.ops.slice());return p.ops.length>0&&(u.push(p.ops[0]),u.ops=u.ops.concat(p.ops.slice(1))),u},h.prototype.diff=function(p,u){if(this.ops===p.ops)return new h;var d=[this,p].map(function(A){return A.map(function(k){if(k.insert!=null)return typeof k.insert=="string"?k.insert:b;var w=A===p?"on":"with";throw new Error("diff() called "+w+" non-document")}).join("")}),_=new h,y=a(d[0],d[1],u),g=m.iterator(this.ops),v=m.iterator(p.ops);return y.forEach(function(A){for(var k=A[1].length;k>0;){var w=0;switch(A[0]){case a.INSERT:w=Math.min(v.peekLength(),k),_.push(v.next(w));break;case a.DELETE:w=Math.min(k,g.peekLength()),g.next(w),_.delete(w);break;case a.EQUAL:w=Math.min(g.peekLength(),v.peekLength(),k);var E=g.next(w),M=v.next(w);l(E.insert,M.insert)?_.retain(w,m.attributes.diff(E.attributes,M.attributes)):_.push(M).delete(w)}k-=w}}),_.chop()},h.prototype.eachLine=function(p,u){u=u||`
`;for(var d=m.iterator(this.ops),_=new h,y=0;d.hasNext();){if(d.peekType()!=="insert")return;var g=d.peek(),v=m.length(g)-d.peekLength(),A=typeof g.insert=="string"?g.insert.indexOf(u,v)-v:-1;if(A<0)_.push(d.next());else if(A>0)_.push(d.next(A));else{if(p(_,d.next(1).attributes||{},y)===!1)return;y+=1,_=new h}}_.length()>0&&p(_,{},y)},h.prototype.transform=function(p,u){if(u=!!u,typeof p=="number")return this.transformPosition(p,u);for(var d=m.iterator(this.ops),_=m.iterator(p.ops),y=new h;d.hasNext()||_.hasNext();)if(d.peekType()!=="insert"||!u&&_.peekType()==="insert")if(_.peekType()==="insert")y.push(_.next());else{var g=Math.min(d.peekLength(),_.peekLength()),v=d.next(g),A=_.next(g);if(v.delete)continue;A.delete?y.push(A):y.retain(g,m.attributes.transform(v.attributes,A.attributes,u))}else y.retain(m.length(d.next()));return y.chop()},h.prototype.transformPosition=function(p,u){u=!!u;for(var d=m.iterator(this.ops),_=0;d.hasNext()&&_<=p;){var y=d.peekLength(),g=d.peekType();d.next(),g!=="delete"?(g==="insert"&&(_<p||!u)&&(p+=y),_+=y):p-=Math.min(y,p-_)}return p},n.exports=h},function(n,s){"use strict";var o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,l=Object.defineProperty,f=Object.getOwnPropertyDescriptor,m=function(u){return typeof Array.isArray=="function"?Array.isArray(u):a.call(u)==="[object Array]"},b=function(u){if(!u||a.call(u)!=="[object Object]")return!1;var d=o.call(u,"constructor"),_=u.constructor&&u.constructor.prototype&&o.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!d&&!_)return!1;var y;for(y in u);return y===void 0||o.call(u,y)},h=function(u,d){l&&d.name==="__proto__"?l(u,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):u[d.name]=d.newValue},p=function(u,d){if(d==="__proto__"){if(!o.call(u,d))return;if(f)return f(u,d).value}return u[d]};n.exports=function u(){var d,_,y,g,v,A,k=arguments[0],w=1,E=arguments.length,M=!1;for(typeof k=="boolean"&&(M=k,k=arguments[1]||{},w=2),(k==null||typeof k!="object"&&typeof k!="function")&&(k={});w<E;++w)if((d=arguments[w])!=null)for(_ in d)y=p(k,_),g=p(d,_),k!==g&&(M&&g&&(b(g)||(v=m(g)))?(v?(v=!1,A=y&&m(y)?y:[]):A=y&&b(y)?y:{},h(k,{name:_,newValue:u(M,A,g)})):g!==void 0&&h(k,{name:_,newValue:g}));return k}},function(n,s,o){"use strict";function a(B){return B&&B.__esModule?B:{default:B}}function l(B,S){if(!(B instanceof S))throw new TypeError("Cannot call a class as a function")}function f(B,S){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!S||typeof S!="object"&&typeof S!="function"?B:S}function m(B,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);B.prototype=Object.create(S&&S.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(B,S):B.__proto__=S)}function b(B){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return B==null?S:(typeof B.formats=="function"&&(S=(0,d.default)(S,B.formats())),B.parent==null||B.parent.blotName=="scroll"||B.parent.statics.scope!==B.statics.scope?S:b(B.parent,S))}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.BlockEmbed=s.bubbleFormats=void 0;var h=function(){function B(S,P){for(var z=0;z<P.length;z++){var G=P[z];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(S,G.key,G)}}return function(S,P,z){return P&&B(S.prototype,P),z&&B(S,z),S}}(),p=function B(S,P,z){S===null&&(S=Function.prototype);var G=Object.getOwnPropertyDescriptor(S,P);if(G===void 0){var ee=Object.getPrototypeOf(S);return ee===null?void 0:B(ee,P,z)}if("value"in G)return G.value;var F=G.get;if(F!==void 0)return F.call(z)},u=o(3),d=a(u),_=o(2),y=a(_),g=o(0),v=a(g),A=o(16),k=a(A),w=o(6),E=a(w),M=o(7),j=a(M),D=function(B){function S(){return l(this,S),f(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return m(S,B),h(S,[{key:"attach",value:function(){p(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"attach",this).call(this),this.attributes=new v.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new y.default().insert(this.value(),(0,d.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(P,z){var G=v.default.query(P,v.default.Scope.BLOCK_ATTRIBUTE);G!=null&&this.attributes.attribute(G,z)}},{key:"formatAt",value:function(P,z,G,ee){this.format(G,ee)}},{key:"insertAt",value:function(P,z,G){if(typeof z=="string"&&z.endsWith(`
`)){var ee=v.default.create(N.blotName);this.parent.insertBefore(ee,P===0?this:this.next),ee.insertAt(0,z.slice(0,-1))}else p(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertAt",this).call(this,P,z,G)}}]),S}(v.default.Embed);D.scope=v.default.Scope.BLOCK_BLOT;var N=function(B){function S(P){l(this,S);var z=f(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,P));return z.cache={},z}return m(S,B),h(S,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(v.default.Leaf).reduce(function(P,z){return z.length()===0?P:P.insert(z.value(),b(z))},new y.default).insert(`
`,b(this))),this.cache.delta}},{key:"deleteAt",value:function(P,z){p(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"deleteAt",this).call(this,P,z),this.cache={}}},{key:"formatAt",value:function(P,z,G,ee){z<=0||(v.default.query(G,v.default.Scope.BLOCK)?P+z===this.length()&&this.format(G,ee):p(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"formatAt",this).call(this,P,Math.min(z,this.length()-P-1),G,ee),this.cache={})}},{key:"insertAt",value:function(P,z,G){if(G!=null)return p(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertAt",this).call(this,P,z,G);if(z.length!==0){var ee=z.split(`
`),F=ee.shift();F.length>0&&(P<this.length()-1||this.children.tail==null?p(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertAt",this).call(this,Math.min(P,this.length()-1),F):this.children.tail.insertAt(this.children.tail.length(),F),this.cache={});var J=this;ee.reduce(function(Z,X){return J=J.split(Z,!0),J.insertAt(0,X),X.length},P+F.length)}}},{key:"insertBefore",value:function(P,z){var G=this.children.head;p(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,P,z),G instanceof k.default&&G.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=p(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(P,z){p(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"moveChildren",this).call(this,P,z),this.cache={}}},{key:"optimize",value:function(P){p(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,P),this.cache={}}},{key:"path",value:function(P){return p(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"path",this).call(this,P,!0)}},{key:"removeChild",value:function(P){p(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"removeChild",this).call(this,P),this.cache={}}},{key:"split",value:function(P){var z=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(z&&(P===0||P>=this.length()-1)){var G=this.clone();return P===0?(this.parent.insertBefore(G,this),this):(this.parent.insertBefore(G,this.next),G)}var ee=p(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"split",this).call(this,P,z);return this.cache={},ee}}]),S}(v.default.Block);N.blotName="block",N.tagName="P",N.defaultChild="break",N.allowedChildren=[E.default,v.default.Embed,j.default],s.bubbleFormats=b,s.BlockEmbed=D,s.default=N},function(n,s,o){"use strict";function a(X){return X&&X.__esModule?X:{default:X}}function l(X,I,H){return I in X?Object.defineProperty(X,I,{value:H,enumerable:!0,configurable:!0,writable:!0}):X[I]=H,X}function f(X,I){if(!(X instanceof I))throw new TypeError("Cannot call a class as a function")}function m(X,I){if(I=(0,P.default)(!0,{container:X,modules:{clipboard:!0,keyboard:!0,history:!0}},I),I.theme&&I.theme!==Z.DEFAULTS.theme){if(I.theme=Z.import("themes/"+I.theme),I.theme==null)throw new Error("Invalid theme "+I.theme+". Did you register it?")}else I.theme=F.default;var H=(0,P.default)(!0,{},I.theme.DEFAULTS);[H,I].forEach(function(re){re.modules=re.modules||{},Object.keys(re.modules).forEach(function(se){re.modules[se]===!0&&(re.modules[se]={})})});var W=Object.keys(H.modules).concat(Object.keys(I.modules)),te=W.reduce(function(re,se){var K=Z.import("modules/"+se);return K==null?J.error("Cannot load "+se+" module. Are you sure you registered it?"):re[se]=K.DEFAULTS||{},re},{});return I.modules!=null&&I.modules.toolbar&&I.modules.toolbar.constructor!==Object&&(I.modules.toolbar={container:I.modules.toolbar}),I=(0,P.default)(!0,{},Z.DEFAULTS,{modules:te},H,I),["bounds","container","scrollingContainer"].forEach(function(re){typeof I[re]=="string"&&(I[re]=document.querySelector(I[re]))}),I.modules=Object.keys(I.modules).reduce(function(re,se){return I.modules[se]&&(re[se]=I.modules[se]),re},{}),I}function b(X,I,H,W){if(this.options.strict&&!this.isEnabled()&&I===w.default.sources.USER)return new g.default;var te=H==null?null:this.getSelection(),re=this.editor.delta,se=X();if(te!=null&&(H===!0&&(H=te.index),W==null?te=p(te,se,I):W!==0&&(te=p(te,H,W,I)),this.setSelection(te,w.default.sources.SILENT)),se.length()>0){var K,ie=[w.default.events.TEXT_CHANGE,se,re,I];if((K=this.emitter).emit.apply(K,[w.default.events.EDITOR_CHANGE].concat(ie)),I!==w.default.sources.SILENT){var ce;(ce=this.emitter).emit.apply(ce,ie)}}return se}function h(X,I,H,W,te){var re={};return typeof X.index=="number"&&typeof X.length=="number"?typeof I!="number"?(te=W,W=H,H=I,I=X.length,X=X.index):(I=X.length,X=X.index):typeof I!="number"&&(te=W,W=H,H=I,I=0),(H===void 0?"undefined":u(H))==="object"?(re=H,te=W):typeof H=="string"&&(W!=null?re[H]=W:te=H),te=te||w.default.sources.API,[X,I,re,te]}function p(X,I,H,W){if(X==null)return null;var te=void 0,re=void 0;if(I instanceof g.default){var se=[X.index,X.index+X.length].map(function(ye){return I.transformPosition(ye,W!==w.default.sources.USER)}),K=d(se,2);te=K[0],re=K[1]}else{var ie=[X.index,X.index+X.length].map(function(ye){return ye<I||ye===I&&W===w.default.sources.USER?ye:H>=0?ye+H:Math.max(I,ye+H)}),ce=d(ie,2);te=ce[0],re=ce[1]}return new N.Range(te,re-te)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.overload=s.expandConfig=void 0;var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},d=function(){function X(I,H){var W=[],te=!0,re=!1,se=void 0;try{for(var K,ie=I[Symbol.iterator]();!(te=(K=ie.next()).done)&&(W.push(K.value),!H||W.length!==H);te=!0);}catch(ce){re=!0,se=ce}finally{try{!te&&ie.return&&ie.return()}finally{if(re)throw se}}return W}return function(I,H){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return X(I,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function X(I,H){for(var W=0;W<H.length;W++){var te=H[W];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(I,te.key,te)}}return function(I,H,W){return H&&X(I.prototype,H),W&&X(I,W),I}}();o(50);var y=o(2),g=a(y),v=o(14),A=a(v),k=o(8),w=a(k),E=o(9),M=a(E),j=o(0),D=a(j),N=o(15),B=a(N),S=o(3),P=a(S),z=o(10),G=a(z),ee=o(34),F=a(ee),J=(0,G.default)("quill"),Z=function(){function X(I){var H=this,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(f(this,X),this.options=m(I,W),this.container=this.options.container,this.container==null)return J.error("Invalid Quill container",I);this.options.debug&&X.debug(this.options.debug);var te=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new w.default,this.scroll=D.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new A.default(this.scroll),this.selection=new B.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(w.default.events.EDITOR_CHANGE,function(se){se===w.default.events.TEXT_CHANGE&&H.root.classList.toggle("ql-blank",H.editor.isBlank())}),this.emitter.on(w.default.events.SCROLL_UPDATE,function(se,K){var ie=H.selection.lastRange,ce=ie&&ie.length===0?ie.index:void 0;b.call(H,function(){return H.editor.update(null,K,ce)},se)});var re=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+te+"<p><br></p></div>");this.setContents(re),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return _(X,null,[{key:"debug",value:function(I){I===!0&&(I="log"),G.default.level(I)}},{key:"find",value:function(I){return I.__quill||D.default.find(I)}},{key:"import",value:function(I){return this.imports[I]==null&&J.error("Cannot import "+I+". Are you sure it was registered?"),this.imports[I]}},{key:"register",value:function(I,H){var W=this,te=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(typeof I!="string"){var re=I.attrName||I.blotName;typeof re=="string"?this.register("formats/"+re,I,H):Object.keys(I).forEach(function(se){W.register(se,I[se],H)})}else this.imports[I]==null||te||J.warn("Overwriting "+I+" with",H),this.imports[I]=H,(I.startsWith("blots/")||I.startsWith("formats/"))&&H.blotName!=="abstract"?D.default.register(H):I.startsWith("modules")&&typeof H.register=="function"&&H.register()}}]),_(X,[{key:"addContainer",value:function(I){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof I=="string"){var W=I;I=document.createElement("div"),I.classList.add(W)}return this.container.insertBefore(I,H),I}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(I,H,W){var te=this,re=h(I,H,W),se=d(re,4);return I=se[0],H=se[1],W=se[3],b.call(this,function(){return te.editor.deleteText(I,H)},W,I,-1*H)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var I=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.scroll.enable(I),this.container.classList.toggle("ql-disabled",!I)}},{key:"focus",value:function(){var I=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=I,this.scrollIntoView()}},{key:"format",value:function(I,H){var W=this,te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w.default.sources.API;return b.call(this,function(){var re=W.getSelection(!0),se=new g.default;if(re==null)return se;if(D.default.query(I,D.default.Scope.BLOCK))se=W.editor.formatLine(re.index,re.length,l({},I,H));else{if(re.length===0)return W.selection.format(I,H),se;se=W.editor.formatText(re.index,re.length,l({},I,H))}return W.setSelection(re,w.default.sources.SILENT),se},te)}},{key:"formatLine",value:function(I,H,W,te,re){var se=this,K=void 0,ie=h(I,H,W,te,re),ce=d(ie,4);return I=ce[0],H=ce[1],K=ce[2],re=ce[3],b.call(this,function(){return se.editor.formatLine(I,H,K)},re,I,0)}},{key:"formatText",value:function(I,H,W,te,re){var se=this,K=void 0,ie=h(I,H,W,te,re),ce=d(ie,4);return I=ce[0],H=ce[1],K=ce[2],re=ce[3],b.call(this,function(){return se.editor.formatText(I,H,K)},re,I,0)}},{key:"getBounds",value:function(I){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,W=void 0;W=typeof I=="number"?this.selection.getBounds(I,H):this.selection.getBounds(I.index,I.length);var te=this.container.getBoundingClientRect();return{bottom:W.bottom-te.top,height:W.height,left:W.left-te.left,right:W.right-te.left,top:W.top-te.top,width:W.width}}},{key:"getContents",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-I,W=h(I,H),te=d(W,2);return I=te[0],H=te[1],this.editor.getContents(I,H)}},{key:"getFormat",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof I=="number"?this.editor.getFormat(I,H):this.editor.getFormat(I.index,I.length)}},{key:"getIndex",value:function(I){return I.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(I){return this.scroll.leaf(I)}},{key:"getLine",value:function(I){return this.scroll.line(I)}},{key:"getLines",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof I!="number"?this.scroll.lines(I.index,I.length):this.scroll.lines(I,H)}},{key:"getModule",value:function(I){return this.theme.modules[I]}},{key:"getSelection",value:function(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-I,W=h(I,H),te=d(W,2);return I=te[0],H=te[1],this.editor.getText(I,H)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(I,H,W){var te=this,re=arguments.length>3&&arguments[3]!==void 0?arguments[3]:X.sources.API;return b.call(this,function(){return te.editor.insertEmbed(I,H,W)},re,I)}},{key:"insertText",value:function(I,H,W,te,re){var se=this,K=void 0,ie=h(I,0,W,te,re),ce=d(ie,4);return I=ce[0],K=ce[2],re=ce[3],b.call(this,function(){return se.editor.insertText(I,H,K)},re,I,H.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(I,H,W){this.clipboard.dangerouslyPasteHTML(I,H,W)}},{key:"removeFormat",value:function(I,H,W){var te=this,re=h(I,H,W),se=d(re,4);return I=se[0],H=se[1],W=se[3],b.call(this,function(){return te.editor.removeFormat(I,H)},W,I)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(I){var H=this,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w.default.sources.API;return b.call(this,function(){I=new g.default(I);var te=H.getLength(),re=H.editor.deleteText(0,te),se=H.editor.applyDelta(I),K=se.ops[se.ops.length-1];return K!=null&&typeof K.insert=="string"&&K.insert[K.insert.length-1]===`
`&&(H.editor.deleteText(H.getLength()-1,1),se.delete(1)),re.compose(se)},W)}},{key:"setSelection",value:function(I,H,W){if(I==null)this.selection.setRange(null,H||X.sources.API);else{var te=h(I,H,W),re=d(te,4);I=re[0],H=re[1],W=re[3],this.selection.setRange(new N.Range(I,H),W),W!==w.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(I){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w.default.sources.API,W=new g.default().insert(I);return this.setContents(W,H)}},{key:"update",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:w.default.sources.USER,H=this.scroll.update(I);return this.selection.update(I),H}},{key:"updateContents",value:function(I){var H=this,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w.default.sources.API;return b.call(this,function(){return I=new g.default(I),H.editor.applyDelta(I,W)},W,!0)}}]),X}();Z.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},Z.events=w.default.events,Z.sources=w.default.sources,Z.version="1.3.7",Z.imports={delta:g.default,parchment:D.default,"core/module":M.default,"core/theme":F.default},s.expandConfig=m,s.overload=h,s.default=Z},function(n,s,o){"use strict";function a(g){return g&&g.__esModule?g:{default:g}}function l(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function f(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||typeof v!="object"&&typeof v!="function"?g:v}function m(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}Object.defineProperty(s,"__esModule",{value:!0});var b=function(){function g(v,A){for(var k=0;k<A.length;k++){var w=A[k];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,A,k){return A&&g(v.prototype,A),k&&g(v,k),v}}(),h=function g(v,A,k){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,A);if(w===void 0){var E=Object.getPrototypeOf(v);return E===null?void 0:g(E,A,k)}if("value"in w)return w.value;var M=w.get;if(M!==void 0)return M.call(k)},p=o(7),u=a(p),d=o(0),_=a(d),y=function(g){function v(){return l(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return m(v,g),b(v,[{key:"formatAt",value:function(A,k,w,E){if(v.compare(this.statics.blotName,w)<0&&_.default.query(w,_.default.Scope.BLOT)){var M=this.isolate(A,k);E&&M.wrap(w,E)}else h(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,A,k,w,E)}},{key:"optimize",value:function(A){if(h(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,A),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var k=this.parent.isolate(this.offset(),this.length());this.moveChildren(k),k.wrap(this)}}}],[{key:"compare",value:function(A,k){var w=v.order.indexOf(A),E=v.order.indexOf(k);return w>=0||E>=0?w-E:A===k?0:A<k?-1:1}}]),v}(_.default.Inline);y.allowedChildren=[y,_.default.Embed,u.default],y.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],s.default=y},function(n,s,o){"use strict";function a(p,u){if(!(p instanceof u))throw new TypeError("Cannot call a class as a function")}function l(p,u){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?p:u}function f(p,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);p.prototype=Object.create(u&&u.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(p,u):p.__proto__=u)}Object.defineProperty(s,"__esModule",{value:!0});var m=o(0),b=function(p){return p&&p.__esModule?p:{default:p}}(m),h=function(p){function u(){return a(this,u),l(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return f(u,p),u}(b.default.Text);s.default=h},function(n,s,o){"use strict";function a(v){return v&&v.__esModule?v:{default:v}}function l(v,A){if(!(v instanceof A))throw new TypeError("Cannot call a class as a function")}function f(v,A){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||typeof A!="object"&&typeof A!="function"?v:A}function m(v,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);v.prototype=Object.create(A&&A.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(v,A):v.__proto__=A)}Object.defineProperty(s,"__esModule",{value:!0});var b=function(){function v(A,k){for(var w=0;w<k.length;w++){var E=k[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(A,E.key,E)}}return function(A,k,w){return k&&v(A.prototype,k),w&&v(A,w),A}}(),h=function v(A,k,w){A===null&&(A=Function.prototype);var E=Object.getOwnPropertyDescriptor(A,k);if(E===void 0){var M=Object.getPrototypeOf(A);return M===null?void 0:v(M,k,w)}if("value"in E)return E.value;var j=E.get;if(j!==void 0)return j.call(w)},p=o(54),u=a(p),d=o(10),_=a(d),y=(0,_.default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(v){document.addEventListener(v,function(){for(var A=arguments.length,k=Array(A),w=0;w<A;w++)k[w]=arguments[w];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(E){if(E.__quill&&E.__quill.emitter){var M;(M=E.__quill.emitter).handleDOM.apply(M,k)}})})});var g=function(v){function A(){l(this,A);var k=f(this,(A.__proto__||Object.getPrototypeOf(A)).call(this));return k.listeners={},k.on("error",y.error),k}return m(A,v),b(A,[{key:"emit",value:function(){y.log.apply(y,arguments),h(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(k){for(var w=arguments.length,E=Array(w>1?w-1:0),M=1;M<w;M++)E[M-1]=arguments[M];(this.listeners[k.type]||[]).forEach(function(j){var D=j.node,N=j.handler;(k.target===D||D.contains(k.target))&&N.apply(void 0,[k].concat(E))})}},{key:"listenDOM",value:function(k,w,E){this.listeners[k]||(this.listeners[k]=[]),this.listeners[k].push({node:w,handler:E})}}]),A}(u.default);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},g.sources={API:"api",SILENT:"silent",USER:"user"},s.default=g},function(n,s,o){"use strict";function a(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(s,"__esModule",{value:!0});var l=function f(m){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a(this,f),this.quill=m,this.options=b};l.DEFAULTS={},s.default=l},function(n,s,o){"use strict";function a(b){if(f.indexOf(b)<=f.indexOf(m)){for(var h,p=arguments.length,u=Array(p>1?p-1:0),d=1;d<p;d++)u[d-1]=arguments[d];(h=console)[b].apply(h,u)}}function l(b){return f.reduce(function(h,p){return h[p]=a.bind(console,p,b),h},{})}Object.defineProperty(s,"__esModule",{value:!0});var f=["error","warn","log","info"],m="warn";a.level=l.level=function(b){m=b},s.default=l},function(n,s,o){function a(u){return u==null}function l(u){return!(!u||typeof u!="object"||typeof u.length!="number")&&typeof u.copy=="function"&&typeof u.slice=="function"&&!(u.length>0&&typeof u[0]!="number")}function f(u,d,_){var y,g;if(a(u)||a(d)||u.prototype!==d.prototype)return!1;if(h(u))return!!h(d)&&(u=m.call(u),d=m.call(d),p(u,d,_));if(l(u)){if(!l(d)||u.length!==d.length)return!1;for(y=0;y<u.length;y++)if(u[y]!==d[y])return!1;return!0}try{var v=b(u),A=b(d)}catch(k){return!1}if(v.length!=A.length)return!1;for(v.sort(),A.sort(),y=v.length-1;y>=0;y--)if(v[y]!=A[y])return!1;for(y=v.length-1;y>=0;y--)if(g=v[y],!p(u[g],d[g],_))return!1;return typeof u==typeof d}var m=Array.prototype.slice,b=o(52),h=o(53),p=n.exports=function(u,d,_){return _||(_={}),u===d||(u instanceof Date&&d instanceof Date?u.getTime()===d.getTime():!u||!d||typeof u!="object"&&typeof d!="object"?_.strict?u===d:u==d:f(u,d,_))}},function(n,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=o(1),l=function(){function f(m,b,h){h===void 0&&(h={}),this.attrName=m,this.keyName=b;var p=a.Scope.TYPE&a.Scope.ATTRIBUTE;h.scope!=null?this.scope=h.scope&a.Scope.LEVEL|p:this.scope=a.Scope.ATTRIBUTE,h.whitelist!=null&&(this.whitelist=h.whitelist)}return f.keys=function(m){return[].map.call(m.attributes,function(b){return b.name})},f.prototype.add=function(m,b){return!!this.canAdd(m,b)&&(m.setAttribute(this.keyName,b),!0)},f.prototype.canAdd=function(m,b){return a.query(m,a.Scope.BLOT&(this.scope|a.Scope.TYPE))!=null&&(this.whitelist==null||(typeof b=="string"?this.whitelist.indexOf(b.replace(/["']/g,""))>-1:this.whitelist.indexOf(b)>-1))},f.prototype.remove=function(m){m.removeAttribute(this.keyName)},f.prototype.value=function(m){var b=m.getAttribute(this.keyName);return this.canAdd(m,b)&&b?b:""},f}();s.default=l},function(n,s,o){"use strict";function a(D){return D&&D.__esModule?D:{default:D}}function l(D,N){if(!(D instanceof N))throw new TypeError("Cannot call a class as a function")}function f(D,N){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||typeof N!="object"&&typeof N!="function"?D:N}function m(D,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);D.prototype=Object.create(N&&N.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(D,N):D.__proto__=N)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.Code=void 0;var b=function(){function D(N,B){var S=[],P=!0,z=!1,G=void 0;try{for(var ee,F=N[Symbol.iterator]();!(P=(ee=F.next()).done)&&(S.push(ee.value),!B||S.length!==B);P=!0);}catch(J){z=!0,G=J}finally{try{!P&&F.return&&F.return()}finally{if(z)throw G}}return S}return function(N,B){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return D(N,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function D(N,B){for(var S=0;S<B.length;S++){var P=B[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(N,P.key,P)}}return function(N,B,S){return B&&D(N.prototype,B),S&&D(N,S),N}}(),p=function D(N,B,S){N===null&&(N=Function.prototype);var P=Object.getOwnPropertyDescriptor(N,B);if(P===void 0){var z=Object.getPrototypeOf(N);return z===null?void 0:D(z,B,S)}if("value"in P)return P.value;var G=P.get;if(G!==void 0)return G.call(S)},u=o(2),d=a(u),_=o(0),y=a(_),g=o(4),v=a(g),A=o(6),k=a(A),w=o(7),E=a(w),M=function(D){function N(){return l(this,N),f(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return m(N,D),N}(k.default);M.blotName="code",M.tagName="CODE";var j=function(D){function N(){return l(this,N),f(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return m(N,D),h(N,[{key:"delta",value:function(){var B=this,S=this.domNode.textContent;return S.endsWith(`
`)&&(S=S.slice(0,-1)),S.split(`
`).reduce(function(P,z){return P.insert(z).insert(`
`,B.formats())},new d.default)}},{key:"format",value:function(B,S){if(B!==this.statics.blotName||!S){var P=this.descendant(E.default,this.length()-1),z=b(P,1),G=z[0];G!=null&&G.deleteAt(G.length()-1,1),p(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,B,S)}}},{key:"formatAt",value:function(B,S,P,z){if(S!==0&&y.default.query(P,y.default.Scope.BLOCK)!=null&&(P!==this.statics.blotName||z!==this.statics.formats(this.domNode))){var G=this.newlineIndex(B);if(!(G<0||G>=B+S)){var ee=this.newlineIndex(B,!0)+1,F=G-ee+1,J=this.isolate(ee,F),Z=J.next;J.format(P,z),Z instanceof N&&Z.formatAt(0,B-ee+S-F,P,z)}}}},{key:"insertAt",value:function(B,S,P){if(P==null){var z=this.descendant(E.default,B),G=b(z,2),ee=G[0],F=G[1];ee.insertAt(F,S)}}},{key:"length",value:function(){var B=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?B:B+1}},{key:"newlineIndex",value:function(B){if(arguments.length>1&&arguments[1]!==void 0&&arguments[1])return this.domNode.textContent.slice(0,B).lastIndexOf(`
`);var S=this.domNode.textContent.slice(B).indexOf(`
`);return S>-1?B+S:-1}},{key:"optimize",value:function(B){this.domNode.textContent.endsWith(`
`)||this.appendChild(y.default.create("text",`
`)),p(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,B);var S=this.next;S!=null&&S.prev===this&&S.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===S.statics.formats(S.domNode)&&(S.optimize(B),S.moveChildren(this),S.remove())}},{key:"replace",value:function(B){p(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replace",this).call(this,B),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(S){var P=y.default.find(S);P==null?S.parentNode.removeChild(S):P instanceof y.default.Embed?P.remove():P.unwrap()})}}],[{key:"create",value:function(B){var S=p(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,B);return S.setAttribute("spellcheck",!1),S}},{key:"formats",value:function(){return!0}}]),N}(v.default);j.blotName="code-block",j.tagName="PRE",j.TAB="  ",s.Code=M,s.default=j},function(n,s,o){"use strict";function a(X){return X&&X.__esModule?X:{default:X}}function l(X,I,H){return I in X?Object.defineProperty(X,I,{value:H,enumerable:!0,configurable:!0,writable:!0}):X[I]=H,X}function f(X,I){if(!(X instanceof I))throw new TypeError("Cannot call a class as a function")}function m(X,I){return Object.keys(I).reduce(function(H,W){return X[W]==null||(I[W]===X[W]?H[W]=I[W]:Array.isArray(I[W])?I[W].indexOf(X[W])<0&&(H[W]=I[W].concat([X[W]])):H[W]=[I[W],X[W]]),H},{})}function b(X){return X.reduce(function(I,H){if(H.insert===1){var W=(0,P.default)(H.attributes);return delete W.image,I.insert({image:H.attributes.image},W)}if(H.attributes==null||H.attributes.list!==!0&&H.attributes.bullet!==!0||(H=(0,P.default)(H),H.attributes.list?H.attributes.list="ordered":(H.attributes.list="bullet",delete H.attributes.bullet)),typeof H.insert=="string"){var te=H.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return I.insert(te,H.attributes)}return I.push(H)},new _.default)}Object.defineProperty(s,"__esModule",{value:!0});var h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},p=function(){function X(I,H){var W=[],te=!0,re=!1,se=void 0;try{for(var K,ie=I[Symbol.iterator]();!(te=(K=ie.next()).done)&&(W.push(K.value),!H||W.length!==H);te=!0);}catch(ce){re=!0,se=ce}finally{try{!te&&ie.return&&ie.return()}finally{if(re)throw se}}return W}return function(I,H){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return X(I,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function X(I,H){for(var W=0;W<H.length;W++){var te=H[W];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(I,te.key,te)}}return function(I,H,W){return H&&X(I.prototype,H),W&&X(I,W),I}}(),d=o(2),_=a(d),y=o(20),g=a(y),v=o(0),A=a(v),k=o(13),w=a(k),E=o(24),M=a(E),j=o(4),D=a(j),N=o(16),B=a(N),S=o(21),P=a(S),z=o(11),G=a(z),ee=o(3),F=a(ee),J=/^[ -~]*$/,Z=function(){function X(I){f(this,X),this.scroll=I,this.delta=this.getDelta()}return u(X,[{key:"applyDelta",value:function(I){var H=this,W=!1;this.scroll.update();var te=this.scroll.length();return this.scroll.batchStart(),I=b(I),I.reduce(function(re,se){var K=se.retain||se.delete||se.insert.length||1,ie=se.attributes||{};if(se.insert!=null){if(typeof se.insert=="string"){var ce=se.insert;ce.endsWith(`
`)&&W&&(W=!1,ce=ce.slice(0,-1)),re>=te&&!ce.endsWith(`
`)&&(W=!0),H.scroll.insertAt(re,ce);var ye=H.scroll.line(re),_e=p(ye,2),Ee=_e[0],Me=_e[1],De=(0,F.default)({},(0,j.bubbleFormats)(Ee));if(Ee instanceof D.default){var Le=Ee.descendant(A.default.Leaf,Me),Fe=p(Le,1),Je=Fe[0];De=(0,F.default)(De,(0,j.bubbleFormats)(Je))}ie=g.default.attributes.diff(De,ie)||{}}else if(h(se.insert)==="object"){var qe=Object.keys(se.insert)[0];if(qe==null)return re;H.scroll.insertAt(re,qe,se.insert[qe])}te+=K}return Object.keys(ie).forEach(function(O){H.scroll.formatAt(re,K,O,ie[O])}),re+K},0),I.reduce(function(re,se){return typeof se.delete=="number"?(H.scroll.deleteAt(re,se.delete),re):re+(se.retain||se.insert.length||1)},0),this.scroll.batchEnd(),this.update(I)}},{key:"deleteText",value:function(I,H){return this.scroll.deleteAt(I,H),this.update(new _.default().retain(I).delete(H))}},{key:"formatLine",value:function(I,H){var W=this,te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(te).forEach(function(re){if(W.scroll.whitelist==null||W.scroll.whitelist[re]){var se=W.scroll.lines(I,Math.max(H,1)),K=H;se.forEach(function(ie){var ce=ie.length();if(ie instanceof w.default){var ye=I-ie.offset(W.scroll),_e=ie.newlineIndex(ye+K)-ye+1;ie.formatAt(ye,_e,re,te[re])}else ie.format(re,te[re]);K-=ce})}}),this.scroll.optimize(),this.update(new _.default().retain(I).retain(H,(0,P.default)(te)))}},{key:"formatText",value:function(I,H){var W=this,te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(te).forEach(function(re){W.scroll.formatAt(I,H,re,te[re])}),this.update(new _.default().retain(I).retain(H,(0,P.default)(te)))}},{key:"getContents",value:function(I,H){return this.delta.slice(I,I+H)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(I,H){return I.concat(H.delta())},new _.default)}},{key:"getFormat",value:function(I){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,W=[],te=[];H===0?this.scroll.path(I).forEach(function(se){var K=p(se,1),ie=K[0];ie instanceof D.default?W.push(ie):ie instanceof A.default.Leaf&&te.push(ie)}):(W=this.scroll.lines(I,H),te=this.scroll.descendants(A.default.Leaf,I,H));var re=[W,te].map(function(se){if(se.length===0)return{};for(var K=(0,j.bubbleFormats)(se.shift());Object.keys(K).length>0;){var ie=se.shift();if(ie==null)return K;K=m((0,j.bubbleFormats)(ie),K)}return K});return F.default.apply(F.default,re)}},{key:"getText",value:function(I,H){return this.getContents(I,H).filter(function(W){return typeof W.insert=="string"}).map(function(W){return W.insert}).join("")}},{key:"insertEmbed",value:function(I,H,W){return this.scroll.insertAt(I,H,W),this.update(new _.default().retain(I).insert(l({},H,W)))}},{key:"insertText",value:function(I,H){var W=this,te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return H=H.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(I,H),Object.keys(te).forEach(function(re){W.scroll.formatAt(I,H.length,re,te[re])}),this.update(new _.default().retain(I).insert(H,(0,P.default)(te)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var I=this.scroll.children.head;return I.statics.blotName===D.default.blotName&&!(I.children.length>1)&&I.children.head instanceof B.default}},{key:"removeFormat",value:function(I,H){var W=this.getText(I,H),te=this.scroll.line(I+H),re=p(te,2),se=re[0],K=re[1],ie=0,ce=new _.default;se!=null&&(ie=se instanceof w.default?se.newlineIndex(K)-K+1:se.length()-K,ce=se.delta().slice(K,K+ie-1).insert(`
`));var ye=this.getContents(I,H+ie),_e=ye.diff(new _.default().insert(W).concat(ce)),Ee=new _.default().retain(I).concat(_e);return this.applyDelta(Ee)}},{key:"update",value:function(I){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,te=this.delta;if(H.length===1&&H[0].type==="characterData"&&H[0].target.data.match(J)&&A.default.find(H[0].target)){var re=A.default.find(H[0].target),se=(0,j.bubbleFormats)(re),K=re.offset(this.scroll),ie=H[0].oldValue.replace(M.default.CONTENTS,""),ce=new _.default().insert(ie),ye=new _.default().insert(re.value());I=new _.default().retain(K).concat(ce.diff(ye,W)).reduce(function(_e,Ee){return Ee.insert?_e.insert(Ee.insert,se):_e.push(Ee)},new _.default),this.delta=te.compose(I)}else this.delta=this.getDelta(),I&&(0,G.default)(te.compose(I),this.delta)||(I=te.diff(this.delta,W));return I}}]),X}();s.default=Z},function(n,s,o){"use strict";function a(D){return D&&D.__esModule?D:{default:D}}function l(D){if(Array.isArray(D)){for(var N=0,B=Array(D.length);N<D.length;N++)B[N]=D[N];return B}return Array.from(D)}function f(D,N){if(!(D instanceof N))throw new TypeError("Cannot call a class as a function")}function m(D,N){try{N.parentNode}catch(B){return!1}return N instanceof Text&&(N=N.parentNode),D.contains(N)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.Range=void 0;var b=function(){function D(N,B){var S=[],P=!0,z=!1,G=void 0;try{for(var ee,F=N[Symbol.iterator]();!(P=(ee=F.next()).done)&&(S.push(ee.value),!B||S.length!==B);P=!0);}catch(J){z=!0,G=J}finally{try{!P&&F.return&&F.return()}finally{if(z)throw G}}return S}return function(N,B){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return D(N,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function D(N,B){for(var S=0;S<B.length;S++){var P=B[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(N,P.key,P)}}return function(N,B,S){return B&&D(N.prototype,B),S&&D(N,S),N}}(),p=o(0),u=a(p),d=o(21),_=a(d),y=o(11),g=a(y),v=o(8),A=a(v),k=o(10),w=a(k),E=(0,w.default)("quill:selection"),M=function D(N){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;f(this,D),this.index=N,this.length=B},j=function(){function D(N,B){var S=this;f(this,D),this.emitter=B,this.scroll=N,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=u.default.create("cursor",this),this.lastRange=this.savedRange=new M(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){S.mouseDown||setTimeout(S.update.bind(S,A.default.sources.USER),1)}),this.emitter.on(A.default.events.EDITOR_CHANGE,function(P,z){P===A.default.events.TEXT_CHANGE&&z.length()>0&&S.update(A.default.sources.SILENT)}),this.emitter.on(A.default.events.SCROLL_BEFORE_UPDATE,function(){if(S.hasFocus()){var P=S.getNativeRange();P!=null&&P.start.node!==S.cursor.textNode&&S.emitter.once(A.default.events.SCROLL_UPDATE,function(){try{S.setNativeRange(P.start.node,P.start.offset,P.end.node,P.end.offset)}catch(z){}})}}),this.emitter.on(A.default.events.SCROLL_OPTIMIZE,function(P,z){if(z.range){var G=z.range,ee=G.startNode,F=G.startOffset,J=G.endNode,Z=G.endOffset;S.setNativeRange(ee,F,J,Z)}}),this.update(A.default.sources.SILENT)}return h(D,[{key:"handleComposition",value:function(){var N=this;this.root.addEventListener("compositionstart",function(){N.composing=!0}),this.root.addEventListener("compositionend",function(){if(N.composing=!1,N.cursor.parent){var B=N.cursor.restore();if(!B)return;setTimeout(function(){N.setNativeRange(B.startNode,B.startOffset,B.endNode,B.endOffset)},1)}})}},{key:"handleDragging",value:function(){var N=this;this.emitter.listenDOM("mousedown",document.body,function(){N.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){N.mouseDown=!1,N.update(A.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(N,B){if(this.scroll.whitelist==null||this.scroll.whitelist[N]){this.scroll.update();var S=this.getNativeRange();if(S!=null&&S.native.collapsed&&!u.default.query(N,u.default.Scope.BLOCK)){if(S.start.node!==this.cursor.textNode){var P=u.default.find(S.start.node,!1);if(P==null)return;if(P instanceof u.default.Leaf){var z=P.split(S.start.offset);P.parent.insertBefore(this.cursor,z)}else P.insertBefore(this.cursor,S.start.node);this.cursor.attach()}this.cursor.format(N,B),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(N){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=this.scroll.length();N=Math.min(N,S-1),B=Math.min(N+B,S-1)-N;var P=void 0,z=this.scroll.leaf(N),G=b(z,2),ee=G[0],F=G[1];if(ee==null)return null;var J=ee.position(F,!0),Z=b(J,2);P=Z[0],F=Z[1];var X=document.createRange();if(B>0){X.setStart(P,F);var I=this.scroll.leaf(N+B),H=b(I,2);if(ee=H[0],F=H[1],ee==null)return null;var W=ee.position(F,!0),te=b(W,2);return P=te[0],F=te[1],X.setEnd(P,F),X.getBoundingClientRect()}var re="left",se=void 0;return P instanceof Text?(F<P.data.length?(X.setStart(P,F),X.setEnd(P,F+1)):(X.setStart(P,F-1),X.setEnd(P,F),re="right"),se=X.getBoundingClientRect()):(se=ee.domNode.getBoundingClientRect(),F>0&&(re="right")),{bottom:se.top+se.height,height:se.height,left:se[re],right:se[re],top:se.top,width:0}}},{key:"getNativeRange",value:function(){var N=document.getSelection();if(N==null||N.rangeCount<=0)return null;var B=N.getRangeAt(0);if(B==null)return null;var S=this.normalizeNative(B);return E.info("getNativeRange",S),S}},{key:"getRange",value:function(){var N=this.getNativeRange();return N==null?[null,null]:[this.normalizedToRange(N),N]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(N){var B=this,S=[[N.start.node,N.start.offset]];N.native.collapsed||S.push([N.end.node,N.end.offset]);var P=S.map(function(ee){var F=b(ee,2),J=F[0],Z=F[1],X=u.default.find(J,!0),I=X.offset(B.scroll);return Z===0?I:X instanceof u.default.Container?I+X.length():I+X.index(J,Z)}),z=Math.min(Math.max.apply(Math,l(P)),this.scroll.length()-1),G=Math.min.apply(Math,[z].concat(l(P)));return new M(G,z-G)}},{key:"normalizeNative",value:function(N){if(!m(this.root,N.startContainer)||!N.collapsed&&!m(this.root,N.endContainer))return null;var B={start:{node:N.startContainer,offset:N.startOffset},end:{node:N.endContainer,offset:N.endOffset},native:N};return[B.start,B.end].forEach(function(S){for(var P=S.node,z=S.offset;!(P instanceof Text)&&P.childNodes.length>0;)if(P.childNodes.length>z)P=P.childNodes[z],z=0;else{if(P.childNodes.length!==z)break;P=P.lastChild,z=P instanceof Text?P.data.length:P.childNodes.length+1}S.node=P,S.offset=z}),B}},{key:"rangeToNative",value:function(N){var B=this,S=N.collapsed?[N.index]:[N.index,N.index+N.length],P=[],z=this.scroll.length();return S.forEach(function(G,ee){G=Math.min(z-1,G);var F=void 0,J=B.scroll.leaf(G),Z=b(J,2),X=Z[0],I=Z[1],H=X.position(I,ee!==0),W=b(H,2);F=W[0],I=W[1],P.push(F,I)}),P.length<2&&(P=P.concat(P)),P}},{key:"scrollIntoView",value:function(N){var B=this.lastRange;if(B!=null){var S=this.getBounds(B.index,B.length);if(S!=null){var P=this.scroll.length()-1,z=this.scroll.line(Math.min(B.index,P)),G=b(z,1),ee=G[0],F=ee;if(B.length>0){var J=this.scroll.line(Math.min(B.index+B.length,P));F=b(J,1)[0]}if(ee!=null&&F!=null){var Z=N.getBoundingClientRect();S.top<Z.top?N.scrollTop-=Z.top-S.top:S.bottom>Z.bottom&&(N.scrollTop+=S.bottom-Z.bottom)}}}}},{key:"setNativeRange",value:function(N,B){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:N,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:B,z=arguments.length>4&&arguments[4]!==void 0&&arguments[4];if(E.info("setNativeRange",N,B,S,P),N==null||this.root.parentNode!=null&&N.parentNode!=null&&S.parentNode!=null){var G=document.getSelection();if(G!=null)if(N!=null){this.hasFocus()||this.root.focus();var ee=(this.getNativeRange()||{}).native;if(ee==null||z||N!==ee.startContainer||B!==ee.startOffset||S!==ee.endContainer||P!==ee.endOffset){N.tagName=="BR"&&(B=[].indexOf.call(N.parentNode.childNodes,N),N=N.parentNode),S.tagName=="BR"&&(P=[].indexOf.call(S.parentNode.childNodes,S),S=S.parentNode);var F=document.createRange();F.setStart(N,B),F.setEnd(S,P),G.removeAllRanges(),G.addRange(F)}}else G.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(N){var B=arguments.length>1&&arguments[1]!==void 0&&arguments[1],S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A.default.sources.API;if(typeof B=="string"&&(S=B,B=!1),E.info("setRange",N),N!=null){var P=this.rangeToNative(N);this.setNativeRange.apply(this,l(P).concat([B]))}else this.setNativeRange(null);this.update(S)}},{key:"update",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A.default.sources.USER,B=this.lastRange,S=this.getRange(),P=b(S,2),z=P[0],G=P[1];if(this.lastRange=z,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,g.default)(B,this.lastRange)){var ee;!this.composing&&G!=null&&G.native.collapsed&&G.start.node!==this.cursor.textNode&&this.cursor.restore();var F=[A.default.events.SELECTION_CHANGE,(0,_.default)(this.lastRange),(0,_.default)(B),N];if((ee=this.emitter).emit.apply(ee,[A.default.events.EDITOR_CHANGE].concat(F)),N!==A.default.sources.SILENT){var J;(J=this.emitter).emit.apply(J,F)}}}}]),D}();s.Range=M,s.default=j},function(n,s,o){"use strict";function a(d,_){if(!(d instanceof _))throw new TypeError("Cannot call a class as a function")}function l(d,_){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||typeof _!="object"&&typeof _!="function"?d:_}function f(d,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);d.prototype=Object.create(_&&_.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(d,_):d.__proto__=_)}Object.defineProperty(s,"__esModule",{value:!0});var m=function(){function d(_,y){for(var g=0;g<y.length;g++){var v=y[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(_,v.key,v)}}return function(_,y,g){return y&&d(_.prototype,y),g&&d(_,g),_}}(),b=function d(_,y,g){_===null&&(_=Function.prototype);var v=Object.getOwnPropertyDescriptor(_,y);if(v===void 0){var A=Object.getPrototypeOf(_);return A===null?void 0:d(A,y,g)}if("value"in v)return v.value;var k=v.get;if(k!==void 0)return k.call(g)},h=o(0),p=function(d){return d&&d.__esModule?d:{default:d}}(h),u=function(d){function _(){return a(this,_),l(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return f(_,d),m(_,[{key:"insertInto",value:function(y,g){y.children.length===0?b(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertInto",this).call(this,y,g):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),_}(p.default.Embed);u.blotName="break",u.tagName="BR",s.default=u},function(n,s,o){"use strict";function a(p){var u=b.find(p);if(u==null)try{u=b.create(p)}catch(d){u=b.create(b.Scope.INLINE),[].slice.call(p.childNodes).forEach(function(_){u.domNode.appendChild(_)}),p.parentNode&&p.parentNode.replaceChild(u.domNode,p),u.attach()}return u}var l=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var _ in d)d.hasOwnProperty(_)&&(u[_]=d[_])};return function(u,d){function _(){this.constructor=u}p(u,d),u.prototype=d===null?Object.create(d):(_.prototype=d.prototype,new _)}}();Object.defineProperty(s,"__esModule",{value:!0});var f=o(44),m=o(30),b=o(1),h=function(p){function u(d){var _=p.call(this,d)||this;return _.build(),_}return l(u,p),u.prototype.appendChild=function(d){this.insertBefore(d)},u.prototype.attach=function(){p.prototype.attach.call(this),this.children.forEach(function(d){d.attach()})},u.prototype.build=function(){var d=this;this.children=new f.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(_){try{var y=a(_);d.insertBefore(y,d.children.head||void 0)}catch(g){if(g instanceof b.ParchmentError)return;throw g}})},u.prototype.deleteAt=function(d,_){if(d===0&&_===this.length())return this.remove();this.children.forEachAt(d,_,function(y,g,v){y.deleteAt(g,v)})},u.prototype.descendant=function(d,_){var y=this.children.find(_),g=y[0],v=y[1];return d.blotName==null&&d(g)||d.blotName!=null&&g instanceof d?[g,v]:g instanceof u?g.descendant(d,v):[null,-1]},u.prototype.descendants=function(d,_,y){_===void 0&&(_=0),y===void 0&&(y=Number.MAX_VALUE);var g=[],v=y;return this.children.forEachAt(_,y,function(A,k,w){(d.blotName==null&&d(A)||d.blotName!=null&&A instanceof d)&&g.push(A),A instanceof u&&(g=g.concat(A.descendants(d,k,v))),v-=w}),g},u.prototype.detach=function(){this.children.forEach(function(d){d.detach()}),p.prototype.detach.call(this)},u.prototype.formatAt=function(d,_,y,g){this.children.forEachAt(d,_,function(v,A,k){v.formatAt(A,k,y,g)})},u.prototype.insertAt=function(d,_,y){var g=this.children.find(d),v=g[0],A=g[1];if(v)v.insertAt(A,_,y);else{var k=y==null?b.create("text",_):b.create(_,y);this.appendChild(k)}},u.prototype.insertBefore=function(d,_){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(y){return d instanceof y}))throw new b.ParchmentError("Cannot insert "+d.statics.blotName+" into "+this.statics.blotName);d.insertInto(this,_)},u.prototype.length=function(){return this.children.reduce(function(d,_){return d+_.length()},0)},u.prototype.moveChildren=function(d,_){this.children.forEach(function(y){d.insertBefore(y,_)})},u.prototype.optimize=function(d){if(p.prototype.optimize.call(this,d),this.children.length===0)if(this.statics.defaultChild!=null){var _=b.create(this.statics.defaultChild);this.appendChild(_),_.optimize(d)}else this.remove()},u.prototype.path=function(d,_){_===void 0&&(_=!1);var y=this.children.find(d,_),g=y[0],v=y[1],A=[[this,d]];return g instanceof u?A.concat(g.path(v,_)):(g!=null&&A.push([g,v]),A)},u.prototype.removeChild=function(d){this.children.remove(d)},u.prototype.replace=function(d){d instanceof u&&d.moveChildren(this),p.prototype.replace.call(this,d)},u.prototype.split=function(d,_){if(_===void 0&&(_=!1),!_){if(d===0)return this;if(d===this.length())return this.next}var y=this.clone();return this.parent.insertBefore(y,this.next),this.children.forEachAt(d,this.length(),function(g,v,A){g=g.split(v,_),y.appendChild(g)}),y},u.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},u.prototype.update=function(d,_){var y=this,g=[],v=[];d.forEach(function(A){A.target===y.domNode&&A.type==="childList"&&(g.push.apply(g,A.addedNodes),v.push.apply(v,A.removedNodes))}),v.forEach(function(A){if(!(A.parentNode!=null&&A.tagName!=="IFRAME"&&document.body.compareDocumentPosition(A)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var k=b.find(A);k!=null&&(k.domNode.parentNode!=null&&k.domNode.parentNode!==y.domNode||k.detach())}}),g.filter(function(A){return A.parentNode==y.domNode}).sort(function(A,k){return A===k?0:A.compareDocumentPosition(k)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(A){var k=null;A.nextSibling!=null&&(k=b.find(A.nextSibling));var w=a(A);w.next==k&&w.next!=null||(w.parent!=null&&w.parent.removeChild(y),y.insertBefore(w,k||void 0))})},u}(m.default);s.default=h},function(n,s,o){"use strict";var a=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var _ in d)d.hasOwnProperty(_)&&(u[_]=d[_])};return function(u,d){function _(){this.constructor=u}p(u,d),u.prototype=d===null?Object.create(d):(_.prototype=d.prototype,new _)}}();Object.defineProperty(s,"__esModule",{value:!0});var l=o(12),f=o(31),m=o(17),b=o(1),h=function(p){function u(d){var _=p.call(this,d)||this;return _.attributes=new f.default(_.domNode),_}return a(u,p),u.formats=function(d){return typeof this.tagName=="string"||(Array.isArray(this.tagName)?d.tagName.toLowerCase():void 0)},u.prototype.format=function(d,_){var y=b.query(d);y instanceof l.default?this.attributes.attribute(y,_):_&&(y==null||d===this.statics.blotName&&this.formats()[d]===_||this.replaceWith(d,_))},u.prototype.formats=function(){var d=this.attributes.values(),_=this.statics.formats(this.domNode);return _!=null&&(d[this.statics.blotName]=_),d},u.prototype.replaceWith=function(d,_){var y=p.prototype.replaceWith.call(this,d,_);return this.attributes.copy(y),y},u.prototype.update=function(d,_){var y=this;p.prototype.update.call(this,d,_),d.some(function(g){return g.target===y.domNode&&g.type==="attributes"})&&this.attributes.build()},u.prototype.wrap=function(d,_){var y=p.prototype.wrap.call(this,d,_);return y instanceof u&&y.statics.scope===this.statics.scope&&this.attributes.move(y),y},u}(m.default);s.default=h},function(n,s,o){"use strict";var a=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var u in p)p.hasOwnProperty(u)&&(h[u]=p[u])};return function(h,p){function u(){this.constructor=h}b(h,p),h.prototype=p===null?Object.create(p):(u.prototype=p.prototype,new u)}}();Object.defineProperty(s,"__esModule",{value:!0});var l=o(30),f=o(1),m=function(b){function h(){return b!==null&&b.apply(this,arguments)||this}return a(h,b),h.value=function(p){return!0},h.prototype.index=function(p,u){return this.domNode===p||this.domNode.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(u,1):-1},h.prototype.position=function(p,u){var d=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return p>0&&(d+=1),[this.parent.domNode,d]},h.prototype.value=function(){var p;return p={},p[this.statics.blotName]=this.statics.value(this.domNode)||!0,p},h.scope=f.Scope.INLINE_BLOT,h}(l.default);s.default=m},function(n,s,o){function a(b){this.ops=b,this.index=0,this.offset=0}var l=o(11),f=o(3),m={attributes:{compose:function(b,h,p){typeof b!="object"&&(b={}),typeof h!="object"&&(h={});var u=f(!0,{},h);p||(u=Object.keys(u).reduce(function(_,y){return u[y]!=null&&(_[y]=u[y]),_},{}));for(var d in b)b[d]!==void 0&&h[d]===void 0&&(u[d]=b[d]);return Object.keys(u).length>0?u:void 0},diff:function(b,h){typeof b!="object"&&(b={}),typeof h!="object"&&(h={});var p=Object.keys(b).concat(Object.keys(h)).reduce(function(u,d){return l(b[d],h[d])||(u[d]=h[d]===void 0?null:h[d]),u},{});return Object.keys(p).length>0?p:void 0},transform:function(b,h,p){if(typeof b!="object")return h;if(typeof h=="object"){if(!p)return h;var u=Object.keys(h).reduce(function(d,_){return b[_]===void 0&&(d[_]=h[_]),d},{});return Object.keys(u).length>0?u:void 0}}},iterator:function(b){return new a(b)},length:function(b){return typeof b.delete=="number"?b.delete:typeof b.retain=="number"?b.retain:typeof b.insert=="string"?b.insert.length:1}};a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(b){b||(b=1/0);var h=this.ops[this.index];if(h){var p=this.offset,u=m.length(h);if(b>=u-p?(b=u-p,this.index+=1,this.offset=0):this.offset+=b,typeof h.delete=="number")return{delete:b};var d={};return h.attributes&&(d.attributes=h.attributes),typeof h.retain=="number"?d.retain=b:typeof h.insert=="string"?d.insert=h.insert.substr(p,b):d.insert=h.insert,d}return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?m.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var b=this.offset,h=this.index,p=this.next(),u=this.ops.slice(this.index);return this.offset=b,this.index=h,[p].concat(u)}return[]},n.exports=m},function(n,s){var o=function(){"use strict";function a(y,g){return g!=null&&y instanceof g}function l(y,g,v,A,k){function w(D,N){if(D===null)return null;if(N===0)return D;var B,S;if(typeof D!="object")return D;if(a(D,u))B=new u;else if(a(D,d))B=new d;else if(a(D,_))B=new _(function(I,H){D.then(function(W){I(w(W,N-1))},function(W){H(w(W,N-1))})});else if(l.__isArray(D))B=[];else if(l.__isRegExp(D))B=new RegExp(D.source,p(D)),D.lastIndex&&(B.lastIndex=D.lastIndex);else if(l.__isDate(D))B=new Date(D.getTime());else{if(j&&i.isBuffer(D))return B=i.allocUnsafe?i.allocUnsafe(D.length):new i(D.length),D.copy(B),B;a(D,Error)?B=Object.create(D):A===void 0?(S=Object.getPrototypeOf(D),B=Object.create(S)):(B=Object.create(A),S=A)}if(g){var P=E.indexOf(D);if(P!=-1)return M[P];E.push(D),M.push(B)}a(D,u)&&D.forEach(function(I,H){var W=w(H,N-1),te=w(I,N-1);B.set(W,te)}),a(D,d)&&D.forEach(function(I){var H=w(I,N-1);B.add(H)});for(var z in D){var G;S&&(G=Object.getOwnPropertyDescriptor(S,z)),G&&G.set==null||(B[z]=w(D[z],N-1))}if(Object.getOwnPropertySymbols)for(var ee=Object.getOwnPropertySymbols(D),z=0;z<ee.length;z++){var F=ee[z],J=Object.getOwnPropertyDescriptor(D,F);(!J||J.enumerable||k)&&(B[F]=w(D[F],N-1),J.enumerable||Object.defineProperty(B,F,{enumerable:!1}))}if(k)for(var Z=Object.getOwnPropertyNames(D),z=0;z<Z.length;z++){var X=Z[z],J=Object.getOwnPropertyDescriptor(D,X);J&&J.enumerable||(B[X]=w(D[X],N-1),Object.defineProperty(B,X,{enumerable:!1}))}return B}typeof g=="object"&&(v=g.depth,A=g.prototype,k=g.includeNonEnumerable,g=g.circular);var E=[],M=[],j=i!==void 0;return g===void 0&&(g=!0),v===void 0&&(v=1/0),w(y,v)}function f(y){return Object.prototype.toString.call(y)}function m(y){return typeof y=="object"&&f(y)==="[object Date]"}function b(y){return typeof y=="object"&&f(y)==="[object Array]"}function h(y){return typeof y=="object"&&f(y)==="[object RegExp]"}function p(y){var g="";return y.global&&(g+="g"),y.ignoreCase&&(g+="i"),y.multiline&&(g+="m"),g}var u;try{u=Map}catch(y){u=function(){}}var d;try{d=Set}catch(y){d=function(){}}var _;try{_=Promise}catch(y){_=function(){}}return l.clonePrototype=function(y){if(y===null)return null;var g=function(){};return g.prototype=y,new g},l.__objToStr=f,l.__isDate=m,l.__isArray=b,l.__isRegExp=h,l.__getRegExpFlags=p,l}();typeof n=="object"&&n.exports&&(n.exports=o)},function(n,s,o){"use strict";function a(B){return B&&B.__esModule?B:{default:B}}function l(B,S){if(!(B instanceof S))throw new TypeError("Cannot call a class as a function")}function f(B,S){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!S||typeof S!="object"&&typeof S!="function"?B:S}function m(B,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);B.prototype=Object.create(S&&S.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(B,S):B.__proto__=S)}function b(B){return B instanceof A.default||B instanceof v.BlockEmbed}Object.defineProperty(s,"__esModule",{value:!0});var h=function(){function B(S,P){var z=[],G=!0,ee=!1,F=void 0;try{for(var J,Z=S[Symbol.iterator]();!(G=(J=Z.next()).done)&&(z.push(J.value),!P||z.length!==P);G=!0);}catch(X){ee=!0,F=X}finally{try{!G&&Z.return&&Z.return()}finally{if(ee)throw F}}return z}return function(S,P){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return B(S,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=function(){function B(S,P){for(var z=0;z<P.length;z++){var G=P[z];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(S,G.key,G)}}return function(S,P,z){return P&&B(S.prototype,P),z&&B(S,z),S}}(),u=function B(S,P,z){S===null&&(S=Function.prototype);var G=Object.getOwnPropertyDescriptor(S,P);if(G===void 0){var ee=Object.getPrototypeOf(S);return ee===null?void 0:B(ee,P,z)}if("value"in G)return G.value;var F=G.get;if(F!==void 0)return F.call(z)},d=o(0),_=a(d),y=o(8),g=a(y),v=o(4),A=a(v),k=o(16),w=a(k),E=o(13),M=a(E),j=o(25),D=a(j),N=function(B){function S(P,z){l(this,S);var G=f(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,P));return G.emitter=z.emitter,Array.isArray(z.whitelist)&&(G.whitelist=z.whitelist.reduce(function(ee,F){return ee[F]=!0,ee},{})),G.domNode.addEventListener("DOMNodeInserted",function(){}),G.optimize(),G.enable(),G}return m(S,B),p(S,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(P,z){var G=this.line(P),ee=h(G,2),F=ee[0],J=ee[1],Z=this.line(P+z),X=h(Z,1),I=X[0];if(u(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"deleteAt",this).call(this,P,z),I!=null&&F!==I&&J>0){if(F instanceof v.BlockEmbed||I instanceof v.BlockEmbed)return void this.optimize();if(F instanceof M.default){var H=F.newlineIndex(F.length(),!0);if(H>-1&&(F=F.split(H+1))===I)return void this.optimize()}else if(I instanceof M.default){var W=I.newlineIndex(0);W>-1&&I.split(W+1)}var te=I.children.head instanceof w.default?null:I.children.head;F.moveChildren(I,te),F.remove()}this.optimize()}},{key:"enable",value:function(){var P=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.domNode.setAttribute("contenteditable",P)}},{key:"formatAt",value:function(P,z,G,ee){(this.whitelist==null||this.whitelist[G])&&(u(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"formatAt",this).call(this,P,z,G,ee),this.optimize())}},{key:"insertAt",value:function(P,z,G){if(G==null||this.whitelist==null||this.whitelist[z]){if(P>=this.length())if(G==null||_.default.query(z,_.default.Scope.BLOCK)==null){var ee=_.default.create(this.statics.defaultChild);this.appendChild(ee),G==null&&z.endsWith(`
`)&&(z=z.slice(0,-1)),ee.insertAt(0,z,G)}else{var F=_.default.create(z,G);this.appendChild(F)}else u(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertAt",this).call(this,P,z,G);this.optimize()}}},{key:"insertBefore",value:function(P,z){if(P.statics.scope===_.default.Scope.INLINE_BLOT){var G=_.default.create(this.statics.defaultChild);G.appendChild(P),P=G}u(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,P,z)}},{key:"leaf",value:function(P){return this.path(P).pop()||[null,-1]}},{key:"line",value:function(P){return P===this.length()?this.line(P-1):this.descendant(b,P)}},{key:"lines",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return function G(ee,F,J){var Z=[],X=J;return ee.children.forEachAt(F,J,function(I,H,W){b(I)?Z.push(I):I instanceof _.default.Container&&(Z=Z.concat(G(I,H,X))),X-=W}),Z}(this,P,z)}},{key:"optimize",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(u(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,P,z),P.length>0&&this.emitter.emit(g.default.events.SCROLL_OPTIMIZE,P,z))}},{key:"path",value:function(P){return u(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"path",this).call(this,P).slice(1)}},{key:"update",value:function(P){if(this.batch!==!0){var z=g.default.sources.USER;typeof P=="string"&&(z=P),Array.isArray(P)||(P=this.observer.takeRecords()),P.length>0&&this.emitter.emit(g.default.events.SCROLL_BEFORE_UPDATE,z,P),u(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"update",this).call(this,P.concat([])),P.length>0&&this.emitter.emit(g.default.events.SCROLL_UPDATE,z,P)}}}]),S}(_.default.Scroll);N.blotName="scroll",N.className="ql-editor",N.tagName="DIV",N.defaultChild="block",N.allowedChildren=[A.default,v.BlockEmbed,D.default],s.default=N},function(n,s,o){"use strict";function a(K){return K&&K.__esModule?K:{default:K}}function l(K,ie,ce){return ie in K?Object.defineProperty(K,ie,{value:ce,enumerable:!0,configurable:!0,writable:!0}):K[ie]=ce,K}function f(K,ie){if(!(K instanceof ie))throw new TypeError("Cannot call a class as a function")}function m(K,ie){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!ie||typeof ie!="object"&&typeof ie!="function"?K:ie}function b(K,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ie);K.prototype=Object.create(ie&&ie.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf(K,ie):K.__proto__=ie)}function h(K,ie){var ce,ye=K===se.keys.LEFT?"prefix":"suffix";return ce={key:K,shiftKey:ie,altKey:null},l(ce,ye,/^$/),l(ce,"handler",function(_e){var Ee=_e.index;K===se.keys.RIGHT&&(Ee+=_e.length+1);var Me=this.quill.getLeaf(Ee);return!(k(Me,1)[0]instanceof F.default.Embed)||(K===se.keys.LEFT?ie?this.quill.setSelection(_e.index-1,_e.length+1,Z.default.sources.USER):this.quill.setSelection(_e.index-1,Z.default.sources.USER):ie?this.quill.setSelection(_e.index,_e.length+1,Z.default.sources.USER):this.quill.setSelection(_e.index+_e.length+1,Z.default.sources.USER),!1)}),ce}function p(K,ie){if(!(K.index===0||this.quill.getLength()<=1)){var ce=this.quill.getLine(K.index),ye=k(ce,1),_e=ye[0],Ee={};if(ie.offset===0){var Me=this.quill.getLine(K.index-1),De=k(Me,1),Le=De[0];if(Le!=null&&Le.length()>1){var Fe=_e.formats(),Je=this.quill.getFormat(K.index-1,1);Ee=G.default.attributes.diff(Fe,Je)||{}}}var qe=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ie.prefix)?2:1;this.quill.deleteText(K.index-qe,qe,Z.default.sources.USER),Object.keys(Ee).length>0&&this.quill.formatLine(K.index-qe,qe,Ee,Z.default.sources.USER),this.quill.focus()}}function u(K,ie){var ce=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ie.suffix)?2:1;if(!(K.index>=this.quill.getLength()-ce)){var ye={},_e=0,Ee=this.quill.getLine(K.index),Me=k(Ee,1),De=Me[0];if(ie.offset>=De.length()-1){var Le=this.quill.getLine(K.index+1),Fe=k(Le,1),Je=Fe[0];if(Je){var qe=De.formats(),O=this.quill.getFormat(K.index,1);ye=G.default.attributes.diff(qe,O)||{},_e=Je.length()}}this.quill.deleteText(K.index,ce,Z.default.sources.USER),Object.keys(ye).length>0&&this.quill.formatLine(K.index+_e-1,ce,ye,Z.default.sources.USER)}}function d(K){var ie=this.quill.getLines(K),ce={};if(ie.length>1){var ye=ie[0].formats(),_e=ie[ie.length-1].formats();ce=G.default.attributes.diff(_e,ye)||{}}this.quill.deleteText(K,Z.default.sources.USER),Object.keys(ce).length>0&&this.quill.formatLine(K.index,1,ce,Z.default.sources.USER),this.quill.setSelection(K.index,Z.default.sources.SILENT),this.quill.focus()}function _(K,ie){var ce=this;K.length>0&&this.quill.scroll.deleteAt(K.index,K.length);var ye=Object.keys(ie.format).reduce(function(_e,Ee){return F.default.query(Ee,F.default.Scope.BLOCK)&&!Array.isArray(ie.format[Ee])&&(_e[Ee]=ie.format[Ee]),_e},{});this.quill.insertText(K.index,`
`,ye,Z.default.sources.USER),this.quill.setSelection(K.index+1,Z.default.sources.SILENT),this.quill.focus(),Object.keys(ie.format).forEach(function(_e){ye[_e]==null&&(Array.isArray(ie.format[_e])||_e!=="link"&&ce.quill.format(_e,ie.format[_e],Z.default.sources.USER))})}function y(K){return{key:se.keys.TAB,shiftKey:!K,format:{"code-block":!0},handler:function(ie){var ce=F.default.query("code-block"),ye=ie.index,_e=ie.length,Ee=this.quill.scroll.descendant(ce,ye),Me=k(Ee,2),De=Me[0],Le=Me[1];if(De!=null){var Fe=this.quill.getIndex(De),Je=De.newlineIndex(Le,!0)+1,qe=De.newlineIndex(Fe+Le+_e),O=De.domNode.textContent.slice(Je,qe).split(`
`);Le=0,O.forEach(function(C,q){K?(De.insertAt(Je+Le,ce.TAB),Le+=ce.TAB.length,q===0?ye+=ce.TAB.length:_e+=ce.TAB.length):C.startsWith(ce.TAB)&&(De.deleteAt(Je+Le,ce.TAB.length),Le-=ce.TAB.length,q===0?ye-=ce.TAB.length:_e-=ce.TAB.length),Le+=C.length+1}),this.quill.update(Z.default.sources.USER),this.quill.setSelection(ye,_e,Z.default.sources.SILENT)}}}}function g(K){return{key:K[0].toUpperCase(),shortKey:!0,handler:function(ie,ce){this.quill.format(K,!ce.format[K],Z.default.sources.USER)}}}function v(K){if(typeof K=="string"||typeof K=="number")return v({key:K});if((K===void 0?"undefined":A(K))==="object"&&(K=(0,M.default)(K,!1)),typeof K.key=="string")if(se.keys[K.key.toUpperCase()]!=null)K.key=se.keys[K.key.toUpperCase()];else{if(K.key.length!==1)return null;K.key=K.key.toUpperCase().charCodeAt(0)}return K.shortKey&&(K[re]=K.shortKey,delete K.shortKey),K}Object.defineProperty(s,"__esModule",{value:!0}),s.SHORTKEY=s.default=void 0;var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},k=function(){function K(ie,ce){var ye=[],_e=!0,Ee=!1,Me=void 0;try{for(var De,Le=ie[Symbol.iterator]();!(_e=(De=Le.next()).done)&&(ye.push(De.value),!ce||ye.length!==ce);_e=!0);}catch(Fe){Ee=!0,Me=Fe}finally{try{!_e&&Le.return&&Le.return()}finally{if(Ee)throw Me}}return ye}return function(ie,ce){if(Array.isArray(ie))return ie;if(Symbol.iterator in Object(ie))return K(ie,ce);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function K(ie,ce){for(var ye=0;ye<ce.length;ye++){var _e=ce[ye];_e.enumerable=_e.enumerable||!1,_e.configurable=!0,"value"in _e&&(_e.writable=!0),Object.defineProperty(ie,_e.key,_e)}}return function(ie,ce,ye){return ce&&K(ie.prototype,ce),ye&&K(ie,ye),ie}}(),E=o(21),M=a(E),j=o(11),D=a(j),N=o(3),B=a(N),S=o(2),P=a(S),z=o(20),G=a(z),ee=o(0),F=a(ee),J=o(5),Z=a(J),X=o(10),I=a(X),H=o(9),W=a(H),te=(0,I.default)("quill:keyboard"),re=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",se=function(K){function ie(ce,ye){f(this,ie);var _e=m(this,(ie.__proto__||Object.getPrototypeOf(ie)).call(this,ce,ye));return _e.bindings={},Object.keys(_e.options.bindings).forEach(function(Ee){(Ee!=="list autofill"||ce.scroll.whitelist==null||ce.scroll.whitelist.list)&&_e.options.bindings[Ee]&&_e.addBinding(_e.options.bindings[Ee])}),_e.addBinding({key:ie.keys.ENTER,shiftKey:null},_),_e.addBinding({key:ie.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(_e.addBinding({key:ie.keys.BACKSPACE},{collapsed:!0},p),_e.addBinding({key:ie.keys.DELETE},{collapsed:!0},u)):(_e.addBinding({key:ie.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},p),_e.addBinding({key:ie.keys.DELETE},{collapsed:!0,suffix:/^.?$/},u)),_e.addBinding({key:ie.keys.BACKSPACE},{collapsed:!1},d),_e.addBinding({key:ie.keys.DELETE},{collapsed:!1},d),_e.addBinding({key:ie.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},p),_e.listen(),_e}return b(ie,K),w(ie,null,[{key:"match",value:function(ce,ye){return ye=v(ye),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(_e){return!!ye[_e]!==ce[_e]&&ye[_e]!==null})&&ye.key===(ce.which||ce.keyCode)}}]),w(ie,[{key:"addBinding",value:function(ce){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ee=v(ce);if(Ee==null||Ee.key==null)return te.warn("Attempted to add invalid keyboard binding",Ee);typeof ye=="function"&&(ye={handler:ye}),typeof _e=="function"&&(_e={handler:_e}),Ee=(0,B.default)(Ee,ye,_e),this.bindings[Ee.key]=this.bindings[Ee.key]||[],this.bindings[Ee.key].push(Ee)}},{key:"listen",value:function(){var ce=this;this.quill.root.addEventListener("keydown",function(ye){if(!ye.defaultPrevented){var _e=ye.which||ye.keyCode,Ee=(ce.bindings[_e]||[]).filter(function(je){return ie.match(ye,je)});if(Ee.length!==0){var Me=ce.quill.getSelection();if(Me!=null&&ce.quill.hasFocus()){var De=ce.quill.getLine(Me.index),Le=k(De,2),Fe=Le[0],Je=Le[1],qe=ce.quill.getLeaf(Me.index),O=k(qe,2),C=O[0],q=O[1],Q=Me.length===0?[C,q]:ce.quill.getLeaf(Me.index+Me.length),ne=k(Q,2),de=ne[0],xe=ne[1],ve=C instanceof F.default.Text?C.value().slice(0,q):"",Be=de instanceof F.default.Text?de.value().slice(xe):"",$e={collapsed:Me.length===0,empty:Me.length===0&&Fe.length()<=1,format:ce.quill.getFormat(Me),offset:Je,prefix:ve,suffix:Be};Ee.some(function(je){if(je.collapsed!=null&&je.collapsed!==$e.collapsed||je.empty!=null&&je.empty!==$e.empty||je.offset!=null&&je.offset!==$e.offset)return!1;if(Array.isArray(je.format)){if(je.format.every(function(et){return $e.format[et]==null}))return!1}else if(A(je.format)==="object"&&!Object.keys(je.format).every(function(et){return je.format[et]===!0?$e.format[et]!=null:je.format[et]===!1?$e.format[et]==null:(0,D.default)(je.format[et],$e.format[et])}))return!1;return!(je.prefix!=null&&!je.prefix.test($e.prefix))&&!(je.suffix!=null&&!je.suffix.test($e.suffix))&&je.handler.call(ce,Me,$e)!==!0})&&ye.preventDefault()}}}})}}]),ie}(W.default);se.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},se.DEFAULTS={bindings:{bold:g("bold"),italic:g("italic"),underline:g("underline"),indent:{key:se.keys.TAB,format:["blockquote","indent","list"],handler:function(K,ie){if(ie.collapsed&&ie.offset!==0)return!0;this.quill.format("indent","+1",Z.default.sources.USER)}},outdent:{key:se.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(K,ie){if(ie.collapsed&&ie.offset!==0)return!0;this.quill.format("indent","-1",Z.default.sources.USER)}},"outdent backspace":{key:se.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(K,ie){ie.format.indent!=null?this.quill.format("indent","-1",Z.default.sources.USER):ie.format.list!=null&&this.quill.format("list",!1,Z.default.sources.USER)}},"indent code-block":y(!0),"outdent code-block":y(!1),"remove tab":{key:se.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(K){this.quill.deleteText(K.index-1,1,Z.default.sources.USER)}},tab:{key:se.keys.TAB,handler:function(K){this.quill.history.cutoff();var ie=new P.default().retain(K.index).delete(K.length).insert("	");this.quill.updateContents(ie,Z.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(K.index+1,Z.default.sources.SILENT)}},"list empty enter":{key:se.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(K,ie){this.quill.format("list",!1,Z.default.sources.USER),ie.format.indent&&this.quill.format("indent",!1,Z.default.sources.USER)}},"checklist enter":{key:se.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(K){var ie=this.quill.getLine(K.index),ce=k(ie,2),ye=ce[0],_e=ce[1],Ee=(0,B.default)({},ye.formats(),{list:"checked"}),Me=new P.default().retain(K.index).insert(`
`,Ee).retain(ye.length()-_e-1).retain(1,{list:"unchecked"});this.quill.updateContents(Me,Z.default.sources.USER),this.quill.setSelection(K.index+1,Z.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:se.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(K,ie){var ce=this.quill.getLine(K.index),ye=k(ce,2),_e=ye[0],Ee=ye[1],Me=new P.default().retain(K.index).insert(`
`,ie.format).retain(_e.length()-Ee-1).retain(1,{header:null});this.quill.updateContents(Me,Z.default.sources.USER),this.quill.setSelection(K.index+1,Z.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(K,ie){var ce=ie.prefix.length,ye=this.quill.getLine(K.index),_e=k(ye,2),Ee=_e[0],Me=_e[1];if(Me>ce)return!0;var De=void 0;switch(ie.prefix.trim()){case"[]":case"[ ]":De="unchecked";break;case"[x]":De="checked";break;case"-":case"*":De="bullet";break;default:De="ordered"}this.quill.insertText(K.index," ",Z.default.sources.USER),this.quill.history.cutoff();var Le=new P.default().retain(K.index-Me).delete(ce+1).retain(Ee.length()-2-Me).retain(1,{list:De});this.quill.updateContents(Le,Z.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(K.index-ce,Z.default.sources.SILENT)}},"code exit":{key:se.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(K){var ie=this.quill.getLine(K.index),ce=k(ie,2),ye=ce[0],_e=ce[1],Ee=new P.default().retain(K.index+ye.length()-_e-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Ee,Z.default.sources.USER)}},"embed left":h(se.keys.LEFT,!1),"embed left shift":h(se.keys.LEFT,!0),"embed right":h(se.keys.RIGHT,!1),"embed right shift":h(se.keys.RIGHT,!0)}},s.default=se,s.SHORTKEY=re},function(n,s,o){"use strict";function a(v){return v&&v.__esModule?v:{default:v}}function l(v,A){if(!(v instanceof A))throw new TypeError("Cannot call a class as a function")}function f(v,A){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||typeof A!="object"&&typeof A!="function"?v:A}function m(v,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);v.prototype=Object.create(A&&A.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(v,A):v.__proto__=A)}Object.defineProperty(s,"__esModule",{value:!0});var b=function(){function v(A,k){var w=[],E=!0,M=!1,j=void 0;try{for(var D,N=A[Symbol.iterator]();!(E=(D=N.next()).done)&&(w.push(D.value),!k||w.length!==k);E=!0);}catch(B){M=!0,j=B}finally{try{!E&&N.return&&N.return()}finally{if(M)throw j}}return w}return function(A,k){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return v(A,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function v(A,k,w){A===null&&(A=Function.prototype);var E=Object.getOwnPropertyDescriptor(A,k);if(E===void 0){var M=Object.getPrototypeOf(A);return M===null?void 0:v(M,k,w)}if("value"in E)return E.value;var j=E.get;if(j!==void 0)return j.call(w)},p=function(){function v(A,k){for(var w=0;w<k.length;w++){var E=k[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(A,E.key,E)}}return function(A,k,w){return k&&v(A.prototype,k),w&&v(A,w),A}}(),u=o(0),d=a(u),_=o(7),y=a(_),g=function(v){function A(k,w){l(this,A);var E=f(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,k));return E.selection=w,E.textNode=document.createTextNode(A.CONTENTS),E.domNode.appendChild(E.textNode),E._length=0,E}return m(A,v),p(A,null,[{key:"value",value:function(){}}]),p(A,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(k,w){if(this._length!==0)return h(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,k,w);for(var E=this,M=0;E!=null&&E.statics.scope!==d.default.Scope.BLOCK_BLOT;)M+=E.offset(E.parent),E=E.parent;E!=null&&(this._length=A.CONTENTS.length,E.optimize(),E.formatAt(M,A.CONTENTS.length,k,w),this._length=0)}},{key:"index",value:function(k,w){return k===this.textNode?0:h(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"index",this).call(this,k,w)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){h(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&this.parent!=null){var k=this.textNode,w=this.selection.getNativeRange(),E=void 0,M=void 0,j=void 0;if(w!=null&&w.start.node===k&&w.end.node===k){var D=[k,w.start.offset,w.end.offset];E=D[0],M=D[1],j=D[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==A.CONTENTS){var N=this.textNode.data.split(A.CONTENTS).join("");this.next instanceof y.default?(E=this.next.domNode,this.next.insertAt(0,N),this.textNode.data=A.CONTENTS):(this.textNode.data=N,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(A.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),M!=null){var B=[M,j].map(function(P){return Math.max(0,Math.min(E.data.length,P-1))}),S=b(B,2);return M=S[0],j=S[1],{startNode:E,startOffset:M,endNode:E,endOffset:j}}}}},{key:"update",value:function(k,w){var E=this;if(k.some(function(j){return j.type==="characterData"&&j.target===E.textNode})){var M=this.restore();M&&(w.range=M)}}},{key:"value",value:function(){return""}}]),A}(d.default.Embed);g.blotName="cursor",g.className="ql-cursor",g.tagName="span",g.CONTENTS="\uFEFF",s.default=g},function(n,s,o){"use strict";function a(_){return _&&_.__esModule?_:{default:_}}function l(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function f(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||typeof y!="object"&&typeof y!="function"?_:y}function m(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}Object.defineProperty(s,"__esModule",{value:!0});var b=o(0),h=a(b),p=o(4),u=a(p),d=function(_){function y(){return l(this,y),f(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return m(y,_),y}(h.default.Container);d.allowedChildren=[u.default,p.BlockEmbed,d],s.default=d},function(n,s,o){"use strict";function a(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function l(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||typeof g!="object"&&typeof g!="function"?y:g}function f(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}Object.defineProperty(s,"__esModule",{value:!0}),s.ColorStyle=s.ColorClass=s.ColorAttributor=void 0;var m=function(){function y(g,v){for(var A=0;A<v.length;A++){var k=v[A];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(g,k.key,k)}}return function(g,v,A){return v&&y(g.prototype,v),A&&y(g,A),g}}(),b=function y(g,v,A){g===null&&(g=Function.prototype);var k=Object.getOwnPropertyDescriptor(g,v);if(k===void 0){var w=Object.getPrototypeOf(g);return w===null?void 0:y(w,v,A)}if("value"in k)return k.value;var E=k.get;if(E!==void 0)return E.call(A)},h=o(0),p=function(y){return y&&y.__esModule?y:{default:y}}(h),u=function(y){function g(){return a(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return f(g,y),m(g,[{key:"value",value:function(v){var A=b(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,v);return A.startsWith("rgb(")?(A=A.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+A.split(",").map(function(k){return("00"+parseInt(k).toString(16)).slice(-2)}).join("")):A}}]),g}(p.default.Attributor.Style),d=new p.default.Attributor.Class("color","ql-color",{scope:p.default.Scope.INLINE}),_=new u("color","color",{scope:p.default.Scope.INLINE});s.ColorAttributor=u,s.ColorClass=d,s.ColorStyle=_},function(n,s,o){"use strict";function a(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function l(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||typeof y!="object"&&typeof y!="function"?_:y}function f(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}function m(_,y){var g=document.createElement("a");g.href=_;var v=g.href.slice(0,g.href.indexOf(":"));return y.indexOf(v)>-1}Object.defineProperty(s,"__esModule",{value:!0}),s.sanitize=s.default=void 0;var b=function(){function _(y,g){for(var v=0;v<g.length;v++){var A=g[v];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}return function(y,g,v){return g&&_(y.prototype,g),v&&_(y,v),y}}(),h=function _(y,g,v){y===null&&(y=Function.prototype);var A=Object.getOwnPropertyDescriptor(y,g);if(A===void 0){var k=Object.getPrototypeOf(y);return k===null?void 0:_(k,g,v)}if("value"in A)return A.value;var w=A.get;if(w!==void 0)return w.call(v)},p=o(6),u=function(_){return _&&_.__esModule?_:{default:_}}(p),d=function(_){function y(){return a(this,y),l(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return f(y,_),b(y,[{key:"format",value:function(g,v){if(g!==this.statics.blotName||!v)return h(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,g,v);v=this.constructor.sanitize(v),this.domNode.setAttribute("href",v)}}],[{key:"create",value:function(g){var v=h(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,g);return g=this.sanitize(g),v.setAttribute("href",g),v.setAttribute("rel","noopener noreferrer"),v.setAttribute("target","_blank"),v}},{key:"formats",value:function(g){return g.getAttribute("href")}},{key:"sanitize",value:function(g){return m(g,this.PROTOCOL_WHITELIST)?g:this.SANITIZED_URL}}]),y}(u.default);d.blotName="link",d.tagName="A",d.SANITIZED_URL="about:blank",d.PROTOCOL_WHITELIST=["http","https","mailto","tel"],s.default=d,s.sanitize=m},function(n,s,o){"use strict";function a(g){return g&&g.__esModule?g:{default:g}}function l(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function f(g,v){g.setAttribute(v,g.getAttribute(v)!=="true")}Object.defineProperty(s,"__esModule",{value:!0});var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},b=function(){function g(v,A){for(var k=0;k<A.length;k++){var w=A[k];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,A,k){return A&&g(v.prototype,A),k&&g(v,k),v}}(),h=o(23),p=a(h),u=o(107),d=a(u),_=0,y=function(){function g(v){var A=this;l(this,g),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){A.togglePicker()}),this.label.addEventListener("keydown",function(k){switch(k.keyCode){case p.default.keys.ENTER:A.togglePicker();break;case p.default.keys.ESCAPE:A.escape(),k.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return b(g,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),f(this.label,"aria-expanded"),f(this.options,"aria-hidden")}},{key:"buildItem",value:function(v){var A=this,k=document.createElement("span");return k.tabIndex="0",k.setAttribute("role","button"),k.classList.add("ql-picker-item"),v.hasAttribute("value")&&k.setAttribute("data-value",v.getAttribute("value")),v.textContent&&k.setAttribute("data-label",v.textContent),k.addEventListener("click",function(){A.selectItem(k,!0)}),k.addEventListener("keydown",function(w){switch(w.keyCode){case p.default.keys.ENTER:A.selectItem(k,!0),w.preventDefault();break;case p.default.keys.ESCAPE:A.escape(),w.preventDefault()}}),k}},{key:"buildLabel",value:function(){var v=document.createElement("span");return v.classList.add("ql-picker-label"),v.innerHTML=d.default,v.tabIndex="0",v.setAttribute("role","button"),v.setAttribute("aria-expanded","false"),this.container.appendChild(v),v}},{key:"buildOptions",value:function(){var v=this,A=document.createElement("span");A.classList.add("ql-picker-options"),A.setAttribute("aria-hidden","true"),A.tabIndex="-1",A.id="ql-picker-options-"+_,_+=1,this.label.setAttribute("aria-controls",A.id),this.options=A,[].slice.call(this.select.options).forEach(function(k){var w=v.buildItem(k);A.appendChild(w),k.selected===!0&&v.selectItem(w)}),this.container.appendChild(A)}},{key:"buildPicker",value:function(){var v=this;[].slice.call(this.select.attributes).forEach(function(A){v.container.setAttribute(A.name,A.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var v=this;this.close(),setTimeout(function(){return v.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(v){var A=arguments.length>1&&arguments[1]!==void 0&&arguments[1],k=this.container.querySelector(".ql-selected");if(v!==k&&(k!=null&&k.classList.remove("ql-selected"),v!=null&&(v.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(v.parentNode.children,v),v.hasAttribute("data-value")?this.label.setAttribute("data-value",v.getAttribute("data-value")):this.label.removeAttribute("data-value"),v.hasAttribute("data-label")?this.label.setAttribute("data-label",v.getAttribute("data-label")):this.label.removeAttribute("data-label"),A))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event=="undefined"?"undefined":m(Event))==="object"){var w=document.createEvent("Event");w.initEvent("change",!0,!0),this.select.dispatchEvent(w)}this.close()}}},{key:"update",value:function(){var v=void 0;if(this.select.selectedIndex>-1){var A=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];v=this.select.options[this.select.selectedIndex],this.selectItem(A)}else this.selectItem(null);var k=v!=null&&v!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",k)}}]),g}();s.default=y},function(n,s,o){"use strict";function a(F){return F&&F.__esModule?F:{default:F}}Object.defineProperty(s,"__esModule",{value:!0});var l=o(0),f=a(l),m=o(5),b=a(m),h=o(4),p=a(h),u=o(16),d=a(u),_=o(25),y=a(_),g=o(24),v=a(g),A=o(35),k=a(A),w=o(6),E=a(w),M=o(22),j=a(M),D=o(7),N=a(D),B=o(55),S=a(B),P=o(42),z=a(P),G=o(23),ee=a(G);b.default.register({"blots/block":p.default,"blots/block/embed":h.BlockEmbed,"blots/break":d.default,"blots/container":y.default,"blots/cursor":v.default,"blots/embed":k.default,"blots/inline":E.default,"blots/scroll":j.default,"blots/text":N.default,"modules/clipboard":S.default,"modules/history":z.default,"modules/keyboard":ee.default}),f.default.register(p.default,d.default,v.default,E.default,j.default,N.default),s.default=b.default},function(n,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=o(1),l=function(){function f(m){this.domNode=m,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(f.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),f.create=function(m){if(this.tagName==null)throw new a.ParchmentError("Blot definition missing tagName");var b;return Array.isArray(this.tagName)?(typeof m=="string"&&(m=m.toUpperCase(),parseInt(m).toString()===m&&(m=parseInt(m))),b=typeof m=="number"?document.createElement(this.tagName[m-1]):this.tagName.indexOf(m)>-1?document.createElement(m):document.createElement(this.tagName[0])):b=document.createElement(this.tagName),this.className&&b.classList.add(this.className),b},f.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},f.prototype.clone=function(){var m=this.domNode.cloneNode(!1);return a.create(m)},f.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},f.prototype.deleteAt=function(m,b){this.isolate(m,b).remove()},f.prototype.formatAt=function(m,b,h,p){var u=this.isolate(m,b);if(a.query(h,a.Scope.BLOT)!=null&&p)u.wrap(h,p);else if(a.query(h,a.Scope.ATTRIBUTE)!=null){var d=a.create(this.statics.scope);u.wrap(d),d.format(h,p)}},f.prototype.insertAt=function(m,b,h){var p=h==null?a.create("text",b):a.create(b,h),u=this.split(m);this.parent.insertBefore(p,u)},f.prototype.insertInto=function(m,b){b===void 0&&(b=null),this.parent!=null&&this.parent.children.remove(this);var h=null;m.children.insertBefore(this,b),b!=null&&(h=b.domNode),this.domNode.parentNode==m.domNode&&this.domNode.nextSibling==h||m.domNode.insertBefore(this.domNode,h),this.parent=m,this.attach()},f.prototype.isolate=function(m,b){var h=this.split(m);return h.split(b),h},f.prototype.length=function(){return 1},f.prototype.offset=function(m){return m===void 0&&(m=this.parent),this.parent==null||this==m?0:this.parent.children.offset(this)+this.parent.offset(m)},f.prototype.optimize=function(m){this.domNode[a.DATA_KEY]!=null&&delete this.domNode[a.DATA_KEY].mutations},f.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},f.prototype.replace=function(m){m.parent!=null&&(m.parent.insertBefore(this,m.next),m.remove())},f.prototype.replaceWith=function(m,b){var h=typeof m=="string"?a.create(m,b):m;return h.replace(this),h},f.prototype.split=function(m,b){return m===0?this:this.next},f.prototype.update=function(m,b){},f.prototype.wrap=function(m,b){var h=typeof m=="string"?a.create(m,b):m;return this.parent!=null&&this.parent.insertBefore(h,this.next),h.appendChild(this),h},f.blotName="abstract",f}();s.default=l},function(n,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=o(12),l=o(32),f=o(33),m=o(1),b=function(){function h(p){this.attributes={},this.domNode=p,this.build()}return h.prototype.attribute=function(p,u){u?p.add(this.domNode,u)&&(p.value(this.domNode)!=null?this.attributes[p.attrName]=p:delete this.attributes[p.attrName]):(p.remove(this.domNode),delete this.attributes[p.attrName])},h.prototype.build=function(){var p=this;this.attributes={};var u=a.default.keys(this.domNode),d=l.default.keys(this.domNode),_=f.default.keys(this.domNode);u.concat(d).concat(_).forEach(function(y){var g=m.query(y,m.Scope.ATTRIBUTE);g instanceof a.default&&(p.attributes[g.attrName]=g)})},h.prototype.copy=function(p){var u=this;Object.keys(this.attributes).forEach(function(d){var _=u.attributes[d].value(u.domNode);p.format(d,_)})},h.prototype.move=function(p){var u=this;this.copy(p),Object.keys(this.attributes).forEach(function(d){u.attributes[d].remove(u.domNode)}),this.attributes={}},h.prototype.values=function(){var p=this;return Object.keys(this.attributes).reduce(function(u,d){return u[d]=p.attributes[d].value(p.domNode),u},{})},h}();s.default=b},function(n,s,o){"use strict";function a(b,h){return(b.getAttribute("class")||"").split(/\s+/).filter(function(p){return p.indexOf(h+"-")===0})}var l=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var u in p)p.hasOwnProperty(u)&&(h[u]=p[u])};return function(h,p){function u(){this.constructor=h}b(h,p),h.prototype=p===null?Object.create(p):(u.prototype=p.prototype,new u)}}();Object.defineProperty(s,"__esModule",{value:!0});var f=o(12),m=function(b){function h(){return b!==null&&b.apply(this,arguments)||this}return l(h,b),h.keys=function(p){return(p.getAttribute("class")||"").split(/\s+/).map(function(u){return u.split("-").slice(0,-1).join("-")})},h.prototype.add=function(p,u){return!!this.canAdd(p,u)&&(this.remove(p),p.classList.add(this.keyName+"-"+u),!0)},h.prototype.remove=function(p){a(p,this.keyName).forEach(function(u){p.classList.remove(u)}),p.classList.length===0&&p.removeAttribute("class")},h.prototype.value=function(p){var u=a(p,this.keyName)[0]||"",d=u.slice(this.keyName.length+1);return this.canAdd(p,d)?d:""},h}(f.default);s.default=m},function(n,s,o){"use strict";function a(b){var h=b.split("-"),p=h.slice(1).map(function(u){return u[0].toUpperCase()+u.slice(1)}).join("");return h[0]+p}var l=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var u in p)p.hasOwnProperty(u)&&(h[u]=p[u])};return function(h,p){function u(){this.constructor=h}b(h,p),h.prototype=p===null?Object.create(p):(u.prototype=p.prototype,new u)}}();Object.defineProperty(s,"__esModule",{value:!0});var f=o(12),m=function(b){function h(){return b!==null&&b.apply(this,arguments)||this}return l(h,b),h.keys=function(p){return(p.getAttribute("style")||"").split(";").map(function(u){return u.split(":")[0].trim()})},h.prototype.add=function(p,u){return!!this.canAdd(p,u)&&(p.style[a(this.keyName)]=u,!0)},h.prototype.remove=function(p){p.style[a(this.keyName)]="",p.getAttribute("style")||p.removeAttribute("style")},h.prototype.value=function(p){var u=p.style[a(this.keyName)];return this.canAdd(p,u)?u:""},h}(f.default);s.default=m},function(n,s,o){"use strict";function a(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(s,"__esModule",{value:!0});var l=function(){function m(b,h){for(var p=0;p<h.length;p++){var u=h[p];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(b,u.key,u)}}return function(b,h,p){return h&&m(b.prototype,h),p&&m(b,p),b}}(),f=function(){function m(b,h){a(this,m),this.quill=b,this.options=h,this.modules={}}return l(m,[{key:"init",value:function(){var b=this;Object.keys(this.options.modules).forEach(function(h){b.modules[h]==null&&b.addModule(h)})}},{key:"addModule",value:function(b){var h=this.quill.constructor.import("modules/"+b);return this.modules[b]=new h(this.quill,this.options.modules[b]||{}),this.modules[b]}}]),m}();f.DEFAULTS={modules:{}},f.themes={default:f},s.default=f},function(n,s,o){"use strict";function a(v){return v&&v.__esModule?v:{default:v}}function l(v,A){if(!(v instanceof A))throw new TypeError("Cannot call a class as a function")}function f(v,A){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||typeof A!="object"&&typeof A!="function"?v:A}function m(v,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);v.prototype=Object.create(A&&A.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(v,A):v.__proto__=A)}Object.defineProperty(s,"__esModule",{value:!0});var b=function(){function v(A,k){for(var w=0;w<k.length;w++){var E=k[w];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(A,E.key,E)}}return function(A,k,w){return k&&v(A.prototype,k),w&&v(A,w),A}}(),h=function v(A,k,w){A===null&&(A=Function.prototype);var E=Object.getOwnPropertyDescriptor(A,k);if(E===void 0){var M=Object.getPrototypeOf(A);return M===null?void 0:v(M,k,w)}if("value"in E)return E.value;var j=E.get;if(j!==void 0)return j.call(w)},p=o(0),u=a(p),d=o(7),_=a(d),y="\uFEFF",g=function(v){function A(k){l(this,A);var w=f(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,k));return w.contentNode=document.createElement("span"),w.contentNode.setAttribute("contenteditable",!1),[].slice.call(w.domNode.childNodes).forEach(function(E){w.contentNode.appendChild(E)}),w.leftGuard=document.createTextNode(y),w.rightGuard=document.createTextNode(y),w.domNode.appendChild(w.leftGuard),w.domNode.appendChild(w.contentNode),w.domNode.appendChild(w.rightGuard),w}return m(A,v),b(A,[{key:"index",value:function(k,w){return k===this.leftGuard?0:k===this.rightGuard?1:h(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"index",this).call(this,k,w)}},{key:"restore",value:function(k){var w=void 0,E=void 0,M=k.data.split(y).join("");if(k===this.leftGuard)if(this.prev instanceof _.default){var j=this.prev.length();this.prev.insertAt(j,M),w={startNode:this.prev.domNode,startOffset:j+M.length}}else E=document.createTextNode(M),this.parent.insertBefore(u.default.create(E),this),w={startNode:E,startOffset:M.length};else k===this.rightGuard&&(this.next instanceof _.default?(this.next.insertAt(0,M),w={startNode:this.next.domNode,startOffset:M.length}):(E=document.createTextNode(M),this.parent.insertBefore(u.default.create(E),this.next),w={startNode:E,startOffset:M.length}));return k.data=y,w}},{key:"update",value:function(k,w){var E=this;k.forEach(function(M){if(M.type==="characterData"&&(M.target===E.leftGuard||M.target===E.rightGuard)){var j=E.restore(M.target);j&&(w.range=j)}})}}]),A}(u.default.Embed);s.default=g},function(n,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.AlignStyle=s.AlignClass=s.AlignAttribute=void 0;var a=o(0),l=function(p){return p&&p.__esModule?p:{default:p}}(a),f={scope:l.default.Scope.BLOCK,whitelist:["right","center","justify"]},m=new l.default.Attributor.Attribute("align","align",f),b=new l.default.Attributor.Class("align","ql-align",f),h=new l.default.Attributor.Style("align","text-align",f);s.AlignAttribute=m,s.AlignClass=b,s.AlignStyle=h},function(n,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.BackgroundStyle=s.BackgroundClass=void 0;var a=o(0),l=function(h){return h&&h.__esModule?h:{default:h}}(a),f=o(26),m=new l.default.Attributor.Class("background","ql-bg",{scope:l.default.Scope.INLINE}),b=new f.ColorAttributor("background","background-color",{scope:l.default.Scope.INLINE});s.BackgroundClass=m,s.BackgroundStyle=b},function(n,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.DirectionStyle=s.DirectionClass=s.DirectionAttribute=void 0;var a=o(0),l=function(p){return p&&p.__esModule?p:{default:p}}(a),f={scope:l.default.Scope.BLOCK,whitelist:["rtl"]},m=new l.default.Attributor.Attribute("direction","dir",f),b=new l.default.Attributor.Class("direction","ql-direction",f),h=new l.default.Attributor.Style("direction","direction",f);s.DirectionAttribute=m,s.DirectionClass=b,s.DirectionStyle=h},function(n,s,o){"use strict";function a(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function l(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||typeof v!="object"&&typeof v!="function"?g:v}function f(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}Object.defineProperty(s,"__esModule",{value:!0}),s.FontClass=s.FontStyle=void 0;var m=function(){function g(v,A){for(var k=0;k<A.length;k++){var w=A[k];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,A,k){return A&&g(v.prototype,A),k&&g(v,k),v}}(),b=function g(v,A,k){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,A);if(w===void 0){var E=Object.getPrototypeOf(v);return E===null?void 0:g(E,A,k)}if("value"in w)return w.value;var M=w.get;if(M!==void 0)return M.call(k)},h=o(0),p=function(g){return g&&g.__esModule?g:{default:g}}(h),u={scope:p.default.Scope.INLINE,whitelist:["serif","monospace"]},d=new p.default.Attributor.Class("font","ql-font",u),_=function(g){function v(){return a(this,v),l(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return f(v,g),m(v,[{key:"value",value:function(A){return b(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,A).replace(/["']/g,"")}}]),v}(p.default.Attributor.Style),y=new _("font","font-family",u);s.FontStyle=y,s.FontClass=d},function(n,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.SizeStyle=s.SizeClass=void 0;var a=o(0),l=function(b){return b&&b.__esModule?b:{default:b}}(a),f=new l.default.Attributor.Class("size","ql-size",{scope:l.default.Scope.INLINE,whitelist:["small","large","huge"]}),m=new l.default.Attributor.Style("size","font-size",{scope:l.default.Scope.INLINE,whitelist:["10px","18px","32px"]});s.SizeClass=f,s.SizeStyle=m},function(n,s,o){"use strict";n.exports={align:{"":o(76),center:o(77),right:o(78),justify:o(79)},background:o(80),blockquote:o(81),bold:o(82),clean:o(83),code:o(58),"code-block":o(58),color:o(84),direction:{"":o(85),rtl:o(86)},float:{center:o(87),full:o(88),left:o(89),right:o(90)},formula:o(91),header:{1:o(92),2:o(93)},italic:o(94),image:o(95),indent:{"+1":o(96),"-1":o(97)},link:o(98),list:{ordered:o(99),bullet:o(100),check:o(101)},script:{sub:o(102),super:o(103)},strike:o(104),underline:o(105),video:o(106)}},function(n,s,o){"use strict";function a(k){return k&&k.__esModule?k:{default:k}}function l(k,w){if(!(k instanceof w))throw new TypeError("Cannot call a class as a function")}function f(k,w){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!w||typeof w!="object"&&typeof w!="function"?k:w}function m(k,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);k.prototype=Object.create(w&&w.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(k,w):k.__proto__=w)}function b(k){var w=k.ops[k.ops.length-1];return w!=null&&(w.insert!=null?typeof w.insert=="string"&&w.insert.endsWith(`
`):w.attributes!=null&&Object.keys(w.attributes).some(function(E){return d.default.query(E,d.default.Scope.BLOCK)!=null}))}function h(k){var w=k.reduce(function(M,j){return M+=j.delete||0},0),E=k.length()-w;return b(k)&&(E-=1),E}Object.defineProperty(s,"__esModule",{value:!0}),s.getLastChangeIndex=s.default=void 0;var p=function(){function k(w,E){for(var M=0;M<E.length;M++){var j=E[M];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(w,j.key,j)}}return function(w,E,M){return E&&k(w.prototype,E),M&&k(w,M),w}}(),u=o(0),d=a(u),_=o(5),y=a(_),g=o(9),v=a(g),A=function(k){function w(E,M){l(this,w);var j=f(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,E,M));return j.lastRecorded=0,j.ignoreChange=!1,j.clear(),j.quill.on(y.default.events.EDITOR_CHANGE,function(D,N,B,S){D!==y.default.events.TEXT_CHANGE||j.ignoreChange||(j.options.userOnly&&S!==y.default.sources.USER?j.transform(N):j.record(N,B))}),j.quill.keyboard.addBinding({key:"Z",shortKey:!0},j.undo.bind(j)),j.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},j.redo.bind(j)),/Win/i.test(navigator.platform)&&j.quill.keyboard.addBinding({key:"Y",shortKey:!0},j.redo.bind(j)),j}return m(w,k),p(w,[{key:"change",value:function(E,M){if(this.stack[E].length!==0){var j=this.stack[E].pop();this.stack[M].push(j),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(j[E],y.default.sources.USER),this.ignoreChange=!1;var D=h(j[E]);this.quill.setSelection(D)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(E,M){if(E.ops.length!==0){this.stack.redo=[];var j=this.quill.getContents().diff(M),D=Date.now();if(this.lastRecorded+this.options.delay>D&&this.stack.undo.length>0){var N=this.stack.undo.pop();j=j.compose(N.undo),E=N.redo.compose(E)}else this.lastRecorded=D;this.stack.undo.push({redo:E,undo:j}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(E){this.stack.undo.forEach(function(M){M.undo=E.transform(M.undo,!0),M.redo=E.transform(M.redo,!0)}),this.stack.redo.forEach(function(M){M.undo=E.transform(M.undo,!0),M.redo=E.transform(M.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),w}(v.default);A.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},s.default=A,s.getLastChangeIndex=h},function(n,s,o){"use strict";function a(W){return W&&W.__esModule?W:{default:W}}function l(W,te){if(!(W instanceof te))throw new TypeError("Cannot call a class as a function")}function f(W,te){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!te||typeof te!="object"&&typeof te!="function"?W:te}function m(W,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof te);W.prototype=Object.create(te&&te.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(W,te):W.__proto__=te)}function b(W){var te=W.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||W.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return te?(te[1]||"https")+"://www.youtube.com/embed/"+te[2]+"?showinfo=0":(te=W.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(te[1]||"https")+"://player.vimeo.com/video/"+te[2]+"/":W}function h(W,te){var re=arguments.length>2&&arguments[2]!==void 0&&arguments[2];te.forEach(function(se){var K=document.createElement("option");se===re?K.setAttribute("selected","selected"):K.setAttribute("value",se),W.appendChild(K)})}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.BaseTooltip=void 0;var p=function(){function W(te,re){for(var se=0;se<re.length;se++){var K=re[se];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(te,K.key,K)}}return function(te,re,se){return re&&W(te.prototype,re),se&&W(te,se),te}}(),u=function W(te,re,se){te===null&&(te=Function.prototype);var K=Object.getOwnPropertyDescriptor(te,re);if(K===void 0){var ie=Object.getPrototypeOf(te);return ie===null?void 0:W(ie,re,se)}if("value"in K)return K.value;var ce=K.get;if(ce!==void 0)return ce.call(se)},d=o(3),_=a(d),y=o(2),g=a(y),v=o(8),A=a(v),k=o(23),w=a(k),E=o(34),M=a(E),j=o(59),D=a(j),N=o(60),B=a(N),S=o(28),P=a(S),z=o(61),G=a(z),ee=[!1,"center","right","justify"],F=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],J=[!1,"serif","monospace"],Z=["1","2","3",!1],X=["small",!1,"large","huge"],I=function(W){function te(re,se){l(this,te);var K=f(this,(te.__proto__||Object.getPrototypeOf(te)).call(this,re,se)),ie=function ce(ye){if(!document.body.contains(re.root))return document.body.removeEventListener("click",ce);K.tooltip==null||K.tooltip.root.contains(ye.target)||document.activeElement===K.tooltip.textbox||K.quill.hasFocus()||K.tooltip.hide(),K.pickers!=null&&K.pickers.forEach(function(_e){_e.container.contains(ye.target)||_e.close()})};return re.emitter.listenDOM("click",document.body,ie),K}return m(te,W),p(te,[{key:"addModule",value:function(re){var se=u(te.prototype.__proto__||Object.getPrototypeOf(te.prototype),"addModule",this).call(this,re);return re==="toolbar"&&this.extendToolbar(se),se}},{key:"buildButtons",value:function(re,se){re.forEach(function(K){(K.getAttribute("class")||"").split(/\s+/).forEach(function(ie){if(ie.startsWith("ql-")&&(ie=ie.slice(3),se[ie]!=null))if(ie==="direction")K.innerHTML=se[ie][""]+se[ie].rtl;else if(typeof se[ie]=="string")K.innerHTML=se[ie];else{var ce=K.value||"";ce!=null&&se[ie][ce]&&(K.innerHTML=se[ie][ce])}})})}},{key:"buildPickers",value:function(re,se){var K=this;this.pickers=re.map(function(ce){if(ce.classList.contains("ql-align"))return ce.querySelector("option")==null&&h(ce,ee),new B.default(ce,se.align);if(ce.classList.contains("ql-background")||ce.classList.contains("ql-color")){var ye=ce.classList.contains("ql-background")?"background":"color";return ce.querySelector("option")==null&&h(ce,F,ye==="background"?"#ffffff":"#000000"),new D.default(ce,se[ye])}return ce.querySelector("option")==null&&(ce.classList.contains("ql-font")?h(ce,J):ce.classList.contains("ql-header")?h(ce,Z):ce.classList.contains("ql-size")&&h(ce,X)),new P.default(ce)});var ie=function(){K.pickers.forEach(function(ce){ce.update()})};this.quill.on(A.default.events.EDITOR_CHANGE,ie)}}]),te}(M.default);I.DEFAULTS=(0,_.default)(!0,{},M.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var W=this,te=this.container.querySelector("input.ql-image[type=file]");te==null&&(te=document.createElement("input"),te.setAttribute("type","file"),te.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),te.classList.add("ql-image"),te.addEventListener("change",function(){if(te.files!=null&&te.files[0]!=null){var re=new FileReader;re.onload=function(se){var K=W.quill.getSelection(!0);W.quill.updateContents(new g.default().retain(K.index).delete(K.length).insert({image:se.target.result}),A.default.sources.USER),W.quill.setSelection(K.index+1,A.default.sources.SILENT),te.value=""},re.readAsDataURL(te.files[0])}}),this.container.appendChild(te)),te.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var H=function(W){function te(re,se){l(this,te);var K=f(this,(te.__proto__||Object.getPrototypeOf(te)).call(this,re,se));return K.textbox=K.root.querySelector('input[type="text"]'),K.listen(),K}return m(te,W),p(te,[{key:"listen",value:function(){var re=this;this.textbox.addEventListener("keydown",function(se){w.default.match(se,"enter")?(re.save(),se.preventDefault()):w.default.match(se,"escape")&&(re.cancel(),se.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),se!=null?this.textbox.value=se:re!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+re)||""),this.root.setAttribute("data-mode",re)}},{key:"restoreFocus",value:function(){var re=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=re}},{key:"save",value:function(){var re=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var se=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",re,A.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",re,A.default.sources.USER)),this.quill.root.scrollTop=se;break;case"video":re=b(re);case"formula":if(!re)break;var K=this.quill.getSelection(!0);if(K!=null){var ie=K.index+K.length;this.quill.insertEmbed(ie,this.root.getAttribute("data-mode"),re,A.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ie+1," ",A.default.sources.USER),this.quill.setSelection(ie+2,A.default.sources.USER)}}this.textbox.value="",this.hide()}}]),te}(G.default);s.BaseTooltip=H,s.default=I},function(n,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=function(){function l(){this.head=this.tail=null,this.length=0}return l.prototype.append=function(){for(var f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];this.insertBefore(f[0],null),f.length>1&&this.append.apply(this,f.slice(1))},l.prototype.contains=function(f){for(var m,b=this.iterator();m=b();)if(m===f)return!0;return!1},l.prototype.insertBefore=function(f,m){f&&(f.next=m,m!=null?(f.prev=m.prev,m.prev!=null&&(m.prev.next=f),m.prev=f,m===this.head&&(this.head=f)):this.tail!=null?(this.tail.next=f,f.prev=this.tail,this.tail=f):(f.prev=null,this.head=this.tail=f),this.length+=1)},l.prototype.offset=function(f){for(var m=0,b=this.head;b!=null;){if(b===f)return m;m+=b.length(),b=b.next}return-1},l.prototype.remove=function(f){this.contains(f)&&(f.prev!=null&&(f.prev.next=f.next),f.next!=null&&(f.next.prev=f.prev),f===this.head&&(this.head=f.next),f===this.tail&&(this.tail=f.prev),this.length-=1)},l.prototype.iterator=function(f){return f===void 0&&(f=this.head),function(){var m=f;return f!=null&&(f=f.next),m}},l.prototype.find=function(f,m){m===void 0&&(m=!1);for(var b,h=this.iterator();b=h();){var p=b.length();if(f<p||m&&f===p&&(b.next==null||b.next.length()!==0))return[b,f];f-=p}return[null,0]},l.prototype.forEach=function(f){for(var m,b=this.iterator();m=b();)f(m)},l.prototype.forEachAt=function(f,m,b){if(!(m<=0))for(var h,p=this.find(f),u=p[0],d=p[1],_=f-d,y=this.iterator(u);(h=y())&&_<f+m;){var g=h.length();f>_?b(h,f-_,Math.min(m,_+g-f)):b(h,0,Math.min(g,f+m-_)),_+=g}},l.prototype.map=function(f){return this.reduce(function(m,b){return m.push(f(b)),m},[])},l.prototype.reduce=function(f,m){for(var b,h=this.iterator();b=h();)m=f(m,b);return m},l}();s.default=a},function(n,s,o){"use strict";var a=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,u){p.__proto__=u}||function(p,u){for(var d in u)u.hasOwnProperty(d)&&(p[d]=u[d])};return function(p,u){function d(){this.constructor=p}h(p,u),p.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}}();Object.defineProperty(s,"__esModule",{value:!0});var l=o(17),f=o(1),m={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},b=function(h){function p(u){var d=h.call(this,u)||this;return d.scroll=d,d.observer=new MutationObserver(function(_){d.update(_)}),d.observer.observe(d.domNode,m),d.attach(),d}return a(p,h),p.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(u,d){this.update(),u===0&&d===this.length()?this.children.forEach(function(_){_.remove()}):h.prototype.deleteAt.call(this,u,d)},p.prototype.formatAt=function(u,d,_,y){this.update(),h.prototype.formatAt.call(this,u,d,_,y)},p.prototype.insertAt=function(u,d,_){this.update(),h.prototype.insertAt.call(this,u,d,_)},p.prototype.optimize=function(u,d){var _=this;u===void 0&&(u=[]),d===void 0&&(d={}),h.prototype.optimize.call(this,d);for(var y=[].slice.call(this.observer.takeRecords());y.length>0;)u.push(y.pop());for(var g=function(w,E){E===void 0&&(E=!0),w!=null&&w!==_&&w.domNode.parentNode!=null&&(w.domNode[f.DATA_KEY].mutations==null&&(w.domNode[f.DATA_KEY].mutations=[]),E&&g(w.parent))},v=function(w){w.domNode[f.DATA_KEY]!=null&&w.domNode[f.DATA_KEY].mutations!=null&&(w instanceof l.default&&w.children.forEach(v),w.optimize(d))},A=u,k=0;A.length>0;k+=1){if(k>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(A.forEach(function(w){var E=f.find(w.target,!0);E!=null&&(E.domNode===w.target&&(w.type==="childList"?(g(f.find(w.previousSibling,!1)),[].forEach.call(w.addedNodes,function(M){var j=f.find(M,!1);g(j,!1),j instanceof l.default&&j.children.forEach(function(D){g(D,!1)})})):w.type==="attributes"&&g(E.prev)),g(E))}),this.children.forEach(v),A=[].slice.call(this.observer.takeRecords()),y=A.slice();y.length>0;)u.push(y.pop())}},p.prototype.update=function(u,d){var _=this;d===void 0&&(d={}),u=u||this.observer.takeRecords(),u.map(function(y){var g=f.find(y.target,!0);return g==null?null:g.domNode[f.DATA_KEY].mutations==null?(g.domNode[f.DATA_KEY].mutations=[y],g):(g.domNode[f.DATA_KEY].mutations.push(y),null)}).forEach(function(y){y!=null&&y!==_&&y.domNode[f.DATA_KEY]!=null&&y.update(y.domNode[f.DATA_KEY].mutations||[],d)}),this.domNode[f.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[f.DATA_KEY].mutations,d),this.optimize(u,d)},p.blotName="scroll",p.defaultChild="block",p.scope=f.Scope.BLOCK_BLOT,p.tagName="DIV",p}(l.default);s.default=b},function(n,s,o){"use strict";function a(h,p){if(Object.keys(h).length!==Object.keys(p).length)return!1;for(var u in h)if(h[u]!==p[u])return!1;return!0}var l=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,u){p.__proto__=u}||function(p,u){for(var d in u)u.hasOwnProperty(d)&&(p[d]=u[d])};return function(p,u){function d(){this.constructor=p}h(p,u),p.prototype=u===null?Object.create(u):(d.prototype=u.prototype,new d)}}();Object.defineProperty(s,"__esModule",{value:!0});var f=o(18),m=o(1),b=function(h){function p(){return h!==null&&h.apply(this,arguments)||this}return l(p,h),p.formats=function(u){if(u.tagName!==p.tagName)return h.formats.call(this,u)},p.prototype.format=function(u,d){var _=this;u!==this.statics.blotName||d?h.prototype.format.call(this,u,d):(this.children.forEach(function(y){y instanceof f.default||(y=y.wrap(p.blotName,!0)),_.attributes.copy(y)}),this.unwrap())},p.prototype.formatAt=function(u,d,_,y){this.formats()[_]!=null||m.query(_,m.Scope.ATTRIBUTE)?this.isolate(u,d).format(_,y):h.prototype.formatAt.call(this,u,d,_,y)},p.prototype.optimize=function(u){h.prototype.optimize.call(this,u);var d=this.formats();if(Object.keys(d).length===0)return this.unwrap();var _=this.next;_ instanceof p&&_.prev===this&&a(d,_.formats())&&(_.moveChildren(this),_.remove())},p.blotName="inline",p.scope=m.Scope.INLINE_BLOT,p.tagName="SPAN",p}(f.default);s.default=b},function(n,s,o){"use strict";var a=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var u in p)p.hasOwnProperty(u)&&(h[u]=p[u])};return function(h,p){function u(){this.constructor=h}b(h,p),h.prototype=p===null?Object.create(p):(u.prototype=p.prototype,new u)}}();Object.defineProperty(s,"__esModule",{value:!0});var l=o(18),f=o(1),m=function(b){function h(){return b!==null&&b.apply(this,arguments)||this}return a(h,b),h.formats=function(p){var u=f.query(h.blotName).tagName;if(p.tagName!==u)return b.formats.call(this,p)},h.prototype.format=function(p,u){f.query(p,f.Scope.BLOCK)!=null&&(p!==this.statics.blotName||u?b.prototype.format.call(this,p,u):this.replaceWith(h.blotName))},h.prototype.formatAt=function(p,u,d,_){f.query(d,f.Scope.BLOCK)!=null?this.format(d,_):b.prototype.formatAt.call(this,p,u,d,_)},h.prototype.insertAt=function(p,u,d){if(d==null||f.query(u,f.Scope.INLINE)!=null)b.prototype.insertAt.call(this,p,u,d);else{var _=this.split(p),y=f.create(u,d);_.parent.insertBefore(y,_)}},h.prototype.update=function(p,u){navigator.userAgent.match(/Trident/)?this.build():b.prototype.update.call(this,p,u)},h.blotName="block",h.scope=f.Scope.BLOCK_BLOT,h.tagName="P",h}(l.default);s.default=m},function(n,s,o){"use strict";var a=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,h){b.__proto__=h}||function(b,h){for(var p in h)h.hasOwnProperty(p)&&(b[p]=h[p])};return function(b,h){function p(){this.constructor=b}m(b,h),b.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}();Object.defineProperty(s,"__esModule",{value:!0});var l=o(19),f=function(m){function b(){return m!==null&&m.apply(this,arguments)||this}return a(b,m),b.formats=function(h){},b.prototype.format=function(h,p){m.prototype.formatAt.call(this,0,this.length(),h,p)},b.prototype.formatAt=function(h,p,u,d){h===0&&p===this.length()?this.format(u,d):m.prototype.formatAt.call(this,h,p,u,d)},b.prototype.formats=function(){return this.statics.formats(this.domNode)},b}(l.default);s.default=f},function(n,s,o){"use strict";var a=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var u in p)p.hasOwnProperty(u)&&(h[u]=p[u])};return function(h,p){function u(){this.constructor=h}b(h,p),h.prototype=p===null?Object.create(p):(u.prototype=p.prototype,new u)}}();Object.defineProperty(s,"__esModule",{value:!0});var l=o(19),f=o(1),m=function(b){function h(p){var u=b.call(this,p)||this;return u.text=u.statics.value(u.domNode),u}return a(h,b),h.create=function(p){return document.createTextNode(p)},h.value=function(p){var u=p.data;return u.normalize&&(u=u.normalize()),u},h.prototype.deleteAt=function(p,u){this.domNode.data=this.text=this.text.slice(0,p)+this.text.slice(p+u)},h.prototype.index=function(p,u){return this.domNode===p?u:-1},h.prototype.insertAt=function(p,u,d){d==null?(this.text=this.text.slice(0,p)+u+this.text.slice(p),this.domNode.data=this.text):b.prototype.insertAt.call(this,p,u,d)},h.prototype.length=function(){return this.text.length},h.prototype.optimize=function(p){b.prototype.optimize.call(this,p),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof h&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},h.prototype.position=function(p,u){return u===void 0&&(u=!1),[this.domNode,p]},h.prototype.split=function(p,u){if(u===void 0&&(u=!1),!u){if(p===0)return this;if(p===this.length())return this.next}var d=f.create(this.domNode.splitText(p));return this.parent.insertBefore(d,this.next),this.text=this.statics.value(this.domNode),d},h.prototype.update=function(p,u){var d=this;p.some(function(_){return _.type==="characterData"&&_.target===d.domNode})&&(this.text=this.statics.value(this.domNode))},h.prototype.value=function(){return this.text},h.blotName="text",h.scope=f.Scope.INLINE_BLOT,h}(l.default);s.default=m},function(n,s,o){"use strict";var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(f,m){return arguments.length>1&&!this.contains(f)==!m?m:l.call(this,f)}}String.prototype.startsWith||(String.prototype.startsWith=function(f,m){return m=m||0,this.substr(m,f.length)===f}),String.prototype.endsWith||(String.prototype.endsWith=function(f,m){var b=this.toString();(typeof m!="number"||!isFinite(m)||Math.floor(m)!==m||m>b.length)&&(m=b.length),m-=f.length;var h=b.indexOf(f,m);return h!==-1&&h===m}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(f){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof f!="function")throw new TypeError("predicate must be a function");for(var m,b=Object(this),h=b.length>>>0,p=arguments[1],u=0;u<h;u++)if(m=b[u],f.call(p,m,u,b))return m}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(n,s){function o(w,E,M){if(w==E)return w?[[A,w]]:[];(M<0||w.length<M)&&(M=null);var j=m(w,E),D=w.substring(0,j);w=w.substring(j),E=E.substring(j),j=b(w,E);var N=w.substring(w.length-j);w=w.substring(0,w.length-j),E=E.substring(0,E.length-j);var B=a(w,E);return D&&B.unshift([A,D]),N&&B.push([A,N]),p(B),M!=null&&(B=d(B,M)),B=_(B)}function a(w,E){var M;if(!w)return[[v,E]];if(!E)return[[g,w]];var j=w.length>E.length?w:E,D=w.length>E.length?E:w,N=j.indexOf(D);if(N!=-1)return M=[[v,j.substring(0,N)],[A,D],[v,j.substring(N+D.length)]],w.length>E.length&&(M[0][0]=M[2][0]=g),M;if(D.length==1)return[[g,w],[v,E]];var B=h(w,E);if(B){var S=B[0],P=B[1],z=B[2],G=B[3],ee=B[4],F=o(S,z),J=o(P,G);return F.concat([[A,ee]],J)}return l(w,E)}function l(w,E){for(var M=w.length,j=E.length,D=Math.ceil((M+j)/2),N=D,B=2*D,S=new Array(B),P=new Array(B),z=0;z<B;z++)S[z]=-1,P[z]=-1;S[N+1]=0,P[N+1]=0;for(var G=M-j,ee=G%2!=0,F=0,J=0,Z=0,X=0,I=0;I<D;I++){for(var H=-I+F;H<=I-J;H+=2){var W,te=N+H;W=H==-I||H!=I&&S[te-1]<S[te+1]?S[te+1]:S[te-1]+1;for(var re=W-H;W<M&&re<j&&w.charAt(W)==E.charAt(re);)W++,re++;if(S[te]=W,W>M)J+=2;else if(re>j)F+=2;else if(ee){var se=N+G-H;if(se>=0&&se<B&&P[se]!=-1){var K=M-P[se];if(W>=K)return f(w,E,W,re)}}}for(var ie=-I+Z;ie<=I-X;ie+=2){var K,se=N+ie;K=ie==-I||ie!=I&&P[se-1]<P[se+1]?P[se+1]:P[se-1]+1;for(var ce=K-ie;K<M&&ce<j&&w.charAt(M-K-1)==E.charAt(j-ce-1);)K++,ce++;if(P[se]=K,K>M)X+=2;else if(ce>j)Z+=2;else if(!ee){var te=N+G-ie;if(te>=0&&te<B&&S[te]!=-1){var W=S[te],re=N+W-te;if(K=M-K,W>=K)return f(w,E,W,re)}}}}return[[g,w],[v,E]]}function f(w,E,M,j){var D=w.substring(0,M),N=E.substring(0,j),B=w.substring(M),S=E.substring(j),P=o(D,N),z=o(B,S);return P.concat(z)}function m(w,E){if(!w||!E||w.charAt(0)!=E.charAt(0))return 0;for(var M=0,j=Math.min(w.length,E.length),D=j,N=0;M<D;)w.substring(N,D)==E.substring(N,D)?(M=D,N=M):j=D,D=Math.floor((j-M)/2+M);return D}function b(w,E){if(!w||!E||w.charAt(w.length-1)!=E.charAt(E.length-1))return 0;for(var M=0,j=Math.min(w.length,E.length),D=j,N=0;M<D;)w.substring(w.length-D,w.length-N)==E.substring(E.length-D,E.length-N)?(M=D,N=M):j=D,D=Math.floor((j-M)/2+M);return D}function h(w,E){function M(F,J,Z){for(var X,I,H,W,te=F.substring(Z,Z+Math.floor(F.length/4)),re=-1,se="";(re=J.indexOf(te,re+1))!=-1;){var K=m(F.substring(Z),J.substring(re)),ie=b(F.substring(0,Z),J.substring(0,re));se.length<ie+K&&(se=J.substring(re-ie,re)+J.substring(re,re+K),X=F.substring(0,Z-ie),I=F.substring(Z+K),H=J.substring(0,re-ie),W=J.substring(re+K))}return 2*se.length>=F.length?[X,I,H,W,se]:null}var j=w.length>E.length?w:E,D=w.length>E.length?E:w;if(j.length<4||2*D.length<j.length)return null;var N,B=M(j,D,Math.ceil(j.length/4)),S=M(j,D,Math.ceil(j.length/2));if(!B&&!S)return null;N=S?B&&B[4].length>S[4].length?B:S:B;var P,z,G,ee;return w.length>E.length?(P=N[0],z=N[1],G=N[2],ee=N[3]):(G=N[0],ee=N[1],P=N[2],z=N[3]),[P,z,G,ee,N[4]]}function p(w){w.push([A,""]);for(var E,M=0,j=0,D=0,N="",B="";M<w.length;)switch(w[M][0]){case v:D++,B+=w[M][1],M++;break;case g:j++,N+=w[M][1],M++;break;case A:j+D>1?(j!==0&&D!==0&&(E=m(B,N),E!==0&&(M-j-D>0&&w[M-j-D-1][0]==A?w[M-j-D-1][1]+=B.substring(0,E):(w.splice(0,0,[A,B.substring(0,E)]),M++),B=B.substring(E),N=N.substring(E)),(E=b(B,N))!==0&&(w[M][1]=B.substring(B.length-E)+w[M][1],B=B.substring(0,B.length-E),N=N.substring(0,N.length-E))),j===0?w.splice(M-D,j+D,[v,B]):D===0?w.splice(M-j,j+D,[g,N]):w.splice(M-j-D,j+D,[g,N],[v,B]),M=M-j-D+(j?1:0)+(D?1:0)+1):M!==0&&w[M-1][0]==A?(w[M-1][1]+=w[M][1],w.splice(M,1)):M++,D=0,j=0,N="",B=""}w[w.length-1][1]===""&&w.pop();var S=!1;for(M=1;M<w.length-1;)w[M-1][0]==A&&w[M+1][0]==A&&(w[M][1].substring(w[M][1].length-w[M-1][1].length)==w[M-1][1]?(w[M][1]=w[M-1][1]+w[M][1].substring(0,w[M][1].length-w[M-1][1].length),w[M+1][1]=w[M-1][1]+w[M+1][1],w.splice(M-1,1),S=!0):w[M][1].substring(0,w[M+1][1].length)==w[M+1][1]&&(w[M-1][1]+=w[M+1][1],w[M][1]=w[M][1].substring(w[M+1][1].length)+w[M+1][1],w.splice(M+1,1),S=!0)),M++;S&&p(w)}function u(w,E){if(E===0)return[A,w];for(var M=0,j=0;j<w.length;j++){var D=w[j];if(D[0]===g||D[0]===A){var N=M+D[1].length;if(E===N)return[j+1,w];if(E<N){w=w.slice();var B=E-M,S=[D[0],D[1].slice(0,B)],P=[D[0],D[1].slice(B)];return w.splice(j,1,S,P),[j+1,w]}M=N}}throw new Error("cursor_pos is out of bounds!")}function d(w,E){var M=u(w,E),j=M[1],D=M[0],N=j[D],B=j[D+1];if(N==null||N[0]!==A)return w;if(B!=null&&N[1]+B[1]===B[1]+N[1])return j.splice(D,2,B,N),y(j,D,2);if(B!=null&&B[1].indexOf(N[1])===0){j.splice(D,2,[B[0],N[1]],[0,N[1]]);var S=B[1].slice(N[1].length);return S.length>0&&j.splice(D+2,0,[B[0],S]),y(j,D,3)}return w}function _(w){for(var E=!1,M=function(N){return N.charCodeAt(0)>=56320&&N.charCodeAt(0)<=57343},j=2;j<w.length;j+=1)w[j-2][0]===A&&function(N){return N.charCodeAt(N.length-1)>=55296&&N.charCodeAt(N.length-1)<=56319}(w[j-2][1])&&w[j-1][0]===g&&M(w[j-1][1])&&w[j][0]===v&&M(w[j][1])&&(E=!0,w[j-1][1]=w[j-2][1].slice(-1)+w[j-1][1],w[j][1]=w[j-2][1].slice(-1)+w[j][1],w[j-2][1]=w[j-2][1].slice(0,-1));if(!E)return w;for(var D=[],j=0;j<w.length;j+=1)w[j][1].length>0&&D.push(w[j]);return D}function y(w,E,M){for(var j=E+M-1;j>=0&&j>=E-1;j--)if(j+1<w.length){var D=w[j],N=w[j+1];D[0]===N[1]&&w.splice(j,2,[D[0],D[1]+N[1]])}return w}var g=-1,v=1,A=0,k=o;k.INSERT=v,k.DELETE=g,k.EQUAL=A,n.exports=k},function(n,s){function o(a){var l=[];for(var f in a)l.push(f);return l}s=n.exports=typeof Object.keys=="function"?Object.keys:o,s.shim=o},function(n,s){function o(f){return Object.prototype.toString.call(f)=="[object Arguments]"}function a(f){return f&&typeof f=="object"&&typeof f.length=="number"&&Object.prototype.hasOwnProperty.call(f,"callee")&&!Object.prototype.propertyIsEnumerable.call(f,"callee")||!1}var l=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";s=n.exports=l?o:a,s.supported=o,s.unsupported=a},function(n,s){"use strict";function o(){}function a(b,h,p){this.fn=b,this.context=h,this.once=p||!1}function l(){this._events=new o,this._eventsCount=0}var f=Object.prototype.hasOwnProperty,m="~";Object.create&&(o.prototype=Object.create(null),new o().__proto__||(m=!1)),l.prototype.eventNames=function(){var b,h,p=[];if(this._eventsCount===0)return p;for(h in b=this._events)f.call(b,h)&&p.push(m?h.slice(1):h);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(b)):p},l.prototype.listeners=function(b,h){var p=m?m+b:b,u=this._events[p];if(h)return!!u;if(!u)return[];if(u.fn)return[u.fn];for(var d=0,_=u.length,y=new Array(_);d<_;d++)y[d]=u[d].fn;return y},l.prototype.emit=function(b,h,p,u,d,_){var y=m?m+b:b;if(!this._events[y])return!1;var g,v,A=this._events[y],k=arguments.length;if(A.fn){switch(A.once&&this.removeListener(b,A.fn,void 0,!0),k){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,h),!0;case 3:return A.fn.call(A.context,h,p),!0;case 4:return A.fn.call(A.context,h,p,u),!0;case 5:return A.fn.call(A.context,h,p,u,d),!0;case 6:return A.fn.call(A.context,h,p,u,d,_),!0}for(v=1,g=new Array(k-1);v<k;v++)g[v-1]=arguments[v];A.fn.apply(A.context,g)}else{var w,E=A.length;for(v=0;v<E;v++)switch(A[v].once&&this.removeListener(b,A[v].fn,void 0,!0),k){case 1:A[v].fn.call(A[v].context);break;case 2:A[v].fn.call(A[v].context,h);break;case 3:A[v].fn.call(A[v].context,h,p);break;case 4:A[v].fn.call(A[v].context,h,p,u);break;default:if(!g)for(w=1,g=new Array(k-1);w<k;w++)g[w-1]=arguments[w];A[v].fn.apply(A[v].context,g)}}return!0},l.prototype.on=function(b,h,p){var u=new a(h,p||this),d=m?m+b:b;return this._events[d]?this._events[d].fn?this._events[d]=[this._events[d],u]:this._events[d].push(u):(this._events[d]=u,this._eventsCount++),this},l.prototype.once=function(b,h,p){var u=new a(h,p||this,!0),d=m?m+b:b;return this._events[d]?this._events[d].fn?this._events[d]=[this._events[d],u]:this._events[d].push(u):(this._events[d]=u,this._eventsCount++),this},l.prototype.removeListener=function(b,h,p,u){var d=m?m+b:b;if(!this._events[d])return this;if(!h)return--this._eventsCount==0?this._events=new o:delete this._events[d],this;var _=this._events[d];if(_.fn)_.fn!==h||u&&!_.once||p&&_.context!==p||(--this._eventsCount==0?this._events=new o:delete this._events[d]);else{for(var y=0,g=[],v=_.length;y<v;y++)(_[y].fn!==h||u&&!_[y].once||p&&_[y].context!==p)&&g.push(_[y]);g.length?this._events[d]=g.length===1?g[0]:g:--this._eventsCount==0?this._events=new o:delete this._events[d]}return this},l.prototype.removeAllListeners=function(b){var h;return b?(h=m?m+b:b,this._events[h]&&(--this._eventsCount==0?this._events=new o:delete this._events[h])):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=m,l.EventEmitter=l,n!==void 0&&(n.exports=l)},function(n,s,o){"use strict";function a(O){return O&&O.__esModule?O:{default:O}}function l(O,C,q){return C in O?Object.defineProperty(O,C,{value:q,enumerable:!0,configurable:!0,writable:!0}):O[C]=q,O}function f(O,C){if(!(O instanceof C))throw new TypeError("Cannot call a class as a function")}function m(O,C){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||typeof C!="object"&&typeof C!="function"?O:C}function b(O,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);O.prototype=Object.create(C&&C.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(O,C):O.__proto__=C)}function h(O,C,q){return(C===void 0?"undefined":N(C))==="object"?Object.keys(C).reduce(function(Q,ne){return h(Q,ne,C[ne])},O):O.reduce(function(Q,ne){return ne.attributes&&ne.attributes[C]?Q.push(ne):Q.insert(ne.insert,(0,z.default)({},l({},C,q),ne.attributes))},new ee.default)}function p(O){return O.nodeType!==Node.ELEMENT_NODE?{}:O["__ql-computed-style"]||(O["__ql-computed-style"]=window.getComputedStyle(O))}function u(O,C){for(var q="",Q=O.ops.length-1;Q>=0&&q.length<C.length;--Q){var ne=O.ops[Q];if(typeof ne.insert!="string")break;q=ne.insert+q}return q.slice(-1*C.length)===C}function d(O){return O.childNodes.length!==0&&["block","list-item"].indexOf(p(O).display)>-1}function _(O,C,q){return O.nodeType===O.TEXT_NODE?q.reduce(function(Q,ne){return ne(O,Q)},new ee.default):O.nodeType===O.ELEMENT_NODE?[].reduce.call(O.childNodes||[],function(Q,ne){var de=_(ne,C,q);return ne.nodeType===O.ELEMENT_NODE&&(de=C.reduce(function(xe,ve){return ve(ne,xe)},de),de=(ne[De]||[]).reduce(function(xe,ve){return ve(ne,xe)},de)),Q.concat(de)},new ee.default):new ee.default}function y(O,C,q){return h(q,O,!0)}function g(O,C){var q=J.default.Attributor.Attribute.keys(O),Q=J.default.Attributor.Class.keys(O),ne=J.default.Attributor.Style.keys(O),de={};return q.concat(Q).concat(ne).forEach(function(xe){var ve=J.default.query(xe,J.default.Scope.ATTRIBUTE);ve!=null&&(de[ve.attrName]=ve.value(O),de[ve.attrName])||(ve=Fe[xe],ve==null||ve.attrName!==xe&&ve.keyName!==xe||(de[ve.attrName]=ve.value(O)||void 0),(ve=Je[xe])==null||ve.attrName!==xe&&ve.keyName!==xe||(ve=Je[xe],de[ve.attrName]=ve.value(O)||void 0))}),Object.keys(de).length>0&&(C=h(C,de)),C}function v(O,C){var q=J.default.query(O);if(q==null)return C;if(q.prototype instanceof J.default.Embed){var Q={},ne=q.value(O);ne!=null&&(Q[q.blotName]=ne,C=new ee.default().insert(Q,q.formats(O)))}else typeof q.formats=="function"&&(C=h(C,q.blotName,q.formats(O)));return C}function A(O,C){return u(C,`
`)||C.insert(`
`),C}function k(){return new ee.default}function w(O,C){var q=J.default.query(O);if(q==null||q.blotName!=="list-item"||!u(C,`
`))return C;for(var Q=-1,ne=O.parentNode;!ne.classList.contains("ql-clipboard");)(J.default.query(ne)||{}).blotName==="list"&&(Q+=1),ne=ne.parentNode;return Q<=0?C:C.compose(new ee.default().retain(C.length()-1).retain(1,{indent:Q}))}function E(O,C){return u(C,`
`)||(d(O)||C.length()>0&&O.nextSibling&&d(O.nextSibling))&&C.insert(`
`),C}function M(O,C){if(d(O)&&O.nextElementSibling!=null&&!u(C,`

`)){var q=O.offsetHeight+parseFloat(p(O).marginTop)+parseFloat(p(O).marginBottom);O.nextElementSibling.offsetTop>O.offsetTop+1.5*q&&C.insert(`
`)}return C}function j(O,C){var q={},Q=O.style||{};return Q.fontStyle&&p(O).fontStyle==="italic"&&(q.italic=!0),Q.fontWeight&&(p(O).fontWeight.startsWith("bold")||parseInt(p(O).fontWeight)>=700)&&(q.bold=!0),Object.keys(q).length>0&&(C=h(C,q)),parseFloat(Q.textIndent||0)>0&&(C=new ee.default().insert("	").concat(C)),C}function D(O,C){var q=O.data;if(O.parentNode.tagName==="O:P")return C.insert(q.trim());if(q.trim().length===0&&O.parentNode.classList.contains("ql-clipboard"))return C;if(!p(O.parentNode).whiteSpace.startsWith("pre")){var Q=function(ne,de){return de=de.replace(/[^\u00a0]/g,""),de.length<1&&ne?" ":de};q=q.replace(/\r\n/g," ").replace(/\n/g," "),q=q.replace(/\s\s+/g,Q.bind(Q,!0)),(O.previousSibling==null&&d(O.parentNode)||O.previousSibling!=null&&d(O.previousSibling))&&(q=q.replace(/^\s+/,Q.bind(Q,!1))),(O.nextSibling==null&&d(O.parentNode)||O.nextSibling!=null&&d(O.nextSibling))&&(q=q.replace(/\s+$/,Q.bind(Q,!1)))}return C.insert(q)}Object.defineProperty(s,"__esModule",{value:!0}),s.matchText=s.matchSpacing=s.matchNewline=s.matchBlot=s.matchAttributor=s.default=void 0;var N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},B=function(){function O(C,q){var Q=[],ne=!0,de=!1,xe=void 0;try{for(var ve,Be=C[Symbol.iterator]();!(ne=(ve=Be.next()).done)&&(Q.push(ve.value),!q||Q.length!==q);ne=!0);}catch($e){de=!0,xe=$e}finally{try{!ne&&Be.return&&Be.return()}finally{if(de)throw xe}}return Q}return function(C,q){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return O(C,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),S=function(){function O(C,q){for(var Q=0;Q<q.length;Q++){var ne=q[Q];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(C,ne.key,ne)}}return function(C,q,Q){return q&&O(C.prototype,q),Q&&O(C,Q),C}}(),P=o(3),z=a(P),G=o(2),ee=a(G),F=o(0),J=a(F),Z=o(5),X=a(Z),I=o(10),H=a(I),W=o(9),te=a(W),re=o(36),se=o(37),K=o(13),ie=a(K),ce=o(26),ye=o(38),_e=o(39),Ee=o(40),Me=(0,H.default)("quill:clipboard"),De="__ql-matcher",Le=[[Node.TEXT_NODE,D],[Node.TEXT_NODE,E],["br",A],[Node.ELEMENT_NODE,E],[Node.ELEMENT_NODE,v],[Node.ELEMENT_NODE,M],[Node.ELEMENT_NODE,g],[Node.ELEMENT_NODE,j],["li",w],["b",y.bind(y,"bold")],["i",y.bind(y,"italic")],["style",k]],Fe=[re.AlignAttribute,ye.DirectionAttribute].reduce(function(O,C){return O[C.keyName]=C,O},{}),Je=[re.AlignStyle,se.BackgroundStyle,ce.ColorStyle,ye.DirectionStyle,_e.FontStyle,Ee.SizeStyle].reduce(function(O,C){return O[C.keyName]=C,O},{}),qe=function(O){function C(q,Q){f(this,C);var ne=m(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,q,Q));return ne.quill.root.addEventListener("paste",ne.onPaste.bind(ne)),ne.container=ne.quill.addContainer("ql-clipboard"),ne.container.setAttribute("contenteditable",!0),ne.container.setAttribute("tabindex",-1),ne.matchers=[],Le.concat(ne.options.matchers).forEach(function(de){var xe=B(de,2),ve=xe[0],Be=xe[1];(Q.matchVisual||Be!==M)&&ne.addMatcher(ve,Be)}),ne}return b(C,O),S(C,[{key:"addMatcher",value:function(q,Q){this.matchers.push([q,Q])}},{key:"convert",value:function(q){if(typeof q=="string")return this.container.innerHTML=q.replace(/\>\r?\n +\</g,"><"),this.convert();var Q=this.quill.getFormat(this.quill.selection.savedRange.index);if(Q[ie.default.blotName]){var ne=this.container.innerText;return this.container.innerHTML="",new ee.default().insert(ne,l({},ie.default.blotName,Q[ie.default.blotName]))}var de=this.prepareMatching(),xe=B(de,2),ve=xe[0],Be=xe[1],$e=_(this.container,ve,Be);return u($e,`
`)&&$e.ops[$e.ops.length-1].attributes==null&&($e=$e.compose(new ee.default().retain($e.length()-1).delete(1))),Me.log("convert",this.container.innerHTML,$e),this.container.innerHTML="",$e}},{key:"dangerouslyPasteHTML",value:function(q,Q){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:X.default.sources.API;if(typeof q=="string")this.quill.setContents(this.convert(q),Q),this.quill.setSelection(0,X.default.sources.SILENT);else{var de=this.convert(Q);this.quill.updateContents(new ee.default().retain(q).concat(de),ne),this.quill.setSelection(q+de.length(),X.default.sources.SILENT)}}},{key:"onPaste",value:function(q){var Q=this;if(!q.defaultPrevented&&this.quill.isEnabled()){var ne=this.quill.getSelection(),de=new ee.default().retain(ne.index),xe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(X.default.sources.SILENT),setTimeout(function(){de=de.concat(Q.convert()).delete(ne.length),Q.quill.updateContents(de,X.default.sources.USER),Q.quill.setSelection(de.length()-ne.length,X.default.sources.SILENT),Q.quill.scrollingContainer.scrollTop=xe,Q.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var q=this,Q=[],ne=[];return this.matchers.forEach(function(de){var xe=B(de,2),ve=xe[0],Be=xe[1];switch(ve){case Node.TEXT_NODE:ne.push(Be);break;case Node.ELEMENT_NODE:Q.push(Be);break;default:[].forEach.call(q.container.querySelectorAll(ve),function($e){$e[De]=$e[De]||[],$e[De].push(Be)})}}),[Q,ne]}}]),C}(te.default);qe.DEFAULTS={matchers:[],matchVisual:!0},s.default=qe,s.matchAttributor=g,s.matchBlot=v,s.matchNewline=E,s.matchSpacing=M,s.matchText=D},function(n,s,o){"use strict";function a(d,_){if(!(d instanceof _))throw new TypeError("Cannot call a class as a function")}function l(d,_){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||typeof _!="object"&&typeof _!="function"?d:_}function f(d,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);d.prototype=Object.create(_&&_.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(d,_):d.__proto__=_)}Object.defineProperty(s,"__esModule",{value:!0});var m=function(){function d(_,y){for(var g=0;g<y.length;g++){var v=y[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(_,v.key,v)}}return function(_,y,g){return y&&d(_.prototype,y),g&&d(_,g),_}}(),b=function d(_,y,g){_===null&&(_=Function.prototype);var v=Object.getOwnPropertyDescriptor(_,y);if(v===void 0){var A=Object.getPrototypeOf(_);return A===null?void 0:d(A,y,g)}if("value"in v)return v.value;var k=v.get;if(k!==void 0)return k.call(g)},h=o(6),p=function(d){return d&&d.__esModule?d:{default:d}}(h),u=function(d){function _(){return a(this,_),l(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return f(_,d),m(_,[{key:"optimize",value:function(y){b(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,y),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return b(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),_}(p.default);u.blotName="bold",u.tagName=["STRONG","B"],s.default=u},function(n,s,o){"use strict";function a(S){return S&&S.__esModule?S:{default:S}}function l(S,P,z){return P in S?Object.defineProperty(S,P,{value:z,enumerable:!0,configurable:!0,writable:!0}):S[P]=z,S}function f(S,P){if(!(S instanceof P))throw new TypeError("Cannot call a class as a function")}function m(S,P){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!P||typeof P!="object"&&typeof P!="function"?S:P}function b(S,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);S.prototype=Object.create(P&&P.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(S,P):S.__proto__=P)}function h(S,P,z){var G=document.createElement("button");G.setAttribute("type","button"),G.classList.add("ql-"+P),z!=null&&(G.value=z),S.appendChild(G)}function p(S,P){Array.isArray(P[0])||(P=[P]),P.forEach(function(z){var G=document.createElement("span");G.classList.add("ql-formats"),z.forEach(function(ee){if(typeof ee=="string")h(G,ee);else{var F=Object.keys(ee)[0],J=ee[F];Array.isArray(J)?u(G,F,J):h(G,F,J)}}),S.appendChild(G)})}function u(S,P,z){var G=document.createElement("select");G.classList.add("ql-"+P),z.forEach(function(ee){var F=document.createElement("option");ee!==!1?F.setAttribute("value",ee):F.setAttribute("selected","selected"),G.appendChild(F)}),S.appendChild(G)}Object.defineProperty(s,"__esModule",{value:!0}),s.addControls=s.default=void 0;var d=function(){function S(P,z){var G=[],ee=!0,F=!1,J=void 0;try{for(var Z,X=P[Symbol.iterator]();!(ee=(Z=X.next()).done)&&(G.push(Z.value),!z||G.length!==z);ee=!0);}catch(I){F=!0,J=I}finally{try{!ee&&X.return&&X.return()}finally{if(F)throw J}}return G}return function(P,z){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return S(P,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_=function(){function S(P,z){for(var G=0;G<z.length;G++){var ee=z[G];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(P,ee.key,ee)}}return function(P,z,G){return z&&S(P.prototype,z),G&&S(P,G),P}}(),y=o(2),g=a(y),v=o(0),A=a(v),k=o(5),w=a(k),E=o(10),M=a(E),j=o(9),D=a(j),N=(0,M.default)("quill:toolbar"),B=function(S){function P(z,G){f(this,P);var ee=m(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,z,G));if(Array.isArray(ee.options.container)){var F=document.createElement("div");p(F,ee.options.container),z.container.parentNode.insertBefore(F,z.container),ee.container=F}else typeof ee.options.container=="string"?ee.container=document.querySelector(ee.options.container):ee.container=ee.options.container;if(!(ee.container instanceof HTMLElement)){var J;return J=N.error("Container required for toolbar",ee.options),m(ee,J)}return ee.container.classList.add("ql-toolbar"),ee.controls=[],ee.handlers={},Object.keys(ee.options.handlers).forEach(function(Z){ee.addHandler(Z,ee.options.handlers[Z])}),[].forEach.call(ee.container.querySelectorAll("button, select"),function(Z){ee.attach(Z)}),ee.quill.on(w.default.events.EDITOR_CHANGE,function(Z,X){Z===w.default.events.SELECTION_CHANGE&&ee.update(X)}),ee.quill.on(w.default.events.SCROLL_OPTIMIZE,function(){var Z=ee.quill.selection.getRange(),X=d(Z,1),I=X[0];ee.update(I)}),ee}return b(P,S),_(P,[{key:"addHandler",value:function(z,G){this.handlers[z]=G}},{key:"attach",value:function(z){var G=this,ee=[].find.call(z.classList,function(J){return J.indexOf("ql-")===0});if(ee){if(ee=ee.slice(3),z.tagName==="BUTTON"&&z.setAttribute("type","button"),this.handlers[ee]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[ee]==null)return void N.warn("ignoring attaching to disabled format",ee,z);if(A.default.query(ee)==null)return void N.warn("ignoring attaching to nonexistent format",ee,z)}var F=z.tagName==="SELECT"?"change":"click";z.addEventListener(F,function(J){var Z=void 0;if(z.tagName==="SELECT"){if(z.selectedIndex<0)return;var X=z.options[z.selectedIndex];Z=!X.hasAttribute("selected")&&(X.value||!1)}else Z=!z.classList.contains("ql-active")&&(z.value||!z.hasAttribute("value")),J.preventDefault();G.quill.focus();var I=G.quill.selection.getRange(),H=d(I,1),W=H[0];if(G.handlers[ee]!=null)G.handlers[ee].call(G,Z);else if(A.default.query(ee).prototype instanceof A.default.Embed){if(!(Z=prompt("Enter "+ee)))return;G.quill.updateContents(new g.default().retain(W.index).delete(W.length).insert(l({},ee,Z)),w.default.sources.USER)}else G.quill.format(ee,Z,w.default.sources.USER);G.update(W)}),this.controls.push([ee,z])}}},{key:"update",value:function(z){var G=z==null?{}:this.quill.getFormat(z);this.controls.forEach(function(ee){var F=d(ee,2),J=F[0],Z=F[1];if(Z.tagName==="SELECT"){var X=void 0;if(z==null)X=null;else if(G[J]==null)X=Z.querySelector("option[selected]");else if(!Array.isArray(G[J])){var I=G[J];typeof I=="string"&&(I=I.replace(/\"/g,'\\"')),X=Z.querySelector('option[value="'+I+'"]')}X==null?(Z.value="",Z.selectedIndex=-1):X.selected=!0}else if(z==null)Z.classList.remove("ql-active");else if(Z.hasAttribute("value")){var H=G[J]===Z.getAttribute("value")||G[J]!=null&&G[J].toString()===Z.getAttribute("value")||G[J]==null&&!Z.getAttribute("value");Z.classList.toggle("ql-active",H)}else Z.classList.toggle("ql-active",G[J]!=null)})}}]),P}(D.default);B.DEFAULTS={},B.DEFAULTS={container:null,handlers:{clean:function(){var S=this,P=this.quill.getSelection();if(P!=null)if(P.length==0){var z=this.quill.getFormat();Object.keys(z).forEach(function(G){A.default.query(G,A.default.Scope.INLINE)!=null&&S.quill.format(G,!1)})}else this.quill.removeFormat(P,w.default.sources.USER)},direction:function(S){var P=this.quill.getFormat().align;S==="rtl"&&P==null?this.quill.format("align","right",w.default.sources.USER):S||P!=="right"||this.quill.format("align",!1,w.default.sources.USER),this.quill.format("direction",S,w.default.sources.USER)},indent:function(S){var P=this.quill.getSelection(),z=this.quill.getFormat(P),G=parseInt(z.indent||0);if(S==="+1"||S==="-1"){var ee=S==="+1"?1:-1;z.direction==="rtl"&&(ee*=-1),this.quill.format("indent",G+ee,w.default.sources.USER)}},link:function(S){S===!0&&(S=prompt("Enter link URL:")),this.quill.format("link",S,w.default.sources.USER)},list:function(S){var P=this.quill.getSelection(),z=this.quill.getFormat(P);S==="check"?z.list==="checked"||z.list==="unchecked"?this.quill.format("list",!1,w.default.sources.USER):this.quill.format("list","unchecked",w.default.sources.USER):this.quill.format("list",S,w.default.sources.USER)}}},s.default=B,s.addControls=p},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(n,s,o){"use strict";function a(d,_){if(!(d instanceof _))throw new TypeError("Cannot call a class as a function")}function l(d,_){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||typeof _!="object"&&typeof _!="function"?d:_}function f(d,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);d.prototype=Object.create(_&&_.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(d,_):d.__proto__=_)}Object.defineProperty(s,"__esModule",{value:!0});var m=function(){function d(_,y){for(var g=0;g<y.length;g++){var v=y[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(_,v.key,v)}}return function(_,y,g){return y&&d(_.prototype,y),g&&d(_,g),_}}(),b=function d(_,y,g){_===null&&(_=Function.prototype);var v=Object.getOwnPropertyDescriptor(_,y);if(v===void 0){var A=Object.getPrototypeOf(_);return A===null?void 0:d(A,y,g)}if("value"in v)return v.value;var k=v.get;if(k!==void 0)return k.call(g)},h=o(28),p=function(d){return d&&d.__esModule?d:{default:d}}(h),u=function(d){function _(y,g){a(this,_);var v=l(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,y));return v.label.innerHTML=g,v.container.classList.add("ql-color-picker"),[].slice.call(v.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(A){A.classList.add("ql-primary")}),v}return f(_,d),m(_,[{key:"buildItem",value:function(y){var g=b(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"buildItem",this).call(this,y);return g.style.backgroundColor=y.getAttribute("value")||"",g}},{key:"selectItem",value:function(y,g){b(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"selectItem",this).call(this,y,g);var v=this.label.querySelector(".ql-color-label"),A=y&&y.getAttribute("data-value")||"";v&&(v.tagName==="line"?v.style.stroke=A:v.style.fill=A)}}]),_}(p.default);s.default=u},function(n,s,o){"use strict";function a(d,_){if(!(d instanceof _))throw new TypeError("Cannot call a class as a function")}function l(d,_){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||typeof _!="object"&&typeof _!="function"?d:_}function f(d,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);d.prototype=Object.create(_&&_.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(d,_):d.__proto__=_)}Object.defineProperty(s,"__esModule",{value:!0});var m=function(){function d(_,y){for(var g=0;g<y.length;g++){var v=y[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(_,v.key,v)}}return function(_,y,g){return y&&d(_.prototype,y),g&&d(_,g),_}}(),b=function d(_,y,g){_===null&&(_=Function.prototype);var v=Object.getOwnPropertyDescriptor(_,y);if(v===void 0){var A=Object.getPrototypeOf(_);return A===null?void 0:d(A,y,g)}if("value"in v)return v.value;var k=v.get;if(k!==void 0)return k.call(g)},h=o(28),p=function(d){return d&&d.__esModule?d:{default:d}}(h),u=function(d){function _(y,g){a(this,_);var v=l(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,y));return v.container.classList.add("ql-icon-picker"),[].forEach.call(v.container.querySelectorAll(".ql-picker-item"),function(A){A.innerHTML=g[A.getAttribute("data-value")||""]}),v.defaultItem=v.container.querySelector(".ql-selected"),v.selectItem(v.defaultItem),v}return f(_,d),m(_,[{key:"selectItem",value:function(y,g){b(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"selectItem",this).call(this,y,g),y=y||this.defaultItem,this.label.innerHTML=y.innerHTML}}]),_}(p.default);s.default=u},function(n,s,o){"use strict";function a(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(s,"__esModule",{value:!0});var l=function(){function m(b,h){for(var p=0;p<h.length;p++){var u=h[p];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(b,u.key,u)}}return function(b,h,p){return h&&m(b.prototype,h),p&&m(b,p),b}}(),f=function(){function m(b,h){var p=this;a(this,m),this.quill=b,this.boundsContainer=h||document.body,this.root=b.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){p.root.style.marginTop=-1*p.quill.root.scrollTop+"px"}),this.hide()}return l(m,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(b){var h=b.left+b.width/2-this.root.offsetWidth/2,p=b.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=p+"px",this.root.classList.remove("ql-flip");var u=this.boundsContainer.getBoundingClientRect(),d=this.root.getBoundingClientRect(),_=0;if(d.right>u.right&&(_=u.right-d.right,this.root.style.left=h+_+"px"),d.left<u.left&&(_=u.left-d.left,this.root.style.left=h+_+"px"),d.bottom>u.bottom){var y=d.bottom-d.top,g=b.bottom-b.top+y;this.root.style.top=p-g+"px",this.root.classList.add("ql-flip")}return _}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),m}();s.default=f},function(n,s,o){"use strict";function a(B){return B&&B.__esModule?B:{default:B}}function l(B,S){if(!(B instanceof S))throw new TypeError("Cannot call a class as a function")}function f(B,S){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!S||typeof S!="object"&&typeof S!="function"?B:S}function m(B,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);B.prototype=Object.create(S&&S.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(B,S):B.__proto__=S)}Object.defineProperty(s,"__esModule",{value:!0});var b=function(){function B(S,P){var z=[],G=!0,ee=!1,F=void 0;try{for(var J,Z=S[Symbol.iterator]();!(G=(J=Z.next()).done)&&(z.push(J.value),!P||z.length!==P);G=!0);}catch(X){ee=!0,F=X}finally{try{!G&&Z.return&&Z.return()}finally{if(ee)throw F}}return z}return function(S,P){if(Array.isArray(S))return S;if(Symbol.iterator in Object(S))return B(S,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function B(S,P,z){S===null&&(S=Function.prototype);var G=Object.getOwnPropertyDescriptor(S,P);if(G===void 0){var ee=Object.getPrototypeOf(S);return ee===null?void 0:B(ee,P,z)}if("value"in G)return G.value;var F=G.get;if(F!==void 0)return F.call(z)},p=function(){function B(S,P){for(var z=0;z<P.length;z++){var G=P[z];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(S,G.key,G)}}return function(S,P,z){return P&&B(S.prototype,P),z&&B(S,z),S}}(),u=o(3),d=a(u),_=o(8),y=a(_),g=o(43),v=a(g),A=o(27),k=a(A),w=o(15),E=o(41),M=a(E),j=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],D=function(B){function S(P,z){l(this,S),z.modules.toolbar!=null&&z.modules.toolbar.container==null&&(z.modules.toolbar.container=j);var G=f(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,P,z));return G.quill.container.classList.add("ql-snow"),G}return m(S,B),p(S,[{key:"extendToolbar",value:function(P){P.container.classList.add("ql-snow"),this.buildButtons([].slice.call(P.container.querySelectorAll("button")),M.default),this.buildPickers([].slice.call(P.container.querySelectorAll("select")),M.default),this.tooltip=new N(this.quill,this.options.bounds),P.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(z,G){P.handlers.link.call(P,!G.format.link)})}}]),S}(v.default);D.DEFAULTS=(0,d.default)(!0,{},v.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(B){if(B){var S=this.quill.getSelection();if(S==null||S.length==0)return;var P=this.quill.getText(S);/^\S+@\S+\.\S+$/.test(P)&&P.indexOf("mailto:")!==0&&(P="mailto:"+P),this.quill.theme.tooltip.edit("link",P)}else this.quill.format("link",!1)}}}}});var N=function(B){function S(P,z){l(this,S);var G=f(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,P,z));return G.preview=G.root.querySelector("a.ql-preview"),G}return m(S,B),p(S,[{key:"listen",value:function(){var P=this;h(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(z){P.root.classList.contains("ql-editing")?P.save():P.edit("link",P.preview.textContent),z.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(z){if(P.linkRange!=null){var G=P.linkRange;P.restoreFocus(),P.quill.formatText(G,"link",!1,y.default.sources.USER),delete P.linkRange}z.preventDefault(),P.hide()}),this.quill.on(y.default.events.SELECTION_CHANGE,function(z,G,ee){if(z!=null){if(z.length===0&&ee===y.default.sources.USER){var F=P.quill.scroll.descendant(k.default,z.index),J=b(F,2),Z=J[0],X=J[1];if(Z!=null){P.linkRange=new w.Range(z.index-X,Z.length());var I=k.default.formats(Z.domNode);return P.preview.textContent=I,P.preview.setAttribute("href",I),P.show(),void P.position(P.quill.getBounds(P.linkRange))}}else delete P.linkRange;P.hide()}})}},{key:"show",value:function(){h(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),S}(g.BaseTooltip);N.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),s.default=D},function(n,s,o){"use strict";function a(de){return de&&de.__esModule?de:{default:de}}Object.defineProperty(s,"__esModule",{value:!0});var l=o(29),f=a(l),m=o(36),b=o(38),h=o(64),p=o(65),u=a(p),d=o(66),_=a(d),y=o(67),g=a(y),v=o(37),A=o(26),k=o(39),w=o(40),E=o(56),M=a(E),j=o(68),D=a(j),N=o(27),B=a(N),S=o(69),P=a(S),z=o(70),G=a(z),ee=o(71),F=a(ee),J=o(72),Z=a(J),X=o(73),I=a(X),H=o(13),W=a(H),te=o(74),re=a(te),se=o(75),K=a(se),ie=o(57),ce=a(ie),ye=o(41),_e=a(ye),Ee=o(28),Me=a(Ee),De=o(59),Le=a(De),Fe=o(60),Je=a(Fe),qe=o(61),O=a(qe),C=o(108),q=a(C),Q=o(62),ne=a(Q);f.default.register({"attributors/attribute/direction":b.DirectionAttribute,"attributors/class/align":m.AlignClass,"attributors/class/background":v.BackgroundClass,"attributors/class/color":A.ColorClass,"attributors/class/direction":b.DirectionClass,"attributors/class/font":k.FontClass,"attributors/class/size":w.SizeClass,"attributors/style/align":m.AlignStyle,"attributors/style/background":v.BackgroundStyle,"attributors/style/color":A.ColorStyle,"attributors/style/direction":b.DirectionStyle,"attributors/style/font":k.FontStyle,"attributors/style/size":w.SizeStyle},!0),f.default.register({"formats/align":m.AlignClass,"formats/direction":b.DirectionClass,"formats/indent":h.IndentClass,"formats/background":v.BackgroundStyle,"formats/color":A.ColorStyle,"formats/font":k.FontClass,"formats/size":w.SizeClass,"formats/blockquote":u.default,"formats/code-block":W.default,"formats/header":_.default,"formats/list":g.default,"formats/bold":M.default,"formats/code":H.Code,"formats/italic":D.default,"formats/link":B.default,"formats/script":P.default,"formats/strike":G.default,"formats/underline":F.default,"formats/image":Z.default,"formats/video":I.default,"formats/list/item":y.ListItem,"modules/formula":re.default,"modules/syntax":K.default,"modules/toolbar":ce.default,"themes/bubble":q.default,"themes/snow":ne.default,"ui/icons":_e.default,"ui/picker":Me.default,"ui/icon-picker":Je.default,"ui/color-picker":Le.default,"ui/tooltip":O.default},!0),s.default=f.default},function(n,s,o){"use strict";function a(_,y){if(!(_ instanceof y))throw new TypeError("Cannot call a class as a function")}function l(_,y){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||typeof y!="object"&&typeof y!="function"?_:y}function f(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);_.prototype=Object.create(y&&y.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(_,y):_.__proto__=y)}Object.defineProperty(s,"__esModule",{value:!0}),s.IndentClass=void 0;var m=function(){function _(y,g){for(var v=0;v<g.length;v++){var A=g[v];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}return function(y,g,v){return g&&_(y.prototype,g),v&&_(y,v),y}}(),b=function _(y,g,v){y===null&&(y=Function.prototype);var A=Object.getOwnPropertyDescriptor(y,g);if(A===void 0){var k=Object.getPrototypeOf(y);return k===null?void 0:_(k,g,v)}if("value"in A)return A.value;var w=A.get;if(w!==void 0)return w.call(v)},h=o(0),p=function(_){return _&&_.__esModule?_:{default:_}}(h),u=function(_){function y(){return a(this,y),l(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return f(y,_),m(y,[{key:"add",value:function(g,v){if(v==="+1"||v==="-1"){var A=this.value(g)||0;v=v==="+1"?A+1:A-1}return v===0?(this.remove(g),!0):b(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"add",this).call(this,g,v)}},{key:"canAdd",value:function(g,v){return b(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"canAdd",this).call(this,g,v)||b(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"canAdd",this).call(this,g,parseInt(v))}},{key:"value",value:function(g){return parseInt(b(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,g))||void 0}}]),y}(p.default.Attributor.Class),d=new u("indent","ql-indent",{scope:p.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});s.IndentClass=d},function(n,s,o){"use strict";function a(p,u){if(!(p instanceof u))throw new TypeError("Cannot call a class as a function")}function l(p,u){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?p:u}function f(p,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);p.prototype=Object.create(u&&u.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(p,u):p.__proto__=u)}Object.defineProperty(s,"__esModule",{value:!0});var m=o(4),b=function(p){return p&&p.__esModule?p:{default:p}}(m),h=function(p){function u(){return a(this,u),l(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return f(u,p),u}(b.default);h.blotName="blockquote",h.tagName="blockquote",s.default=h},function(n,s,o){"use strict";function a(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}function l(u,d){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||typeof d!="object"&&typeof d!="function"?u:d}function f(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);u.prototype=Object.create(d&&d.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(u,d):u.__proto__=d)}Object.defineProperty(s,"__esModule",{value:!0});var m=function(){function u(d,_){for(var y=0;y<_.length;y++){var g=_[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}return function(d,_,y){return _&&u(d.prototype,_),y&&u(d,y),d}}(),b=o(4),h=function(u){return u&&u.__esModule?u:{default:u}}(b),p=function(u){function d(){return a(this,d),l(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return f(d,u),m(d,null,[{key:"formats",value:function(_){return this.tagName.indexOf(_.tagName)+1}}]),d}(h.default);p.blotName="header",p.tagName=["H1","H2","H3","H4","H5","H6"],s.default=p},function(n,s,o){"use strict";function a(w){return w&&w.__esModule?w:{default:w}}function l(w,E,M){return E in w?Object.defineProperty(w,E,{value:M,enumerable:!0,configurable:!0,writable:!0}):w[E]=M,w}function f(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function m(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!E||typeof E!="object"&&typeof E!="function"?w:E}function b(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.ListItem=void 0;var h=function(){function w(E,M){for(var j=0;j<M.length;j++){var D=M[j];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(E,D.key,D)}}return function(E,M,j){return M&&w(E.prototype,M),j&&w(E,j),E}}(),p=function w(E,M,j){E===null&&(E=Function.prototype);var D=Object.getOwnPropertyDescriptor(E,M);if(D===void 0){var N=Object.getPrototypeOf(E);return N===null?void 0:w(N,M,j)}if("value"in D)return D.value;var B=D.get;if(B!==void 0)return B.call(j)},u=o(0),d=a(u),_=o(4),y=a(_),g=o(25),v=a(g),A=function(w){function E(){return f(this,E),m(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return b(E,w),h(E,[{key:"format",value:function(M,j){M!==k.blotName||j?p(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,M,j):this.replaceWith(d.default.create(this.statics.scope))}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():p(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(M,j){return this.parent.isolate(this.offset(this.parent),this.length()),M===this.parent.statics.blotName?(this.parent.replaceWith(M,j),this):(this.parent.unwrap(),p(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,M,j))}}],[{key:"formats",value:function(M){return M.tagName===this.tagName?void 0:p(E.__proto__||Object.getPrototypeOf(E),"formats",this).call(this,M)}}]),E}(y.default);A.blotName="list-item",A.tagName="LI";var k=function(w){function E(M){f(this,E);var j=m(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,M)),D=function(N){if(N.target.parentNode===M){var B=j.statics.formats(M),S=d.default.find(N.target);B==="checked"?S.format("list","unchecked"):B==="unchecked"&&S.format("list","checked")}};return M.addEventListener("touchstart",D),M.addEventListener("mousedown",D),j}return b(E,w),h(E,null,[{key:"create",value:function(M){var j=M==="ordered"?"OL":"UL",D=p(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,j);return M!=="checked"&&M!=="unchecked"||D.setAttribute("data-checked",M==="checked"),D}},{key:"formats",value:function(M){return M.tagName==="OL"?"ordered":M.tagName==="UL"?M.hasAttribute("data-checked")?M.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet":void 0}}]),h(E,[{key:"format",value:function(M,j){this.children.length>0&&this.children.tail.format(M,j)}},{key:"formats",value:function(){return l({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(M,j){if(M instanceof A)p(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,M,j);else{var D=j==null?this.length():j.offset(this),N=this.split(D);N.parent.insertBefore(M,N)}}},{key:"optimize",value:function(M){p(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,M);var j=this.next;j!=null&&j.prev===this&&j.statics.blotName===this.statics.blotName&&j.domNode.tagName===this.domNode.tagName&&j.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(j.moveChildren(this),j.remove())}},{key:"replace",value:function(M){if(M.statics.blotName!==this.statics.blotName){var j=d.default.create(this.statics.defaultChild);M.moveChildren(j),this.appendChild(j)}p(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replace",this).call(this,M)}}]),E}(v.default);k.blotName="list",k.scope=d.default.Scope.BLOCK_BLOT,k.tagName=["OL","UL"],k.defaultChild="list-item",k.allowedChildren=[A],s.ListItem=A,s.default=k},function(n,s,o){"use strict";function a(p,u){if(!(p instanceof u))throw new TypeError("Cannot call a class as a function")}function l(p,u){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?p:u}function f(p,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);p.prototype=Object.create(u&&u.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(p,u):p.__proto__=u)}Object.defineProperty(s,"__esModule",{value:!0});var m=o(56),b=function(p){return p&&p.__esModule?p:{default:p}}(m),h=function(p){function u(){return a(this,u),l(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return f(u,p),u}(b.default);h.blotName="italic",h.tagName=["EM","I"],s.default=h},function(n,s,o){"use strict";function a(d,_){if(!(d instanceof _))throw new TypeError("Cannot call a class as a function")}function l(d,_){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||typeof _!="object"&&typeof _!="function"?d:_}function f(d,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);d.prototype=Object.create(_&&_.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(d,_):d.__proto__=_)}Object.defineProperty(s,"__esModule",{value:!0});var m=function(){function d(_,y){for(var g=0;g<y.length;g++){var v=y[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(_,v.key,v)}}return function(_,y,g){return y&&d(_.prototype,y),g&&d(_,g),_}}(),b=function d(_,y,g){_===null&&(_=Function.prototype);var v=Object.getOwnPropertyDescriptor(_,y);if(v===void 0){var A=Object.getPrototypeOf(_);return A===null?void 0:d(A,y,g)}if("value"in v)return v.value;var k=v.get;if(k!==void 0)return k.call(g)},h=o(6),p=function(d){return d&&d.__esModule?d:{default:d}}(h),u=function(d){function _(){return a(this,_),l(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return f(_,d),m(_,null,[{key:"create",value:function(y){return y==="super"?document.createElement("sup"):y==="sub"?document.createElement("sub"):b(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,y)}},{key:"formats",value:function(y){return y.tagName==="SUB"?"sub":y.tagName==="SUP"?"super":void 0}}]),_}(p.default);u.blotName="script",u.tagName=["SUB","SUP"],s.default=u},function(n,s,o){"use strict";function a(p,u){if(!(p instanceof u))throw new TypeError("Cannot call a class as a function")}function l(p,u){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?p:u}function f(p,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);p.prototype=Object.create(u&&u.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(p,u):p.__proto__=u)}Object.defineProperty(s,"__esModule",{value:!0});var m=o(6),b=function(p){return p&&p.__esModule?p:{default:p}}(m),h=function(p){function u(){return a(this,u),l(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return f(u,p),u}(b.default);h.blotName="strike",h.tagName="S",s.default=h},function(n,s,o){"use strict";function a(p,u){if(!(p instanceof u))throw new TypeError("Cannot call a class as a function")}function l(p,u){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!u||typeof u!="object"&&typeof u!="function"?p:u}function f(p,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);p.prototype=Object.create(u&&u.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(p,u):p.__proto__=u)}Object.defineProperty(s,"__esModule",{value:!0});var m=o(6),b=function(p){return p&&p.__esModule?p:{default:p}}(m),h=function(p){function u(){return a(this,u),l(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return f(u,p),u}(b.default);h.blotName="underline",h.tagName="U",s.default=h},function(n,s,o){"use strict";function a(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function l(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||typeof g!="object"&&typeof g!="function"?y:g}function f(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}Object.defineProperty(s,"__esModule",{value:!0});var m=function(){function y(g,v){for(var A=0;A<v.length;A++){var k=v[A];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(g,k.key,k)}}return function(g,v,A){return v&&y(g.prototype,v),A&&y(g,A),g}}(),b=function y(g,v,A){g===null&&(g=Function.prototype);var k=Object.getOwnPropertyDescriptor(g,v);if(k===void 0){var w=Object.getPrototypeOf(g);return w===null?void 0:y(w,v,A)}if("value"in k)return k.value;var E=k.get;if(E!==void 0)return E.call(A)},h=o(0),p=function(y){return y&&y.__esModule?y:{default:y}}(h),u=o(27),d=["alt","height","width"],_=function(y){function g(){return a(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return f(g,y),m(g,[{key:"format",value:function(v,A){d.indexOf(v)>-1?A?this.domNode.setAttribute(v,A):this.domNode.removeAttribute(v):b(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,v,A)}}],[{key:"create",value:function(v){var A=b(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,v);return typeof v=="string"&&A.setAttribute("src",this.sanitize(v)),A}},{key:"formats",value:function(v){return d.reduce(function(A,k){return v.hasAttribute(k)&&(A[k]=v.getAttribute(k)),A},{})}},{key:"match",value:function(v){return/\.(jpe?g|gif|png)$/.test(v)||/^data:image\/.+;base64/.test(v)}},{key:"sanitize",value:function(v){return(0,u.sanitize)(v,["http","https","data"])?v:"//:0"}},{key:"value",value:function(v){return v.getAttribute("src")}}]),g}(p.default.Embed);_.blotName="image",_.tagName="IMG",s.default=_},function(n,s,o){"use strict";function a(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function l(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||typeof g!="object"&&typeof g!="function"?y:g}function f(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}Object.defineProperty(s,"__esModule",{value:!0});var m=function(){function y(g,v){for(var A=0;A<v.length;A++){var k=v[A];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(g,k.key,k)}}return function(g,v,A){return v&&y(g.prototype,v),A&&y(g,A),g}}(),b=function y(g,v,A){g===null&&(g=Function.prototype);var k=Object.getOwnPropertyDescriptor(g,v);if(k===void 0){var w=Object.getPrototypeOf(g);return w===null?void 0:y(w,v,A)}if("value"in k)return k.value;var E=k.get;if(E!==void 0)return E.call(A)},h=o(4),p=o(27),u=function(y){return y&&y.__esModule?y:{default:y}}(p),d=["height","width"],_=function(y){function g(){return a(this,g),l(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return f(g,y),m(g,[{key:"format",value:function(v,A){d.indexOf(v)>-1?A?this.domNode.setAttribute(v,A):this.domNode.removeAttribute(v):b(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,v,A)}}],[{key:"create",value:function(v){var A=b(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,v);return A.setAttribute("frameborder","0"),A.setAttribute("allowfullscreen",!0),A.setAttribute("src",this.sanitize(v)),A}},{key:"formats",value:function(v){return d.reduce(function(A,k){return v.hasAttribute(k)&&(A[k]=v.getAttribute(k)),A},{})}},{key:"sanitize",value:function(v){return u.default.sanitize(v)}},{key:"value",value:function(v){return v.getAttribute("src")}}]),g}(h.BlockEmbed);_.blotName="video",_.className="ql-video",_.tagName="IFRAME",s.default=_},function(n,s,o){"use strict";function a(k){return k&&k.__esModule?k:{default:k}}function l(k,w){if(!(k instanceof w))throw new TypeError("Cannot call a class as a function")}function f(k,w){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!w||typeof w!="object"&&typeof w!="function"?k:w}function m(k,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);k.prototype=Object.create(w&&w.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(k,w):k.__proto__=w)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.FormulaBlot=void 0;var b=function(){function k(w,E){for(var M=0;M<E.length;M++){var j=E[M];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(w,j.key,j)}}return function(w,E,M){return E&&k(w.prototype,E),M&&k(w,M),w}}(),h=function k(w,E,M){w===null&&(w=Function.prototype);var j=Object.getOwnPropertyDescriptor(w,E);if(j===void 0){var D=Object.getPrototypeOf(w);return D===null?void 0:k(D,E,M)}if("value"in j)return j.value;var N=j.get;if(N!==void 0)return N.call(M)},p=o(35),u=a(p),d=o(5),_=a(d),y=o(9),g=a(y),v=function(k){function w(){return l(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return m(w,k),b(w,null,[{key:"create",value:function(E){var M=h(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,E);return typeof E=="string"&&(window.katex.render(E,M,{throwOnError:!1,errorColor:"#f00"}),M.setAttribute("data-value",E)),M}},{key:"value",value:function(E){return E.getAttribute("data-value")}}]),w}(u.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var A=function(k){function w(){l(this,w);var E=f(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return E}return m(w,k),b(w,null,[{key:"register",value:function(){_.default.register(v,!0)}}]),w}(g.default);s.FormulaBlot=v,s.default=A},function(n,s,o){"use strict";function a(M){return M&&M.__esModule?M:{default:M}}function l(M,j){if(!(M instanceof j))throw new TypeError("Cannot call a class as a function")}function f(M,j){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||typeof j!="object"&&typeof j!="function"?M:j}function m(M,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);M.prototype=Object.create(j&&j.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(M,j):M.__proto__=j)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.CodeToken=s.CodeBlock=void 0;var b=function(){function M(j,D){for(var N=0;N<D.length;N++){var B=D[N];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(j,B.key,B)}}return function(j,D,N){return D&&M(j.prototype,D),N&&M(j,N),j}}(),h=function M(j,D,N){j===null&&(j=Function.prototype);var B=Object.getOwnPropertyDescriptor(j,D);if(B===void 0){var S=Object.getPrototypeOf(j);return S===null?void 0:M(S,D,N)}if("value"in B)return B.value;var P=B.get;if(P!==void 0)return P.call(N)},p=o(0),u=a(p),d=o(5),_=a(d),y=o(9),g=a(y),v=o(13),A=a(v),k=function(M){function j(){return l(this,j),f(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return m(j,M),b(j,[{key:"replaceWith",value:function(D){this.domNode.textContent=this.domNode.textContent,this.attach(),h(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"replaceWith",this).call(this,D)}},{key:"highlight",value:function(D){var N=this.domNode.textContent;this.cachedText!==N&&((N.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=D(N),this.domNode.normalize(),this.attach()),this.cachedText=N)}}]),j}(A.default);k.className="ql-syntax";var w=new u.default.Attributor.Class("token","hljs",{scope:u.default.Scope.INLINE}),E=function(M){function j(D,N){l(this,j);var B=f(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,D,N));if(typeof B.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var S=null;return B.quill.on(_.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(S),S=setTimeout(function(){B.highlight(),S=null},B.options.interval)}),B.highlight(),B}return m(j,M),b(j,null,[{key:"register",value:function(){_.default.register(w,!0),_.default.register(k,!0)}}]),b(j,[{key:"highlight",value:function(){var D=this;if(!this.quill.selection.composing){this.quill.update(_.default.sources.USER);var N=this.quill.getSelection();this.quill.scroll.descendants(k).forEach(function(B){B.highlight(D.options.highlight)}),this.quill.update(_.default.sources.SILENT),N!=null&&this.quill.setSelection(N,_.default.sources.SILENT)}}}]),j}(g.default);E.DEFAULTS={highlight:function(){return window.hljs==null?null:function(M){return window.hljs.highlightAuto(M).value}}(),interval:1e3},s.CodeBlock=k,s.CodeToken=w,s.default=E},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(n,s){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(n,s){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(n,s){n.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(n,s){n.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(n,s){n.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(n,s,o){"use strict";function a(j){return j&&j.__esModule?j:{default:j}}function l(j,D){if(!(j instanceof D))throw new TypeError("Cannot call a class as a function")}function f(j,D){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!D||typeof D!="object"&&typeof D!="function"?j:D}function m(j,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);j.prototype=Object.create(D&&D.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(j,D):j.__proto__=D)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.BubbleTooltip=void 0;var b=function j(D,N,B){D===null&&(D=Function.prototype);var S=Object.getOwnPropertyDescriptor(D,N);if(S===void 0){var P=Object.getPrototypeOf(D);return P===null?void 0:j(P,N,B)}if("value"in S)return S.value;var z=S.get;if(z!==void 0)return z.call(B)},h=function(){function j(D,N){for(var B=0;B<N.length;B++){var S=N[B];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(D,S.key,S)}}return function(D,N,B){return N&&j(D.prototype,N),B&&j(D,B),D}}(),p=o(3),u=a(p),d=o(8),_=a(d),y=o(43),g=a(y),v=o(15),A=o(41),k=a(A),w=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],E=function(j){function D(N,B){l(this,D),B.modules.toolbar!=null&&B.modules.toolbar.container==null&&(B.modules.toolbar.container=w);var S=f(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,N,B));return S.quill.container.classList.add("ql-bubble"),S}return m(D,j),h(D,[{key:"extendToolbar",value:function(N){this.tooltip=new M(this.quill,this.options.bounds),this.tooltip.root.appendChild(N.container),this.buildButtons([].slice.call(N.container.querySelectorAll("button")),k.default),this.buildPickers([].slice.call(N.container.querySelectorAll("select")),k.default)}}]),D}(g.default);E.DEFAULTS=(0,u.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(j){j?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var M=function(j){function D(N,B){l(this,D);var S=f(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,N,B));return S.quill.on(_.default.events.EDITOR_CHANGE,function(P,z,G,ee){if(P===_.default.events.SELECTION_CHANGE)if(z!=null&&z.length>0&&ee===_.default.sources.USER){S.show(),S.root.style.left="0px",S.root.style.width="",S.root.style.width=S.root.offsetWidth+"px";var F=S.quill.getLines(z.index,z.length);if(F.length===1)S.position(S.quill.getBounds(z));else{var J=F[F.length-1],Z=S.quill.getIndex(J),X=Math.min(J.length()-1,z.index+z.length-Z),I=S.quill.getBounds(new v.Range(Z,X));S.position(I)}}else document.activeElement!==S.textbox&&S.quill.hasFocus()&&S.hide()}),S}return m(D,j),h(D,[{key:"listen",value:function(){var N=this;b(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){N.root.classList.remove("ql-editing")}),this.quill.on(_.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!N.root.classList.contains("ql-hidden")){var B=N.quill.getSelection();B!=null&&N.position(N.quill.getBounds(B))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(N){var B=b(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"position",this).call(this,N),S=this.root.querySelector(".ql-tooltip-arrow");if(S.style.marginLeft="",B===0)return B;S.style.marginLeft=-1*B-S.offsetWidth/2+"px"}}]),D}(y.BaseTooltip);M.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),s.BubbleTooltip=M,s.default=E},function(n,s,o){n.exports=o(63)}]).default})}).call(e,t(43).Buffer)},function(r,e,t){var i=t(11),n=t(1),s=i(n,"Map");r.exports=s},function(r,e,t){var i=t(1),n=i.Symbol;r.exports=n},function(r,e){function t(i,n,s){switch(s.length){case 0:return i.call(n);case 1:return i.call(n,s[0]);case 2:return i.call(n,s[0],s[1]);case 3:return i.call(n,s[0],s[1],s[2])}return i.apply(n,s)}r.exports=t},function(r,e,t){function i(o,a,l){(l===void 0||s(o[a],l))&&(l!==void 0||a in o)||n(o,a,l)}var n=t(10),s=t(8);r.exports=i},function(r,e,t){function i(b,h,p,u,d){b!==h&&o(h,function(_,y){if(d||(d=new n),l(_))a(b,h,y,p,i,u,d);else{var g=u?u(m(b,y),_,y+"",b,h,d):void 0;g===void 0&&(g=_),s(b,y,g)}},f)}var n=t(48),s=t(19),o=t(53),a=t(58),l=t(0),f=t(34),m=t(27);r.exports=i},function(r,e,t){function i(a,l){return o(s(a,l,n),a+"")}var n=t(28),s=t(96),o=t(97);r.exports=i},function(r,e,t){var i=t(11),n=function(){try{var s=i(Object,"defineProperty");return s({},"",{}),s}catch(o){}}();r.exports=n},function(r,e,t){(function(i){var n=typeof i=="object"&&i&&i.Object===Object&&i;r.exports=n}).call(e,t(35))},function(r,e,t){var i=t(95),n=i(Object.getPrototypeOf,Object);r.exports=n},function(r,e){function t(s,o){var a=typeof s;return!!(o=o==null?i:o)&&(a=="number"||a!="symbol"&&n.test(s))&&s>-1&&s%1==0&&s<o}var i=9007199254740991,n=/^(?:0|[1-9]\d*)$/;r.exports=t},function(r,e){function t(n){var s=n&&n.constructor;return n===(typeof s=="function"&&s.prototype||i)}var i=Object.prototype;r.exports=t},function(r,e){function t(i,n){if((n!=="constructor"||typeof i[n]!="function")&&n!="__proto__")return i[n]}r.exports=t},function(r,e){function t(i){return i}r.exports=t},function(r,e,t){var i=t(54),n=t(2),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(f){return n(f)&&o.call(f,"callee")&&!a.call(f,"callee")};r.exports=l},function(r,e){var t=Array.isArray;r.exports=t},function(r,e,t){(function(i){var n=t(1),s=t(109),o=typeof e=="object"&&e&&!e.nodeType&&e,a=o&&typeof i=="object"&&i&&!i.nodeType&&i,l=a&&a.exports===o,f=l?n.Buffer:void 0,m=f?f.isBuffer:void 0,b=m||s;i.exports=b}).call(e,t(14)(r))},function(r,e){function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=i}var i=9007199254740991;r.exports=t},function(r,e,t){var i=t(56),n=t(61),s=t(93),o=s&&s.isTypedArray,a=o?n(o):i;r.exports=a},function(r,e,t){function i(a){return o(a)?n(a,!0):s(a)}var n=t(50),s=t(57),o=t(12);r.exports=i},function(r,e){var t;t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch(i){typeof window=="object"&&(t=window)}r.exports=t},function(r,e,t){"use strict";e.a={modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}}},function(r,e,t){"use strict";function i(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}function n(l,f){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?l:f}function s(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);l.prototype=Object.create(f&&f.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(l,f):l.__proto__=f)}t.d(e,"a",function(){return a});var o=t(9),a=function(l){function f(){var m,b,h,p;i(this,f);for(var u=arguments.length,d=Array(u),_=0;_<u;_++)d[_]=arguments[_];return b=h=n(this,(m=f.__proto__||Object.getPrototypeOf(f)).call.apply(m,[this].concat(d))),h.onCreate=function(){h.display=document.createElement("div"),Object.assign(h.display.style,h.options.displayStyles),h.overlay.appendChild(h.display)},h.onDestroy=function(){},h.onUpdate=function(){if(h.display&&h.img){var y=h.getCurrentSize();if(h.display.innerHTML=y.join(" &times; "),y[0]>120&&y[1]>30)Object.assign(h.display.style,{right:"4px",bottom:"4px",left:"auto"});else if(h.img.style.float=="right"){var g=h.display.getBoundingClientRect();Object.assign(h.display.style,{right:"auto",bottom:"-"+(g.height+4)+"px",left:"-"+(g.width+4)+"px"})}else{var v=h.display.getBoundingClientRect();Object.assign(h.display.style,{right:"-"+(v.width+4)+"px",bottom:"-"+(v.height+4)+"px",left:"auto"})}}},h.getCurrentSize=function(){return[h.img.width,Math.round(h.img.width/h.img.naturalWidth*h.img.naturalHeight)]},p=b,n(h,p)}return s(f,l),f}(o.a)},function(r,e,t){"use strict";function i(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}function n(l,f){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||typeof f!="object"&&typeof f!="function"?l:f}function s(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);l.prototype=Object.create(f&&f.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(l,f):l.__proto__=f)}t.d(e,"a",function(){return a});var o=t(9),a=function(l){function f(){var m,b,h,p;i(this,f);for(var u=arguments.length,d=Array(u),_=0;_<u;_++)d[_]=arguments[_];return b=h=n(this,(m=f.__proto__||Object.getPrototypeOf(f)).call.apply(m,[this].concat(d))),h.onCreate=function(){h.boxes=[],h.addBox("nwse-resize"),h.addBox("nesw-resize"),h.addBox("nwse-resize"),h.addBox("nesw-resize"),h.positionBoxes()},h.onDestroy=function(){h.setCursor("")},h.positionBoxes=function(){var y=-parseFloat(h.options.handleStyles.width)/2+"px",g=-parseFloat(h.options.handleStyles.height)/2+"px";[{left:y,top:g},{right:y,top:g},{right:y,bottom:g},{left:y,bottom:g}].forEach(function(v,A){Object.assign(h.boxes[A].style,v)})},h.addBox=function(y){var g=document.createElement("div");Object.assign(g.style,h.options.handleStyles),g.style.cursor=y,g.style.width=h.options.handleStyles.width+"px",g.style.height=h.options.handleStyles.height+"px",g.addEventListener("mousedown",h.handleMousedown,!1),h.overlay.appendChild(g),h.boxes.push(g)},h.handleMousedown=function(y){h.dragBox=y.target,h.dragStartX=y.clientX,h.preDragWidth=h.img.width||h.img.naturalWidth,h.setCursor(h.dragBox.style.cursor),document.addEventListener("mousemove",h.handleDrag,!1),document.addEventListener("mouseup",h.handleMouseup,!1)},h.handleMouseup=function(){h.setCursor(""),document.removeEventListener("mousemove",h.handleDrag),document.removeEventListener("mouseup",h.handleMouseup)},h.handleDrag=function(y){if(h.img){var g=y.clientX-h.dragStartX;h.dragBox===h.boxes[0]||h.dragBox===h.boxes[3]?h.img.width=Math.round(h.preDragWidth-g):h.img.width=Math.round(h.preDragWidth+g),h.requestUpdate()}},h.setCursor=function(y){[document.body,h.img].forEach(function(g){g.style.cursor=y})},p=b,n(h,p)}return s(f,l),f}(o.a)},function(r,e,t){"use strict";function i(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function n(w,E){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!E||typeof E!="object"&&typeof E!="function"?w:E}function s(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);w.prototype=Object.create(E&&E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(w,E):w.__proto__=E)}t.d(e,"a",function(){return k});var o=t(15),a=t.n(o),l=t(112),f=t.n(l),m=t(111),b=t.n(m),h=t(113),p=t.n(h),u=t(9),d=function(){function w(E,M){for(var j=0;j<M.length;j++){var D=M[j];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(E,D.key,D)}}return function(E,M,j){return M&&w(E.prototype,M),j&&w(E,j),E}}(),_=a.a.imports.parchment,y=(new _.Attributor.Style("float","float"),new _.Attributor.Style("margin","margin"),new _.Attributor.Style("margin-left","margin-left")),g=new _.Attributor.Style("margin-right","margin-right"),v=new _.Attributor.Style("display","display"),A=new _.Attributor.Attribute("nameClass","class",{scope:_.Scope.INLINE});a.a.register(A);var k=function(w){function E(){var M,j,D,N;i(this,E);for(var B=arguments.length,S=Array(B),P=0;P<B;P++)S[P]=arguments[P];return j=D=n(this,(M=E.__proto__||Object.getPrototypeOf(E)).call.apply(M,[this].concat(S))),D.onCreate=function(){D.toolbar=document.createElement("div"),Object.assign(D.toolbar.style,D.options.toolbarStyles),D.overlay.appendChild(D.toolbar),D._defineAlignments(),D._addToolbarButtons()},D.onDestroy=function(){},D.onUpdate=function(){},D._defineAlignments=function(){D.alignments=[{icon:f.a,apply:function(){D._makeBlock(),g.add(D.img,"auto")},isApplied:function(){return g.value(D.img)=="auto"&&y.value(D.img)!=="auto"}},{icon:b.a,apply:function(){D._makeBlock(),g.add(D.img,"auto"),y.add(D.img,"auto")},isApplied:function(){return y.value(D.img)=="auto"&&g.value(D.img)=="auto"}},{icon:p.a,apply:function(){D._makeBlock(),y.add(D.img,"auto")},isApplied:function(){return y.value(D.img)=="auto"&&g.value(D.img)!=="auto"}}]},D._addToolbarButtons=function(){var z=[];D.alignments.forEach(function(G,ee){var F=document.createElement("span");z.push(F),F.innerHTML=G.icon,F.addEventListener("click",function(){z.forEach(function(J){return J.style.filter=""}),G.isApplied()?D._unApplyStyles():(D._selectButton(F),D._unApplyStyles(),G.apply()),D.requestUpdate()}),Object.assign(F.style,D.options.toolbarButtonStyles),ee>0&&(F.style.borderLeftWidth="0"),Object.assign(F.children[0].style,D.options.toolbarButtonSvgStyles),G.isApplied()&&D._selectButton(F),D.toolbar.appendChild(F)})},D._selectButton=function(z){z.style.filter="invert(20%)"},N=j,n(D,N)}return s(E,w),d(E,[{key:"_unApplyStyles",value:function(){y.remove(this.img),g.remove(this.img),v.remove(this.img)}},{key:"_makeBlock",value:function(){v.add(this.img,"block")}}]),E}(u.a)},function(r,e,t){var i=t(18),n=t(21),s=t(70),o=t(108),a=n(function(l){return l.push(void 0,s),i(o,void 0,l)});r.exports=a},function(r,e,t){"use strict";function i(k,w){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!w||typeof w!="object"&&typeof w!="function"?k:w}function n(k,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);k.prototype=Object.create(w&&w.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(k,w):k.__proto__=w)}function s(k,w){if(!(k instanceof w))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=t(15),a=t.n(o),l=t(40),f=t.n(l),m=t(36),b=t(37),h=t(39),p=t(38),u=function(){function k(w,E){for(var M=0;M<E.length;M++){var j=E[M];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(w,j.key,j)}}return function(w,E,M){return E&&k(w.prototype,E),M&&k(w,M),w}}(),d=function k(w,E,M){w===null&&(w=Function.prototype);var j=Object.getOwnPropertyDescriptor(w,E);if(j===void 0){var D=Object.getPrototypeOf(w);return D===null?void 0:k(D,E,M)}if("value"in j)return j.value;var N=j.get;if(N!==void 0)return N.call(M)},_={DisplaySize:b.a,Toolbar:h.a,Resize:p.a},y=function k(w){var E=this,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,k),this.initializeModules=function(){E.removeModules(),E.modules=E.moduleClasses.map(function(D){return new(_[D]||D)(E)}),E.modules.forEach(function(D){D.onCreate()}),E.onUpdate()},this.onUpdate=function(){E.repositionElements(),E.modules.forEach(function(D){D.onUpdate()})},this.removeModules=function(){E.modules.forEach(function(D){D.onDestroy()}),E.modules=[]},this.handleClick=function(D){if(D.target&&D.target.tagName&&D.target.tagName.toUpperCase()==="IMG"){if(E.img===D.target)return;E.img&&E.hide(),E.show(D.target),D.preventDefault()}else E.img&&E.hide()},this.handleScroll=function(D){E.hide()},this.show=function(D){E.img=D,E.showOverlay(),E.initializeModules()},this.showOverlay=function(){E.overlay&&E.hideOverlay(),E.quill.setSelection(null),E.setUserSelect("none"),document.addEventListener("keyup",E.checkImage,!0),E.quill.root.addEventListener("input",E.checkImage,!0),E.overlay=document.createElement("div"),Object.assign(E.overlay.style,E.options.overlayStyles),E.quill.root.parentNode.appendChild(E.overlay),E.repositionElements()},this.hideOverlay=function(){E.overlay&&(E.quill.root.parentNode.removeChild(E.overlay),E.overlay=void 0,document.removeEventListener("keyup",E.checkImage),E.quill.root.removeEventListener("input",E.checkImage),E.setUserSelect(""))},this.repositionElements=function(){if(E.overlay&&E.img){var D=E.quill.root.parentNode,N=E.img.getBoundingClientRect(),B=D.getBoundingClientRect();Object.assign(E.overlay.style,{left:N.left-B.left-1+D.scrollLeft+"px",top:N.top-B.top+D.scrollTop+"px",width:N.width+"px",height:N.height+"px"})}},this.hide=function(){E.hideOverlay(),E.removeModules(),E.img=void 0},this.setUserSelect=function(D){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach(function(N){E.quill.root.style[N]=D,document.documentElement.style[N]=D})},this.checkImage=function(D){E.img&&(D.keyCode!=46&&D.keyCode!=8||(window.Quill||a.a).find(E.img).deleteAt(0),E.hide())},this.quill=w;var j=!1;M.modules&&(j=M.modules.slice()),this.options=f()({},M,m.a),j!==!1&&(this.options.modules=j),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.addEventListener("mscontrolselect",this.handleClick,!1),this.quill.root.addEventListener("scroll",this.handleScroll,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]};if(e.default=y,window.Quill){var g=["alt","height","width","style"],v=window.Quill.import("formats/image"),A=function(k){function w(){return s(this,w),i(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return n(w,k),u(w,[{key:"format",value:function(E,M){g.indexOf(E)>-1?M?this.domNode.setAttribute(E,M):this.domNode.removeAttribute(E):d(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,E,M)}}],[{key:"formats",value:function(E){return g.reduce(function(M,j){return E.hasAttribute(j)&&(M[j]=E.getAttribute(j)),M},{})}}]),w}(v);window.Quill.register(A,!0),typeof Object.assign!="function"&&(Object.assign=function(k){if(k==null)throw new TypeError("Cannot convert undefined or null to object");k=Object(k);for(var w=1;w<arguments.length;w++){var E=arguments[w];if(E!=null)for(var M in E)Object.prototype.hasOwnProperty.call(E,M)&&(k[M]=E[M])}return k}),window.Quill.register("modules/imageResize",y)}},function(r,e,t){"use strict";function i(_){var y=_.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=_.indexOf("=");return g===-1&&(g=y),[g,g===y?0:4-g%4]}function n(_){var y=i(_),g=y[0],v=y[1];return 3*(g+v)/4-v}function s(_,y,g){return 3*(y+g)/4-g}function o(_){var y,g,v=i(_),A=v[0],k=v[1],w=new h(s(_,A,k)),E=0,M=k>0?A-4:A;for(g=0;g<M;g+=4)y=b[_.charCodeAt(g)]<<18|b[_.charCodeAt(g+1)]<<12|b[_.charCodeAt(g+2)]<<6|b[_.charCodeAt(g+3)],w[E++]=y>>16&255,w[E++]=y>>8&255,w[E++]=255&y;return k===2&&(y=b[_.charCodeAt(g)]<<2|b[_.charCodeAt(g+1)]>>4,w[E++]=255&y),k===1&&(y=b[_.charCodeAt(g)]<<10|b[_.charCodeAt(g+1)]<<4|b[_.charCodeAt(g+2)]>>2,w[E++]=y>>8&255,w[E++]=255&y),w}function a(_){return m[_>>18&63]+m[_>>12&63]+m[_>>6&63]+m[63&_]}function l(_,y,g){for(var v,A=[],k=y;k<g;k+=3)v=(_[k]<<16&16711680)+(_[k+1]<<8&65280)+(255&_[k+2]),A.push(a(v));return A.join("")}function f(_){for(var y,g=_.length,v=g%3,A=[],k=0,w=g-v;k<w;k+=16383)A.push(l(_,k,k+16383>w?w:k+16383));return v===1?(y=_[g-1],A.push(m[y>>2]+m[y<<4&63]+"==")):v===2&&(y=(_[g-2]<<8)+_[g-1],A.push(m[y>>10]+m[y>>4&63]+m[y<<2&63]+"=")),A.join("")}e.byteLength=n,e.toByteArray=o,e.fromByteArray=f;for(var m=[],b=[],h=typeof Uint8Array!="undefined"?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,d=p.length;u<d;++u)m[u]=p[u],b[p.charCodeAt(u)]=u;b["-".charCodeAt(0)]=62,b["_".charCodeAt(0)]=63},function(r,e,t){"use strict";(function(i){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(O,C){if(n()<C)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(O=new Uint8Array(C),O.__proto__=o.prototype):(O===null&&(O=new o(C)),O.length=C),O}function o(O,C,q){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(O,C,q);if(typeof O=="number"){if(typeof C=="string")throw new Error("If encoding is specified then the first argument must be a string");return m(this,O)}return a(this,O,C,q)}function a(O,C,q,Q){if(typeof C=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&C instanceof ArrayBuffer?p(O,C,q,Q):typeof C=="string"?b(O,C,q):u(O,C)}function l(O){if(typeof O!="number")throw new TypeError('"size" argument must be a number');if(O<0)throw new RangeError('"size" argument must not be negative')}function f(O,C,q,Q){return l(C),C<=0?s(O,C):q!==void 0?typeof Q=="string"?s(O,C).fill(q,Q):s(O,C).fill(q):s(O,C)}function m(O,C){if(l(C),O=s(O,C<0?0:0|d(C)),!o.TYPED_ARRAY_SUPPORT)for(var q=0;q<C;++q)O[q]=0;return O}function b(O,C,q){if(typeof q=="string"&&q!==""||(q="utf8"),!o.isEncoding(q))throw new TypeError('"encoding" must be a valid string encoding');var Q=0|y(C,q);O=s(O,Q);var ne=O.write(C,q);return ne!==Q&&(O=O.slice(0,ne)),O}function h(O,C){var q=C.length<0?0:0|d(C.length);O=s(O,q);for(var Q=0;Q<q;Q+=1)O[Q]=255&C[Q];return O}function p(O,C,q,Q){if(C.byteLength,q<0||C.byteLength<q)throw new RangeError("'offset' is out of bounds");if(C.byteLength<q+(Q||0))throw new RangeError("'length' is out of bounds");return C=q===void 0&&Q===void 0?new Uint8Array(C):Q===void 0?new Uint8Array(C,q):new Uint8Array(C,q,Q),o.TYPED_ARRAY_SUPPORT?(O=C,O.__proto__=o.prototype):O=h(O,C),O}function u(O,C){if(o.isBuffer(C)){var q=0|d(C.length);return O=s(O,q),O.length===0||C.copy(O,0,0,q),O}if(C){if(typeof ArrayBuffer!="undefined"&&C.buffer instanceof ArrayBuffer||"length"in C)return typeof C.length!="number"||Me(C.length)?s(O,0):h(O,C);if(C.type==="Buffer"&&Fe(C.data))return h(O,C.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(O){if(O>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|O}function _(O){return+O!=O&&(O=0),o.alloc(+O)}function y(O,C){if(o.isBuffer(O))return O.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(O)||O instanceof ArrayBuffer))return O.byteLength;typeof O!="string"&&(O=""+O);var q=O.length;if(q===0)return 0;for(var Q=!1;;)switch(C){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":case void 0:return ie(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return _e(O).length;default:if(Q)return ie(O).length;C=(""+C).toLowerCase(),Q=!0}}function g(O,C,q){var Q=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0,C>>>=0,q<=C))return"";for(O||(O="utf8");;)switch(O){case"hex":return ee(this,C,q);case"utf8":case"utf-8":return S(this,C,q);case"ascii":return z(this,C,q);case"latin1":case"binary":return G(this,C,q);case"base64":return B(this,C,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,C,q);default:if(Q)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),Q=!0}}function v(O,C,q){var Q=O[C];O[C]=O[q],O[q]=Q}function A(O,C,q,Q,ne){if(O.length===0)return-1;if(typeof q=="string"?(Q=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),q=+q,isNaN(q)&&(q=ne?0:O.length-1),q<0&&(q=O.length+q),q>=O.length){if(ne)return-1;q=O.length-1}else if(q<0){if(!ne)return-1;q=0}if(typeof C=="string"&&(C=o.from(C,Q)),o.isBuffer(C))return C.length===0?-1:k(O,C,q,Q,ne);if(typeof C=="number")return C&=255,o.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?ne?Uint8Array.prototype.indexOf.call(O,C,q):Uint8Array.prototype.lastIndexOf.call(O,C,q):k(O,[C],q,Q,ne);throw new TypeError("val must be string, number or Buffer")}function k(O,C,q,Q,ne){function de(Zr,xt){return xe===1?Zr[xt]:Zr.readUInt16BE(xt*xe)}var xe=1,ve=O.length,Be=C.length;if(Q!==void 0&&((Q=String(Q).toLowerCase())==="ucs2"||Q==="ucs-2"||Q==="utf16le"||Q==="utf-16le")){if(O.length<2||C.length<2)return-1;xe=2,ve/=2,Be/=2,q/=2}var $e;if(ne){var je=-1;for($e=q;$e<ve;$e++)if(de(O,$e)===de(C,je===-1?0:$e-je)){if(je===-1&&(je=$e),$e-je+1===Be)return je*xe}else je!==-1&&($e-=$e-je),je=-1}else for(q+Be>ve&&(q=ve-Be),$e=q;$e>=0;$e--){for(var et=!0,Tr=0;Tr<Be;Tr++)if(de(O,$e+Tr)!==de(C,Tr)){et=!1;break}if(et)return $e}return-1}function w(O,C,q,Q){q=Number(q)||0;var ne=O.length-q;Q?(Q=Number(Q))>ne&&(Q=ne):Q=ne;var de=C.length;if(de%2!=0)throw new TypeError("Invalid hex string");Q>de/2&&(Q=de/2);for(var xe=0;xe<Q;++xe){var ve=parseInt(C.substr(2*xe,2),16);if(isNaN(ve))return xe;O[q+xe]=ve}return xe}function E(O,C,q,Q){return Ee(ie(C,O.length-q),O,q,Q)}function M(O,C,q,Q){return Ee(ce(C),O,q,Q)}function j(O,C,q,Q){return M(O,C,q,Q)}function D(O,C,q,Q){return Ee(_e(C),O,q,Q)}function N(O,C,q,Q){return Ee(ye(C,O.length-q),O,q,Q)}function B(O,C,q){return C===0&&q===O.length?De.fromByteArray(O):De.fromByteArray(O.slice(C,q))}function S(O,C,q){q=Math.min(O.length,q);for(var Q=[],ne=C;ne<q;){var de=O[ne],xe=null,ve=de>239?4:de>223?3:de>191?2:1;if(ne+ve<=q){var Be,$e,je,et;switch(ve){case 1:de<128&&(xe=de);break;case 2:Be=O[ne+1],(192&Be)==128&&(et=(31&de)<<6|63&Be)>127&&(xe=et);break;case 3:Be=O[ne+1],$e=O[ne+2],(192&Be)==128&&(192&$e)==128&&(et=(15&de)<<12|(63&Be)<<6|63&$e)>2047&&(et<55296||et>57343)&&(xe=et);break;case 4:Be=O[ne+1],$e=O[ne+2],je=O[ne+3],(192&Be)==128&&(192&$e)==128&&(192&je)==128&&(et=(15&de)<<18|(63&Be)<<12|(63&$e)<<6|63&je)>65535&&et<1114112&&(xe=et)}}xe===null?(xe=65533,ve=1):xe>65535&&(xe-=65536,Q.push(xe>>>10&1023|55296),xe=56320|1023&xe),Q.push(xe),ne+=ve}return P(Q)}function P(O){var C=O.length;if(C<=Je)return String.fromCharCode.apply(String,O);for(var q="",Q=0;Q<C;)q+=String.fromCharCode.apply(String,O.slice(Q,Q+=Je));return q}function z(O,C,q){var Q="";q=Math.min(O.length,q);for(var ne=C;ne<q;++ne)Q+=String.fromCharCode(127&O[ne]);return Q}function G(O,C,q){var Q="";q=Math.min(O.length,q);for(var ne=C;ne<q;++ne)Q+=String.fromCharCode(O[ne]);return Q}function ee(O,C,q){var Q=O.length;(!C||C<0)&&(C=0),(!q||q<0||q>Q)&&(q=Q);for(var ne="",de=C;de<q;++de)ne+=K(O[de]);return ne}function F(O,C,q){for(var Q=O.slice(C,q),ne="",de=0;de<Q.length;de+=2)ne+=String.fromCharCode(Q[de]+256*Q[de+1]);return ne}function J(O,C,q){if(O%1!=0||O<0)throw new RangeError("offset is not uint");if(O+C>q)throw new RangeError("Trying to access beyond buffer length")}function Z(O,C,q,Q,ne,de){if(!o.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>ne||C<de)throw new RangeError('"value" argument is out of bounds');if(q+Q>O.length)throw new RangeError("Index out of range")}function X(O,C,q,Q){C<0&&(C=65535+C+1);for(var ne=0,de=Math.min(O.length-q,2);ne<de;++ne)O[q+ne]=(C&255<<8*(Q?ne:1-ne))>>>8*(Q?ne:1-ne)}function I(O,C,q,Q){C<0&&(C=4294967295+C+1);for(var ne=0,de=Math.min(O.length-q,4);ne<de;++ne)O[q+ne]=C>>>8*(Q?ne:3-ne)&255}function H(O,C,q,Q,ne,de){if(q+Q>O.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function W(O,C,q,Q,ne){return ne||H(O,C,q,4,34028234663852886e22,-34028234663852886e22),Le.write(O,C,q,Q,23,4),q+4}function te(O,C,q,Q,ne){return ne||H(O,C,q,8,17976931348623157e292,-17976931348623157e292),Le.write(O,C,q,Q,52,8),q+8}function re(O){if(O=se(O).replace(qe,""),O.length<2)return"";for(;O.length%4!=0;)O+="=";return O}function se(O){return O.trim?O.trim():O.replace(/^\s+|\s+$/g,"")}function K(O){return O<16?"0"+O.toString(16):O.toString(16)}function ie(O,C){C=C||1/0;for(var q,Q=O.length,ne=null,de=[],xe=0;xe<Q;++xe){if((q=O.charCodeAt(xe))>55295&&q<57344){if(!ne){if(q>56319){(C-=3)>-1&&de.push(239,191,189);continue}if(xe+1===Q){(C-=3)>-1&&de.push(239,191,189);continue}ne=q;continue}if(q<56320){(C-=3)>-1&&de.push(239,191,189),ne=q;continue}q=65536+(ne-55296<<10|q-56320)}else ne&&(C-=3)>-1&&de.push(239,191,189);if(ne=null,q<128){if((C-=1)<0)break;de.push(q)}else if(q<2048){if((C-=2)<0)break;de.push(q>>6|192,63&q|128)}else if(q<65536){if((C-=3)<0)break;de.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((C-=4)<0)break;de.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return de}function ce(O){for(var C=[],q=0;q<O.length;++q)C.push(255&O.charCodeAt(q));return C}function ye(O,C){for(var q,Q,ne,de=[],xe=0;xe<O.length&&!((C-=2)<0);++xe)q=O.charCodeAt(xe),Q=q>>8,ne=q%256,de.push(ne),de.push(Q);return de}function _e(O){return De.toByteArray(re(O))}function Ee(O,C,q,Q){for(var ne=0;ne<Q&&!(ne+q>=C.length||ne>=O.length);++ne)C[ne+q]=O[ne];return ne}function Me(O){return O!==O}var De=t(42),Le=t(44),Fe=t(45);e.Buffer=o,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=i.TYPED_ARRAY_SUPPORT!==void 0?i.TYPED_ARRAY_SUPPORT:function(){try{var O=new Uint8Array(1);return O.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},O.foo()===42&&typeof O.subarray=="function"&&O.subarray(1,1).byteLength===0}catch(C){return!1}}(),e.kMaxLength=n(),o.poolSize=8192,o._augment=function(O){return O.__proto__=o.prototype,O},o.from=function(O,C,q){return a(null,O,C,q)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(O,C,q){return f(null,O,C,q)},o.allocUnsafe=function(O){return m(null,O)},o.allocUnsafeSlow=function(O){return m(null,O)},o.isBuffer=function(O){return!(O==null||!O._isBuffer)},o.compare=function(O,C){if(!o.isBuffer(O)||!o.isBuffer(C))throw new TypeError("Arguments must be Buffers");if(O===C)return 0;for(var q=O.length,Q=C.length,ne=0,de=Math.min(q,Q);ne<de;++ne)if(O[ne]!==C[ne]){q=O[ne],Q=C[ne];break}return q<Q?-1:Q<q?1:0},o.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(O,C){if(!Fe(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return o.alloc(0);var q;if(C===void 0)for(C=0,q=0;q<O.length;++q)C+=O[q].length;var Q=o.allocUnsafe(C),ne=0;for(q=0;q<O.length;++q){var de=O[q];if(!o.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(Q,ne),ne+=de.length}return Q},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var C=0;C<O;C+=2)v(this,C,C+1);return this},o.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var C=0;C<O;C+=4)v(this,C,C+3),v(this,C+1,C+2);return this},o.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var C=0;C<O;C+=8)v(this,C,C+7),v(this,C+1,C+6),v(this,C+2,C+5),v(this,C+3,C+4);return this},o.prototype.toString=function(){var O=0|this.length;return O===0?"":arguments.length===0?S(this,0,O):g.apply(this,arguments)},o.prototype.equals=function(O){if(!o.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O||o.compare(this,O)===0},o.prototype.inspect=function(){var O="",C=e.INSPECT_MAX_BYTES;return this.length>0&&(O=this.toString("hex",0,C).match(/.{2}/g).join(" "),this.length>C&&(O+=" ... ")),"<Buffer "+O+">"},o.prototype.compare=function(O,C,q,Q,ne){if(!o.isBuffer(O))throw new TypeError("Argument must be a Buffer");if(C===void 0&&(C=0),q===void 0&&(q=O?O.length:0),Q===void 0&&(Q=0),ne===void 0&&(ne=this.length),C<0||q>O.length||Q<0||ne>this.length)throw new RangeError("out of range index");if(Q>=ne&&C>=q)return 0;if(Q>=ne)return-1;if(C>=q)return 1;if(C>>>=0,q>>>=0,Q>>>=0,ne>>>=0,this===O)return 0;for(var de=ne-Q,xe=q-C,ve=Math.min(de,xe),Be=this.slice(Q,ne),$e=O.slice(C,q),je=0;je<ve;++je)if(Be[je]!==$e[je]){de=Be[je],xe=$e[je];break}return de<xe?-1:xe<de?1:0},o.prototype.includes=function(O,C,q){return this.indexOf(O,C,q)!==-1},o.prototype.indexOf=function(O,C,q){return A(this,O,C,q,!0)},o.prototype.lastIndexOf=function(O,C,q){return A(this,O,C,q,!1)},o.prototype.write=function(O,C,q,Q){if(C===void 0)Q="utf8",q=this.length,C=0;else if(q===void 0&&typeof C=="string")Q=C,q=this.length,C=0;else{if(!isFinite(C))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");C|=0,isFinite(q)?(q|=0,Q===void 0&&(Q="utf8")):(Q=q,q=void 0)}var ne=this.length-C;if((q===void 0||q>ne)&&(q=ne),O.length>0&&(q<0||C<0)||C>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");for(var de=!1;;)switch(Q){case"hex":return w(this,O,C,q);case"utf8":case"utf-8":return E(this,O,C,q);case"ascii":return M(this,O,C,q);case"latin1":case"binary":return j(this,O,C,q);case"base64":return D(this,O,C,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,O,C,q);default:if(de)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),de=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Je=4096;o.prototype.slice=function(O,C){var q=this.length;O=~~O,C=C===void 0?q:~~C,O<0?(O+=q)<0&&(O=0):O>q&&(O=q),C<0?(C+=q)<0&&(C=0):C>q&&(C=q),C<O&&(C=O);var Q;if(o.TYPED_ARRAY_SUPPORT)Q=this.subarray(O,C),Q.__proto__=o.prototype;else{var ne=C-O;Q=new o(ne,void 0);for(var de=0;de<ne;++de)Q[de]=this[de+O]}return Q},o.prototype.readUIntLE=function(O,C,q){O|=0,C|=0,q||J(O,C,this.length);for(var Q=this[O],ne=1,de=0;++de<C&&(ne*=256);)Q+=this[O+de]*ne;return Q},o.prototype.readUIntBE=function(O,C,q){O|=0,C|=0,q||J(O,C,this.length);for(var Q=this[O+--C],ne=1;C>0&&(ne*=256);)Q+=this[O+--C]*ne;return Q},o.prototype.readUInt8=function(O,C){return C||J(O,1,this.length),this[O]},o.prototype.readUInt16LE=function(O,C){return C||J(O,2,this.length),this[O]|this[O+1]<<8},o.prototype.readUInt16BE=function(O,C){return C||J(O,2,this.length),this[O]<<8|this[O+1]},o.prototype.readUInt32LE=function(O,C){return C||J(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},o.prototype.readUInt32BE=function(O,C){return C||J(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},o.prototype.readIntLE=function(O,C,q){O|=0,C|=0,q||J(O,C,this.length);for(var Q=this[O],ne=1,de=0;++de<C&&(ne*=256);)Q+=this[O+de]*ne;return ne*=128,Q>=ne&&(Q-=Math.pow(2,8*C)),Q},o.prototype.readIntBE=function(O,C,q){O|=0,C|=0,q||J(O,C,this.length);for(var Q=C,ne=1,de=this[O+--Q];Q>0&&(ne*=256);)de+=this[O+--Q]*ne;return ne*=128,de>=ne&&(de-=Math.pow(2,8*C)),de},o.prototype.readInt8=function(O,C){return C||J(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},o.prototype.readInt16LE=function(O,C){C||J(O,2,this.length);var q=this[O]|this[O+1]<<8;return 32768&q?4294901760|q:q},o.prototype.readInt16BE=function(O,C){C||J(O,2,this.length);var q=this[O+1]|this[O]<<8;return 32768&q?4294901760|q:q},o.prototype.readInt32LE=function(O,C){return C||J(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},o.prototype.readInt32BE=function(O,C){return C||J(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},o.prototype.readFloatLE=function(O,C){return C||J(O,4,this.length),Le.read(this,O,!0,23,4)},o.prototype.readFloatBE=function(O,C){return C||J(O,4,this.length),Le.read(this,O,!1,23,4)},o.prototype.readDoubleLE=function(O,C){return C||J(O,8,this.length),Le.read(this,O,!0,52,8)},o.prototype.readDoubleBE=function(O,C){return C||J(O,8,this.length),Le.read(this,O,!1,52,8)},o.prototype.writeUIntLE=function(O,C,q,Q){O=+O,C|=0,q|=0,!Q&&Z(this,O,C,q,Math.pow(2,8*q)-1,0);var ne=1,de=0;for(this[C]=255&O;++de<q&&(ne*=256);)this[C+de]=O/ne&255;return C+q},o.prototype.writeUIntBE=function(O,C,q,Q){O=+O,C|=0,q|=0,!Q&&Z(this,O,C,q,Math.pow(2,8*q)-1,0);var ne=q-1,de=1;for(this[C+ne]=255&O;--ne>=0&&(de*=256);)this[C+ne]=O/de&255;return C+q},o.prototype.writeUInt8=function(O,C,q){return O=+O,C|=0,q||Z(this,O,C,1,255,0),o.TYPED_ARRAY_SUPPORT||(O=Math.floor(O)),this[C]=255&O,C+1},o.prototype.writeUInt16LE=function(O,C,q){return O=+O,C|=0,q||Z(this,O,C,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[C]=255&O,this[C+1]=O>>>8):X(this,O,C,!0),C+2},o.prototype.writeUInt16BE=function(O,C,q){return O=+O,C|=0,q||Z(this,O,C,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[C]=O>>>8,this[C+1]=255&O):X(this,O,C,!1),C+2},o.prototype.writeUInt32LE=function(O,C,q){return O=+O,C|=0,q||Z(this,O,C,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[C+3]=O>>>24,this[C+2]=O>>>16,this[C+1]=O>>>8,this[C]=255&O):I(this,O,C,!0),C+4},o.prototype.writeUInt32BE=function(O,C,q){return O=+O,C|=0,q||Z(this,O,C,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[C]=O>>>24,this[C+1]=O>>>16,this[C+2]=O>>>8,this[C+3]=255&O):I(this,O,C,!1),C+4},o.prototype.writeIntLE=function(O,C,q,Q){if(O=+O,C|=0,!Q){var ne=Math.pow(2,8*q-1);Z(this,O,C,q,ne-1,-ne)}var de=0,xe=1,ve=0;for(this[C]=255&O;++de<q&&(xe*=256);)O<0&&ve===0&&this[C+de-1]!==0&&(ve=1),this[C+de]=(O/xe>>0)-ve&255;return C+q},o.prototype.writeIntBE=function(O,C,q,Q){if(O=+O,C|=0,!Q){var ne=Math.pow(2,8*q-1);Z(this,O,C,q,ne-1,-ne)}var de=q-1,xe=1,ve=0;for(this[C+de]=255&O;--de>=0&&(xe*=256);)O<0&&ve===0&&this[C+de+1]!==0&&(ve=1),this[C+de]=(O/xe>>0)-ve&255;return C+q},o.prototype.writeInt8=function(O,C,q){return O=+O,C|=0,q||Z(this,O,C,1,127,-128),o.TYPED_ARRAY_SUPPORT||(O=Math.floor(O)),O<0&&(O=255+O+1),this[C]=255&O,C+1},o.prototype.writeInt16LE=function(O,C,q){return O=+O,C|=0,q||Z(this,O,C,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[C]=255&O,this[C+1]=O>>>8):X(this,O,C,!0),C+2},o.prototype.writeInt16BE=function(O,C,q){return O=+O,C|=0,q||Z(this,O,C,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[C]=O>>>8,this[C+1]=255&O):X(this,O,C,!1),C+2},o.prototype.writeInt32LE=function(O,C,q){return O=+O,C|=0,q||Z(this,O,C,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[C]=255&O,this[C+1]=O>>>8,this[C+2]=O>>>16,this[C+3]=O>>>24):I(this,O,C,!0),C+4},o.prototype.writeInt32BE=function(O,C,q){return O=+O,C|=0,q||Z(this,O,C,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),o.TYPED_ARRAY_SUPPORT?(this[C]=O>>>24,this[C+1]=O>>>16,this[C+2]=O>>>8,this[C+3]=255&O):I(this,O,C,!1),C+4},o.prototype.writeFloatLE=function(O,C,q){return W(this,O,C,!0,q)},o.prototype.writeFloatBE=function(O,C,q){return W(this,O,C,!1,q)},o.prototype.writeDoubleLE=function(O,C,q){return te(this,O,C,!0,q)},o.prototype.writeDoubleBE=function(O,C,q){return te(this,O,C,!1,q)},o.prototype.copy=function(O,C,q,Q){if(q||(q=0),Q||Q===0||(Q=this.length),C>=O.length&&(C=O.length),C||(C=0),Q>0&&Q<q&&(Q=q),Q===q||O.length===0||this.length===0)return 0;if(C<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("sourceStart out of bounds");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),O.length-C<Q-q&&(Q=O.length-C+q);var ne,de=Q-q;if(this===O&&q<C&&C<Q)for(ne=de-1;ne>=0;--ne)O[ne+C]=this[ne+q];else if(de<1e3||!o.TYPED_ARRAY_SUPPORT)for(ne=0;ne<de;++ne)O[ne+C]=this[ne+q];else Uint8Array.prototype.set.call(O,this.subarray(q,q+de),C);return de},o.prototype.fill=function(O,C,q,Q){if(typeof O=="string"){if(typeof C=="string"?(Q=C,C=0,q=this.length):typeof q=="string"&&(Q=q,q=this.length),O.length===1){var ne=O.charCodeAt(0);ne<256&&(O=ne)}if(Q!==void 0&&typeof Q!="string")throw new TypeError("encoding must be a string");if(typeof Q=="string"&&!o.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q)}else typeof O=="number"&&(O&=255);if(C<0||this.length<C||this.length<q)throw new RangeError("Out of range index");if(q<=C)return this;C>>>=0,q=q===void 0?this.length:q>>>0,O||(O=0);var de;if(typeof O=="number")for(de=C;de<q;++de)this[de]=O;else{var xe=o.isBuffer(O)?O:ie(new o(O,Q).toString()),ve=xe.length;for(de=0;de<q-C;++de)this[de+C]=xe[de%ve]}return this};var qe=/[^+\/0-9A-Za-z-_]/g}).call(e,t(35))},function(r,e){e.read=function(t,i,n,s,o){var a,l,f=8*o-s-1,m=(1<<f)-1,b=m>>1,h=-7,p=n?o-1:0,u=n?-1:1,d=t[i+p];for(p+=u,a=d&(1<<-h)-1,d>>=-h,h+=f;h>0;a=256*a+t[i+p],p+=u,h-=8);for(l=a&(1<<-h)-1,a>>=-h,h+=s;h>0;l=256*l+t[i+p],p+=u,h-=8);if(a===0)a=1-b;else{if(a===m)return l?NaN:1/0*(d?-1:1);l+=Math.pow(2,s),a-=b}return(d?-1:1)*l*Math.pow(2,a-s)},e.write=function(t,i,n,s,o,a){var l,f,m,b=8*a-o-1,h=(1<<b)-1,p=h>>1,u=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=s?0:a-1,_=s?1:-1,y=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(f=isNaN(i)?1:0,l=h):(l=Math.floor(Math.log(i)/Math.LN2),i*(m=Math.pow(2,-l))<1&&(l--,m*=2),i+=l+p>=1?u/m:u*Math.pow(2,1-p),i*m>=2&&(l++,m/=2),l+p>=h?(f=0,l=h):l+p>=1?(f=(i*m-1)*Math.pow(2,o),l+=p):(f=i*Math.pow(2,p-1)*Math.pow(2,o),l=0));o>=8;t[n+d]=255&f,d+=_,f/=256,o-=8);for(l=l<<o|f,b+=o;b>0;t[n+d]=255&l,d+=_,l/=256,b-=8);t[n+d-_]|=128*y}},function(r,e){var t={}.toString;r.exports=Array.isArray||function(i){return t.call(i)=="[object Array]"}},function(r,e,t){function i(f){var m=-1,b=f==null?0:f.length;for(this.clear();++m<b;){var h=f[m];this.set(h[0],h[1])}}var n=t(73),s=t(74),o=t(75),a=t(76),l=t(77);i.prototype.clear=n,i.prototype.delete=s,i.prototype.get=o,i.prototype.has=a,i.prototype.set=l,r.exports=i},function(r,e,t){function i(f){var m=-1,b=f==null?0:f.length;for(this.clear();++m<b;){var h=f[m];this.set(h[0],h[1])}}var n=t(87),s=t(88),o=t(89),a=t(90),l=t(91);i.prototype.clear=n,i.prototype.delete=s,i.prototype.get=o,i.prototype.has=a,i.prototype.set=l,r.exports=i},function(r,e,t){function i(m){var b=this.__data__=new n(m);this.size=b.size}var n=t(3),s=t(99),o=t(100),a=t(101),l=t(102),f=t(103);i.prototype.clear=s,i.prototype.delete=o,i.prototype.get=a,i.prototype.has=l,i.prototype.set=f,r.exports=i},function(r,e,t){var i=t(1),n=i.Uint8Array;r.exports=n},function(r,e,t){function i(h,p){var u=o(h),d=!u&&s(h),_=!u&&!d&&a(h),y=!u&&!d&&!_&&f(h),g=u||d||_||y,v=g?n(h.length,String):[],A=v.length;for(var k in h)!p&&!b.call(h,k)||g&&(k=="length"||_&&(k=="offset"||k=="parent")||y&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||l(k,A))||v.push(k);return v}var n=t(60),s=t(29),o=t(30),a=t(31),l=t(25),f=t(33),m=Object.prototype,b=m.hasOwnProperty;r.exports=i},function(r,e,t){function i(l,f,m){var b=l[f];a.call(l,f)&&s(b,m)&&(m!==void 0||f in l)||n(l,f,m)}var n=t(10),s=t(8),o=Object.prototype,a=o.hasOwnProperty;r.exports=i},function(r,e,t){var i=t(0),n=Object.create,s=function(){function o(){}return function(a){if(!i(a))return{};if(n)return n(a);o.prototype=a;var l=new o;return o.prototype=void 0,l}}();r.exports=s},function(r,e,t){var i=t(69),n=i();r.exports=n},function(r,e,t){function i(a){return s(a)&&n(a)==o}var n=t(5),s=t(2),o="[object Arguments]";r.exports=i},function(r,e,t){function i(d){return!(!o(d)||s(d))&&(n(d)?u:f).test(a(d))}var n=t(13),s=t(81),o=t(0),a=t(104),l=/[\\^$.*+?()[\]{}|]/g,f=/^\[object .+?Constructor\]$/,m=Function.prototype,b=Object.prototype,h=m.toString,p=b.hasOwnProperty,u=RegExp("^"+h.call(p).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");r.exports=i},function(r,e,t){function i(l){return o(l)&&s(l.length)&&!!a[n(l)]}var n=t(5),s=t(32),o=t(2),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,r.exports=i},function(r,e,t){function i(f){if(!n(f))return o(f);var m=s(f),b=[];for(var h in f)(h!="constructor"||!m&&l.call(f,h))&&b.push(h);return b}var n=t(0),s=t(26),o=t(92),a=Object.prototype,l=a.hasOwnProperty;r.exports=i},function(r,e,t){function i(v,A,k,w,E,M,j){var D=y(v,k),N=y(A,k),B=j.get(N);if(B)return void n(v,k,B);var S=M?M(D,N,k+"",v,A,j):void 0,P=S===void 0;if(P){var z=m(N),G=!z&&h(N),ee=!z&&!G&&_(N);S=N,z||G||ee?m(D)?S=D:b(D)?S=a(D):G?(P=!1,S=s(N,!0)):ee?(P=!1,S=o(N,!0)):S=[]:d(N)||f(N)?(S=D,f(D)?S=g(D):u(D)&&!p(D)||(S=l(N))):P=!1}P&&(j.set(N,S),E(S,N,w,M,j),j.delete(N)),n(v,k,S)}var n=t(19),s=t(63),o=t(64),a=t(65),l=t(78),f=t(29),m=t(30),b=t(106),h=t(31),p=t(13),u=t(0),d=t(107),_=t(33),y=t(27),g=t(110);r.exports=i},function(r,e,t){var i=t(105),n=t(22),s=t(28),o=n?function(a,l){return n(a,"toString",{configurable:!0,enumerable:!1,value:i(l),writable:!0})}:s;r.exports=o},function(r,e){function t(i,n){for(var s=-1,o=Array(i);++s<i;)o[s]=n(s);return o}r.exports=t},function(r,e){function t(i){return function(n){return i(n)}}r.exports=t},function(r,e,t){function i(s){var o=new s.constructor(s.byteLength);return new n(o).set(new n(s)),o}var n=t(49);r.exports=i},function(r,e,t){(function(i){function n(b,h){if(h)return b.slice();var p=b.length,u=m?m(p):new b.constructor(p);return b.copy(u),u}var s=t(1),o=typeof e=="object"&&e&&!e.nodeType&&e,a=o&&typeof i=="object"&&i&&!i.nodeType&&i,l=a&&a.exports===o,f=l?s.Buffer:void 0,m=f?f.allocUnsafe:void 0;i.exports=n}).call(e,t(14)(r))},function(r,e,t){function i(s,o){var a=o?n(s.buffer):s.buffer;return new s.constructor(a,s.byteOffset,s.length)}var n=t(62);r.exports=i},function(r,e){function t(i,n){var s=-1,o=i.length;for(n||(n=Array(o));++s<o;)n[s]=i[s];return n}r.exports=t},function(r,e,t){function i(o,a,l,f){var m=!l;l||(l={});for(var b=-1,h=a.length;++b<h;){var p=a[b],u=f?f(l[p],o[p],p,l,o):void 0;u===void 0&&(u=o[p]),m?s(l,p,u):n(l,p,u)}return l}var n=t(51),s=t(10);r.exports=i},function(r,e,t){var i=t(1),n=i["__core-js_shared__"];r.exports=n},function(r,e,t){function i(o){return n(function(a,l){var f=-1,m=l.length,b=m>1?l[m-1]:void 0,h=m>2?l[2]:void 0;for(b=o.length>3&&typeof b=="function"?(m--,b):void 0,h&&s(l[0],l[1],h)&&(b=m<3?void 0:b,m=1),a=Object(a);++f<m;){var p=l[f];p&&o(a,p,f,b)}return a})}var n=t(21),s=t(79);r.exports=i},function(r,e){function t(i){return function(n,s,o){for(var a=-1,l=Object(n),f=o(n),m=f.length;m--;){var b=f[i?m:++a];if(s(l[b],b,l)===!1)break}return n}}r.exports=t},function(r,e,t){function i(o,a,l,f,m,b){return s(o)&&s(a)&&(b.set(a,o),n(o,a,void 0,i,b),b.delete(a)),o}var n=t(20),s=t(0);r.exports=i},function(r,e,t){function i(f){var m=o.call(f,l),b=f[l];try{f[l]=void 0;var h=!0}catch(u){}var p=a.call(f);return h&&(m?f[l]=b:delete f[l]),p}var n=t(17),s=Object.prototype,o=s.hasOwnProperty,a=s.toString,l=n?n.toStringTag:void 0;r.exports=i},function(r,e){function t(i,n){return i==null?void 0:i[n]}r.exports=t},function(r,e,t){function i(){this.__data__=n?n(null):{},this.size=0}var n=t(7);r.exports=i},function(r,e){function t(i){var n=this.has(i)&&delete this.__data__[i];return this.size-=n?1:0,n}r.exports=t},function(r,e,t){function i(l){var f=this.__data__;if(n){var m=f[l];return m===s?void 0:m}return a.call(f,l)?f[l]:void 0}var n=t(7),s="__lodash_hash_undefined__",o=Object.prototype,a=o.hasOwnProperty;r.exports=i},function(r,e,t){function i(a){var l=this.__data__;return n?l[a]!==void 0:o.call(l,a)}var n=t(7),s=Object.prototype,o=s.hasOwnProperty;r.exports=i},function(r,e,t){function i(o,a){var l=this.__data__;return this.size+=this.has(o)?0:1,l[o]=n&&a===void 0?s:a,this}var n=t(7),s="__lodash_hash_undefined__";r.exports=i},function(r,e,t){function i(a){return typeof a.constructor!="function"||o(a)?{}:n(s(a))}var n=t(52),s=t(24),o=t(26);r.exports=i},function(r,e,t){function i(l,f,m){if(!a(m))return!1;var b=typeof f;return!!(b=="number"?s(m)&&o(f,m.length):b=="string"&&f in m)&&n(m[f],l)}var n=t(8),s=t(12),o=t(25),a=t(0);r.exports=i},function(r,e){function t(i){var n=typeof i;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?i!=="__proto__":i===null}r.exports=t},function(r,e,t){function i(o){return!!s&&s in o}var n=t(67),s=function(){var o=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}();r.exports=i},function(r,e){function t(){this.__data__=[],this.size=0}r.exports=t},function(r,e,t){function i(a){var l=this.__data__,f=n(l,a);return!(f<0)&&(f==l.length-1?l.pop():o.call(l,f,1),--this.size,!0)}var n=t(4),s=Array.prototype,o=s.splice;r.exports=i},function(r,e,t){function i(s){var o=this.__data__,a=n(o,s);return a<0?void 0:o[a][1]}var n=t(4);r.exports=i},function(r,e,t){function i(s){return n(this.__data__,s)>-1}var n=t(4);r.exports=i},function(r,e,t){function i(s,o){var a=this.__data__,l=n(a,s);return l<0?(++this.size,a.push([s,o])):a[l][1]=o,this}var n=t(4);r.exports=i},function(r,e,t){function i(){this.size=0,this.__data__={hash:new n,map:new(o||s),string:new n}}var n=t(46),s=t(3),o=t(16);r.exports=i},function(r,e,t){function i(s){var o=n(this,s).delete(s);return this.size-=o?1:0,o}var n=t(6);r.exports=i},function(r,e,t){function i(s){return n(this,s).get(s)}var n=t(6);r.exports=i},function(r,e,t){function i(s){return n(this,s).has(s)}var n=t(6);r.exports=i},function(r,e,t){function i(s,o){var a=n(this,s),l=a.size;return a.set(s,o),this.size+=a.size==l?0:1,this}var n=t(6);r.exports=i},function(r,e){function t(i){var n=[];if(i!=null)for(var s in Object(i))n.push(s);return n}r.exports=t},function(r,e,t){(function(i){var n=t(23),s=typeof e=="object"&&e&&!e.nodeType&&e,o=s&&typeof i=="object"&&i&&!i.nodeType&&i,a=o&&o.exports===s,l=a&&n.process,f=function(){try{var m=o&&o.require&&o.require("util").types;return m||l&&l.binding&&l.binding("util")}catch(b){}}();i.exports=f}).call(e,t(14)(r))},function(r,e){function t(s){return n.call(s)}var i=Object.prototype,n=i.toString;r.exports=t},function(r,e){function t(i,n){return function(s){return i(n(s))}}r.exports=t},function(r,e,t){function i(o,a,l){return a=s(a===void 0?o.length-1:a,0),function(){for(var f=arguments,m=-1,b=s(f.length-a,0),h=Array(b);++m<b;)h[m]=f[a+m];m=-1;for(var p=Array(a+1);++m<a;)p[m]=f[m];return p[a]=l(h),n(o,this,p)}}var n=t(18),s=Math.max;r.exports=i},function(r,e,t){var i=t(59),n=t(98),s=n(i);r.exports=s},function(r,e){function t(o){var a=0,l=0;return function(){var f=s(),m=n-(f-l);if(l=f,m>0){if(++a>=i)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}var i=800,n=16,s=Date.now;r.exports=t},function(r,e,t){function i(){this.__data__=new n,this.size=0}var n=t(3);r.exports=i},function(r,e){function t(i){var n=this.__data__,s=n.delete(i);return this.size=n.size,s}r.exports=t},function(r,e){function t(i){return this.__data__.get(i)}r.exports=t},function(r,e){function t(i){return this.__data__.has(i)}r.exports=t},function(r,e,t){function i(l,f){var m=this.__data__;if(m instanceof n){var b=m.__data__;if(!s||b.length<a-1)return b.push([l,f]),this.size=++m.size,this;m=this.__data__=new o(b)}return m.set(l,f),this.size=m.size,this}var n=t(3),s=t(16),o=t(47),a=200;r.exports=i},function(r,e){function t(s){if(s!=null){try{return n.call(s)}catch(o){}try{return s+""}catch(o){}}return""}var i=Function.prototype,n=i.toString;r.exports=t},function(r,e){function t(i){return function(){return i}}r.exports=t},function(r,e,t){function i(o){return s(o)&&n(o)}var n=t(12),s=t(2);r.exports=i},function(r,e,t){function i(p){if(!o(p)||n(p)!=a)return!1;var u=s(p);if(u===null)return!0;var d=b.call(u,"constructor")&&u.constructor;return typeof d=="function"&&d instanceof d&&m.call(d)==h}var n=t(5),s=t(24),o=t(2),a="[object Object]",l=Function.prototype,f=Object.prototype,m=l.toString,b=f.hasOwnProperty,h=m.call(Object);r.exports=i},function(r,e,t){var i=t(20),n=t(68),s=n(function(o,a,l,f){i(o,a,l,f)});r.exports=s},function(r,e){function t(){return!1}r.exports=t},function(r,e,t){function i(o){return n(o,s(o))}var n=t(66),s=t(34);r.exports=i},function(r,e){r.exports=`<svg viewbox="0 0 18 18">
  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>
  <line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"></line>
  <line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"></line>
</svg>`},function(r,e){r.exports=`<svg viewbox="0 0 18 18">
  <line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"></line>
  <line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"></line>
  <line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"></line>
</svg>`},function(r,e){r.exports=`<svg viewbox="0 0 18 18">
  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>
  <line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"></line>
  <line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"></line>
</svg>`}])})});var d0=Pe((kl,pf)=>{(function(r,e){if(typeof kl=="object"&&typeof pf=="object")pf.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t=e();for(var i in t)(typeof kl=="object"?kl:r)[i]=t[i]}})(window,function(){return function(r){var e={};function t(i){if(e[i])return e[i].exports;var n=e[i]={i,l:!1,exports:{}};return r[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=r,t.c=e,t.d=function(i,n,s){t.o(i,n)||Object.defineProperty(i,n,{enumerable:!0,get:s})},t.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},t.t=function(i,n){if(1&n&&(i=t(i)),8&n||4&n&&typeof i=="object"&&i&&i.__esModule)return i;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),2&n&&typeof i!="string")for(var o in i)t.d(s,o,function(a){return i[a]}.bind(null,o));return s},t.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(n,"a",n),n},t.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},t.p="",t(t.s=15)}([function(r,e,t){"use strict";function i(h){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}var n=t(4),s=typeof Symbol=="function"&&i(Symbol("foo"))==="symbol",o=Object.prototype.toString,a=Array.prototype.concat,l=Object.defineProperty,f=l&&function(){var h={};try{for(var p in l(h,"x",{enumerable:!1,value:h}),h)return!1;return h.x===h}catch(u){return!1}}(),m=function(h,p,u,d){var _;(!(p in h)||typeof(_=d)=="function"&&o.call(_)==="[object Function]"&&d())&&(f?l(h,p,{configurable:!0,enumerable:!1,value:u,writable:!0}):h[p]=u)},b=function(h,p){var u=arguments.length>2?arguments[2]:{},d=n(p);s&&(d=a.call(d,Object.getOwnPropertySymbols(p)));for(var _=0;_<d.length;_+=1)m(h,d[_],p[d[_]],u[d[_]])};b.supportsDescriptors=!!f,r.exports=b},function(r,e,t){function i(m){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(m)}var n=t(16),s=t(3),o=t(12),a=t(30),l=String.fromCharCode(0),f=function(m){Array.isArray(m)?this.ops=m:m!=null&&Array.isArray(m.ops)?this.ops=m.ops:this.ops=[]};f.prototype.insert=function(m,b){var h={};return m.length===0?this:(h.insert=m,b!=null&&i(b)==="object"&&Object.keys(b).length>0&&(h.attributes=b),this.push(h))},f.prototype.delete=function(m){return m<=0?this:this.push({delete:m})},f.prototype.retain=function(m,b){if(m<=0)return this;var h={retain:m};return b!=null&&i(b)==="object"&&Object.keys(b).length>0&&(h.attributes=b),this.push(h)},f.prototype.push=function(m){var b=this.ops.length,h=this.ops[b-1];if(m=o(!0,{},m),i(h)==="object"){if(typeof m.delete=="number"&&typeof h.delete=="number")return this.ops[b-1]={delete:h.delete+m.delete},this;if(typeof h.delete=="number"&&m.insert!=null&&(b-=1,i(h=this.ops[b-1])!=="object"))return this.ops.unshift(m),this;if(s(m.attributes,h.attributes)){if(typeof m.insert=="string"&&typeof h.insert=="string")return this.ops[b-1]={insert:h.insert+m.insert},i(m.attributes)==="object"&&(this.ops[b-1].attributes=m.attributes),this;if(typeof m.retain=="number"&&typeof h.retain=="number")return this.ops[b-1]={retain:h.retain+m.retain},i(m.attributes)==="object"&&(this.ops[b-1].attributes=m.attributes),this}}return b===this.ops.length?this.ops.push(m):this.ops.splice(b,0,m),this},f.prototype.chop=function(){var m=this.ops[this.ops.length-1];return m&&m.retain&&!m.attributes&&this.ops.pop(),this},f.prototype.filter=function(m){return this.ops.filter(m)},f.prototype.forEach=function(m){this.ops.forEach(m)},f.prototype.map=function(m){return this.ops.map(m)},f.prototype.partition=function(m){var b=[],h=[];return this.forEach(function(p){(m(p)?b:h).push(p)}),[b,h]},f.prototype.reduce=function(m,b){return this.ops.reduce(m,b)},f.prototype.changeLength=function(){return this.reduce(function(m,b){return b.insert?m+a.length(b):b.delete?m-b.delete:m},0)},f.prototype.length=function(){return this.reduce(function(m,b){return m+a.length(b)},0)},f.prototype.slice=function(m,b){m=m||0,typeof b!="number"&&(b=1/0);for(var h=[],p=a.iterator(this.ops),u=0;u<b&&p.hasNext();){var d;u<m?d=p.next(m-u):(d=p.next(b-u),h.push(d)),u+=a.length(d)}return new f(h)},f.prototype.compose=function(m){var b=a.iterator(this.ops),h=a.iterator(m.ops),p=[],u=h.peek();if(u!=null&&typeof u.retain=="number"&&u.attributes==null){for(var d=u.retain;b.peekType()==="insert"&&b.peekLength()<=d;)d-=b.peekLength(),p.push(b.next());u.retain-d>0&&h.next(u.retain-d)}for(var _=new f(p);b.hasNext()||h.hasNext();)if(h.peekType()==="insert")_.push(h.next());else if(b.peekType()==="delete")_.push(b.next());else{var y=Math.min(b.peekLength(),h.peekLength()),g=b.next(y),v=h.next(y);if(typeof v.retain=="number"){var A={};typeof g.retain=="number"?A.retain=y:A.insert=g.insert;var k=a.attributes.compose(g.attributes,v.attributes,typeof g.retain=="number");if(k&&(A.attributes=k),_.push(A),!h.hasNext()&&s(_.ops[_.ops.length-1],A)){var w=new f(b.rest());return _.concat(w).chop()}}else typeof v.delete=="number"&&typeof g.retain=="number"&&_.push(v)}return _.chop()},f.prototype.concat=function(m){var b=new f(this.ops.slice());return m.ops.length>0&&(b.push(m.ops[0]),b.ops=b.ops.concat(m.ops.slice(1))),b},f.prototype.diff=function(m,b){if(this.ops===m.ops)return new f;var h=[this,m].map(function(y){return y.map(function(g){if(g.insert!=null)return typeof g.insert=="string"?g.insert:l;throw new Error("diff() called "+(y===m?"on":"with")+" non-document")}).join("")}),p=new f,u=n(h[0],h[1],b),d=a.iterator(this.ops),_=a.iterator(m.ops);return u.forEach(function(y){for(var g=y[1].length;g>0;){var v=0;switch(y[0]){case n.INSERT:v=Math.min(_.peekLength(),g),p.push(_.next(v));break;case n.DELETE:v=Math.min(g,d.peekLength()),d.next(v),p.delete(v);break;case n.EQUAL:v=Math.min(d.peekLength(),_.peekLength(),g);var A=d.next(v),k=_.next(v);s(A.insert,k.insert)?p.retain(v,a.attributes.diff(A.attributes,k.attributes)):p.push(k).delete(v)}g-=v}}),p.chop()},f.prototype.eachLine=function(m,b){b=b||`
`;for(var h=a.iterator(this.ops),p=new f,u=0;h.hasNext();){if(h.peekType()!=="insert")return;var d=h.peek(),_=a.length(d)-h.peekLength(),y=typeof d.insert=="string"?d.insert.indexOf(b,_)-_:-1;if(y<0)p.push(h.next());else if(y>0)p.push(h.next(y));else{if(m(p,h.next(1).attributes||{},u)===!1)return;u+=1,p=new f}}p.length()>0&&m(p,{},u)},f.prototype.transform=function(m,b){if(b=!!b,typeof m=="number")return this.transformPosition(m,b);for(var h=a.iterator(this.ops),p=a.iterator(m.ops),u=new f;h.hasNext()||p.hasNext();)if(h.peekType()!=="insert"||!b&&p.peekType()==="insert")if(p.peekType()==="insert")u.push(p.next());else{var d=Math.min(h.peekLength(),p.peekLength()),_=h.next(d),y=p.next(d);if(_.delete)continue;y.delete?u.push(y):u.retain(d,a.attributes.transform(_.attributes,y.attributes,b))}else u.retain(a.length(h.next()));return u.chop()},f.prototype.transformPosition=function(m,b){b=!!b;for(var h=a.iterator(this.ops),p=0;h.hasNext()&&p<=m;){var u=h.peekLength(),d=h.peekType();h.next(),d!=="delete"?(d==="insert"&&(p<m||!b)&&(m+=u),p+=u):m-=Math.min(u,m-p)}return m},r.exports=f},function(r,e,t){"use strict";var i=t(20);r.exports=Function.prototype.bind||i},function(r,e,t){function i(u){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(u)}var n=t(4),s=t(18),o=t(19),a=t(25),l=t(27),f=t(29),m=Date.prototype.getTime;function b(u,d,_){var y=_||{};return!!(y.strict?o(u,d):u===d)||(!u||!d||i(u)!=="object"&&i(d)!=="object"?y.strict?o(u,d):u==d:function(g,v,A){var k,w;if(i(g)!==i(v)||h(g)||h(v)||g.prototype!==v.prototype||s(g)!==s(v))return!1;var E=a(g),M=a(v);if(E!==M)return!1;if(E||M)return g.source===v.source&&l(g)===l(v);if(f(g)&&f(v))return m.call(g)===m.call(v);var j=p(g),D=p(v);if(j!==D)return!1;if(j||D){if(g.length!==v.length)return!1;for(k=0;k<g.length;k++)if(g[k]!==v[k])return!1;return!0}if(i(g)!==i(v))return!1;try{var N=n(g),B=n(v)}catch(S){return!1}if(N.length!==B.length)return!1;for(N.sort(),B.sort(),k=N.length-1;k>=0;k--)if(N[k]!=B[k])return!1;for(k=N.length-1;k>=0;k--)if(w=N[k],!b(g[w],v[w],A))return!1;return!0}(u,d,y))}function h(u){return u==null}function p(u){return!(!u||i(u)!=="object"||typeof u.length!="number")&&typeof u.copy=="function"&&typeof u.slice=="function"&&!(u.length>0&&typeof u[0]!="number")}r.exports=b},function(r,e,t){"use strict";var i=Array.prototype.slice,n=t(5),s=Object.keys,o=s?function(l){return s(l)}:t(17),a=Object.keys;o.shim=function(){return Object.keys?function(){var l=Object.keys(arguments);return l&&l.length===arguments.length}(1,2)||(Object.keys=function(l){return n(l)?a(i.call(l)):a(l)}):Object.keys=o,Object.keys||o},r.exports=o},function(r,e,t){"use strict";function i(s){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(s)}var n=Object.prototype.toString;r.exports=function(s){var o=n.call(s),a=o==="[object Arguments]";return a||(a=o!=="[object Array]"&&s!==null&&i(s)==="object"&&typeof s.length=="number"&&s.length>=0&&n.call(s.callee)==="[object Function]"),a}},function(r,e,t){"use strict";var i=t(2),n=t(21)("%Function%"),s=n.apply,o=n.call;r.exports=function(){return i.apply(o,arguments)},r.exports.apply=function(){return i.apply(s,arguments)}},function(r,e){function t(n){return(t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){(typeof window=="undefined"?"undefined":t(window))==="object"&&(i=window)}r.exports=i},function(r,e,t){"use strict";var i=function(n){return n!=n};r.exports=function(n,s){return n===0&&s===0?1/n==1/s:n===s||!(!i(n)||!i(s))}},function(r,e,t){"use strict";var i=t(8);r.exports=function(){return typeof Object.is=="function"?Object.is:i}},function(r,e,t){"use strict";var i=Object,n=TypeError;r.exports=function(){if(this!=null&&this!==i(this))throw new n("RegExp.prototype.flags getter called on non-object");var s="";return this.global&&(s+="g"),this.ignoreCase&&(s+="i"),this.multiline&&(s+="m"),this.dotAll&&(s+="s"),this.unicode&&(s+="u"),this.sticky&&(s+="y"),s}},function(r,e,t){"use strict";var i=t(10),n=t(0).supportsDescriptors,s=Object.getOwnPropertyDescriptor,o=TypeError;r.exports=function(){if(!n)throw new o("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if(/a/gim.flags==="gim"){var a=s(RegExp.prototype,"flags");if(a&&typeof a.get=="function"&&typeof/a/.dotAll=="boolean")return a.get}return i}},function(r,e,t){"use strict";function i(h){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(h)}var n=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(h){return typeof Array.isArray=="function"?Array.isArray(h):s.call(h)==="[object Array]"},f=function(h){if(!h||s.call(h)!=="[object Object]")return!1;var p,u=n.call(h,"constructor"),d=h.constructor&&h.constructor.prototype&&n.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!u&&!d)return!1;for(p in h);return p===void 0||n.call(h,p)},m=function(h,p){o&&p.name==="__proto__"?o(h,p.name,{enumerable:!0,configurable:!0,value:p.newValue,writable:!0}):h[p.name]=p.newValue},b=function(h,p){if(p==="__proto__"){if(!n.call(h,p))return;if(a)return a(h,p).value}return h[p]};r.exports=function h(){var p,u,d,_,y,g,v=arguments[0],A=1,k=arguments.length,w=!1;for(typeof v=="boolean"&&(w=v,v=arguments[1]||{},A=2),(v==null||i(v)!=="object"&&typeof v!="function")&&(v={});A<k;++A)if((p=arguments[A])!=null)for(u in p)d=b(v,u),v!==(_=b(p,u))&&(w&&_&&(f(_)||(y=l(_)))?(y?(y=!1,g=d&&l(d)?d:[]):g=d&&f(d)?d:{},m(v,{name:u,newValue:h(w,g,_)})):_!==void 0&&m(v,{name:u,newValue:_}));return v}},function(r,e){(function(t){r.exports=t}).call(this,{})},function(r,e,t){"use strict";function i(h,p){var u=Object.keys(h);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(h);p&&(d=d.filter(function(_){return Object.getOwnPropertyDescriptor(h,_).enumerable})),u.push.apply(u,d)}return u}function n(h,p,u){return p in h?Object.defineProperty(h,p,{value:u,enumerable:!0,configurable:!0,writable:!0}):h[p]=u,h}function s(h){return function(p){if(Array.isArray(p))return l(p)}(h)||function(p){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(p))return Array.from(p)}(h)||a(h)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(h,p){return function(u){if(Array.isArray(u))return u}(h)||function(u,d){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(u)))){var _=[],y=!0,g=!1,v=void 0;try{for(var A,k=u[Symbol.iterator]();!(y=(A=k.next()).done)&&(_.push(A.value),!d||_.length!==d);y=!0);}catch(w){g=!0,v=w}finally{try{y||k.return==null||k.return()}finally{if(g)throw v}}return _}}(h,p)||a(h,p)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(h,p){if(h){if(typeof h=="string")return l(h,p);var u=Object.prototype.toString.call(h).slice(8,-1);return u==="Object"&&h.constructor&&(u=h.constructor.name),u==="Map"||u==="Set"?Array.from(h):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?l(h,p):void 0}}function l(h,p){(p==null||p>h.length)&&(p=h.length);for(var u=0,d=new Array(p);u<p;u++)d[u]=h[u];return d}var f=typeof URL=="undefined"?t(31).URL:URL,m=function(h,p){return p.some(function(u){return u instanceof RegExp?u.test(h):u===h})},b=function(h,p){if(p=function(k){for(var w=1;w<arguments.length;w++){var E=arguments[w]!=null?arguments[w]:{};w%2?i(Object(E),!0).forEach(function(M){n(k,M,E[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(E)):i(Object(E)).forEach(function(M){Object.defineProperty(k,M,Object.getOwnPropertyDescriptor(E,M))})}return k}({defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0},p),Reflect.has(p,"normalizeHttps"))throw new Error("options.normalizeHttps is renamed to options.forceHttp");if(Reflect.has(p,"normalizeHttp"))throw new Error("options.normalizeHttp is renamed to options.forceHttps");if(Reflect.has(p,"stripFragment"))throw new Error("options.stripFragment is renamed to options.stripHash");if(h=h.trim(),/^data:/i.test(h))return function(k,w){var E=w.stripHash,M=k.match(/^data:(.*?),(.*?)(?:#(.*))?$/);if(!M)throw new Error("Invalid URL: ".concat(k));var j=M[1].split(";"),D=M[2],N=E?"":M[3],B=!1;j[j.length-1]==="base64"&&(j.pop(),B=!0);var S=(j.shift()||"").toLowerCase(),P=s(j.map(function(z){var G=o(z.split("=").map(function(Z){return Z.trim()}),2),ee=G[0],F=G[1],J=F===void 0?"":F;return ee==="charset"&&(J=J.toLowerCase())==="us-ascii"?"":"".concat(ee).concat(J?"=".concat(J):"")}).filter(Boolean));return B&&P.push("base64"),(P.length!==0||S&&S!=="text/plain")&&P.unshift(S),"data:".concat(P.join(";"),",").concat(B?D.trim():D).concat(N?"#".concat(N):"")}(h,p);var u=h.startsWith("//");!u&&/^\.*\//.test(h)||(h=h.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,p.defaultProtocol));var d=new f(h);if(p.forceHttp&&p.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(p.forceHttp&&d.protocol==="https:"&&(d.protocol="http:"),p.forceHttps&&d.protocol==="http:"&&(d.protocol="https:"),p.stripAuthentication&&(d.username="",d.password=""),p.stripHash&&(d.hash=""),d.pathname&&(d.pathname=d.pathname.replace(/((?!:).|^)\/{2,}/g,function(k,w){return/^(?!\/)/g.test(w)?"".concat(w,"/"):"/"})),d.pathname&&(d.pathname=decodeURI(d.pathname)),p.removeDirectoryIndex===!0&&(p.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(p.removeDirectoryIndex)&&p.removeDirectoryIndex.length>0){var _=d.pathname.split("/"),y=_[_.length-1];m(y,p.removeDirectoryIndex)&&(_=_.slice(0,_.length-1),d.pathname=_.slice(1).join("/")+"/")}if(d.hostname&&(d.hostname=d.hostname.replace(/\.$/,""),p.stripWWW&&/^www\.([a-z\-\d]{2,63})\.([a-z.]{2,5})$/.test(d.hostname)&&(d.hostname=d.hostname.replace(/^www\./,""))),Array.isArray(p.removeQueryParameters))for(var g=0,v=s(d.searchParams.keys());g<v.length;g++){var A=v[g];m(A,p.removeQueryParameters)&&d.searchParams.delete(A)}return p.sortQueryParameters&&d.searchParams.sort(),p.removeTrailingSlash&&(d.pathname=d.pathname.replace(/\/$/,"")),h=d.toString(),!p.removeTrailingSlash&&d.pathname!=="/"||d.hash!==""||(h=h.replace(/\/$/,"")),u&&!p.normalizeProtocol&&(h=h.replace(/^http:\/\//,"//")),p.stripProtocol&&(h=h.replace(/^(?:https?:)?\/\//,"")),h};r.exports=b,r.exports.default=b},function(r,e,t){"use strict";t.r(e),t.d(e,"default",function(){return u});var i=t(1),n=t.n(i),s=t(14),o=t.n(s);function a(d,_){return function(y){if(Array.isArray(y))return y}(d)||function(y,g){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(y)))){var v=[],A=!0,k=!1,w=void 0;try{for(var E,M=y[Symbol.iterator]();!(A=(E=M.next()).done)&&(v.push(E.value),!g||v.length!==g);A=!0);}catch(j){k=!0,w=j}finally{try{A||M.return==null||M.return()}finally{if(k)throw w}}return v}}(d,_)||function(y,g){if(!!y){if(typeof y=="string")return l(y,g);var v=Object.prototype.toString.call(y).slice(8,-1);if(v==="Object"&&y.constructor&&(v=y.constructor.name),v==="Map"||v==="Set")return Array.from(y);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return l(y,g)}}(d,_)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function l(d,_){(_==null||_>d.length)&&(_=d.length);for(var y=0,g=new Array(_);y<_;y++)g[y]=d[y];return g}function f(d,_){var y=Object.keys(d);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(d);_&&(g=g.filter(function(v){return Object.getOwnPropertyDescriptor(d,v).enumerable})),y.push.apply(y,g)}return y}function m(d){for(var _=1;_<arguments.length;_++){var y=arguments[_]!=null?arguments[_]:{};_%2?f(Object(y),!0).forEach(function(g){b(d,g,y[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(y)):f(Object(y)).forEach(function(g){Object.defineProperty(d,g,Object.getOwnPropertyDescriptor(y,g))})}return d}function b(d,_,y){return _ in d?Object.defineProperty(d,_,{value:y,enumerable:!0,configurable:!0,writable:!0}):d[_]=y,d}function h(d,_){for(var y=0;y<_.length;y++){var g=_[y];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}var p={globalRegularExpression:/(https?:\/\/|www\.)[\w-\.]+\.[\w-\.]+(\/([\S]+)?)?/gi,urlRegularExpression:/(https?:\/\/|www\.)[\w-\.]+\.[\w-\.]+(\/([\S]+)?)?/i,globalMailRegularExpression:/([\w-\.]+@[\w-\.]+\.[\w-\.]+)/gi,mailRegularExpression:/([\w-\.]+@[\w-\.]+\.[\w-\.]+)/i,normalizeRegularExpression:/(https?:\/\/|www\.)[\S]+/i,normalizeUrlOptions:{stripWWW:!1}},u=function(){function d(v,A){var k=this;(function(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")})(this,d),this.quill=v,A=A||{},this.options=m(m({},p),A),this.urlNormalizer=function(w){return k.normalize(w)},this.mailNormalizer=function(w){return"mailto:".concat(w)},this.registerTypeListener(),this.registerPasteListener()}var _,y,g;return _=d,(y=[{key:"registerPasteListener",value:function(){var v=this;this.quill.clipboard.addMatcher(Node.TEXT_NODE,function(A,k){if(typeof A.data=="string"){var w=v.options.globalRegularExpression,E=v.options.globalMailRegularExpression;w.lastIndex=0,E.lastIndex=0;for(var M=new n.a,j=0,D=w.exec(A.data),N=E.exec(A.data),B=function(P,z,G){var ee=A.data.substring(j,P.index);M.insert(ee);var F=P[0];return M.insert(F,{link:G(F)}),j=z.lastIndex,z.exec(A.data)};D!==null||N!==null;)if(D===null)N=B(N,E,v.mailNormalizer);else if(N===null)D=B(D,w,v.urlNormalizer);else if(N.index<=D.index){for(;D!==null&&D.index<E.lastIndex;)D=w.exec(A.data);N=B(N,E,v.mailNormalizer)}else{for(;N!==null&&N.index<w.lastIndex;)N=E.exec(A.data);D=B(D,w,v.urlNormalizer)}if(j>0){var S=A.data.substring(j);M.insert(S),k.ops=M.ops}return k}})}},{key:"registerTypeListener",value:function(){var v=this;this.quill.on("text-change",function(A){var k=A.ops;if(!(!k||k.length<1||k.length>2)){var w=k[k.length-1];w.insert&&typeof w.insert=="string"&&w.insert.match(/\s/)&&v.checkTextForUrl()}})}},{key:"checkTextForUrl",value:function(){var v=this.quill.getSelection();if(v){var A=a(this.quill.getLeaf(v.index),1)[0];if(A.text&&A.parent.domNode.localName!=="a"){var k=this.quill.getIndex(A),w=A.text.match(this.options.urlRegularExpression),E=A.text.match(this.options.mailRegularExpression);w?this.textToUrl(k+w.index,w[0]):E&&this.textToMail(k+E.index,E[0])}}}},{key:"textToUrl",value:function(v,A){var k=new n.a().retain(v).retain(A.length,{link:this.urlNormalizer(A)});this.quill.updateContents(k)}},{key:"textToMail",value:function(v,A){var k=new n.a().retain(v).retain(A.length,{link:this.mailNormalizer(A)});this.quill.updateContents(k)}},{key:"normalize",value:function(v){if(this.options.normalizeRegularExpression.test(v))try{return o()(v,this.options.normalizeUrlOptions)}catch(A){console.error(A)}return v}}])&&h(_.prototype,y),g&&h(_,g),d}();window!=null&&window.Quill&&window.Quill.register("modules/magicUrl",u)},function(r,e){function t(l,f,m){if(l==f)return l?[[0,l]]:[];(m<0||l.length<m)&&(m=null);var b=n(l,f),h=l.substring(0,b);b=s(l=l.substring(b),f=f.substring(b));var p=l.substring(l.length-b),u=function(d,_){var y;if(!d)return[[1,_]];if(!_)return[[-1,d]];var g=d.length>_.length?d:_,v=d.length>_.length?_:d,A=g.indexOf(v);if(A!=-1)return y=[[1,g.substring(0,A)],[0,v],[1,g.substring(A+v.length)]],d.length>_.length&&(y[0][0]=y[2][0]=-1),y;if(v.length==1)return[[-1,d],[1,_]];var k=function(S,P){var z=S.length>P.length?S:P,G=S.length>P.length?P:S;if(z.length<4||2*G.length<z.length)return null;function ee(re,se,K){for(var ie,ce,ye,_e,Ee=re.substring(K,K+Math.floor(re.length/4)),Me=-1,De="";(Me=se.indexOf(Ee,Me+1))!=-1;){var Le=n(re.substring(K),se.substring(Me)),Fe=s(re.substring(0,K),se.substring(0,Me));De.length<Fe+Le&&(De=se.substring(Me-Fe,Me)+se.substring(Me,Me+Le),ie=re.substring(0,K-Fe),ce=re.substring(K+Le),ye=se.substring(0,Me-Fe),_e=se.substring(Me+Le))}return 2*De.length>=re.length?[ie,ce,ye,_e,De]:null}var F,J,Z,X,I,H=ee(z,G,Math.ceil(z.length/4)),W=ee(z,G,Math.ceil(z.length/2));if(!H&&!W)return null;F=W?H&&H[4].length>W[4].length?H:W:H,S.length>P.length?(J=F[0],Z=F[1],X=F[2],I=F[3]):(X=F[0],I=F[1],J=F[2],Z=F[3]);var te=F[4];return[J,Z,X,I,te]}(d,_);if(k){var w=k[0],E=k[1],M=k[2],j=k[3],D=k[4],N=t(w,M),B=t(E,j);return N.concat([[0,D]],B)}return function(S,P){for(var z=S.length,G=P.length,ee=Math.ceil((z+G)/2),F=ee,J=2*ee,Z=new Array(J),X=new Array(J),I=0;I<J;I++)Z[I]=-1,X[I]=-1;Z[F+1]=0,X[F+1]=0;for(var H=z-G,W=H%2!=0,te=0,re=0,se=0,K=0,ie=0;ie<ee;ie++){for(var ce=-ie+te;ce<=ie-re;ce+=2){for(var ye=F+ce,_e=(Fe=ce==-ie||ce!=ie&&Z[ye-1]<Z[ye+1]?Z[ye+1]:Z[ye-1]+1)-ce;Fe<z&&_e<G&&S.charAt(Fe)==P.charAt(_e);)Fe++,_e++;if(Z[ye]=Fe,Fe>z)re+=2;else if(_e>G)te+=2;else if(W&&(De=F+H-ce)>=0&&De<J&&X[De]!=-1){var Ee=z-X[De];if(Fe>=Ee)return i(S,P,Fe,_e)}}for(var Me=-ie+se;Me<=ie-K;Me+=2){for(var De=F+Me,Le=(Ee=Me==-ie||Me!=ie&&X[De-1]<X[De+1]?X[De+1]:X[De-1]+1)-Me;Ee<z&&Le<G&&S.charAt(z-Ee-1)==P.charAt(G-Le-1);)Ee++,Le++;if(X[De]=Ee,Ee>z)K+=2;else if(Le>G)se+=2;else if(!W&&(ye=F+H-Me)>=0&&ye<J&&Z[ye]!=-1){var Fe=Z[ye];if(_e=F+Fe-ye,Fe>=(Ee=z-Ee))return i(S,P,Fe,_e)}}}return[[-1,S],[1,P]]}(d,_)}(l=l.substring(0,l.length-b),f=f.substring(0,f.length-b));return h&&u.unshift([0,h]),p&&u.push([0,p]),function d(_){_.push([0,""]);for(var y,g=0,v=0,A=0,k="",w="";g<_.length;)switch(_[g][0]){case 1:A++,w+=_[g][1],g++;break;case-1:v++,k+=_[g][1],g++;break;case 0:v+A>1?(v!==0&&A!==0&&((y=n(w,k))!==0&&(g-v-A>0&&_[g-v-A-1][0]==0?_[g-v-A-1][1]+=w.substring(0,y):(_.splice(0,0,[0,w.substring(0,y)]),g++),w=w.substring(y),k=k.substring(y)),(y=s(w,k))!==0&&(_[g][1]=w.substring(w.length-y)+_[g][1],w=w.substring(0,w.length-y),k=k.substring(0,k.length-y))),v===0?_.splice(g-A,v+A,[1,w]):A===0?_.splice(g-v,v+A,[-1,k]):_.splice(g-v-A,v+A,[-1,k],[1,w]),g=g-v-A+(v?1:0)+(A?1:0)+1):g!==0&&_[g-1][0]==0?(_[g-1][1]+=_[g][1],_.splice(g,1)):g++,A=0,v=0,k="",w=""}_[_.length-1][1]===""&&_.pop();var E=!1;for(g=1;g<_.length-1;)_[g-1][0]==0&&_[g+1][0]==0&&(_[g][1].substring(_[g][1].length-_[g-1][1].length)==_[g-1][1]?(_[g][1]=_[g-1][1]+_[g][1].substring(0,_[g][1].length-_[g-1][1].length),_[g+1][1]=_[g-1][1]+_[g+1][1],_.splice(g-1,1),E=!0):_[g][1].substring(0,_[g+1][1].length)==_[g+1][1]&&(_[g-1][1]+=_[g+1][1],_[g][1]=_[g][1].substring(_[g+1][1].length)+_[g+1][1],_.splice(g+1,1),E=!0)),g++;E&&d(_)}(u),m!=null&&(u=function(d,_){var y=function(E,M){if(M===0)return[0,E];for(var j=0,D=0;D<E.length;D++){var N=E[D];if(N[0]===-1||N[0]===0){var B=j+N[1].length;if(M===B)return[D+1,E];if(M<B){E=E.slice();var S=M-j,P=[N[0],N[1].slice(0,S)],z=[N[0],N[1].slice(S)];return E.splice(D,1,P,z),[D+1,E]}j=B}}throw new Error("cursor_pos is out of bounds!")}(d,_),g=y[1],v=y[0],A=g[v],k=g[v+1];if(A==null||A[0]!==0)return d;if(k!=null&&A[1]+k[1]===k[1]+A[1])return g.splice(v,2,k,A),a(g,v,2);if(k!=null&&k[1].indexOf(A[1])===0){g.splice(v,2,[k[0],A[1]],[0,A[1]]);var w=k[1].slice(A[1].length);return w.length>0&&g.splice(v+2,0,[k[0],w]),a(g,v,3)}return d}(u,m)),u=function(d){for(var _=!1,y=function(k){return k.charCodeAt(0)>=56320&&k.charCodeAt(0)<=57343},g=2;g<d.length;g+=1)d[g-2][0]===0&&(v=d[g-2][1]).charCodeAt(v.length-1)>=55296&&v.charCodeAt(v.length-1)<=56319&&d[g-1][0]===-1&&y(d[g-1][1])&&d[g][0]===1&&y(d[g][1])&&(_=!0,d[g-1][1]=d[g-2][1].slice(-1)+d[g-1][1],d[g][1]=d[g-2][1].slice(-1)+d[g][1],d[g-2][1]=d[g-2][1].slice(0,-1));var v;if(!_)return d;var A=[];for(g=0;g<d.length;g+=1)d[g][1].length>0&&A.push(d[g]);return A}(u)}function i(l,f,m,b){var h=l.substring(0,m),p=f.substring(0,b),u=l.substring(m),d=f.substring(b),_=t(h,p),y=t(u,d);return _.concat(y)}function n(l,f){if(!l||!f||l.charAt(0)!=f.charAt(0))return 0;for(var m=0,b=Math.min(l.length,f.length),h=b,p=0;m<h;)l.substring(p,h)==f.substring(p,h)?p=m=h:b=h,h=Math.floor((b-m)/2+m);return h}function s(l,f){if(!l||!f||l.charAt(l.length-1)!=f.charAt(f.length-1))return 0;for(var m=0,b=Math.min(l.length,f.length),h=b,p=0;m<h;)l.substring(l.length-h,l.length-p)==f.substring(f.length-h,f.length-p)?p=m=h:b=h,h=Math.floor((b-m)/2+m);return h}var o=t;function a(l,f,m){for(var b=f+m-1;b>=0&&b>=f-1;b--)if(b+1<l.length){var h=l[b],p=l[b+1];h[0]===p[1]&&l.splice(b,2,[h[0],h[1]+p[1]])}return l}o.INSERT=1,o.DELETE=-1,o.EQUAL=0,r.exports=o},function(r,e,t){"use strict";function i(d){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(d)}var n;if(!Object.keys){var s=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=t(5),l=Object.prototype.propertyIsEnumerable,f=!l.call({toString:null},"toString"),m=l.call(function(){},"prototype"),b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(d){var _=d.constructor;return _&&_.prototype===d},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window=="undefined")return!1;for(var d in window)try{if(!p["$"+d]&&s.call(window,d)&&window[d]!==null&&i(window[d])==="object")try{h(window[d])}catch(_){return!0}}catch(_){return!0}return!1}();n=function(d){var _=d!==null&&i(d)==="object",y=o.call(d)==="[object Function]",g=a(d),v=_&&o.call(d)==="[object String]",A=[];if(!_&&!y&&!g)throw new TypeError("Object.keys called on a non-object");var k=m&&y;if(v&&d.length>0&&!s.call(d,0))for(var w=0;w<d.length;++w)A.push(String(w));if(g&&d.length>0)for(var E=0;E<d.length;++E)A.push(String(E));else for(var M in d)k&&M==="prototype"||!s.call(d,M)||A.push(String(M));if(f)for(var j=function(N){if(typeof window=="undefined"||!u)return h(N);try{return h(N)}catch(B){return!1}}(d),D=0;D<b.length;++D)j&&b[D]==="constructor"||!s.call(d,b[D])||A.push(b[D]);return A}}r.exports=n},function(r,e,t){"use strict";function i(f){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}var n=typeof Symbol=="function"&&i(Symbol.toStringTag)==="symbol",s=Object.prototype.toString,o=function(f){return!(n&&f&&i(f)==="object"&&Symbol.toStringTag in f)&&s.call(f)==="[object Arguments]"},a=function(f){return!!o(f)||f!==null&&i(f)==="object"&&typeof f.length=="number"&&f.length>=0&&s.call(f)!=="[object Array]"&&s.call(f.callee)==="[object Function]"},l=function(){return o(arguments)}();o.isLegacyArguments=a,r.exports=l?o:a},function(r,e,t){"use strict";var i=t(0),n=t(6),s=t(8),o=t(9),a=t(24),l=n(o(),Object);i(l,{getPolyfill:o,implementation:s,shim:a}),r.exports=l},function(r,e,t){"use strict";var i="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,s=Object.prototype.toString;r.exports=function(o){var a=this;if(typeof a!="function"||s.call(a)!=="[object Function]")throw new TypeError(i+a);for(var l,f=n.call(arguments,1),m=function(){if(this instanceof l){var d=a.apply(this,f.concat(n.call(arguments)));return Object(d)===d?d:this}return a.apply(o,f.concat(n.call(arguments)))},b=Math.max(0,a.length-f.length),h=[],p=0;p<b;p++)h.push("$"+p);if(l=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(m),a.prototype){var u=function(){};u.prototype=a.prototype,l.prototype=new u,u.prototype=null}return l}},function(r,e,t){"use strict";function i(g){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(g)}var n=TypeError,s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch(g){s=null}var o=function(){throw new n},a=s?function(){try{return o}catch(g){try{return s(arguments,"callee").get}catch(v){return o}}}():o,l=t(22)(),f=Object.getPrototypeOf||function(g){return g.__proto__},m=void 0,b=typeof Uint8Array=="undefined"?void 0:f(Uint8Array),h={"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?void 0:ArrayBuffer,"%ArrayBufferPrototype%":typeof ArrayBuffer=="undefined"?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":l?f([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":m&&l&&Symbol.asyncIterator?m[Symbol.asyncIterator]():void 0,"%Atomics%":typeof Atomics=="undefined"?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":typeof DataView=="undefined"?void 0:DataView,"%DataViewPrototype%":typeof DataView=="undefined"?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":typeof Float32Array=="undefined"?void 0:Float32Array,"%Float32ArrayPrototype%":typeof Float32Array=="undefined"?void 0:Float32Array.prototype,"%Float64Array%":typeof Float64Array=="undefined"?void 0:Float64Array,"%Float64ArrayPrototype%":typeof Float64Array=="undefined"?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":typeof Int8Array=="undefined"?void 0:Int8Array,"%Int8ArrayPrototype%":typeof Int8Array=="undefined"?void 0:Int8Array.prototype,"%Int16Array%":typeof Int16Array=="undefined"?void 0:Int16Array,"%Int16ArrayPrototype%":typeof Int16Array=="undefined"?void 0:Int8Array.prototype,"%Int32Array%":typeof Int32Array=="undefined"?void 0:Int32Array,"%Int32ArrayPrototype%":typeof Int32Array=="undefined"?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?f(f([][Symbol.iterator]())):void 0,"%JSON%":(typeof JSON=="undefined"?"undefined":i(JSON))==="object"?JSON:void 0,"%JSONParse%":(typeof JSON=="undefined"?"undefined":i(JSON))==="object"?JSON.parse:void 0,"%Map%":typeof Map=="undefined"?void 0:Map,"%MapIteratorPrototype%":typeof Map!="undefined"&&l?f(new Map()[Symbol.iterator]()):void 0,"%MapPrototype%":typeof Map=="undefined"?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?void 0:Promise,"%PromisePrototype%":typeof Promise=="undefined"?void 0:Promise.prototype,"%PromiseProto_then%":typeof Promise=="undefined"?void 0:Promise.prototype.then,"%Promise_all%":typeof Promise=="undefined"?void 0:Promise.all,"%Promise_reject%":typeof Promise=="undefined"?void 0:Promise.reject,"%Promise_resolve%":typeof Promise=="undefined"?void 0:Promise.resolve,"%Proxy%":typeof Proxy=="undefined"?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":typeof Reflect=="undefined"?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":typeof Set=="undefined"?void 0:Set,"%SetIteratorPrototype%":typeof Set!="undefined"&&l?f(new Set()[Symbol.iterator]()):void 0,"%SetPrototype%":typeof Set=="undefined"?void 0:Set.prototype,"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":typeof SharedArrayBuffer=="undefined"?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":l?f(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":l?Symbol:void 0,"%SymbolPrototype%":l?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":a,"%TypedArray%":b,"%TypedArrayPrototype%":b?b.prototype:void 0,"%TypeError%":n,"%TypeErrorPrototype%":n.prototype,"%Uint8Array%":typeof Uint8Array=="undefined"?void 0:Uint8Array,"%Uint8ArrayPrototype%":typeof Uint8Array=="undefined"?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray=="undefined"?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":typeof Uint16Array=="undefined"?void 0:Uint16Array,"%Uint16ArrayPrototype%":typeof Uint16Array=="undefined"?void 0:Uint16Array.prototype,"%Uint32Array%":typeof Uint32Array=="undefined"?void 0:Uint32Array,"%Uint32ArrayPrototype%":typeof Uint32Array=="undefined"?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":typeof WeakMap=="undefined"?void 0:WeakMap,"%WeakMapPrototype%":typeof WeakMap=="undefined"?void 0:WeakMap.prototype,"%WeakSet%":typeof WeakSet=="undefined"?void 0:WeakSet,"%WeakSetPrototype%":typeof WeakSet=="undefined"?void 0:WeakSet.prototype},p=t(2).call(Function.call,String.prototype.replace),u=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,d=/\\(\\)?/g,_=function(g){var v=[];return p(g,u,function(A,k,w,E){v[v.length]=w?p(E,d,"$1"):k||A}),v},y=function(g,v){if(!(g in h))throw new SyntaxError("intrinsic "+g+" does not exist!");if(h[g]===void 0&&!v)throw new n("intrinsic "+g+" exists, but is not available. Please file an issue!");return h[g]};r.exports=function(g,v){if(typeof g!="string"||g.length===0)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof v!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');for(var A=_(g),k=y("%"+(A.length>0?A[0]:"")+"%",v),w=1;w<A.length;w+=1)if(k!=null)if(s&&w+1>=A.length){var E=s(k,A[w]);if(!v&&!(A[w]in k))throw new n("base intrinsic for "+g+" exists, but the property is not available.");k=E?E.get||E.value:k[A[w]]}else k=k[A[w]];return k}},function(r,e,t){"use strict";(function(i){function n(a){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(a)}var s=i.Symbol,o=t(23);r.exports=function(){return typeof s=="function"&&typeof Symbol=="function"&&n(s("foo"))==="symbol"&&n(Symbol("bar"))==="symbol"&&o()}}).call(this,t(7))},function(r,e,t){"use strict";function i(n){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}r.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(i(Symbol.iterator)==="symbol")return!0;var n={},s=Symbol("test"),o=Object(s);if(typeof s=="string"||Object.prototype.toString.call(s)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;for(s in n[s]=42,n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var a=Object.getOwnPropertySymbols(n);if(a.length!==1||a[0]!==s||!Object.prototype.propertyIsEnumerable.call(n,s))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(n,s);if(l.value!==42||l.enumerable!==!0)return!1}return!0}},function(r,e,t){"use strict";var i=t(9),n=t(0);r.exports=function(){var s=i();return n(Object,{is:s},{is:function(){return Object.is!==s}}),s}},function(r,e,t){"use strict";function i(f){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}var n=t(26),s=RegExp.prototype.exec,o=Object.getOwnPropertyDescriptor,a=Object.prototype.toString,l=typeof Symbol=="function"&&i(Symbol.toStringTag)==="symbol";r.exports=function(f){if(!f||i(f)!=="object")return!1;if(!l)return a.call(f)==="[object RegExp]";var m=o(f,"lastIndex");return!(!m||!n(m,"value"))&&function(b){try{var h=b.lastIndex;return b.lastIndex=0,s.call(b),!0}catch(p){return!1}finally{b.lastIndex=h}}(f)}},function(r,e,t){"use strict";var i=t(2);r.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},function(r,e,t){"use strict";var i=t(0),n=t(6),s=t(10),o=t(11),a=t(28),l=n(s);i(l,{getPolyfill:o,implementation:s,shim:a}),r.exports=l},function(r,e,t){"use strict";var i=t(0).supportsDescriptors,n=t(11),s=Object.getOwnPropertyDescriptor,o=Object.defineProperty,a=TypeError,l=Object.getPrototypeOf,f=/a/;r.exports=function(){if(!i||!l)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var m=n(),b=l(f),h=s(b,"flags");return h&&h.get===m||o(b,"flags",{configurable:!0,enumerable:!1,get:m}),m}},function(r,e,t){"use strict";function i(a){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(a)}var n=Date.prototype.getDay,s=Object.prototype.toString,o=typeof Symbol=="function"&&i(Symbol.toStringTag)==="symbol";r.exports=function(a){return i(a)==="object"&&a!==null&&(o?function(l){try{return n.call(l),!0}catch(f){return!1}}(a):s.call(a)==="[object Date]")}},function(r,e,t){function i(l){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(l)}var n=t(3),s=t(12),o={attributes:{compose:function(l,f,m){i(l)!=="object"&&(l={}),i(f)!=="object"&&(f={});var b=s(!0,{},f);for(var h in m||(b=Object.keys(b).reduce(function(p,u){return b[u]!=null&&(p[u]=b[u]),p},{})),l)l[h]!==void 0&&f[h]===void 0&&(b[h]=l[h]);return Object.keys(b).length>0?b:void 0},diff:function(l,f){i(l)!=="object"&&(l={}),i(f)!=="object"&&(f={});var m=Object.keys(l).concat(Object.keys(f)).reduce(function(b,h){return n(l[h],f[h])||(b[h]=f[h]===void 0?null:f[h]),b},{});return Object.keys(m).length>0?m:void 0},transform:function(l,f,m){if(i(l)!=="object")return f;if(i(f)==="object"){if(!m)return f;var b=Object.keys(f).reduce(function(h,p){return l[p]===void 0&&(h[p]=f[p]),h},{});return Object.keys(b).length>0?b:void 0}}},iterator:function(l){return new a(l)},length:function(l){return typeof l.delete=="number"?l.delete:typeof l.retain=="number"?l.retain:typeof l.insert=="string"?l.insert.length:1}};function a(l){this.ops=l,this.index=0,this.offset=0}a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(l){l||(l=1/0);var f=this.ops[this.index];if(f){var m=this.offset,b=o.length(f);if(l>=b-m?(l=b-m,this.index+=1,this.offset=0):this.offset+=l,typeof f.delete=="number")return{delete:l};var h={};return f.attributes&&(h.attributes=f.attributes),typeof f.retain=="number"?h.retain=l:typeof f.insert=="string"?h.insert=f.insert.substr(m,l):h.insert=f.insert,h}return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var l=this.offset,f=this.index,m=this.next(),b=this.ops.slice(this.index);return this.offset=l,this.index=f,[m].concat(b)}return[]},r.exports=o},function(r,e,t){"use strict";function i(k){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w})(k)}var n=t(32),s=t(34);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=A,e.resolve=function(k,w){return A(k,!1,!0).resolve(w)},e.resolveObject=function(k,w){return k?A(k,!1,!0).resolveObject(w):w},e.format=function(k){return s.isString(k)&&(k=A(k)),k instanceof o?k.format():o.prototype.format.call(k)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,m=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),b=["'"].concat(m),h=["%","/","?",";","#"].concat(b),p=["/","?","#"],u=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=t(35);function A(k,w,E){if(k&&s.isObject(k)&&k instanceof o)return k;var M=new o;return M.parse(k,w,E),M}o.prototype.parse=function(k,w,E){if(!s.isString(k))throw new TypeError("Parameter 'url' must be a string, not "+i(k));var M=k.indexOf("?"),j=M!==-1&&M<k.indexOf("#")?"?":"#",D=k.split(j);D[0]=D[0].replace(/\\/g,"/");var N=k=D.join(j);if(N=N.trim(),!E&&k.split("#").length===1){var B=f.exec(N);if(B)return this.path=N,this.href=N,this.pathname=B[1],B[2]?(this.search=B[2],this.query=w?v.parse(this.search.substr(1)):this.search.substr(1)):w&&(this.search="",this.query={}),this}var S=a.exec(N);if(S){var P=(S=S[0]).toLowerCase();this.protocol=P,N=N.substr(S.length)}if(E||S||N.match(/^\/\/[^@\/]+@[^@\/]+/)){var z=N.substr(0,2)==="//";!z||S&&y[S]||(N=N.substr(2),this.slashes=!0)}if(!y[S]&&(z||S&&!g[S])){for(var G,ee,F=-1,J=0;J<p.length;J++)(Z=N.indexOf(p[J]))!==-1&&(F===-1||Z<F)&&(F=Z);for((ee=F===-1?N.lastIndexOf("@"):N.lastIndexOf("@",F))!==-1&&(G=N.slice(0,ee),N=N.slice(ee+1),this.auth=decodeURIComponent(G)),F=-1,J=0;J<h.length;J++){var Z;(Z=N.indexOf(h[J]))!==-1&&(F===-1||Z<F)&&(F=Z)}F===-1&&(F=N.length),this.host=N.slice(0,F),N=N.slice(F),this.parseHost(),this.hostname=this.hostname||"";var X=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!X)for(var I=this.hostname.split(/\./),H=(J=0,I.length);J<H;J++){var W=I[J];if(W&&!W.match(u)){for(var te="",re=0,se=W.length;re<se;re++)W.charCodeAt(re)>127?te+="x":te+=W[re];if(!te.match(u)){var K=I.slice(0,J),ie=I.slice(J+1),ce=W.match(d);ce&&(K.push(ce[1]),ie.unshift(ce[2])),ie.length&&(N="/"+ie.join(".")+N),this.hostname=K.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),X||(this.hostname=n.toASCII(this.hostname));var ye=this.port?":"+this.port:"",_e=this.hostname||"";this.host=_e+ye,this.href+=this.host,X&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),N[0]!=="/"&&(N="/"+N))}if(!_[P])for(J=0,H=b.length;J<H;J++){var Ee=b[J];if(N.indexOf(Ee)!==-1){var Me=encodeURIComponent(Ee);Me===Ee&&(Me=escape(Ee)),N=N.split(Ee).join(Me)}}var De=N.indexOf("#");De!==-1&&(this.hash=N.substr(De),N=N.slice(0,De));var Le=N.indexOf("?");if(Le!==-1?(this.search=N.substr(Le),this.query=N.substr(Le+1),w&&(this.query=v.parse(this.query)),N=N.slice(0,Le)):w&&(this.search="",this.query={}),N&&(this.pathname=N),g[P]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){ye=this.pathname||"";var Fe=this.search||"";this.path=ye+Fe}return this.href=this.format(),this},o.prototype.format=function(){var k=this.auth||"";k&&(k=(k=encodeURIComponent(k)).replace(/%3A/i,":"),k+="@");var w=this.protocol||"",E=this.pathname||"",M=this.hash||"",j=!1,D="";this.host?j=k+this.host:this.hostname&&(j=k+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(j+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(D=v.stringify(this.query));var N=this.search||D&&"?"+D||"";return w&&w.substr(-1)!==":"&&(w+=":"),this.slashes||(!w||g[w])&&j!==!1?(j="//"+(j||""),E&&E.charAt(0)!=="/"&&(E="/"+E)):j||(j=""),M&&M.charAt(0)!=="#"&&(M="#"+M),N&&N.charAt(0)!=="?"&&(N="?"+N),w+j+(E=E.replace(/[?#]/g,function(B){return encodeURIComponent(B)}))+(N=N.replace("#","%23"))+M},o.prototype.resolve=function(k){return this.resolveObject(A(k,!1,!0)).format()},o.prototype.resolveObject=function(k){if(s.isString(k)){var w=new o;w.parse(k,!1,!0),k=w}for(var E=new o,M=Object.keys(this),j=0;j<M.length;j++){var D=M[j];E[D]=this[D]}if(E.hash=k.hash,k.href==="")return E.href=E.format(),E;if(k.slashes&&!k.protocol){for(var N=Object.keys(k),B=0;B<N.length;B++){var S=N[B];S!=="protocol"&&(E[S]=k[S])}return g[E.protocol]&&E.hostname&&!E.pathname&&(E.path=E.pathname="/"),E.href=E.format(),E}if(k.protocol&&k.protocol!==E.protocol){if(!g[k.protocol]){for(var P=Object.keys(k),z=0;z<P.length;z++){var G=P[z];E[G]=k[G]}return E.href=E.format(),E}if(E.protocol=k.protocol,k.host||y[k.protocol])E.pathname=k.pathname;else{for(var ee=(k.pathname||"").split("/");ee.length&&!(k.host=ee.shift()););k.host||(k.host=""),k.hostname||(k.hostname=""),ee[0]!==""&&ee.unshift(""),ee.length<2&&ee.unshift(""),E.pathname=ee.join("/")}if(E.search=k.search,E.query=k.query,E.host=k.host||"",E.auth=k.auth,E.hostname=k.hostname||k.host,E.port=k.port,E.pathname||E.search){var F=E.pathname||"",J=E.search||"";E.path=F+J}return E.slashes=E.slashes||k.slashes,E.href=E.format(),E}var Z=E.pathname&&E.pathname.charAt(0)==="/",X=k.host||k.pathname&&k.pathname.charAt(0)==="/",I=X||Z||E.host&&k.pathname,H=I,W=E.pathname&&E.pathname.split("/")||[],te=(ee=k.pathname&&k.pathname.split("/")||[],E.protocol&&!g[E.protocol]);if(te&&(E.hostname="",E.port=null,E.host&&(W[0]===""?W[0]=E.host:W.unshift(E.host)),E.host="",k.protocol&&(k.hostname=null,k.port=null,k.host&&(ee[0]===""?ee[0]=k.host:ee.unshift(k.host)),k.host=null),I=I&&(ee[0]===""||W[0]==="")),X)E.host=k.host||k.host===""?k.host:E.host,E.hostname=k.hostname||k.hostname===""?k.hostname:E.hostname,E.search=k.search,E.query=k.query,W=ee;else if(ee.length)W||(W=[]),W.pop(),W=W.concat(ee),E.search=k.search,E.query=k.query;else if(!s.isNullOrUndefined(k.search))return te&&(E.hostname=E.host=W.shift(),(ce=!!(E.host&&E.host.indexOf("@")>0)&&E.host.split("@"))&&(E.auth=ce.shift(),E.host=E.hostname=ce.shift())),E.search=k.search,E.query=k.query,s.isNull(E.pathname)&&s.isNull(E.search)||(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.href=E.format(),E;if(!W.length)return E.pathname=null,E.search?E.path="/"+E.search:E.path=null,E.href=E.format(),E;for(var re=W.slice(-1)[0],se=(E.host||k.host||W.length>1)&&(re==="."||re==="..")||re==="",K=0,ie=W.length;ie>=0;ie--)(re=W[ie])==="."?W.splice(ie,1):re===".."?(W.splice(ie,1),K++):K&&(W.splice(ie,1),K--);if(!I&&!H)for(;K--;K)W.unshift("..");!I||W[0]===""||W[0]&&W[0].charAt(0)==="/"||W.unshift(""),se&&W.join("/").substr(-1)!=="/"&&W.push("");var ce,ye=W[0]===""||W[0]&&W[0].charAt(0)==="/";return te&&(E.hostname=E.host=ye?"":W.length?W.shift():"",(ce=!!(E.host&&E.host.indexOf("@")>0)&&E.host.split("@"))&&(E.auth=ce.shift(),E.host=E.hostname=ce.shift())),(I=I||E.host&&W.length)&&!ye&&W.unshift(""),W.length?E.pathname=W.join("/"):(E.pathname=null,E.path=null),s.isNull(E.pathname)&&s.isNull(E.search)||(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.auth=k.auth||E.auth,E.slashes=E.slashes||k.slashes,E.href=E.format(),E},o.prototype.parseHost=function(){var k=this.host,w=l.exec(k);w&&((w=w[0])!==":"&&(this.port=w.substr(1)),k=k.substr(0,k.length-w.length)),k&&(this.hostname=k)}},function(r,e,t){(function(i,n){var s;function o(a){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(a)}(function(a){var l=o(e)=="object"&&e&&!e.nodeType&&e,f=o(i)=="object"&&i&&!i.nodeType&&i,m=(n===void 0?"undefined":o(n))=="object"&&n;m.global!==m&&m.window!==m&&m.self!==m||(a=m);var b,h,p=2147483647,u=/^xn--/,d=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,v=String.fromCharCode;function A(S){throw new RangeError(y[S])}function k(S,P){for(var z=S.length,G=[];z--;)G[z]=P(S[z]);return G}function w(S,P){var z=S.split("@"),G="";return z.length>1&&(G=z[0]+"@",S=z[1]),G+k((S=S.replace(_,".")).split("."),P).join(".")}function E(S){for(var P,z,G=[],ee=0,F=S.length;ee<F;)(P=S.charCodeAt(ee++))>=55296&&P<=56319&&ee<F?(64512&(z=S.charCodeAt(ee++)))==56320?G.push(((1023&P)<<10)+(1023&z)+65536):(G.push(P),ee--):G.push(P);return G}function M(S){return k(S,function(P){var z="";return P>65535&&(z+=v((P-=65536)>>>10&1023|55296),P=56320|1023&P),z+=v(P)}).join("")}function j(S,P){return S+22+75*(S<26)-((P!=0)<<5)}function D(S,P,z){var G=0;for(S=z?g(S/700):S>>1,S+=g(S/P);S>455;G+=36)S=g(S/35);return g(G+36*S/(S+38))}function N(S){var P,z,G,ee,F,J,Z,X,I,H,W,te=[],re=S.length,se=0,K=128,ie=72;for((z=S.lastIndexOf("-"))<0&&(z=0),G=0;G<z;++G)S.charCodeAt(G)>=128&&A("not-basic"),te.push(S.charCodeAt(G));for(ee=z>0?z+1:0;ee<re;){for(F=se,J=1,Z=36;ee>=re&&A("invalid-input"),((X=(W=S.charCodeAt(ee++))-48<10?W-22:W-65<26?W-65:W-97<26?W-97:36)>=36||X>g((p-se)/J))&&A("overflow"),se+=X*J,!(X<(I=Z<=ie?1:Z>=ie+26?26:Z-ie));Z+=36)J>g(p/(H=36-I))&&A("overflow"),J*=H;ie=D(se-F,P=te.length+1,F==0),g(se/P)>p-K&&A("overflow"),K+=g(se/P),se%=P,te.splice(se++,0,K)}return M(te)}function B(S){var P,z,G,ee,F,J,Z,X,I,H,W,te,re,se,K,ie=[];for(te=(S=E(S)).length,P=128,z=0,F=72,J=0;J<te;++J)(W=S[J])<128&&ie.push(v(W));for(G=ee=ie.length,ee&&ie.push("-");G<te;){for(Z=p,J=0;J<te;++J)(W=S[J])>=P&&W<Z&&(Z=W);for(Z-P>g((p-z)/(re=G+1))&&A("overflow"),z+=(Z-P)*re,P=Z,J=0;J<te;++J)if((W=S[J])<P&&++z>p&&A("overflow"),W==P){for(X=z,I=36;!(X<(H=I<=F?1:I>=F+26?26:I-F));I+=36)K=X-H,se=36-H,ie.push(v(j(H+K%se,0))),X=g(K/se);ie.push(v(j(X,0))),F=D(z,re,G==ee),z=0,++G}++z,++P}return ie.join("")}if(b={version:"1.4.1",ucs2:{decode:E,encode:M},decode:N,encode:B,toASCII:function(S){return w(S,function(P){return d.test(P)?"xn--"+B(P):P})},toUnicode:function(S){return w(S,function(P){return u.test(P)?N(P.slice(4).toLowerCase()):P})}},o(t(13))=="object"&&t(13))(s=function(){return b}.call(e,t,e,i))===void 0||(i.exports=s);else if(l&&f)if(i.exports==l)f.exports=b;else for(h in b)b.hasOwnProperty(h)&&(l[h]=b[h]);else a.punycode=b})(this)}).call(this,t(33)(r),t(7))},function(r,e){r.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(r,e,t){"use strict";function i(n){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(n)}r.exports={isString:function(n){return typeof n=="string"},isObject:function(n){return i(n)==="object"&&n!==null},isNull:function(n){return n===null},isNullOrUndefined:function(n){return n==null}}},function(r,e,t){"use strict";e.decode=e.parse=t(36),e.encode=e.stringify=t(37)},function(r,e,t){"use strict";function i(s,o){return Object.prototype.hasOwnProperty.call(s,o)}r.exports=function(s,o,a,l){o=o||"&",a=a||"=";var f={};if(typeof s!="string"||s.length===0)return f;var m=/\+/g;s=s.split(o);var b=1e3;l&&typeof l.maxKeys=="number"&&(b=l.maxKeys);var h=s.length;b>0&&h>b&&(h=b);for(var p=0;p<h;++p){var u,d,_,y,g=s[p].replace(m,"%20"),v=g.indexOf(a);v>=0?(u=g.substr(0,v),d=g.substr(v+1)):(u=g,d=""),_=decodeURIComponent(u),y=decodeURIComponent(d),i(f,_)?n(f[_])?f[_].push(y):f[_]=[f[_],y]:f[_]=y}return f};var n=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"}},function(r,e,t){"use strict";function i(l){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(l)}var n=function(l){switch(i(l)){case"string":return l;case"boolean":return l?"true":"false";case"number":return isFinite(l)?l:"";default:return""}};r.exports=function(l,f,m,b){return f=f||"&",m=m||"=",l===null&&(l=void 0),i(l)==="object"?o(a(l),function(h){var p=encodeURIComponent(n(h))+m;return s(l[h])?o(l[h],function(u){return p+encodeURIComponent(n(u))}).join(f):p+encodeURIComponent(n(l[h]))}).join(f):b?encodeURIComponent(n(b))+m+encodeURIComponent(n(l)):""};var s=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function o(l,f){if(l.map)return l.map(f);for(var m=[],b=0;b<l.length;b++)m.push(f(l[b],b));return m}var a=Object.keys||function(l){var f=[];for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&f.push(m);return f}}])})});var ir=Pe(xf=>{"use strict";Object.defineProperty(xf,"__esModule",{value:!0});function pM(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var mM=function r(e,t){pM(this,r),this.data=e,this.text=t.text||e,this.options=t};xf.default=mM});var A0=Pe(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.CODE39=void 0;var _M=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),gM=ir(),yM=bM(gM);function bM(r){return r&&r.__esModule?r:{default:r}}function vM(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function wM(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function xM(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var AM=function(r){xM(e,r);function e(t,i){return vM(this,e),t=t.toUpperCase(),i.mod43&&(t+=OM(SM(t))),wM(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return _M(e,[{key:"encode",value:function(){for(var i=Af("*"),n=0;n<this.data.length;n++)i+=Af(this.data[n])+"0";return i+=Af("*"),{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(yM.default),w0=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],kM=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function Af(r){return EM(x0(r))}function EM(r){return kM[r].toString(2)}function OM(r){return w0[r]}function x0(r){return w0.indexOf(r)}function SM(r){for(var e=0,t=0;t<r.length;t++)e+=x0(r[t]);return e=e%43,e}Cl.CODE39=AM});var is=Pe(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});var Ao;function kf(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var k0=yt.SET_A=0,E0=yt.SET_B=1,O0=yt.SET_C=2,UU=yt.SHIFT=98,TM=yt.START_A=103,CM=yt.START_B=104,NM=yt.START_C=105,HU=yt.MODULO=103,YU=yt.STOP=106,WU=yt.FNC1=207,GU=yt.SET_BY_CODE=(Ao={},kf(Ao,TM,k0),kf(Ao,CM,E0),kf(Ao,NM,O0),Ao),VU=yt.SWAP={101:k0,100:E0,99:O0},KU=yt.A_START_CHAR=String.fromCharCode(208),JU=yt.B_START_CHAR=String.fromCharCode(209),ZU=yt.C_START_CHAR=String.fromCharCode(210),XU=yt.A_CHARS="[\0-_\xC8-\xCF]",QU=yt.B_CHARS="[ -\x7F\xC8-\xCF]",eH=yt.C_CHARS="(\xCF*[0-9]{2}\xCF*)",tH=yt.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]});var ko=Pe(Ef=>{"use strict";Object.defineProperty(Ef,"__esModule",{value:!0});var MM=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),PM=ir(),DM=LM(PM),nr=is();function LM(r){return r&&r.__esModule?r:{default:r}}function $M(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function RM(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function jM(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var IM=function(r){jM(e,r);function e(t,i){$M(this,e);var n=RM(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.substring(1),i));return n.bytes=t.split("").map(function(s){return s.charCodeAt(0)}),n}return MM(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var i=this.bytes,n=i.shift()-105,s=nr.SET_BY_CODE[n];if(s===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&i.unshift(nr.FNC1);var o=e.next(i,1,s);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(n)+o.result+e.getBar((o.checksum+n)%nr.MODULO)+e.getBar(nr.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var i=this.options.ean128||!1;return typeof i=="string"&&(i=i.toLowerCase()==="true"),i}}],[{key:"getBar",value:function(i){return nr.BARS[i]?nr.BARS[i].toString():""}},{key:"correctIndex",value:function(i,n){if(n===nr.SET_A){var s=i.shift();return s<32?s+64:s-32}else return n===nr.SET_B?i.shift()-32:(i.shift()-48)*10+i.shift()-48}},{key:"next",value:function(i,n,s){if(!i.length)return{result:"",checksum:0};var o=void 0,a=void 0;if(i[0]>=200){a=i.shift()-105;var l=nr.SWAP[a];l!==void 0?o=e.next(i,n+1,l):((s===nr.SET_A||s===nr.SET_B)&&a===nr.SHIFT&&(i[0]=s===nr.SET_A?i[0]>95?i[0]-96:i[0]:i[0]<32?i[0]+96:i[0]),o=e.next(i,n+1,s))}else a=e.correctIndex(i,s),o=e.next(i,n+1,s);var f=e.getBar(a),m=a*n;return{result:f+o.result,checksum:m+o.checksum}}}]),e}(DM.default);Ef.default=IM});var M0=Pe(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});var Oi=is(),S0=function(e){return e.match(new RegExp("^"+Oi.A_CHARS+"*"))[0].length},T0=function(e){return e.match(new RegExp("^"+Oi.B_CHARS+"*"))[0].length},C0=function(e){return e.match(new RegExp("^"+Oi.C_CHARS+"*"))[0]};function Of(r,e){var t=e?Oi.A_CHARS:Oi.B_CHARS,i=r.match(new RegExp("^("+t+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+String.fromCharCode(204)+N0(r.substring(i[1].length));var n=r.match(new RegExp("^"+t+"+"))[0];return n.length===r.length?r:n+String.fromCharCode(e?205:206)+Of(r.substring(n.length),!e)}function N0(r){var e=C0(r),t=e.length;if(t===r.length)return r;r=r.substring(t);var i=S0(r)>=T0(r);return e+String.fromCharCode(i?206:205)+Of(r,i)}Sf.default=function(r){var e=void 0,t=C0(r).length;if(t>=2)e=Oi.C_START_CHAR+N0(r);else{var i=S0(r)>T0(r);e=(i?Oi.A_START_CHAR:Oi.B_START_CHAR)+Of(r,i)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(n,s){return String.fromCharCode(203)+s})}});var D0=Pe(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});var qM=ko(),BM=P0(qM),FM=M0(),zM=P0(FM);function P0(r){return r&&r.__esModule?r:{default:r}}function UM(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Tf(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function HM(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var YM=function(r){HM(e,r);function e(t,i){if(UM(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(t))var n=Tf(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,zM.default)(t),i));else var n=Tf(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return Tf(n)}return e}(BM.default);Cf.default=YM});var $0=Pe(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});var WM=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),GM=ko(),VM=KM(GM),L0=is();function KM(r){return r&&r.__esModule?r:{default:r}}function JM(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ZM(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function XM(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var QM=function(r){XM(e,r);function e(t,i){return JM(this,e),ZM(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,L0.A_START_CHAR+t,i))}return WM(e,[{key:"valid",value:function(){return new RegExp("^"+L0.A_CHARS+"+$").test(this.data)}}]),e}(VM.default);Nf.default=QM});var j0=Pe(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});var eP=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),tP=ko(),rP=iP(tP),R0=is();function iP(r){return r&&r.__esModule?r:{default:r}}function nP(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function sP(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function oP(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var aP=function(r){oP(e,r);function e(t,i){return nP(this,e),sP(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,R0.B_START_CHAR+t,i))}return eP(e,[{key:"valid",value:function(){return new RegExp("^"+R0.B_CHARS+"+$").test(this.data)}}]),e}(rP.default);Mf.default=aP});var q0=Pe(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});var lP=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),uP=ko(),cP=fP(uP),I0=is();function fP(r){return r&&r.__esModule?r:{default:r}}function dP(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function hP(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function pP(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var mP=function(r){pP(e,r);function e(t,i){return dP(this,e),hP(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,I0.C_START_CHAR+t,i))}return lP(e,[{key:"valid",value:function(){return new RegExp("^"+I0.C_CHARS+"+$").test(this.data)}}]),e}(cP.default);Pf.default=mP});var B0=Pe(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.CODE128C=Sr.CODE128B=Sr.CODE128A=Sr.CODE128=void 0;var _P=D0(),gP=Nl(_P),yP=$0(),bP=Nl(yP),vP=j0(),wP=Nl(vP),xP=q0(),AP=Nl(xP);function Nl(r){return r&&r.__esModule?r:{default:r}}Sr.CODE128=gP.default;Sr.CODE128A=bP.default;Sr.CODE128B=wP.default;Sr.CODE128C=AP.default});var ns=Pe(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});var cH=Si.SIDE_BIN="101",fH=Si.MIDDLE_BIN="01010",dH=Si.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},hH=Si.EAN2_STRUCTURE=["LL","LG","GL","GG"],pH=Si.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],mH=Si.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]});var ss=Pe(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});var kP=ns(),EP=function(e,t,i){var n=e.split("").map(function(o,a){return kP.BINARIES[t[a]]}).map(function(o,a){return o?o[e[a]]:""});if(i){var s=e.length-1;n=n.map(function(o,a){return a<s?o+i:o})}return n.join("")};Df.default=EP});var $f=Pe(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});var OP=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),os=ns(),SP=ss(),F0=z0(SP),TP=ir(),CP=z0(TP);function z0(r){return r&&r.__esModule?r:{default:r}}function NP(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function MP(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function PP(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var DP=function(r){PP(e,r);function e(t,i){NP(this,e);var n=MP(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.fontSize=!i.flat&&i.fontSize>i.width*10?i.width*10:i.fontSize,n.guardHeight=i.height+n.fontSize/2+i.textMargin,n}return OP(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(i,n){return this.text.substr(i,n)}},{key:"leftEncode",value:function(i,n){return(0,F0.default)(i,n)}},{key:"rightText",value:function(i,n){return this.text.substr(i,n)}},{key:"rightEncode",value:function(i,n){return(0,F0.default)(i,n)}},{key:"encodeGuarded",value:function(){var i={fontSize:this.fontSize},n={height:this.guardHeight};return[{data:os.SIDE_BIN,options:n},{data:this.leftEncode(),text:this.leftText(),options:i},{data:os.MIDDLE_BIN,options:n},{data:this.rightEncode(),text:this.rightText(),options:i},{data:os.SIDE_BIN,options:n}]}},{key:"encodeFlat",value:function(){var i=[os.SIDE_BIN,this.leftEncode(),os.MIDDLE_BIN,this.rightEncode(),os.SIDE_BIN];return{data:i.join(""),text:this.text}}}]),e}(CP.default);Lf.default=DP});var H0=Pe(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});var LP=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),Eo=function r(e,t,i){e===null&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(n===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:r(s,t,i)}else{if("value"in n)return n.value;var o=n.get;return o===void 0?void 0:o.call(i)}},$P=ns(),RP=$f(),jP=IP(RP);function IP(r){return r&&r.__esModule?r:{default:r}}function qP(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function BP(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function FP(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var U0=function(e){var t=e.substr(0,12).split("").map(function(i){return+i}).reduce(function(i,n,s){return s%2?i+n*3:i+n},0);return(10-t%10)%10},zP=function(r){FP(e,r);function e(t,i){qP(this,e),t.search(/^[0-9]{12}$/)!==-1&&(t+=U0(t));var n=BP(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.lastChar=i.lastChar,n}return LP(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===U0(this.data)}},{key:"leftText",value:function(){return Eo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var i=this.data.substr(1,6),n=$P.EAN13_STRUCTURE[this.data[0]];return Eo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,n)}},{key:"rightText",value:function(){return Eo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var i=this.data.substr(7,6);return Eo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRRRR")}},{key:"encodeGuarded",value:function(){var i=Eo(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(i.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(i.push({data:"00"}),i.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),i}}]),e}(jP.default);Rf.default=zP});var W0=Pe(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});var UP=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),Ml=function r(e,t,i){e===null&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(n===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:r(s,t,i)}else{if("value"in n)return n.value;var o=n.get;return o===void 0?void 0:o.call(i)}},HP=$f(),YP=WP(HP);function WP(r){return r&&r.__esModule?r:{default:r}}function GP(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function VP(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function KP(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var Y0=function(e){var t=e.substr(0,7).split("").map(function(i){return+i}).reduce(function(i,n,s){return s%2?i+n:i+n*3},0);return(10-t%10)%10},JP=function(r){KP(e,r);function e(t,i){return GP(this,e),t.search(/^[0-9]{7}$/)!==-1&&(t+=Y0(t)),VP(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return UP(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===Y0(this.data)}},{key:"leftText",value:function(){return Ml(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var i=this.data.substr(0,4);return Ml(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,i,"LLLL")}},{key:"rightText",value:function(){return Ml(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var i=this.data.substr(4,4);return Ml(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,i,"RRRR")}}]),e}(YP.default);jf.default=JP});var V0=Pe(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});var ZP=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),XP=ns(),QP=ss(),eD=G0(QP),tD=ir(),rD=G0(tD);function G0(r){return r&&r.__esModule?r:{default:r}}function iD(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function nD(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function sD(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var oD=function(e){var t=e.split("").map(function(i){return+i}).reduce(function(i,n,s){return s%2?i+n*9:i+n*3},0);return t%10},aD=function(r){sD(e,r);function e(t,i){return iD(this,e),nD(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return ZP(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var i=XP.EAN5_STRUCTURE[oD(this.data)];return{data:"1011"+(0,eD.default)(this.data,i,"01"),text:this.text}}}]),e}(rD.default);If.default=aD});var J0=Pe(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});var lD=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),uD=ns(),cD=ss(),fD=K0(cD),dD=ir(),hD=K0(dD);function K0(r){return r&&r.__esModule?r:{default:r}}function pD(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function mD(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function _D(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var gD=function(r){_D(e,r);function e(t,i){return pD(this,e),mD(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return lD(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var i=uD.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,fD.default)(this.data,i,"01"),text:this.text}}}]),e}(hD.default);qf.default=gD});var Ff=Pe(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});var yD=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}();Pl.checksum=Bf;var bD=ss(),as=Z0(bD),vD=ir(),wD=Z0(vD);function Z0(r){return r&&r.__esModule?r:{default:r}}function xD(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function AD(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function kD(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var ED=function(r){kD(e,r);function e(t,i){xD(this,e),t.search(/^[0-9]{11}$/)!==-1&&(t+=Bf(t));var n=AD(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.displayValue=i.displayValue,i.fontSize>i.width*10?n.fontSize=i.width*10:n.fontSize=i.fontSize,n.guardHeight=i.height+n.fontSize/2+i.textMargin,n}return yD(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==Bf(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=(0,as.default)(this.data.substr(0,6),"LLLLLL"),i+="01010",i+=(0,as.default)(this.data.substr(6,6),"RRRRRR"),i+="101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101"+(0,as.default)(this.data[0],"L"),options:{height:this.guardHeight}}),i.push({data:(0,as.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),i.push({data:"01010",options:{height:this.guardHeight}}),i.push({data:(0,as.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),i.push({data:(0,as.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),i}}]),e}(wD.default);function Bf(r){var e=0,t;for(t=1;t<11;t+=2)e+=parseInt(r[t]);for(t=0;t<11;t+=2)e+=parseInt(r[t])*3;return(10-e%10)%10}Pl.default=ED});var ey=Pe(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});var OD=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),SD=ss(),TD=Q0(SD),CD=ir(),ND=Q0(CD),MD=Ff();function Q0(r){return r&&r.__esModule?r:{default:r}}function PD(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function zf(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function DD(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var LD=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],$D=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],RD=function(r){DD(e,r);function e(t,i){PD(this,e);var n=zf(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));if(n.isValid=!1,t.search(/^[0-9]{6}$/)!==-1)n.middleDigits=t,n.upcA=X0(t,"0"),n.text=i.text||""+n.upcA[0]+t+n.upcA[n.upcA.length-1],n.isValid=!0;else if(t.search(/^[01][0-9]{7}$/)!==-1)if(n.middleDigits=t.substring(1,t.length-1),n.upcA=X0(n.middleDigits,t[0]),n.upcA[n.upcA.length-1]===t[t.length-1])n.isValid=!0;else return zf(n);else return zf(n);return n.displayValue=i.displayValue,i.fontSize>i.width*10?n.fontSize=i.width*10:n.fontSize=i.fontSize,n.guardHeight=i.height+n.fontSize/2+i.textMargin,n}return OD(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var i="";return i+="101",i+=this.encodeMiddleDigits(),i+="010101",{data:i,text:this.text}}},{key:"guardedEncoding",value:function(){var i=[];return this.displayValue&&i.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),i.push({data:"101",options:{height:this.guardHeight}}),i.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),i.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&i.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),i}},{key:"encodeMiddleDigits",value:function(){var i=this.upcA[0],n=this.upcA[this.upcA.length-1],s=$D[parseInt(n)][parseInt(i)];return(0,TD.default)(this.middleDigits,s)}}]),e}(ND.default);function X0(r,e){for(var t=parseInt(r[r.length-1]),i=LD[t],n="",s=0,o=0;o<i.length;o++){var a=i[o];a==="X"?n+=r[s++]:n+=a}return n=""+e+n,""+n+(0,MD.checksum)(n)}Uf.default=RD});var ty=Pe(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.UPCE=Vt.UPC=Vt.EAN2=Vt.EAN5=Vt.EAN8=Vt.EAN13=void 0;var jD=H0(),ID=ls(jD),qD=W0(),BD=ls(qD),FD=V0(),zD=ls(FD),UD=J0(),HD=ls(UD),YD=Ff(),WD=ls(YD),GD=ey(),VD=ls(GD);function ls(r){return r&&r.__esModule?r:{default:r}}Vt.EAN13=ID.default;Vt.EAN8=BD.default;Vt.EAN5=zD.default;Vt.EAN2=HD.default;Vt.UPC=WD.default;Vt.UPCE=VD.default});var ry=Pe(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});var OH=Oo.START_BIN="1010",SH=Oo.END_BIN="11101",TH=Oo.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]});var Yf=Pe(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});var KD=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),Dl=ry(),JD=ir(),ZD=XD(JD);function XD(r){return r&&r.__esModule?r:{default:r}}function QD(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function eL(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function tL(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var rL=function(r){tL(e,r);function e(){return QD(this,e),eL(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return KD(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var i=this,n=this.data.match(/.{2}/g).map(function(s){return i.encodePair(s)}).join("");return{data:Dl.START_BIN+n+Dl.END_BIN,text:this.text}}},{key:"encodePair",value:function(i){var n=Dl.BINARIES[i[1]];return Dl.BINARIES[i[0]].split("").map(function(s,o){return(s==="1"?"111":"1")+(n[o]==="1"?"000":"0")}).join("")}}]),e}(ZD.default);Hf.default=rL});var ny=Pe(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});var iL=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),nL=Yf(),sL=oL(nL);function oL(r){return r&&r.__esModule?r:{default:r}}function aL(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function lL(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function uL(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var iy=function(e){var t=e.substr(0,13).split("").map(function(i){return parseInt(i,10)}).reduce(function(i,n,s){return i+n*(3-s%2*2)},0);return Math.ceil(t/10)*10-t},cL=function(r){uL(e,r);function e(t,i){return aL(this,e),t.search(/^[0-9]{13}$/)!==-1&&(t+=iy(t)),lL(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return iL(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===iy(this.data)}}]),e}(sL.default);Wf.default=cL});var oy=Pe(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.ITF14=us.ITF=void 0;var fL=Yf(),dL=sy(fL),hL=ny(),pL=sy(hL);function sy(r){return r&&r.__esModule?r:{default:r}}us.ITF=dL.default;us.ITF14=pL.default});var cs=Pe(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});var mL=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),_L=ir(),gL=yL(_L);function yL(r){return r&&r.__esModule?r:{default:r}}function bL(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function vL(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function wL(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var xL=function(r){wL(e,r);function e(t,i){return bL(this,e),vL(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return mL(e,[{key:"encode",value:function(){for(var i="110",n=0;n<this.data.length;n++){var s=parseInt(this.data[n]),o=s.toString(2);o=AL(o,4-o.length);for(var a=0;a<o.length;a++)i+=o[a]=="0"?"100":"110"}return i+="1001",{data:i,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(gL.default);function AL(r,e){for(var t=0;t<e;t++)r="0"+r;return r}Gf.default=xL});var So=Pe(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.mod10=kL;Ll.mod11=EL;function kL(r){for(var e=0,t=0;t<r.length;t++){var i=parseInt(r[t]);(t+r.length)%2===0?e+=i:e+=i*2%10+Math.floor(i*2/10)}return(10-e%10)%10}function EL(r){for(var e=0,t=[2,3,4,5,6,7],i=0;i<r.length;i++){var n=parseInt(r[r.length-1-i]);e+=t[i%t.length]*n}return(11-e%11)%11}});var ay=Pe(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});var OL=cs(),SL=CL(OL),TL=So();function CL(r){return r&&r.__esModule?r:{default:r}}function NL(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ML(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function PL(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var DL=function(r){PL(e,r);function e(t,i){return NL(this,e),ML(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,TL.mod10)(t),i))}return e}(SL.default);Vf.default=DL});var ly=Pe(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});var LL=cs(),$L=jL(LL),RL=So();function jL(r){return r&&r.__esModule?r:{default:r}}function IL(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function qL(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function BL(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var FL=function(r){BL(e,r);function e(t,i){return IL(this,e),qL(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,RL.mod11)(t),i))}return e}($L.default);Kf.default=FL});var cy=Pe(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});var zL=cs(),UL=HL(zL),uy=So();function HL(r){return r&&r.__esModule?r:{default:r}}function YL(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function WL(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function GL(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var VL=function(r){GL(e,r);function e(t,i){return YL(this,e),t+=(0,uy.mod10)(t),t+=(0,uy.mod10)(t),WL(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return e}(UL.default);Jf.default=VL});var dy=Pe(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});var KL=cs(),JL=ZL(KL),fy=So();function ZL(r){return r&&r.__esModule?r:{default:r}}function XL(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function QL(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function e$(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var t$=function(r){e$(e,r);function e(t,i){return XL(this,e),t+=(0,fy.mod11)(t),t+=(0,fy.mod10)(t),QL(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return e}(JL.default);Zf.default=t$});var hy=Pe(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.MSI1110=dr.MSI1010=dr.MSI11=dr.MSI10=dr.MSI=void 0;var r$=cs(),i$=To(r$),n$=ay(),s$=To(n$),o$=ly(),a$=To(o$),l$=cy(),u$=To(l$),c$=dy(),f$=To(c$);function To(r){return r&&r.__esModule?r:{default:r}}dr.MSI=i$.default;dr.MSI10=s$.default;dr.MSI11=a$.default;dr.MSI1010=u$.default;dr.MSI1110=f$.default});var py=Pe($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.pharmacode=void 0;var d$=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),h$=ir(),p$=m$(h$);function m$(r){return r&&r.__esModule?r:{default:r}}function _$(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function g$(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function y$(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var b$=function(r){y$(e,r);function e(t,i){_$(this,e);var n=g$(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));return n.number=parseInt(t,10),n}return d$(e,[{key:"encode",value:function(){for(var i=this.number,n="";!isNaN(i)&&i!=0;)i%2===0?(n="11100"+n,i=(i-2)/2):(n="100"+n,i=(i-1)/2);return n=n.slice(0,-2),{data:n,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(p$.default);$l.pharmacode=b$});var my=Pe(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.codabar=void 0;var v$=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),w$=ir(),x$=A$(w$);function A$(r){return r&&r.__esModule?r:{default:r}}function k$(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function E$(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function O$(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var S$=function(r){O$(e,r);function e(t,i){k$(this,e),t.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(t="A"+t+"A");var n=E$(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.toUpperCase(),i));return n.text=n.options.text||n.text.replace(/[A-D]/g,""),n}return v$(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var i=[],n=this.getEncodings(),s=0;s<this.data.length;s++)i.push(n[this.data.charAt(s)]),s!==this.data.length-1&&i.push("0");return{text:this.text,data:i.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(x$.default);Rl.codabar=S$});var _y=Pe(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.GenericBarcode=void 0;var T$=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),C$=ir(),N$=M$(C$);function M$(r){return r&&r.__esModule?r:{default:r}}function P$(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function D$(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function L$(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var $$=function(r){L$(e,r);function e(t,i){return P$(this,e),D$(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return T$(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(N$.default);jl.GenericBarcode=$$});var yy=Pe(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});var R$=A0(),Il=B0(),fs=ty(),gy=oy(),Co=hy(),j$=py(),I$=my(),q$=_y();Xf.default={CODE39:R$.CODE39,CODE128:Il.CODE128,CODE128A:Il.CODE128A,CODE128B:Il.CODE128B,CODE128C:Il.CODE128C,EAN13:fs.EAN13,EAN8:fs.EAN8,EAN5:fs.EAN5,EAN2:fs.EAN2,UPC:fs.UPC,UPCE:fs.UPCE,ITF14:gy.ITF14,ITF:gy.ITF,MSI:Co.MSI,MSI10:Co.MSI10,MSI11:Co.MSI11,MSI1010:Co.MSI1010,MSI1110:Co.MSI1110,pharmacode:j$.pharmacode,codabar:I$.codabar,GenericBarcode:q$.GenericBarcode}});var No=Pe(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});var B$=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r};Qf.default=function(r,e){return B$({},r,e)}});var by=Pe(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.default=F$;function F$(r){var e=[];function t(i){if(Array.isArray(i))for(var n=0;n<i.length;n++)t(i[n]);else i.text=i.text||"",i.data=i.data||"",e.push(i)}return t(r),e}});var vy=Pe(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.default=z$;function z$(r){return r.marginTop=r.marginTop||r.margin,r.marginBottom=r.marginBottom||r.margin,r.marginRight=r.marginRight||r.margin,r.marginLeft=r.marginLeft||r.margin,r}});var id=Pe(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.default=U$;function U$(r){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var t in e)e.hasOwnProperty(t)&&(t=e[t],typeof r[t]=="string"&&(r[t]=parseInt(r[t],10)));return typeof r.displayValue=="string"&&(r.displayValue=r.displayValue!="false"),r}});var sd=Pe(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});var H$={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};nd.default=H$});var Ay=Pe(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});var Y$=id(),W$=xy(Y$),G$=sd(),wy=xy(G$);function xy(r){return r&&r.__esModule?r:{default:r}}function V$(r){var e={};for(var t in wy.default)wy.default.hasOwnProperty(t)&&(r.hasAttribute("jsbarcode-"+t.toLowerCase())&&(e[t]=r.getAttribute("jsbarcode-"+t.toLowerCase())),r.hasAttribute("data-"+t.toLowerCase())&&(e[t]=r.getAttribute("data-"+t.toLowerCase())));return e.value=r.getAttribute("jsbarcode-value")||r.getAttribute("data-value"),e=(0,W$.default)(e),e}od.default=V$});var ad=Pe(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.getTotalWidthOfEncodings=hr.calculateEncodingAttributes=hr.getBarcodePadding=hr.getEncodingHeight=hr.getMaximumHeightOfEncodings=void 0;var K$=No(),J$=Z$(K$);function Z$(r){return r&&r.__esModule?r:{default:r}}function ky(r,e){return e.height+(e.displayValue&&r.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function Ey(r,e,t){if(t.displayValue&&e<r){if(t.textAlign=="center")return Math.floor((r-e)/2);if(t.textAlign=="left")return 0;if(t.textAlign=="right")return Math.floor(r-e)}return 0}function X$(r,e,t){for(var i=0;i<r.length;i++){var n=r[i],s=(0,J$.default)(e,n.options),o;s.displayValue?o=t3(n.text,s,t):o=0;var a=n.data.length*s.width;n.width=Math.ceil(Math.max(o,a)),n.height=ky(n,s),n.barcodePadding=Ey(o,a,s)}}function Q$(r){for(var e=0,t=0;t<r.length;t++)e+=r[t].width;return e}function e3(r){for(var e=0,t=0;t<r.length;t++)r[t].height>e&&(e=r[t].height);return e}function t3(r,e,t){var i;if(t)i=t;else if(typeof document!="undefined")i=document.createElement("canvas").getContext("2d");else return 0;i.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var n=i.measureText(r);if(!n)return 0;var s=n.width;return s}hr.getMaximumHeightOfEncodings=e3;hr.getEncodingHeight=ky;hr.getBarcodePadding=Ey;hr.calculateEncodingAttributes=X$;hr.getTotalWidthOfEncodings=Q$});var Oy=Pe(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});var r3=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),i3=No(),n3=s3(i3),ld=ad();function s3(r){return r&&r.__esModule?r:{default:r}}function o3(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var a3=function(){function r(e,t,i){o3(this,r),this.canvas=e,this.encodings=t,this.options=i}return r3(r,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var t=0;t<this.encodings.length;t++){var i=(0,n3.default)(this.options,this.encodings[t].options);this.drawCanvasBarcode(i,this.encodings[t]),this.drawCanvasText(i,this.encodings[t]),this.moveCanvasDrawing(this.encodings[t])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var t=this.canvas.getContext("2d");t.save(),(0,ld.calculateEncodingAttributes)(this.encodings,this.options,t);var i=(0,ld.getTotalWidthOfEncodings)(this.encodings),n=(0,ld.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=i+this.options.marginLeft+this.options.marginRight,this.canvas.height=n,t.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(t.fillStyle=this.options.background,t.fillRect(0,0,this.canvas.width,this.canvas.height)),t.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(t,i){var n=this.canvas.getContext("2d"),s=i.data,o;t.textPosition=="top"?o=t.marginTop+t.fontSize+t.textMargin:o=t.marginTop,n.fillStyle=t.lineColor;for(var a=0;a<s.length;a++){var l=a*t.width+i.barcodePadding;s[a]==="1"?n.fillRect(l,o,t.width,t.height):s[a]&&n.fillRect(l,o,t.width,t.height*s[a])}}},{key:"drawCanvasText",value:function(t,i){var n=this.canvas.getContext("2d"),s=t.fontOptions+" "+t.fontSize+"px "+t.font;if(t.displayValue){var o,a;t.textPosition=="top"?a=t.marginTop+t.fontSize-t.textMargin:a=t.height+t.textMargin+t.marginTop+t.fontSize,n.font=s,t.textAlign=="left"||i.barcodePadding>0?(o=0,n.textAlign="left"):t.textAlign=="right"?(o=i.width-1,n.textAlign="right"):(o=i.width/2,n.textAlign="center"),n.fillText(i.text,o,a)}}},{key:"moveCanvasDrawing",value:function(t){var i=this.canvas.getContext("2d");i.translate(t.width,0)}},{key:"restoreCanvas",value:function(){var t=this.canvas.getContext("2d");t.restore()}}]),r}();ud.default=a3});var Sy=Pe(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});var l3=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}(),u3=No(),c3=f3(u3),cd=ad();function f3(r){return r&&r.__esModule?r:{default:r}}function d3(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var ql="http://www.w3.org/2000/svg",h3=function(){function r(e,t,i){d3(this,r),this.svg=e,this.encodings=t,this.options=i,this.document=i.xmlDocument||document}return l3(r,[{key:"render",value:function(){var t=this.options.marginLeft;this.prepareSVG();for(var i=0;i<this.encodings.length;i++){var n=this.encodings[i],s=(0,c3.default)(this.options,n.options),o=this.createGroup(t,s.marginTop,this.svg);this.setGroupOptions(o,s),this.drawSvgBarcode(o,s,n),this.drawSVGText(o,s,n),t+=n.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,cd.calculateEncodingAttributes)(this.encodings,this.options);var t=(0,cd.getTotalWidthOfEncodings)(this.encodings),i=(0,cd.getMaximumHeightOfEncodings)(this.encodings),n=t+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(n,i),this.options.background&&this.drawRect(0,0,n,i,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(t,i,n){var s=n.data,o;i.textPosition=="top"?o=i.fontSize+i.textMargin:o=0;for(var a=0,l=0,f=0;f<s.length;f++)l=f*i.width+n.barcodePadding,s[f]==="1"?a++:a>0&&(this.drawRect(l-i.width*a,o,i.width*a,i.height,t),a=0);a>0&&this.drawRect(l-i.width*(a-1),o,i.width*a,i.height,t)}},{key:"drawSVGText",value:function(t,i,n){var s=this.document.createElementNS(ql,"text");if(i.displayValue){var o,a;s.setAttribute("style","font:"+i.fontOptions+" "+i.fontSize+"px "+i.font),i.textPosition=="top"?a=i.fontSize-i.textMargin:a=i.height+i.textMargin+i.fontSize,i.textAlign=="left"||n.barcodePadding>0?(o=0,s.setAttribute("text-anchor","start")):i.textAlign=="right"?(o=n.width-1,s.setAttribute("text-anchor","end")):(o=n.width/2,s.setAttribute("text-anchor","middle")),s.setAttribute("x",o),s.setAttribute("y",a),s.appendChild(this.document.createTextNode(n.text)),t.appendChild(s)}}},{key:"setSvgAttributes",value:function(t,i){var n=this.svg;n.setAttribute("width",t+"px"),n.setAttribute("height",i+"px"),n.setAttribute("x","0px"),n.setAttribute("y","0px"),n.setAttribute("viewBox","0 0 "+t+" "+i),n.setAttribute("xmlns",ql),n.setAttribute("version","1.1"),n.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(t,i,n){var s=this.document.createElementNS(ql,"g");return s.setAttribute("transform","translate("+t+", "+i+")"),n.appendChild(s),s}},{key:"setGroupOptions",value:function(t,i){t.setAttribute("style","fill:"+i.lineColor+";")}},{key:"drawRect",value:function(t,i,n,s,o){var a=this.document.createElementNS(ql,"rect");return a.setAttribute("x",t),a.setAttribute("y",i),a.setAttribute("width",n),a.setAttribute("height",s),o.appendChild(a),a}}]),r}();fd.default=h3});var Ty=Pe(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});var p3=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}();function m3(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var _3=function(){function r(e,t,i){m3(this,r),this.object=e,this.encodings=t,this.options=i}return p3(r,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),r}();dd.default=_3});var Cy=Pe(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});var g3=Oy(),y3=hd(g3),b3=Sy(),v3=hd(b3),w3=Ty(),x3=hd(w3);function hd(r){return r&&r.__esModule?r:{default:r}}pd.default={CanvasRenderer:y3.default,SVGRenderer:v3.default,ObjectRenderer:x3.default}});var yd=Pe(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});function md(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _d(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:r}function gd(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var A3=function(r){gd(e,r);function e(t,i){md(this,e);var n=_d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidInputException",n.symbology=t,n.input=i,n.message='"'+n.input+'" is not a valid input for '+n.symbology,n}return e}(Error),k3=function(r){gd(e,r);function e(){md(this,e);var t=_d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="InvalidElementException",t.message="Not supported type to render on",t}return e}(Error),E3=function(r){gd(e,r);function e(){md(this,e);var t=_d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="NoElementException",t.message="No element to render on.",t}return e}(Error);Mo.InvalidInputException=A3;Mo.InvalidElementException=k3;Mo.NoElementException=E3});var My=Pe(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0});var O3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},S3=Ay(),bd=Ny(S3),T3=Cy(),Po=Ny(T3),C3=yd();function Ny(r){return r&&r.__esModule?r:{default:r}}function vd(r){if(typeof r=="string")return N3(r);if(Array.isArray(r)){for(var e=[],t=0;t<r.length;t++)e.push(vd(r[t]));return e}else{if(typeof HTMLCanvasElement!="undefined"&&r instanceof HTMLImageElement)return M3(r);if(r&&r.nodeName&&r.nodeName.toLowerCase()==="svg"||typeof SVGElement!="undefined"&&r instanceof SVGElement)return{element:r,options:(0,bd.default)(r),renderer:Po.default.SVGRenderer};if(typeof HTMLCanvasElement!="undefined"&&r instanceof HTMLCanvasElement)return{element:r,options:(0,bd.default)(r),renderer:Po.default.CanvasRenderer};if(r&&r.getContext)return{element:r,renderer:Po.default.CanvasRenderer};if(r&&(typeof r=="undefined"?"undefined":O3(r))==="object"&&!r.nodeName)return{element:r,renderer:Po.default.ObjectRenderer};throw new C3.InvalidElementException}}function N3(r){var e=document.querySelectorAll(r);if(e.length!==0){for(var t=[],i=0;i<e.length;i++)t.push(vd(e[i]));return t}}function M3(r){var e=document.createElement("canvas");return{element:e,options:(0,bd.default)(r),renderer:Po.default.CanvasRenderer,afterRender:function(){r.setAttribute("src",e.toDataURL())}}}wd.default=vd});var Py=Pe(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});var P3=function(){function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}();function D3(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var L3=function(){function r(e){D3(this,r),this.api=e}return P3(r,[{key:"handleCatch",value:function(t){if(t.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw t.message;else throw t;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(t){try{var i=t.apply(void 0,arguments);return this.api._options.valid(!0),i}catch(n){return this.handleCatch(n),this.api}}}]),r}();xd.default=L3});var By=Pe((nY,qy)=>{"use strict";var $3=yy(),Qi=Ti($3),R3=No(),Do=Ti(R3),j3=by(),Ly=Ti(j3),I3=vy(),Dy=Ti(I3),q3=My(),B3=Ti(q3),F3=id(),z3=Ti(F3),U3=Py(),H3=Ti(U3),$y=yd(),Y3=sd(),Ry=Ti(Y3);function Ti(r){return r&&r.__esModule?r:{default:r}}var Jr=function(){},Bl=function(e,t,i){var n=new Jr;if(typeof e=="undefined")throw Error("No element to render on was provided.");return n._renderProperties=(0,B3.default)(e),n._encodings=[],n._options=Ry.default,n._errorHandler=new H3.default(n),typeof t!="undefined"&&(i=i||{},i.format||(i.format=Iy()),n.options(i)[i.format](t,i).render()),n};Bl.getModule=function(r){return Qi.default[r]};for(Ad in Qi.default)Qi.default.hasOwnProperty(Ad)&&W3(Qi.default,Ad);var Ad;function W3(r,e){Jr.prototype[e]=Jr.prototype[e.toUpperCase()]=Jr.prototype[e.toLowerCase()]=function(t,i){var n=this;return n._errorHandler.wrapBarcodeCall(function(){i.text=typeof i.text=="undefined"?void 0:""+i.text;var s=(0,Do.default)(n._options,i);s=(0,z3.default)(s);var o=r[e],a=jy(t,o,s);return n._encodings.push(a),n})}}function jy(r,e,t){r=""+r;var i=new e(r,t);if(!i.valid())throw new $y.InvalidInputException(i.constructor.name,r);var n=i.encode();n=(0,Ly.default)(n);for(var s=0;s<n.length;s++)n[s].options=(0,Do.default)(t,n[s].options);return n}function Iy(){return Qi.default.CODE128?"CODE128":Object.keys(Qi.default)[0]}Jr.prototype.options=function(r){return this._options=(0,Do.default)(this._options,r),this};Jr.prototype.blank=function(r){var e=new Array(r+1).join("0");return this._encodings.push({data:e}),this};Jr.prototype.init=function(){if(!!this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var r;for(var e in this._renderProperties){r=this._renderProperties[e];var t=(0,Do.default)(this._options,r.options);t.format=="auto"&&(t.format=Iy()),this._errorHandler.wrapBarcodeCall(function(){var i=t.value,n=Qi.default[t.format.toUpperCase()],s=jy(i,n,t);kd(r,s,t)})}}};Jr.prototype.render=function(){if(!this._renderProperties)throw new $y.NoElementException;if(Array.isArray(this._renderProperties))for(var r=0;r<this._renderProperties.length;r++)kd(this._renderProperties[r],this._encodings,this._options);else kd(this._renderProperties,this._encodings,this._options);return this};Jr.prototype._defaults=Ry.default;function kd(r,e,t){e=(0,Ly.default)(e);for(var i=0;i<e.length;i++)e[i].options=(0,Do.default)(t,e[i].options),(0,Dy.default)(e[i].options);(0,Dy.default)(t);var n=r.renderer,s=new n(r.element,e,t);s.render(),r.afterRender&&r.afterRender()}typeof window!="undefined"&&(window.JsBarcode=Bl);typeof jQuery!="undefined"&&(jQuery.fn.JsBarcode=function(r,e){var t=[];return jQuery(this).each(function(){t.push(this)}),Bl(t,r,e)});qy.exports=Bl});var Hy=Pe((Uy,Md)=>{(function(r){if(typeof Uy=="object"&&typeof Md!="undefined")Md.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var e;typeof window!="undefined"?e=window:typeof global!="undefined"?e=global:typeof self!="undefined"?e=self:e=this,e.localforage=r()}})(function(){var r,e,t;return function i(n,s,o){function a(m,b){if(!s[m]){if(!n[m]){var h=typeof Li=="function"&&Li;if(!b&&h)return h(m,!0);if(l)return l(m,!0);var p=new Error("Cannot find module '"+m+"'");throw p.code="MODULE_NOT_FOUND",p}var u=s[m]={exports:{}};n[m][0].call(u.exports,function(d){var _=n[m][1][d];return a(_||d)},u,u.exports,i,n,s,o)}return s[m].exports}for(var l=typeof Li=="function"&&Li,f=0;f<o.length;f++)a(o[f]);return a}({1:[function(i,n,s){(function(o){"use strict";var a=o.MutationObserver||o.WebKitMutationObserver,l;if(a){var f=0,m=new a(d),b=o.document.createTextNode("");m.observe(b,{characterData:!0}),l=function(){b.data=f=++f%2}}else if(!o.setImmediate&&typeof o.MessageChannel!="undefined"){var h=new o.MessageChannel;h.port1.onmessage=d,l=function(){h.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?l=function(){var y=o.document.createElement("script");y.onreadystatechange=function(){d(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},o.document.documentElement.appendChild(y)}:l=function(){setTimeout(d,0)};var p,u=[];function d(){p=!0;for(var y,g,v=u.length;v;){for(g=u,u=[],y=-1;++y<v;)g[y]();v=u.length}p=!1}n.exports=_;function _(y){u.push(y)===1&&!p&&l()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(i,n,s){"use strict";var o=i(1);function a(){}var l={},f=["REJECTED"],m=["FULFILLED"],b=["PENDING"];n.exports=h;function h(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,w!==a&&_(this,w)}h.prototype.catch=function(w){return this.then(null,w)},h.prototype.then=function(w,E){if(typeof w!="function"&&this.state===m||typeof E!="function"&&this.state===f)return this;var M=new this.constructor(a);if(this.state!==b){var j=this.state===m?w:E;u(M,j,this.outcome)}else this.queue.push(new p(M,w,E));return M};function p(w,E,M){this.promise=w,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof M=="function"&&(this.onRejected=M,this.callRejected=this.otherCallRejected)}p.prototype.callFulfilled=function(w){l.resolve(this.promise,w)},p.prototype.otherCallFulfilled=function(w){u(this.promise,this.onFulfilled,w)},p.prototype.callRejected=function(w){l.reject(this.promise,w)},p.prototype.otherCallRejected=function(w){u(this.promise,this.onRejected,w)};function u(w,E,M){o(function(){var j;try{j=E(M)}catch(D){return l.reject(w,D)}j===w?l.reject(w,new TypeError("Cannot resolve promise with itself")):l.resolve(w,j)})}l.resolve=function(w,E){var M=y(d,E);if(M.status==="error")return l.reject(w,M.value);var j=M.value;if(j)_(w,j);else{w.state=m,w.outcome=E;for(var D=-1,N=w.queue.length;++D<N;)w.queue[D].callFulfilled(E)}return w},l.reject=function(w,E){w.state=f,w.outcome=E;for(var M=-1,j=w.queue.length;++M<j;)w.queue[M].callRejected(E);return w};function d(w){var E=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof E=="function")return function(){E.apply(w,arguments)}}function _(w,E){var M=!1;function j(S){M||(M=!0,l.reject(w,S))}function D(S){M||(M=!0,l.resolve(w,S))}function N(){E(D,j)}var B=y(N);B.status==="error"&&j(B.value)}function y(w,E){var M={};try{M.value=w(E),M.status="success"}catch(j){M.status="error",M.value=j}return M}h.resolve=g;function g(w){return w instanceof this?w:l.resolve(new this(a),w)}h.reject=v;function v(w){var E=new this(a);return l.reject(E,w)}h.all=A;function A(w){var E=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=w.length,j=!1;if(!M)return this.resolve([]);for(var D=new Array(M),N=0,B=-1,S=new this(a);++B<M;)P(w[B],B);return S;function P(z,G){E.resolve(z).then(ee,function(F){j||(j=!0,l.reject(S,F))});function ee(F){D[G]=F,++N===M&&!j&&(j=!0,l.resolve(S,D))}}}h.race=k;function k(w){var E=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=w.length,j=!1;if(!M)return this.resolve([]);for(var D=-1,N=new this(a);++D<M;)B(w[D]);return N;function B(S){E.resolve(S).then(function(P){j||(j=!0,l.resolve(N,P))},function(P){j||(j=!0,l.reject(N,P))})}}},{1:1}],3:[function(i,n,s){(function(o){"use strict";typeof o.Promise!="function"&&(o.Promise=i(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{2:2}],4:[function(i,n,s){"use strict";var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function a(Y,oe){if(!(Y instanceof oe))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch(Y){return}}var f=l();function m(){try{if(!f||!f.open)return!1;var Y=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),oe=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||oe)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch(V){return!1}}function b(Y,oe){Y=Y||[],oe=oe||{};try{return new Blob(Y,oe)}catch(le){if(le.name!=="TypeError")throw le;for(var V=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,ue=new V,fe=0;fe<Y.length;fe+=1)ue.append(Y[fe]);return ue.getBlob(oe.type)}}typeof Promise=="undefined"&&i(3);var h=Promise;function p(Y,oe){oe&&Y.then(function(V){oe(null,V)},function(V){oe(V)})}function u(Y,oe,V){typeof oe=="function"&&Y.then(oe),typeof V=="function"&&Y.catch(V)}function d(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function _(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var y="local-forage-detect-blob-support",g=void 0,v={},A=Object.prototype.toString,k="readonly",w="readwrite";function E(Y){for(var oe=Y.length,V=new ArrayBuffer(oe),ue=new Uint8Array(V),fe=0;fe<oe;fe++)ue[fe]=Y.charCodeAt(fe);return V}function M(Y){return new h(function(oe){var V=Y.transaction(y,w),ue=b([""]);V.objectStore(y).put(ue,"key"),V.onabort=function(fe){fe.preventDefault(),fe.stopPropagation(),oe(!1)},V.oncomplete=function(){var fe=navigator.userAgent.match(/Chrome\/(\d+)/),le=navigator.userAgent.match(/Edge\//);oe(le||!fe||parseInt(fe[1],10)>=43)}}).catch(function(){return!1})}function j(Y){return typeof g=="boolean"?h.resolve(g):M(Y).then(function(oe){return g=oe,g})}function D(Y){var oe=v[Y.name],V={};V.promise=new h(function(ue,fe){V.resolve=ue,V.reject=fe}),oe.deferredOperations.push(V),oe.dbReady?oe.dbReady=oe.dbReady.then(function(){return V.promise}):oe.dbReady=V.promise}function N(Y){var oe=v[Y.name],V=oe.deferredOperations.pop();if(V)return V.resolve(),V.promise}function B(Y,oe){var V=v[Y.name],ue=V.deferredOperations.pop();if(ue)return ue.reject(oe),ue.promise}function S(Y,oe){return new h(function(V,ue){if(v[Y.name]=v[Y.name]||H(),Y.db)if(oe)D(Y),Y.db.close();else return V(Y.db);var fe=[Y.name];oe&&fe.push(Y.version);var le=f.open.apply(f,fe);oe&&(le.onupgradeneeded=function(ge){var be=le.result;try{be.createObjectStore(Y.storeName),ge.oldVersion<=1&&be.createObjectStore(y)}catch(we){if(we.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+ge.oldVersion+" to version "+ge.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw we}}),le.onerror=function(ge){ge.preventDefault(),ue(le.error)},le.onsuccess=function(){var ge=le.result;ge.onversionchange=function(be){be.target.close()},V(ge),N(Y)}})}function P(Y){return S(Y,!1)}function z(Y){return S(Y,!0)}function G(Y,oe){if(!Y.db)return!0;var V=!Y.db.objectStoreNames.contains(Y.storeName),ue=Y.version<Y.db.version,fe=Y.version>Y.db.version;if(ue&&(Y.version!==oe&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),fe||V){if(V){var le=Y.db.version+1;le>Y.version&&(Y.version=le)}return!0}return!1}function ee(Y){return new h(function(oe,V){var ue=new FileReader;ue.onerror=V,ue.onloadend=function(fe){var le=btoa(fe.target.result||"");oe({__local_forage_encoded_blob:!0,data:le,type:Y.type})},ue.readAsBinaryString(Y)})}function F(Y){var oe=E(atob(Y.data));return b([oe],{type:Y.type})}function J(Y){return Y&&Y.__local_forage_encoded_blob}function Z(Y){var oe=this,V=oe._initReady().then(function(){var ue=v[oe._dbInfo.name];if(ue&&ue.dbReady)return ue.dbReady});return u(V,Y,Y),V}function X(Y){D(Y);for(var oe=v[Y.name],V=oe.forages,ue=0;ue<V.length;ue++){var fe=V[ue];fe._dbInfo.db&&(fe._dbInfo.db.close(),fe._dbInfo.db=null)}return Y.db=null,P(Y).then(function(le){return Y.db=le,G(Y)?z(Y):le}).then(function(le){Y.db=oe.db=le;for(var ge=0;ge<V.length;ge++)V[ge]._dbInfo.db=le}).catch(function(le){throw B(Y,le),le})}function I(Y,oe,V,ue){ue===void 0&&(ue=1);try{var fe=Y.db.transaction(Y.storeName,oe);V(null,fe)}catch(le){if(ue>0&&(!Y.db||le.name==="InvalidStateError"||le.name==="NotFoundError"))return h.resolve().then(function(){if(!Y.db||le.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),z(Y)}).then(function(){return X(Y).then(function(){I(Y,oe,V,ue-1)})}).catch(V);V(le)}}function H(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function W(Y){var oe=this,V={db:null};if(Y)for(var ue in Y)V[ue]=Y[ue];var fe=v[V.name];fe||(fe=H(),v[V.name]=fe),fe.forages.push(oe),oe._initReady||(oe._initReady=oe.ready,oe.ready=Z);var le=[];function ge(){return h.resolve()}for(var be=0;be<fe.forages.length;be++){var we=fe.forages[be];we!==oe&&le.push(we._initReady().catch(ge))}var Ae=fe.forages.slice(0);return h.all(le).then(function(){return V.db=fe.db,P(V)}).then(function(Oe){return V.db=Oe,G(V,oe._defaultConfig.version)?z(V):Oe}).then(function(Oe){V.db=fe.db=Oe,oe._dbInfo=V;for(var Ce=0;Ce<Ae.length;Ce++){var Ue=Ae[Ce];Ue!==oe&&(Ue._dbInfo.db=V.db,Ue._dbInfo.version=V.version)}})}function te(Y,oe){var V=this;Y=d(Y);var ue=new h(function(fe,le){V.ready().then(function(){I(V._dbInfo,k,function(ge,be){if(ge)return le(ge);try{var we=be.objectStore(V._dbInfo.storeName),Ae=we.get(Y);Ae.onsuccess=function(){var Oe=Ae.result;Oe===void 0&&(Oe=null),J(Oe)&&(Oe=F(Oe)),fe(Oe)},Ae.onerror=function(){le(Ae.error)}}catch(Oe){le(Oe)}})}).catch(le)});return p(ue,oe),ue}function re(Y,oe){var V=this,ue=new h(function(fe,le){V.ready().then(function(){I(V._dbInfo,k,function(ge,be){if(ge)return le(ge);try{var we=be.objectStore(V._dbInfo.storeName),Ae=we.openCursor(),Oe=1;Ae.onsuccess=function(){var Ce=Ae.result;if(Ce){var Ue=Ce.value;J(Ue)&&(Ue=F(Ue));var We=Y(Ue,Ce.key,Oe++);We!==void 0?fe(We):Ce.continue()}else fe()},Ae.onerror=function(){le(Ae.error)}}catch(Ce){le(Ce)}})}).catch(le)});return p(ue,oe),ue}function se(Y,oe,V){var ue=this;Y=d(Y);var fe=new h(function(le,ge){var be;ue.ready().then(function(){return be=ue._dbInfo,A.call(oe)==="[object Blob]"?j(be.db).then(function(we){return we?oe:ee(oe)}):oe}).then(function(we){I(ue._dbInfo,w,function(Ae,Oe){if(Ae)return ge(Ae);try{var Ce=Oe.objectStore(ue._dbInfo.storeName);we===null&&(we=void 0);var Ue=Ce.put(we,Y);Oe.oncomplete=function(){we===void 0&&(we=null),le(we)},Oe.onabort=Oe.onerror=function(){var We=Ue.error?Ue.error:Ue.transaction.error;ge(We)}}catch(We){ge(We)}})}).catch(ge)});return p(fe,V),fe}function K(Y,oe){var V=this;Y=d(Y);var ue=new h(function(fe,le){V.ready().then(function(){I(V._dbInfo,w,function(ge,be){if(ge)return le(ge);try{var we=be.objectStore(V._dbInfo.storeName),Ae=we.delete(Y);be.oncomplete=function(){fe()},be.onerror=function(){le(Ae.error)},be.onabort=function(){var Oe=Ae.error?Ae.error:Ae.transaction.error;le(Oe)}}catch(Oe){le(Oe)}})}).catch(le)});return p(ue,oe),ue}function ie(Y){var oe=this,V=new h(function(ue,fe){oe.ready().then(function(){I(oe._dbInfo,w,function(le,ge){if(le)return fe(le);try{var be=ge.objectStore(oe._dbInfo.storeName),we=be.clear();ge.oncomplete=function(){ue()},ge.onabort=ge.onerror=function(){var Ae=we.error?we.error:we.transaction.error;fe(Ae)}}catch(Ae){fe(Ae)}})}).catch(fe)});return p(V,Y),V}function ce(Y){var oe=this,V=new h(function(ue,fe){oe.ready().then(function(){I(oe._dbInfo,k,function(le,ge){if(le)return fe(le);try{var be=ge.objectStore(oe._dbInfo.storeName),we=be.count();we.onsuccess=function(){ue(we.result)},we.onerror=function(){fe(we.error)}}catch(Ae){fe(Ae)}})}).catch(fe)});return p(V,Y),V}function ye(Y,oe){var V=this,ue=new h(function(fe,le){if(Y<0){fe(null);return}V.ready().then(function(){I(V._dbInfo,k,function(ge,be){if(ge)return le(ge);try{var we=be.objectStore(V._dbInfo.storeName),Ae=!1,Oe=we.openKeyCursor();Oe.onsuccess=function(){var Ce=Oe.result;if(!Ce){fe(null);return}Y===0||Ae?fe(Ce.key):(Ae=!0,Ce.advance(Y))},Oe.onerror=function(){le(Oe.error)}}catch(Ce){le(Ce)}})}).catch(le)});return p(ue,oe),ue}function _e(Y){var oe=this,V=new h(function(ue,fe){oe.ready().then(function(){I(oe._dbInfo,k,function(le,ge){if(le)return fe(le);try{var be=ge.objectStore(oe._dbInfo.storeName),we=be.openKeyCursor(),Ae=[];we.onsuccess=function(){var Oe=we.result;if(!Oe){ue(Ae);return}Ae.push(Oe.key),Oe.continue()},we.onerror=function(){fe(we.error)}}catch(Oe){fe(Oe)}})}).catch(fe)});return p(V,Y),V}function Ee(Y,oe){oe=_.apply(this,arguments);var V=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||V.name,Y.storeName=Y.storeName||V.storeName);var ue=this,fe;if(!Y.name)fe=h.reject("Invalid arguments");else{var le=Y.name===V.name&&ue._dbInfo.db,ge=le?h.resolve(ue._dbInfo.db):P(Y).then(function(be){var we=v[Y.name],Ae=we.forages;we.db=be;for(var Oe=0;Oe<Ae.length;Oe++)Ae[Oe]._dbInfo.db=be;return be});Y.storeName?fe=ge.then(function(be){if(!!be.objectStoreNames.contains(Y.storeName)){var we=be.version+1;D(Y);var Ae=v[Y.name],Oe=Ae.forages;be.close();for(var Ce=0;Ce<Oe.length;Ce++){var Ue=Oe[Ce];Ue._dbInfo.db=null,Ue._dbInfo.version=we}var We=new h(function(Ve,ht){var lt=f.open(Y.name,we);lt.onerror=function(qt){var Mi=lt.result;Mi.close(),ht(qt)},lt.onupgradeneeded=function(){var qt=lt.result;qt.deleteObjectStore(Y.storeName)},lt.onsuccess=function(){var qt=lt.result;qt.close(),Ve(qt)}});return We.then(function(Ve){Ae.db=Ve;for(var ht=0;ht<Oe.length;ht++){var lt=Oe[ht];lt._dbInfo.db=Ve,N(lt._dbInfo)}}).catch(function(Ve){throw(B(Y,Ve)||h.resolve()).catch(function(){}),Ve})}}):fe=ge.then(function(be){D(Y);var we=v[Y.name],Ae=we.forages;be.close();for(var Oe=0;Oe<Ae.length;Oe++){var Ce=Ae[Oe];Ce._dbInfo.db=null}var Ue=new h(function(We,Ve){var ht=f.deleteDatabase(Y.name);ht.onerror=function(){var lt=ht.result;lt&&lt.close(),Ve(ht.error)},ht.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},ht.onsuccess=function(){var lt=ht.result;lt&&lt.close(),We(lt)}});return Ue.then(function(We){we.db=We;for(var Ve=0;Ve<Ae.length;Ve++){var ht=Ae[Ve];N(ht._dbInfo)}}).catch(function(We){throw(B(Y,We)||h.resolve()).catch(function(){}),We})})}return p(fe,oe),fe}var Me={_driver:"asyncStorage",_initStorage:W,_support:m(),iterate:re,getItem:te,setItem:se,removeItem:K,clear:ie,length:ce,key:ye,keys:_e,dropInstance:Ee};function De(){return typeof openDatabase=="function"}var Le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fe="~~local_forage_type~",Je=/^~~local_forage_type~([^~]+)~/,qe="__lfsc__:",O=qe.length,C="arbf",q="blob",Q="si08",ne="ui08",de="uic8",xe="si16",ve="si32",Be="ur16",$e="ui32",je="fl32",et="fl64",Tr=O+C.length,Zr=Object.prototype.toString;function xt(Y){var oe=Y.length*.75,V=Y.length,ue,fe=0,le,ge,be,we;Y[Y.length-1]==="="&&(oe--,Y[Y.length-2]==="="&&oe--);var Ae=new ArrayBuffer(oe),Oe=new Uint8Array(Ae);for(ue=0;ue<V;ue+=4)le=Le.indexOf(Y[ue]),ge=Le.indexOf(Y[ue+1]),be=Le.indexOf(Y[ue+2]),we=Le.indexOf(Y[ue+3]),Oe[fe++]=le<<2|ge>>4,Oe[fe++]=(ge&15)<<4|be>>2,Oe[fe++]=(be&3)<<6|we&63;return Ae}function tn(Y){var oe=new Uint8Array(Y),V="",ue;for(ue=0;ue<oe.length;ue+=3)V+=Le[oe[ue]>>2],V+=Le[(oe[ue]&3)<<4|oe[ue+1]>>4],V+=Le[(oe[ue+1]&15)<<2|oe[ue+2]>>6],V+=Le[oe[ue+2]&63];return oe.length%3===2?V=V.substring(0,V.length-1)+"=":oe.length%3===1&&(V=V.substring(0,V.length-2)+"=="),V}function hs(Y,oe){var V="";if(Y&&(V=Zr.call(Y)),Y&&(V==="[object ArrayBuffer]"||Y.buffer&&Zr.call(Y.buffer)==="[object ArrayBuffer]")){var ue,fe=qe;Y instanceof ArrayBuffer?(ue=Y,fe+=C):(ue=Y.buffer,V==="[object Int8Array]"?fe+=Q:V==="[object Uint8Array]"?fe+=ne:V==="[object Uint8ClampedArray]"?fe+=de:V==="[object Int16Array]"?fe+=xe:V==="[object Uint16Array]"?fe+=Be:V==="[object Int32Array]"?fe+=ve:V==="[object Uint32Array]"?fe+=$e:V==="[object Float32Array]"?fe+=je:V==="[object Float64Array]"?fe+=et:oe(new Error("Failed to get type for BinaryArray"))),oe(fe+tn(ue))}else if(V==="[object Blob]"){var le=new FileReader;le.onload=function(){var ge=Fe+Y.type+"~"+tn(this.result);oe(qe+q+ge)},le.readAsArrayBuffer(Y)}else try{oe(JSON.stringify(Y))}catch(ge){console.error("Couldn't convert value into a JSON string: ",Y),oe(null,ge)}}function rn(Y){if(Y.substring(0,O)!==qe)return JSON.parse(Y);var oe=Y.substring(Tr),V=Y.substring(O,Tr),ue;if(V===q&&Je.test(oe)){var fe=oe.match(Je);ue=fe[1],oe=oe.substring(fe[0].length)}var le=xt(oe);switch(V){case C:return le;case q:return b([le],{type:ue});case Q:return new Int8Array(le);case ne:return new Uint8Array(le);case de:return new Uint8ClampedArray(le);case xe:return new Int16Array(le);case Be:return new Uint16Array(le);case ve:return new Int32Array(le);case $e:return new Uint32Array(le);case je:return new Float32Array(le);case et:return new Float64Array(le);default:throw new Error("Unkown type: "+V)}}var Ze={serialize:hs,deserialize:rn,stringToBuffer:xt,bufferToString:tn};function ps(Y,oe,V,ue){Y.executeSql("CREATE TABLE IF NOT EXISTS "+oe.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],V,ue)}function qo(Y){var oe=this,V={db:null};if(Y)for(var ue in Y)V[ue]=typeof Y[ue]!="string"?Y[ue].toString():Y[ue];var fe=new h(function(le,ge){try{V.db=openDatabase(V.name,String(V.version),V.description,V.size)}catch(be){return ge(be)}V.db.transaction(function(be){ps(be,V,function(){oe._dbInfo=V,le()},function(we,Ae){ge(Ae)})},ge)});return V.serializer=Ze,fe}function Kt(Y,oe,V,ue,fe,le){Y.executeSql(V,ue,fe,function(ge,be){be.code===be.SYNTAX_ERR?ge.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[oe.storeName],function(we,Ae){Ae.rows.length?le(we,be):ps(we,oe,function(){we.executeSql(V,ue,fe,le)},le)},le):le(ge,be)},le)}function ms(Y,oe){var V=this;Y=d(Y);var ue=new h(function(fe,le){V.ready().then(function(){var ge=V._dbInfo;ge.db.transaction(function(be){Kt(be,ge,"SELECT * FROM "+ge.storeName+" WHERE key = ? LIMIT 1",[Y],function(we,Ae){var Oe=Ae.rows.length?Ae.rows.item(0).value:null;Oe&&(Oe=ge.serializer.deserialize(Oe)),fe(Oe)},function(we,Ae){le(Ae)})})}).catch(le)});return p(ue,oe),ue}function nn(Y,oe){var V=this,ue=new h(function(fe,le){V.ready().then(function(){var ge=V._dbInfo;ge.db.transaction(function(be){Kt(be,ge,"SELECT * FROM "+ge.storeName,[],function(we,Ae){for(var Oe=Ae.rows,Ce=Oe.length,Ue=0;Ue<Ce;Ue++){var We=Oe.item(Ue),Ve=We.value;if(Ve&&(Ve=ge.serializer.deserialize(Ve)),Ve=Y(Ve,We.key,Ue+1),Ve!==void 0){fe(Ve);return}}fe()},function(we,Ae){le(Ae)})})}).catch(le)});return p(ue,oe),ue}function Cr(Y,oe,V,ue){var fe=this;Y=d(Y);var le=new h(function(ge,be){fe.ready().then(function(){oe===void 0&&(oe=null);var we=oe,Ae=fe._dbInfo;Ae.serializer.serialize(oe,function(Oe,Ce){Ce?be(Ce):Ae.db.transaction(function(Ue){Kt(Ue,Ae,"INSERT OR REPLACE INTO "+Ae.storeName+" (key, value) VALUES (?, ?)",[Y,Oe],function(){ge(we)},function(We,Ve){be(Ve)})},function(Ue){if(Ue.code===Ue.QUOTA_ERR){if(ue>0){ge(Cr.apply(fe,[Y,we,V,ue-1]));return}be(Ue)}})})}).catch(be)});return p(le,V),le}function sn(Y,oe,V){return Cr.apply(this,[Y,oe,V,1])}function Hl(Y,oe){var V=this;Y=d(Y);var ue=new h(function(fe,le){V.ready().then(function(){var ge=V._dbInfo;ge.db.transaction(function(be){Kt(be,ge,"DELETE FROM "+ge.storeName+" WHERE key = ?",[Y],function(){fe()},function(we,Ae){le(Ae)})})}).catch(le)});return p(ue,oe),ue}function on(Y){var oe=this,V=new h(function(ue,fe){oe.ready().then(function(){var le=oe._dbInfo;le.db.transaction(function(ge){Kt(ge,le,"DELETE FROM "+le.storeName,[],function(){ue()},function(be,we){fe(we)})})}).catch(fe)});return p(V,Y),V}function Yl(Y){var oe=this,V=new h(function(ue,fe){oe.ready().then(function(){var le=oe._dbInfo;le.db.transaction(function(ge){Kt(ge,le,"SELECT COUNT(key) as c FROM "+le.storeName,[],function(be,we){var Ae=we.rows.item(0).c;ue(Ae)},function(be,we){fe(we)})})}).catch(fe)});return p(V,Y),V}function Ci(Y,oe){var V=this,ue=new h(function(fe,le){V.ready().then(function(){var ge=V._dbInfo;ge.db.transaction(function(be){Kt(be,ge,"SELECT key FROM "+ge.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(we,Ae){var Oe=Ae.rows.length?Ae.rows.item(0).key:null;fe(Oe)},function(we,Ae){le(Ae)})})}).catch(le)});return p(ue,oe),ue}function an(Y){var oe=this,V=new h(function(ue,fe){oe.ready().then(function(){var le=oe._dbInfo;le.db.transaction(function(ge){Kt(ge,le,"SELECT key FROM "+le.storeName,[],function(be,we){for(var Ae=[],Oe=0;Oe<we.rows.length;Oe++)Ae.push(we.rows.item(Oe).key);ue(Ae)},function(be,we){fe(we)})})}).catch(fe)});return p(V,Y),V}function Ne(Y){return new h(function(oe,V){Y.transaction(function(ue){ue.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(fe,le){for(var ge=[],be=0;be<le.rows.length;be++)ge.push(le.rows.item(be).name);oe({db:Y,storeNames:ge})},function(fe,le){V(le)})},function(ue){V(ue)})})}function Wl(Y,oe){oe=_.apply(this,arguments);var V=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||V.name,Y.storeName=Y.storeName||V.storeName);var ue=this,fe;return Y.name?fe=new h(function(le){var ge;Y.name===V.name?ge=ue._dbInfo.db:ge=openDatabase(Y.name,"","",0),Y.storeName?le({db:ge,storeNames:[Y.storeName]}):le(Ne(ge))}).then(function(le){return new h(function(ge,be){le.db.transaction(function(we){function Ae(We){return new h(function(Ve,ht){we.executeSql("DROP TABLE IF EXISTS "+We,[],function(){Ve()},function(lt,qt){ht(qt)})})}for(var Oe=[],Ce=0,Ue=le.storeNames.length;Ce<Ue;Ce++)Oe.push(Ae(le.storeNames[Ce]));h.all(Oe).then(function(){ge()}).catch(function(We){be(We)})},function(we){be(we)})})}):fe=h.reject("Invalid arguments"),p(fe,oe),fe}var Gl={_driver:"webSQLStorage",_initStorage:qo,_support:De(),iterate:nn,getItem:ms,setItem:sn,removeItem:Hl,clear:on,length:Yl,key:Ci,keys:an,dropInstance:Wl};function Dt(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(Y){return!1}}function ln(Y,oe){var V=Y.name+"/";return Y.storeName!==oe.storeName&&(V+=Y.storeName+"/"),V}function Ke(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch(oe){return!0}}function Ni(){return!Ke()||localStorage.length>0}function Vl(Y){var oe=this,V={};if(Y)for(var ue in Y)V[ue]=Y[ue];return V.keyPrefix=ln(Y,oe._defaultConfig),Ni()?(oe._dbInfo=V,V.serializer=Ze,h.resolve()):h.reject()}function Et(Y){var oe=this,V=oe.ready().then(function(){for(var ue=oe._dbInfo.keyPrefix,fe=localStorage.length-1;fe>=0;fe--){var le=localStorage.key(fe);le.indexOf(ue)===0&&localStorage.removeItem(le)}});return p(V,Y),V}function pr(Y,oe){var V=this;Y=d(Y);var ue=V.ready().then(function(){var fe=V._dbInfo,le=localStorage.getItem(fe.keyPrefix+Y);return le&&(le=fe.serializer.deserialize(le)),le});return p(ue,oe),ue}function sr(Y,oe){var V=this,ue=V.ready().then(function(){for(var fe=V._dbInfo,le=fe.keyPrefix,ge=le.length,be=localStorage.length,we=1,Ae=0;Ae<be;Ae++){var Oe=localStorage.key(Ae);if(Oe.indexOf(le)===0){var Ce=localStorage.getItem(Oe);if(Ce&&(Ce=fe.serializer.deserialize(Ce)),Ce=Y(Ce,Oe.substring(ge),we++),Ce!==void 0)return Ce}}});return p(ue,oe),ue}function mt(Y,oe){var V=this,ue=V.ready().then(function(){var fe=V._dbInfo,le;try{le=localStorage.key(Y)}catch(ge){le=null}return le&&(le=le.substring(fe.keyPrefix.length)),le});return p(ue,oe),ue}function Jt(Y){var oe=this,V=oe.ready().then(function(){for(var ue=oe._dbInfo,fe=localStorage.length,le=[],ge=0;ge<fe;ge++){var be=localStorage.key(ge);be.indexOf(ue.keyPrefix)===0&&le.push(be.substring(ue.keyPrefix.length))}return le});return p(V,Y),V}function mr(Y){var oe=this,V=oe.keys().then(function(ue){return ue.length});return p(V,Y),V}function Nr(Y,oe){var V=this;Y=d(Y);var ue=V.ready().then(function(){var fe=V._dbInfo;localStorage.removeItem(fe.keyPrefix+Y)});return p(ue,oe),ue}function Kl(Y,oe,V){var ue=this;Y=d(Y);var fe=ue.ready().then(function(){oe===void 0&&(oe=null);var le=oe;return new h(function(ge,be){var we=ue._dbInfo;we.serializer.serialize(oe,function(Ae,Oe){if(Oe)be(Oe);else try{localStorage.setItem(we.keyPrefix+Y,Ae),ge(le)}catch(Ce){(Ce.name==="QuotaExceededError"||Ce.name==="NS_ERROR_DOM_QUOTA_REACHED")&&be(Ce),be(Ce)}})})});return p(fe,V),fe}function Jl(Y,oe){if(oe=_.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var V=this.config();Y.name=Y.name||V.name,Y.storeName=Y.storeName||V.storeName}var ue=this,fe;return Y.name?fe=new h(function(le){Y.storeName?le(ln(Y,ue._defaultConfig)):le(Y.name+"/")}).then(function(le){for(var ge=localStorage.length-1;ge>=0;ge--){var be=localStorage.key(ge);be.indexOf(le)===0&&localStorage.removeItem(be)}}):fe=h.reject("Invalid arguments"),p(fe,oe),fe}var Zl={_driver:"localStorageWrapper",_initStorage:Vl,_support:Dt(),iterate:sr,getItem:pr,setItem:Kl,removeItem:Nr,clear:Et,length:mr,key:mt,keys:Jt,dropInstance:Jl},at=function(oe,V){return oe===V||typeof oe=="number"&&typeof V=="number"&&isNaN(oe)&&isNaN(V)},un=function(oe,V){for(var ue=oe.length,fe=0;fe<ue;){if(at(oe[fe],V))return!0;fe++}return!1},Bo=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Xr={},_s={},Qr={INDEXEDDB:Me,WEBSQL:Gl,LOCALSTORAGE:Zl},Xl=[Qr.INDEXEDDB._driver,Qr.WEBSQL._driver,Qr.LOCALSTORAGE._driver],cn=["dropInstance"],gs=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(cn),Ql={description:"",driver:Xl.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function eu(Y,oe){Y[oe]=function(){var V=arguments;return Y.ready().then(function(){return Y[oe].apply(Y,V)})}}function fn(){for(var Y=1;Y<arguments.length;Y++){var oe=arguments[Y];if(oe)for(var V in oe)oe.hasOwnProperty(V)&&(Bo(oe[V])?arguments[0][V]=oe[V].slice():arguments[0][V]=oe[V])}return arguments[0]}var Fo=function(){function Y(oe){a(this,Y);for(var V in Qr)if(Qr.hasOwnProperty(V)){var ue=Qr[V],fe=ue._driver;this[V]=fe,Xr[fe]||this.defineDriver(ue)}this._defaultConfig=fn({},Ql),this._config=fn({},this._defaultConfig,oe),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(V){if((typeof V=="undefined"?"undefined":o(V))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ue in V){if(ue==="storeName"&&(V[ue]=V[ue].replace(/\W/g,"_")),ue==="version"&&typeof V[ue]!="number")return new Error("Database version must be a number.");this._config[ue]=V[ue]}return"driver"in V&&V.driver?this.setDriver(this._config.driver):!0}else return typeof V=="string"?this._config[V]:this._config},Y.prototype.defineDriver=function(V,ue,fe){var le=new h(function(ge,be){try{var we=V._driver,Ae=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!V._driver){be(Ae);return}for(var Oe=gs.concat("_initStorage"),Ce=0,Ue=Oe.length;Ce<Ue;Ce++){var We=Oe[Ce],Ve=!un(cn,We);if((Ve||V[We])&&typeof V[We]!="function"){be(Ae);return}}var ht=function(){for(var Mi=function(iu){return function(){var nu=new Error("Method "+iu+" is not implemented by the current driver"),zo=h.reject(nu);return p(zo,arguments[arguments.length-1]),zo}},ys=0,bs=cn.length;ys<bs;ys++){var vs=cn[ys];V[vs]||(V[vs]=Mi(vs))}};ht();var lt=function(Mi){Xr[we]&&console.info("Redefining LocalForage driver: "+we),Xr[we]=V,_s[we]=Mi,ge()};"_support"in V?V._support&&typeof V._support=="function"?V._support().then(lt,be):lt(!!V._support):lt(!0)}catch(qt){be(qt)}});return u(le,ue,fe),le},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(V,ue,fe){var le=Xr[V]?h.resolve(Xr[V]):h.reject(new Error("Driver not found."));return u(le,ue,fe),le},Y.prototype.getSerializer=function(V){var ue=h.resolve(Ze);return u(ue,V),ue},Y.prototype.ready=function(V){var ue=this,fe=ue._driverSet.then(function(){return ue._ready===null&&(ue._ready=ue._initDriver()),ue._ready});return u(fe,V,V),fe},Y.prototype.setDriver=function(V,ue,fe){var le=this;Bo(V)||(V=[V]);var ge=this._getSupportedDrivers(V);function be(){le._config.driver=le.driver()}function we(Ce){return le._extend(Ce),be(),le._ready=le._initStorage(le._config),le._ready}function Ae(Ce){return function(){var Ue=0;function We(){for(;Ue<Ce.length;){var Ve=Ce[Ue];return Ue++,le._dbInfo=null,le._ready=null,le.getDriver(Ve).then(we).catch(We)}be();var ht=new Error("No available storage method found.");return le._driverSet=h.reject(ht),le._driverSet}return We()}}var Oe=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=Oe.then(function(){var Ce=ge[0];return le._dbInfo=null,le._ready=null,le.getDriver(Ce).then(function(Ue){le._driver=Ue._driver,be(),le._wrapLibraryMethodsWithReady(),le._initDriver=Ae(ge)})}).catch(function(){be();var Ce=new Error("No available storage method found.");return le._driverSet=h.reject(Ce),le._driverSet}),u(this._driverSet,ue,fe),this._driverSet},Y.prototype.supports=function(V){return!!_s[V]},Y.prototype._extend=function(V){fn(this,V)},Y.prototype._getSupportedDrivers=function(V){for(var ue=[],fe=0,le=V.length;fe<le;fe++){var ge=V[fe];this.supports(ge)&&ue.push(ge)}return ue},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var V=0,ue=gs.length;V<ue;V++)eu(this,gs[V])},Y.prototype.createInstance=function(V){return new Y(V)},Y}(),tu=new Fo;n.exports=tu},{3:3}]},{},[4])(4)})});var Gy=Pe((Ld,ds)=>{(function(r,e){typeof Ld=="object"&&typeof ds!="undefined"?ds.exports=e():typeof define=="function"&&define.amd?define(e):r.moment=e()})(Ld,function(){"use strict";var r;function e(){return r.apply(null,arguments)}function t(c){r=c}function i(c){return c instanceof Array||Object.prototype.toString.call(c)==="[object Array]"}function n(c){return c!=null&&Object.prototype.toString.call(c)==="[object Object]"}function s(c,x){return Object.prototype.hasOwnProperty.call(c,x)}function o(c){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(c).length===0;var x;for(x in c)if(s(c,x))return!1;return!0}function a(c){return c===void 0}function l(c){return typeof c=="number"||Object.prototype.toString.call(c)==="[object Number]"}function f(c){return c instanceof Date||Object.prototype.toString.call(c)==="[object Date]"}function m(c,x){var T=[],R,U=c.length;for(R=0;R<U;++R)T.push(x(c[R],R));return T}function b(c,x){for(var T in x)s(x,T)&&(c[T]=x[T]);return s(x,"toString")&&(c.toString=x.toString),s(x,"valueOf")&&(c.valueOf=x.valueOf),c}function h(c,x,T,R){return Ud(c,x,T,R,!0).utc()}function p(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function u(c){return c._pf==null&&(c._pf=p()),c._pf}var d;Array.prototype.some?d=Array.prototype.some:d=function(c){var x=Object(this),T=x.length>>>0,R;for(R=0;R<T;R++)if(R in x&&c.call(this,x[R],R,x))return!0;return!1};function _(c){if(c._isValid==null){var x=u(c),T=d.call(x.parsedDateParts,function(U){return U!=null}),R=!isNaN(c._d.getTime())&&x.overflow<0&&!x.empty&&!x.invalidEra&&!x.invalidMonth&&!x.invalidWeekday&&!x.weekdayMismatch&&!x.nullInput&&!x.invalidFormat&&!x.userInvalidated&&(!x.meridiem||x.meridiem&&T);if(c._strict&&(R=R&&x.charsLeftOver===0&&x.unusedTokens.length===0&&x.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(c))c._isValid=R;else return R}return c._isValid}function y(c){var x=h(NaN);return c!=null?b(u(x),c):u(x).userInvalidated=!0,x}var g=e.momentProperties=[],v=!1;function A(c,x){var T,R,U,ae=g.length;if(a(x._isAMomentObject)||(c._isAMomentObject=x._isAMomentObject),a(x._i)||(c._i=x._i),a(x._f)||(c._f=x._f),a(x._l)||(c._l=x._l),a(x._strict)||(c._strict=x._strict),a(x._tzm)||(c._tzm=x._tzm),a(x._isUTC)||(c._isUTC=x._isUTC),a(x._offset)||(c._offset=x._offset),a(x._pf)||(c._pf=u(x)),a(x._locale)||(c._locale=x._locale),ae>0)for(T=0;T<ae;T++)R=g[T],U=x[R],a(U)||(c[R]=U);return c}function k(c){A(this,c),this._d=new Date(c._d!=null?c._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),v===!1&&(v=!0,e.updateOffset(this),v=!1)}function w(c){return c instanceof k||c!=null&&c._isAMomentObject!=null}function E(c){e.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+c)}function M(c,x){var T=!0;return b(function(){if(e.deprecationHandler!=null&&e.deprecationHandler(null,c),T){var R=[],U,ae,pe,Re=arguments.length;for(ae=0;ae<Re;ae++){if(U="",typeof arguments[ae]=="object"){U+=`
[`+ae+"] ";for(pe in arguments[0])s(arguments[0],pe)&&(U+=pe+": "+arguments[0][pe]+", ");U=U.slice(0,-2)}else U=arguments[ae];R.push(U)}E(c+`
Arguments: `+Array.prototype.slice.call(R).join("")+`
`+new Error().stack),T=!1}return x.apply(this,arguments)},x)}var j={};function D(c,x){e.deprecationHandler!=null&&e.deprecationHandler(c,x),j[c]||(E(x),j[c]=!0)}e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;function N(c){return typeof Function!="undefined"&&c instanceof Function||Object.prototype.toString.call(c)==="[object Function]"}function B(c){var x,T;for(T in c)s(c,T)&&(x=c[T],N(x)?this[T]=x:this["_"+T]=x);this._config=c,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function S(c,x){var T=b({},c),R;for(R in x)s(x,R)&&(n(c[R])&&n(x[R])?(T[R]={},b(T[R],c[R]),b(T[R],x[R])):x[R]!=null?T[R]=x[R]:delete T[R]);for(R in c)s(c,R)&&!s(x,R)&&n(c[R])&&(T[R]=b({},T[R]));return T}function P(c){c!=null&&this.set(c)}var z;Object.keys?z=Object.keys:z=function(c){var x,T=[];for(x in c)s(c,x)&&T.push(x);return T};var G={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function ee(c,x,T){var R=this._calendar[c]||this._calendar.sameElse;return N(R)?R.call(x,T):R}function F(c,x,T){var R=""+Math.abs(c),U=x-R.length,ae=c>=0;return(ae?T?"+":"":"-")+Math.pow(10,Math.max(0,U)).toString().substr(1)+R}var J=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Z=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,X={},I={};function H(c,x,T,R){var U=R;typeof R=="string"&&(U=function(){return this[R]()}),c&&(I[c]=U),x&&(I[x[0]]=function(){return F(U.apply(this,arguments),x[1],x[2])}),T&&(I[T]=function(){return this.localeData().ordinal(U.apply(this,arguments),c)})}function W(c){return c.match(/\[[\s\S]/)?c.replace(/^\[|\]$/g,""):c.replace(/\\/g,"")}function te(c){var x=c.match(J),T,R;for(T=0,R=x.length;T<R;T++)I[x[T]]?x[T]=I[x[T]]:x[T]=W(x[T]);return function(U){var ae="",pe;for(pe=0;pe<R;pe++)ae+=N(x[pe])?x[pe].call(U,c):x[pe];return ae}}function re(c,x){return c.isValid()?(x=se(x,c.localeData()),X[x]=X[x]||te(x),X[x](c)):c.localeData().invalidDate()}function se(c,x){var T=5;function R(U){return x.longDateFormat(U)||U}for(Z.lastIndex=0;T>=0&&Z.test(c);)c=c.replace(Z,R),Z.lastIndex=0,T-=1;return c}var K={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function ie(c){var x=this._longDateFormat[c],T=this._longDateFormat[c.toUpperCase()];return x||!T?x:(this._longDateFormat[c]=T.match(J).map(function(R){return R==="MMMM"||R==="MM"||R==="DD"||R==="dddd"?R.slice(1):R}).join(""),this._longDateFormat[c])}var ce="Invalid date";function ye(){return this._invalidDate}var _e="%d",Ee=/\d{1,2}/;function Me(c){return this._ordinal.replace("%d",c)}var De={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Le(c,x,T,R){var U=this._relativeTime[T];return N(U)?U(c,x,T,R):U.replace(/%d/i,c)}function Fe(c,x){var T=this._relativeTime[c>0?"future":"past"];return N(T)?T(x):T.replace(/%s/i,x)}var Je={};function qe(c,x){var T=c.toLowerCase();Je[T]=Je[T+"s"]=Je[x]=c}function O(c){return typeof c=="string"?Je[c]||Je[c.toLowerCase()]:void 0}function C(c){var x={},T,R;for(R in c)s(c,R)&&(T=O(R),T&&(x[T]=c[R]));return x}var q={};function Q(c,x){q[c]=x}function ne(c){var x=[],T;for(T in c)s(c,T)&&x.push({unit:T,priority:q[T]});return x.sort(function(R,U){return R.priority-U.priority}),x}function de(c){return c%4===0&&c%100!==0||c%400===0}function xe(c){return c<0?Math.ceil(c)||0:Math.floor(c)}function ve(c){var x=+c,T=0;return x!==0&&isFinite(x)&&(T=xe(x)),T}function Be(c,x){return function(T){return T!=null?(je(this,c,T),e.updateOffset(this,x),this):$e(this,c)}}function $e(c,x){return c.isValid()?c._d["get"+(c._isUTC?"UTC":"")+x]():NaN}function je(c,x,T){c.isValid()&&!isNaN(T)&&(x==="FullYear"&&de(c.year())&&c.month()===1&&c.date()===29?(T=ve(T),c._d["set"+(c._isUTC?"UTC":"")+x](T,c.month(),un(T,c.month()))):c._d["set"+(c._isUTC?"UTC":"")+x](T))}function et(c){return c=O(c),N(this[c])?this[c]():this}function Tr(c,x){if(typeof c=="object"){c=C(c);var T=ne(c),R,U=T.length;for(R=0;R<U;R++)this[T[R].unit](c[T[R].unit])}else if(c=O(c),N(this[c]))return this[c](x);return this}var Zr=/\d/,xt=/\d\d/,tn=/\d{3}/,hs=/\d{4}/,rn=/[+-]?\d{6}/,Ze=/\d\d?/,ps=/\d\d\d\d?/,qo=/\d\d\d\d\d\d?/,Kt=/\d{1,3}/,ms=/\d{1,4}/,nn=/[+-]?\d{1,6}/,Cr=/\d+/,sn=/[+-]?\d+/,Hl=/Z|[+-]\d\d:?\d\d/gi,on=/Z|[+-]\d\d(?::?\d\d)?/gi,Yl=/[+-]?\d+(\.\d{1,3})?/,Ci=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,an;an={};function Ne(c,x,T){an[c]=N(x)?x:function(R,U){return R&&T?T:x}}function Wl(c,x){return s(an,c)?an[c](x._strict,x._locale):new RegExp(Gl(c))}function Gl(c){return Dt(c.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(x,T,R,U,ae){return T||R||U||ae}))}function Dt(c){return c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ln={};function Ke(c,x){var T,R=x,U;for(typeof c=="string"&&(c=[c]),l(x)&&(R=function(ae,pe){pe[x]=ve(ae)}),U=c.length,T=0;T<U;T++)ln[c[T]]=R}function Ni(c,x){Ke(c,function(T,R,U,ae){U._w=U._w||{},x(T,U._w,U,ae)})}function Vl(c,x,T){x!=null&&s(ln,c)&&ln[c](x,T._a,T,c)}var Et=0,pr=1,sr=2,mt=3,Jt=4,mr=5,Nr=6,Kl=7,Jl=8;function Zl(c,x){return(c%x+x)%x}var at;Array.prototype.indexOf?at=Array.prototype.indexOf:at=function(c){var x;for(x=0;x<this.length;++x)if(this[x]===c)return x;return-1};function un(c,x){if(isNaN(c)||isNaN(x))return NaN;var T=Zl(x,12);return c+=(x-T)/12,T===1?de(c)?29:28:31-T%7%2}H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(c){return this.localeData().monthsShort(this,c)}),H("MMMM",0,0,function(c){return this.localeData().months(this,c)}),qe("month","M"),Q("month",8),Ne("M",Ze),Ne("MM",Ze,xt),Ne("MMM",function(c,x){return x.monthsShortRegex(c)}),Ne("MMMM",function(c,x){return x.monthsRegex(c)}),Ke(["M","MM"],function(c,x){x[pr]=ve(c)-1}),Ke(["MMM","MMMM"],function(c,x,T,R){var U=T._locale.monthsParse(c,R,T._strict);U!=null?x[pr]=U:u(T).invalidMonth=c});var Bo="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Xr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),_s=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Qr=Ci,Xl=Ci;function cn(c,x){return c?i(this._months)?this._months[c.month()]:this._months[(this._months.isFormat||_s).test(x)?"format":"standalone"][c.month()]:i(this._months)?this._months:this._months.standalone}function gs(c,x){return c?i(this._monthsShort)?this._monthsShort[c.month()]:this._monthsShort[_s.test(x)?"format":"standalone"][c.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Ql(c,x,T){var R,U,ae,pe=c.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],R=0;R<12;++R)ae=h([2e3,R]),this._shortMonthsParse[R]=this.monthsShort(ae,"").toLocaleLowerCase(),this._longMonthsParse[R]=this.months(ae,"").toLocaleLowerCase();return T?x==="MMM"?(U=at.call(this._shortMonthsParse,pe),U!==-1?U:null):(U=at.call(this._longMonthsParse,pe),U!==-1?U:null):x==="MMM"?(U=at.call(this._shortMonthsParse,pe),U!==-1?U:(U=at.call(this._longMonthsParse,pe),U!==-1?U:null)):(U=at.call(this._longMonthsParse,pe),U!==-1?U:(U=at.call(this._shortMonthsParse,pe),U!==-1?U:null))}function eu(c,x,T){var R,U,ae;if(this._monthsParseExact)return Ql.call(this,c,x,T);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),R=0;R<12;R++){if(U=h([2e3,R]),T&&!this._longMonthsParse[R]&&(this._longMonthsParse[R]=new RegExp("^"+this.months(U,"").replace(".","")+"$","i"),this._shortMonthsParse[R]=new RegExp("^"+this.monthsShort(U,"").replace(".","")+"$","i")),!T&&!this._monthsParse[R]&&(ae="^"+this.months(U,"")+"|^"+this.monthsShort(U,""),this._monthsParse[R]=new RegExp(ae.replace(".",""),"i")),T&&x==="MMMM"&&this._longMonthsParse[R].test(c))return R;if(T&&x==="MMM"&&this._shortMonthsParse[R].test(c))return R;if(!T&&this._monthsParse[R].test(c))return R}}function fn(c,x){var T;if(!c.isValid())return c;if(typeof x=="string"){if(/^\d+$/.test(x))x=ve(x);else if(x=c.localeData().monthsParse(x),!l(x))return c}return T=Math.min(c.date(),un(c.year(),x)),c._d["set"+(c._isUTC?"UTC":"")+"Month"](x,T),c}function Fo(c){return c!=null?(fn(this,c),e.updateOffset(this,!0),this):$e(this,"Month")}function tu(){return un(this.year(),this.month())}function Y(c){return this._monthsParseExact?(s(this,"_monthsRegex")||V.call(this),c?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=Qr),this._monthsShortStrictRegex&&c?this._monthsShortStrictRegex:this._monthsShortRegex)}function oe(c){return this._monthsParseExact?(s(this,"_monthsRegex")||V.call(this),c?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=Xl),this._monthsStrictRegex&&c?this._monthsStrictRegex:this._monthsRegex)}function V(){function c(pe,Re){return Re.length-pe.length}var x=[],T=[],R=[],U,ae;for(U=0;U<12;U++)ae=h([2e3,U]),x.push(this.monthsShort(ae,"")),T.push(this.months(ae,"")),R.push(this.months(ae,"")),R.push(this.monthsShort(ae,""));for(x.sort(c),T.sort(c),R.sort(c),U=0;U<12;U++)x[U]=Dt(x[U]),T[U]=Dt(T[U]);for(U=0;U<24;U++)R[U]=Dt(R[U]);this._monthsRegex=new RegExp("^("+R.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+T.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+x.join("|")+")","i")}H("Y",0,0,function(){var c=this.year();return c<=9999?F(c,4):"+"+c}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),qe("year","y"),Q("year",1),Ne("Y",sn),Ne("YY",Ze,xt),Ne("YYYY",ms,hs),Ne("YYYYY",nn,rn),Ne("YYYYYY",nn,rn),Ke(["YYYYY","YYYYYY"],Et),Ke("YYYY",function(c,x){x[Et]=c.length===2?e.parseTwoDigitYear(c):ve(c)}),Ke("YY",function(c,x){x[Et]=e.parseTwoDigitYear(c)}),Ke("Y",function(c,x){x[Et]=parseInt(c,10)});function ue(c){return de(c)?366:365}e.parseTwoDigitYear=function(c){return ve(c)+(ve(c)>68?1900:2e3)};var fe=Be("FullYear",!0);function le(){return de(this.year())}function ge(c,x,T,R,U,ae,pe){var Re;return c<100&&c>=0?(Re=new Date(c+400,x,T,R,U,ae,pe),isFinite(Re.getFullYear())&&Re.setFullYear(c)):Re=new Date(c,x,T,R,U,ae,pe),Re}function be(c){var x,T;return c<100&&c>=0?(T=Array.prototype.slice.call(arguments),T[0]=c+400,x=new Date(Date.UTC.apply(null,T)),isFinite(x.getUTCFullYear())&&x.setUTCFullYear(c)):x=new Date(Date.UTC.apply(null,arguments)),x}function we(c,x,T){var R=7+x-T,U=(7+be(c,0,R).getUTCDay()-x)%7;return-U+R-1}function Ae(c,x,T,R,U){var ae=(7+T-R)%7,pe=we(c,R,U),Re=1+7*(x-1)+ae+pe,He,Xe;return Re<=0?(He=c-1,Xe=ue(He)+Re):Re>ue(c)?(He=c+1,Xe=Re-ue(c)):(He=c,Xe=Re),{year:He,dayOfYear:Xe}}function Oe(c,x,T){var R=we(c.year(),x,T),U=Math.floor((c.dayOfYear()-R-1)/7)+1,ae,pe;return U<1?(pe=c.year()-1,ae=U+Ce(pe,x,T)):U>Ce(c.year(),x,T)?(ae=U-Ce(c.year(),x,T),pe=c.year()+1):(pe=c.year(),ae=U),{week:ae,year:pe}}function Ce(c,x,T){var R=we(c,x,T),U=we(c+1,x,T);return(ue(c)-R+U)/7}H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),qe("week","w"),qe("isoWeek","W"),Q("week",5),Q("isoWeek",5),Ne("w",Ze),Ne("ww",Ze,xt),Ne("W",Ze),Ne("WW",Ze,xt),Ni(["w","ww","W","WW"],function(c,x,T,R){x[R.substr(0,1)]=ve(c)});function Ue(c){return Oe(c,this._week.dow,this._week.doy).week}var We={dow:0,doy:6};function Ve(){return this._week.dow}function ht(){return this._week.doy}function lt(c){var x=this.localeData().week(this);return c==null?x:this.add((c-x)*7,"d")}function qt(c){var x=Oe(this,1,4).week;return c==null?x:this.add((c-x)*7,"d")}H("d",0,"do","day"),H("dd",0,0,function(c){return this.localeData().weekdaysMin(this,c)}),H("ddd",0,0,function(c){return this.localeData().weekdaysShort(this,c)}),H("dddd",0,0,function(c){return this.localeData().weekdays(this,c)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),qe("day","d"),qe("weekday","e"),qe("isoWeekday","E"),Q("day",11),Q("weekday",11),Q("isoWeekday",11),Ne("d",Ze),Ne("e",Ze),Ne("E",Ze),Ne("dd",function(c,x){return x.weekdaysMinRegex(c)}),Ne("ddd",function(c,x){return x.weekdaysShortRegex(c)}),Ne("dddd",function(c,x){return x.weekdaysRegex(c)}),Ni(["dd","ddd","dddd"],function(c,x,T,R){var U=T._locale.weekdaysParse(c,R,T._strict);U!=null?x.d=U:u(T).invalidWeekday=c}),Ni(["d","e","E"],function(c,x,T,R){x[R]=ve(c)});function Mi(c,x){return typeof c!="string"?c:isNaN(c)?(c=x.weekdaysParse(c),typeof c=="number"?c:null):parseInt(c,10)}function ys(c,x){return typeof c=="string"?x.weekdaysParse(c)%7||7:isNaN(c)?null:c}function bs(c,x){return c.slice(x,7).concat(c.slice(0,x))}var vs="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ru="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),iu="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),nu=Ci,zo=Ci,r1=Ci;function i1(c,x){var T=i(this._weekdays)?this._weekdays:this._weekdays[c&&c!==!0&&this._weekdays.isFormat.test(x)?"format":"standalone"];return c===!0?bs(T,this._week.dow):c?T[c.day()]:T}function n1(c){return c===!0?bs(this._weekdaysShort,this._week.dow):c?this._weekdaysShort[c.day()]:this._weekdaysShort}function s1(c){return c===!0?bs(this._weekdaysMin,this._week.dow):c?this._weekdaysMin[c.day()]:this._weekdaysMin}function o1(c,x,T){var R,U,ae,pe=c.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],R=0;R<7;++R)ae=h([2e3,1]).day(R),this._minWeekdaysParse[R]=this.weekdaysMin(ae,"").toLocaleLowerCase(),this._shortWeekdaysParse[R]=this.weekdaysShort(ae,"").toLocaleLowerCase(),this._weekdaysParse[R]=this.weekdays(ae,"").toLocaleLowerCase();return T?x==="dddd"?(U=at.call(this._weekdaysParse,pe),U!==-1?U:null):x==="ddd"?(U=at.call(this._shortWeekdaysParse,pe),U!==-1?U:null):(U=at.call(this._minWeekdaysParse,pe),U!==-1?U:null):x==="dddd"?(U=at.call(this._weekdaysParse,pe),U!==-1||(U=at.call(this._shortWeekdaysParse,pe),U!==-1)?U:(U=at.call(this._minWeekdaysParse,pe),U!==-1?U:null)):x==="ddd"?(U=at.call(this._shortWeekdaysParse,pe),U!==-1||(U=at.call(this._weekdaysParse,pe),U!==-1)?U:(U=at.call(this._minWeekdaysParse,pe),U!==-1?U:null)):(U=at.call(this._minWeekdaysParse,pe),U!==-1||(U=at.call(this._weekdaysParse,pe),U!==-1)?U:(U=at.call(this._shortWeekdaysParse,pe),U!==-1?U:null))}function a1(c,x,T){var R,U,ae;if(this._weekdaysParseExact)return o1.call(this,c,x,T);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),R=0;R<7;R++){if(U=h([2e3,1]).day(R),T&&!this._fullWeekdaysParse[R]&&(this._fullWeekdaysParse[R]=new RegExp("^"+this.weekdays(U,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[R]=new RegExp("^"+this.weekdaysShort(U,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[R]=new RegExp("^"+this.weekdaysMin(U,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[R]||(ae="^"+this.weekdays(U,"")+"|^"+this.weekdaysShort(U,"")+"|^"+this.weekdaysMin(U,""),this._weekdaysParse[R]=new RegExp(ae.replace(".",""),"i")),T&&x==="dddd"&&this._fullWeekdaysParse[R].test(c))return R;if(T&&x==="ddd"&&this._shortWeekdaysParse[R].test(c))return R;if(T&&x==="dd"&&this._minWeekdaysParse[R].test(c))return R;if(!T&&this._weekdaysParse[R].test(c))return R}}function l1(c){if(!this.isValid())return c!=null?this:NaN;var x=this._isUTC?this._d.getUTCDay():this._d.getDay();return c!=null?(c=Mi(c,this.localeData()),this.add(c-x,"d")):x}function u1(c){if(!this.isValid())return c!=null?this:NaN;var x=(this.day()+7-this.localeData()._week.dow)%7;return c==null?x:this.add(c-x,"d")}function c1(c){if(!this.isValid())return c!=null?this:NaN;if(c!=null){var x=ys(c,this.localeData());return this.day(this.day()%7?x:x-7)}else return this.day()||7}function f1(c){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||su.call(this),c?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=nu),this._weekdaysStrictRegex&&c?this._weekdaysStrictRegex:this._weekdaysRegex)}function d1(c){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||su.call(this),c?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=zo),this._weekdaysShortStrictRegex&&c?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function h1(c){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||su.call(this),c?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=r1),this._weekdaysMinStrictRegex&&c?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function su(){function c(Lt,$r){return $r.length-Lt.length}var x=[],T=[],R=[],U=[],ae,pe,Re,He,Xe;for(ae=0;ae<7;ae++)pe=h([2e3,1]).day(ae),Re=Dt(this.weekdaysMin(pe,"")),He=Dt(this.weekdaysShort(pe,"")),Xe=Dt(this.weekdays(pe,"")),x.push(Re),T.push(He),R.push(Xe),U.push(Re),U.push(He),U.push(Xe);x.sort(c),T.sort(c),R.sort(c),U.sort(c),this._weekdaysRegex=new RegExp("^("+U.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+R.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+T.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+x.join("|")+")","i")}function ou(){return this.hours()%12||12}function p1(){return this.hours()||24}H("H",["HH",2],0,"hour"),H("h",["hh",2],0,ou),H("k",["kk",2],0,p1),H("hmm",0,0,function(){return""+ou.apply(this)+F(this.minutes(),2)}),H("hmmss",0,0,function(){return""+ou.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)}),H("Hmm",0,0,function(){return""+this.hours()+F(this.minutes(),2)}),H("Hmmss",0,0,function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)});function Rd(c,x){H(c,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),x)})}Rd("a",!0),Rd("A",!1),qe("hour","h"),Q("hour",13);function jd(c,x){return x._meridiemParse}Ne("a",jd),Ne("A",jd),Ne("H",Ze),Ne("h",Ze),Ne("k",Ze),Ne("HH",Ze,xt),Ne("hh",Ze,xt),Ne("kk",Ze,xt),Ne("hmm",ps),Ne("hmmss",qo),Ne("Hmm",ps),Ne("Hmmss",qo),Ke(["H","HH"],mt),Ke(["k","kk"],function(c,x,T){var R=ve(c);x[mt]=R===24?0:R}),Ke(["a","A"],function(c,x,T){T._isPm=T._locale.isPM(c),T._meridiem=c}),Ke(["h","hh"],function(c,x,T){x[mt]=ve(c),u(T).bigHour=!0}),Ke("hmm",function(c,x,T){var R=c.length-2;x[mt]=ve(c.substr(0,R)),x[Jt]=ve(c.substr(R)),u(T).bigHour=!0}),Ke("hmmss",function(c,x,T){var R=c.length-4,U=c.length-2;x[mt]=ve(c.substr(0,R)),x[Jt]=ve(c.substr(R,2)),x[mr]=ve(c.substr(U)),u(T).bigHour=!0}),Ke("Hmm",function(c,x,T){var R=c.length-2;x[mt]=ve(c.substr(0,R)),x[Jt]=ve(c.substr(R))}),Ke("Hmmss",function(c,x,T){var R=c.length-4,U=c.length-2;x[mt]=ve(c.substr(0,R)),x[Jt]=ve(c.substr(R,2)),x[mr]=ve(c.substr(U))});function m1(c){return(c+"").toLowerCase().charAt(0)==="p"}var _1=/[ap]\.?m?\.?/i,g1=Be("Hours",!0);function y1(c,x,T){return c>11?T?"pm":"PM":T?"am":"AM"}var Id={calendar:G,longDateFormat:K,invalidDate:ce,ordinal:_e,dayOfMonthOrdinalParse:Ee,relativeTime:De,months:Bo,monthsShort:Xr,week:We,weekdays:vs,weekdaysMin:iu,weekdaysShort:ru,meridiemParse:_1},ot={},ws={},xs;function b1(c,x){var T,R=Math.min(c.length,x.length);for(T=0;T<R;T+=1)if(c[T]!==x[T])return T;return R}function qd(c){return c&&c.toLowerCase().replace("_","-")}function v1(c){for(var x=0,T,R,U,ae;x<c.length;){for(ae=qd(c[x]).split("-"),T=ae.length,R=qd(c[x+1]),R=R?R.split("-"):null;T>0;){if(U=Uo(ae.slice(0,T).join("-")),U)return U;if(R&&R.length>=T&&b1(ae,R)>=T-1)break;T--}x++}return xs}function w1(c){return c.match("^[^/\\\\]*$")!=null}function Uo(c){var x=null,T;if(ot[c]===void 0&&typeof ds!="undefined"&&ds&&ds.exports&&w1(c))try{x=xs._abbr,T=Li,T("./locale/"+c),ei(x)}catch(R){ot[c]=null}return ot[c]}function ei(c,x){var T;return c&&(a(x)?T=Mr(c):T=au(c,x),T?xs=T:typeof console!="undefined"&&console.warn&&console.warn("Locale "+c+" not found. Did you forget to load it?")),xs._abbr}function au(c,x){if(x!==null){var T,R=Id;if(x.abbr=c,ot[c]!=null)D("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),R=ot[c]._config;else if(x.parentLocale!=null)if(ot[x.parentLocale]!=null)R=ot[x.parentLocale]._config;else if(T=Uo(x.parentLocale),T!=null)R=T._config;else return ws[x.parentLocale]||(ws[x.parentLocale]=[]),ws[x.parentLocale].push({name:c,config:x}),null;return ot[c]=new P(S(R,x)),ws[c]&&ws[c].forEach(function(U){au(U.name,U.config)}),ei(c),ot[c]}else return delete ot[c],null}function x1(c,x){if(x!=null){var T,R,U=Id;ot[c]!=null&&ot[c].parentLocale!=null?ot[c].set(S(ot[c]._config,x)):(R=Uo(c),R!=null&&(U=R._config),x=S(U,x),R==null&&(x.abbr=c),T=new P(x),T.parentLocale=ot[c],ot[c]=T),ei(c)}else ot[c]!=null&&(ot[c].parentLocale!=null?(ot[c]=ot[c].parentLocale,c===ei()&&ei(c)):ot[c]!=null&&delete ot[c]);return ot[c]}function Mr(c){var x;if(c&&c._locale&&c._locale._abbr&&(c=c._locale._abbr),!c)return xs;if(!i(c)){if(x=Uo(c),x)return x;c=[c]}return v1(c)}function A1(){return z(ot)}function lu(c){var x,T=c._a;return T&&u(c).overflow===-2&&(x=T[pr]<0||T[pr]>11?pr:T[sr]<1||T[sr]>un(T[Et],T[pr])?sr:T[mt]<0||T[mt]>24||T[mt]===24&&(T[Jt]!==0||T[mr]!==0||T[Nr]!==0)?mt:T[Jt]<0||T[Jt]>59?Jt:T[mr]<0||T[mr]>59?mr:T[Nr]<0||T[Nr]>999?Nr:-1,u(c)._overflowDayOfYear&&(x<Et||x>sr)&&(x=sr),u(c)._overflowWeeks&&x===-1&&(x=Kl),u(c)._overflowWeekday&&x===-1&&(x=Jl),u(c).overflow=x),c}var k1=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,E1=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,O1=/Z|[+-]\d\d(?::?\d\d)?/,Ho=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],uu=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],S1=/^\/?Date\((-?\d+)/i,T1=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,C1={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Bd(c){var x,T,R=c._i,U=k1.exec(R)||E1.exec(R),ae,pe,Re,He,Xe=Ho.length,Lt=uu.length;if(U){for(u(c).iso=!0,x=0,T=Xe;x<T;x++)if(Ho[x][1].exec(U[1])){pe=Ho[x][0],ae=Ho[x][2]!==!1;break}if(pe==null){c._isValid=!1;return}if(U[3]){for(x=0,T=Lt;x<T;x++)if(uu[x][1].exec(U[3])){Re=(U[2]||" ")+uu[x][0];break}if(Re==null){c._isValid=!1;return}}if(!ae&&Re!=null){c._isValid=!1;return}if(U[4])if(O1.exec(U[4]))He="Z";else{c._isValid=!1;return}c._f=pe+(Re||"")+(He||""),fu(c)}else c._isValid=!1}function N1(c,x,T,R,U,ae){var pe=[M1(c),Xr.indexOf(x),parseInt(T,10),parseInt(R,10),parseInt(U,10)];return ae&&pe.push(parseInt(ae,10)),pe}function M1(c){var x=parseInt(c,10);return x<=49?2e3+x:x<=999?1900+x:x}function P1(c){return c.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function D1(c,x,T){if(c){var R=ru.indexOf(c),U=new Date(x[0],x[1],x[2]).getDay();if(R!==U)return u(T).weekdayMismatch=!0,T._isValid=!1,!1}return!0}function L1(c,x,T){if(c)return C1[c];if(x)return 0;var R=parseInt(T,10),U=R%100,ae=(R-U)/100;return ae*60+U}function Fd(c){var x=T1.exec(P1(c._i)),T;if(x){if(T=N1(x[4],x[3],x[2],x[5],x[6],x[7]),!D1(x[1],T,c))return;c._a=T,c._tzm=L1(x[8],x[9],x[10]),c._d=be.apply(null,c._a),c._d.setUTCMinutes(c._d.getUTCMinutes()-c._tzm),u(c).rfc2822=!0}else c._isValid=!1}function $1(c){var x=S1.exec(c._i);if(x!==null){c._d=new Date(+x[1]);return}if(Bd(c),c._isValid===!1)delete c._isValid;else return;if(Fd(c),c._isValid===!1)delete c._isValid;else return;c._strict?c._isValid=!1:e.createFromInputFallback(c)}e.createFromInputFallback=M("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(c){c._d=new Date(c._i+(c._useUTC?" UTC":""))});function dn(c,x,T){return c!=null?c:x!=null?x:T}function R1(c){var x=new Date(e.now());return c._useUTC?[x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate()]:[x.getFullYear(),x.getMonth(),x.getDate()]}function cu(c){var x,T,R=[],U,ae,pe;if(!c._d){for(U=R1(c),c._w&&c._a[sr]==null&&c._a[pr]==null&&j1(c),c._dayOfYear!=null&&(pe=dn(c._a[Et],U[Et]),(c._dayOfYear>ue(pe)||c._dayOfYear===0)&&(u(c)._overflowDayOfYear=!0),T=be(pe,0,c._dayOfYear),c._a[pr]=T.getUTCMonth(),c._a[sr]=T.getUTCDate()),x=0;x<3&&c._a[x]==null;++x)c._a[x]=R[x]=U[x];for(;x<7;x++)c._a[x]=R[x]=c._a[x]==null?x===2?1:0:c._a[x];c._a[mt]===24&&c._a[Jt]===0&&c._a[mr]===0&&c._a[Nr]===0&&(c._nextDay=!0,c._a[mt]=0),c._d=(c._useUTC?be:ge).apply(null,R),ae=c._useUTC?c._d.getUTCDay():c._d.getDay(),c._tzm!=null&&c._d.setUTCMinutes(c._d.getUTCMinutes()-c._tzm),c._nextDay&&(c._a[mt]=24),c._w&&typeof c._w.d!="undefined"&&c._w.d!==ae&&(u(c).weekdayMismatch=!0)}}function j1(c){var x,T,R,U,ae,pe,Re,He,Xe;x=c._w,x.GG!=null||x.W!=null||x.E!=null?(ae=1,pe=4,T=dn(x.GG,c._a[Et],Oe(it(),1,4).year),R=dn(x.W,1),U=dn(x.E,1),(U<1||U>7)&&(He=!0)):(ae=c._locale._week.dow,pe=c._locale._week.doy,Xe=Oe(it(),ae,pe),T=dn(x.gg,c._a[Et],Xe.year),R=dn(x.w,Xe.week),x.d!=null?(U=x.d,(U<0||U>6)&&(He=!0)):x.e!=null?(U=x.e+ae,(x.e<0||x.e>6)&&(He=!0)):U=ae),R<1||R>Ce(T,ae,pe)?u(c)._overflowWeeks=!0:He!=null?u(c)._overflowWeekday=!0:(Re=Ae(T,R,U,ae,pe),c._a[Et]=Re.year,c._dayOfYear=Re.dayOfYear)}e.ISO_8601=function(){},e.RFC_2822=function(){};function fu(c){if(c._f===e.ISO_8601){Bd(c);return}if(c._f===e.RFC_2822){Fd(c);return}c._a=[],u(c).empty=!0;var x=""+c._i,T,R,U,ae,pe,Re=x.length,He=0,Xe,Lt;for(U=se(c._f,c._locale).match(J)||[],Lt=U.length,T=0;T<Lt;T++)ae=U[T],R=(x.match(Wl(ae,c))||[])[0],R&&(pe=x.substr(0,x.indexOf(R)),pe.length>0&&u(c).unusedInput.push(pe),x=x.slice(x.indexOf(R)+R.length),He+=R.length),I[ae]?(R?u(c).empty=!1:u(c).unusedTokens.push(ae),Vl(ae,R,c)):c._strict&&!R&&u(c).unusedTokens.push(ae);u(c).charsLeftOver=Re-He,x.length>0&&u(c).unusedInput.push(x),c._a[mt]<=12&&u(c).bigHour===!0&&c._a[mt]>0&&(u(c).bigHour=void 0),u(c).parsedDateParts=c._a.slice(0),u(c).meridiem=c._meridiem,c._a[mt]=I1(c._locale,c._a[mt],c._meridiem),Xe=u(c).era,Xe!==null&&(c._a[Et]=c._locale.erasConvertYear(Xe,c._a[Et])),cu(c),lu(c)}function I1(c,x,T){var R;return T==null?x:c.meridiemHour!=null?c.meridiemHour(x,T):(c.isPM!=null&&(R=c.isPM(T),R&&x<12&&(x+=12),!R&&x===12&&(x=0)),x)}function q1(c){var x,T,R,U,ae,pe,Re=!1,He=c._f.length;if(He===0){u(c).invalidFormat=!0,c._d=new Date(NaN);return}for(U=0;U<He;U++)ae=0,pe=!1,x=A({},c),c._useUTC!=null&&(x._useUTC=c._useUTC),x._f=c._f[U],fu(x),_(x)&&(pe=!0),ae+=u(x).charsLeftOver,ae+=u(x).unusedTokens.length*10,u(x).score=ae,Re?ae<R&&(R=ae,T=x):(R==null||ae<R||pe)&&(R=ae,T=x,pe&&(Re=!0));b(c,T||x)}function B1(c){if(!c._d){var x=C(c._i),T=x.day===void 0?x.date:x.day;c._a=m([x.year,x.month,T,x.hour,x.minute,x.second,x.millisecond],function(R){return R&&parseInt(R,10)}),cu(c)}}function F1(c){var x=new k(lu(zd(c)));return x._nextDay&&(x.add(1,"d"),x._nextDay=void 0),x}function zd(c){var x=c._i,T=c._f;return c._locale=c._locale||Mr(c._l),x===null||T===void 0&&x===""?y({nullInput:!0}):(typeof x=="string"&&(c._i=x=c._locale.preparse(x)),w(x)?new k(lu(x)):(f(x)?c._d=x:i(T)?q1(c):T?fu(c):z1(c),_(c)||(c._d=null),c))}function z1(c){var x=c._i;a(x)?c._d=new Date(e.now()):f(x)?c._d=new Date(x.valueOf()):typeof x=="string"?$1(c):i(x)?(c._a=m(x.slice(0),function(T){return parseInt(T,10)}),cu(c)):n(x)?B1(c):l(x)?c._d=new Date(x):e.createFromInputFallback(c)}function Ud(c,x,T,R,U){var ae={};return(x===!0||x===!1)&&(R=x,x=void 0),(T===!0||T===!1)&&(R=T,T=void 0),(n(c)&&o(c)||i(c)&&c.length===0)&&(c=void 0),ae._isAMomentObject=!0,ae._useUTC=ae._isUTC=U,ae._l=T,ae._i=c,ae._f=x,ae._strict=R,F1(ae)}function it(c,x,T,R){return Ud(c,x,T,R,!1)}var U1=M("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var c=it.apply(null,arguments);return this.isValid()&&c.isValid()?c<this?this:c:y()}),H1=M("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var c=it.apply(null,arguments);return this.isValid()&&c.isValid()?c>this?this:c:y()});function Hd(c,x){var T,R;if(x.length===1&&i(x[0])&&(x=x[0]),!x.length)return it();for(T=x[0],R=1;R<x.length;++R)(!x[R].isValid()||x[R][c](T))&&(T=x[R]);return T}function Y1(){var c=[].slice.call(arguments,0);return Hd("isBefore",c)}function W1(){var c=[].slice.call(arguments,0);return Hd("isAfter",c)}var G1=function(){return Date.now?Date.now():+new Date},As=["year","quarter","month","week","day","hour","minute","second","millisecond"];function V1(c){var x,T=!1,R,U=As.length;for(x in c)if(s(c,x)&&!(at.call(As,x)!==-1&&(c[x]==null||!isNaN(c[x]))))return!1;for(R=0;R<U;++R)if(c[As[R]]){if(T)return!1;parseFloat(c[As[R]])!==ve(c[As[R]])&&(T=!0)}return!0}function K1(){return this._isValid}function J1(){return _r(NaN)}function Yo(c){var x=C(c),T=x.year||0,R=x.quarter||0,U=x.month||0,ae=x.week||x.isoWeek||0,pe=x.day||0,Re=x.hour||0,He=x.minute||0,Xe=x.second||0,Lt=x.millisecond||0;this._isValid=V1(x),this._milliseconds=+Lt+Xe*1e3+He*6e4+Re*1e3*60*60,this._days=+pe+ae*7,this._months=+U+R*3+T*12,this._data={},this._locale=Mr(),this._bubble()}function Wo(c){return c instanceof Yo}function du(c){return c<0?Math.round(-1*c)*-1:Math.round(c)}function Z1(c,x,T){var R=Math.min(c.length,x.length),U=Math.abs(c.length-x.length),ae=0,pe;for(pe=0;pe<R;pe++)(T&&c[pe]!==x[pe]||!T&&ve(c[pe])!==ve(x[pe]))&&ae++;return ae+U}function Yd(c,x){H(c,0,0,function(){var T=this.utcOffset(),R="+";return T<0&&(T=-T,R="-"),R+F(~~(T/60),2)+x+F(~~T%60,2)})}Yd("Z",":"),Yd("ZZ",""),Ne("Z",on),Ne("ZZ",on),Ke(["Z","ZZ"],function(c,x,T){T._useUTC=!0,T._tzm=hu(on,c)});var X1=/([\+\-]|\d\d)/gi;function hu(c,x){var T=(x||"").match(c),R,U,ae;return T===null?null:(R=T[T.length-1]||[],U=(R+"").match(X1)||["-",0,0],ae=+(U[1]*60)+ve(U[2]),ae===0?0:U[0]==="+"?ae:-ae)}function pu(c,x){var T,R;return x._isUTC?(T=x.clone(),R=(w(c)||f(c)?c.valueOf():it(c).valueOf())-T.valueOf(),T._d.setTime(T._d.valueOf()+R),e.updateOffset(T,!1),T):it(c).local()}function mu(c){return-Math.round(c._d.getTimezoneOffset())}e.updateOffset=function(){};function Q1(c,x,T){var R=this._offset||0,U;if(!this.isValid())return c!=null?this:NaN;if(c!=null){if(typeof c=="string"){if(c=hu(on,c),c===null)return this}else Math.abs(c)<16&&!T&&(c=c*60);return!this._isUTC&&x&&(U=mu(this)),this._offset=c,this._isUTC=!0,U!=null&&this.add(U,"m"),R!==c&&(!x||this._changeInProgress?Kd(this,_r(c-R,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?R:mu(this)}function eb(c,x){return c!=null?(typeof c!="string"&&(c=-c),this.utcOffset(c,x),this):-this.utcOffset()}function tb(c){return this.utcOffset(0,c)}function rb(c){return this._isUTC&&(this.utcOffset(0,c),this._isUTC=!1,c&&this.subtract(mu(this),"m")),this}function ib(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var c=hu(Hl,this._i);c!=null?this.utcOffset(c):this.utcOffset(0,!0)}return this}function nb(c){return this.isValid()?(c=c?it(c).utcOffset():0,(this.utcOffset()-c)%60===0):!1}function sb(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function ob(){if(!a(this._isDSTShifted))return this._isDSTShifted;var c={},x;return A(c,this),c=zd(c),c._a?(x=c._isUTC?h(c._a):it(c._a),this._isDSTShifted=this.isValid()&&Z1(c._a,x.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function ab(){return this.isValid()?!this._isUTC:!1}function lb(){return this.isValid()?this._isUTC:!1}function Wd(){return this.isValid()?this._isUTC&&this._offset===0:!1}var ub=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,cb=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function _r(c,x){var T=c,R=null,U,ae,pe;return Wo(c)?T={ms:c._milliseconds,d:c._days,M:c._months}:l(c)||!isNaN(+c)?(T={},x?T[x]=+c:T.milliseconds=+c):(R=ub.exec(c))?(U=R[1]==="-"?-1:1,T={y:0,d:ve(R[sr])*U,h:ve(R[mt])*U,m:ve(R[Jt])*U,s:ve(R[mr])*U,ms:ve(du(R[Nr]*1e3))*U}):(R=cb.exec(c))?(U=R[1]==="-"?-1:1,T={y:Pi(R[2],U),M:Pi(R[3],U),w:Pi(R[4],U),d:Pi(R[5],U),h:Pi(R[6],U),m:Pi(R[7],U),s:Pi(R[8],U)}):T==null?T={}:typeof T=="object"&&("from"in T||"to"in T)&&(pe=fb(it(T.from),it(T.to)),T={},T.ms=pe.milliseconds,T.M=pe.months),ae=new Yo(T),Wo(c)&&s(c,"_locale")&&(ae._locale=c._locale),Wo(c)&&s(c,"_isValid")&&(ae._isValid=c._isValid),ae}_r.fn=Yo.prototype,_r.invalid=J1;function Pi(c,x){var T=c&&parseFloat(c.replace(",","."));return(isNaN(T)?0:T)*x}function Gd(c,x){var T={};return T.months=x.month()-c.month()+(x.year()-c.year())*12,c.clone().add(T.months,"M").isAfter(x)&&--T.months,T.milliseconds=+x-+c.clone().add(T.months,"M"),T}function fb(c,x){var T;return c.isValid()&&x.isValid()?(x=pu(x,c),c.isBefore(x)?T=Gd(c,x):(T=Gd(x,c),T.milliseconds=-T.milliseconds,T.months=-T.months),T):{milliseconds:0,months:0}}function Vd(c,x){return function(T,R){var U,ae;return R!==null&&!isNaN(+R)&&(D(x,"moment()."+x+"(period, number) is deprecated. Please use moment()."+x+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),ae=T,T=R,R=ae),U=_r(T,R),Kd(this,U,c),this}}function Kd(c,x,T,R){var U=x._milliseconds,ae=du(x._days),pe=du(x._months);!c.isValid()||(R=R==null?!0:R,pe&&fn(c,$e(c,"Month")+pe*T),ae&&je(c,"Date",$e(c,"Date")+ae*T),U&&c._d.setTime(c._d.valueOf()+U*T),R&&e.updateOffset(c,ae||pe))}var db=Vd(1,"add"),hb=Vd(-1,"subtract");function Jd(c){return typeof c=="string"||c instanceof String}function pb(c){return w(c)||f(c)||Jd(c)||l(c)||_b(c)||mb(c)||c===null||c===void 0}function mb(c){var x=n(c)&&!o(c),T=!1,R=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],U,ae,pe=R.length;for(U=0;U<pe;U+=1)ae=R[U],T=T||s(c,ae);return x&&T}function _b(c){var x=i(c),T=!1;return x&&(T=c.filter(function(R){return!l(R)&&Jd(c)}).length===0),x&&T}function gb(c){var x=n(c)&&!o(c),T=!1,R=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],U,ae;for(U=0;U<R.length;U+=1)ae=R[U],T=T||s(c,ae);return x&&T}function yb(c,x){var T=c.diff(x,"days",!0);return T<-6?"sameElse":T<-1?"lastWeek":T<0?"lastDay":T<1?"sameDay":T<2?"nextDay":T<7?"nextWeek":"sameElse"}function bb(c,x){arguments.length===1&&(arguments[0]?pb(arguments[0])?(c=arguments[0],x=void 0):gb(arguments[0])&&(x=arguments[0],c=void 0):(c=void 0,x=void 0));var T=c||it(),R=pu(T,this).startOf("day"),U=e.calendarFormat(this,R)||"sameElse",ae=x&&(N(x[U])?x[U].call(this,T):x[U]);return this.format(ae||this.localeData().calendar(U,this,it(T)))}function vb(){return new k(this)}function wb(c,x){var T=w(c)?c:it(c);return this.isValid()&&T.isValid()?(x=O(x)||"millisecond",x==="millisecond"?this.valueOf()>T.valueOf():T.valueOf()<this.clone().startOf(x).valueOf()):!1}function xb(c,x){var T=w(c)?c:it(c);return this.isValid()&&T.isValid()?(x=O(x)||"millisecond",x==="millisecond"?this.valueOf()<T.valueOf():this.clone().endOf(x).valueOf()<T.valueOf()):!1}function Ab(c,x,T,R){var U=w(c)?c:it(c),ae=w(x)?x:it(x);return this.isValid()&&U.isValid()&&ae.isValid()?(R=R||"()",(R[0]==="("?this.isAfter(U,T):!this.isBefore(U,T))&&(R[1]===")"?this.isBefore(ae,T):!this.isAfter(ae,T))):!1}function kb(c,x){var T=w(c)?c:it(c),R;return this.isValid()&&T.isValid()?(x=O(x)||"millisecond",x==="millisecond"?this.valueOf()===T.valueOf():(R=T.valueOf(),this.clone().startOf(x).valueOf()<=R&&R<=this.clone().endOf(x).valueOf())):!1}function Eb(c,x){return this.isSame(c,x)||this.isAfter(c,x)}function Ob(c,x){return this.isSame(c,x)||this.isBefore(c,x)}function Sb(c,x,T){var R,U,ae;if(!this.isValid())return NaN;if(R=pu(c,this),!R.isValid())return NaN;switch(U=(R.utcOffset()-this.utcOffset())*6e4,x=O(x),x){case"year":ae=Go(this,R)/12;break;case"month":ae=Go(this,R);break;case"quarter":ae=Go(this,R)/3;break;case"second":ae=(this-R)/1e3;break;case"minute":ae=(this-R)/6e4;break;case"hour":ae=(this-R)/36e5;break;case"day":ae=(this-R-U)/864e5;break;case"week":ae=(this-R-U)/6048e5;break;default:ae=this-R}return T?ae:xe(ae)}function Go(c,x){if(c.date()<x.date())return-Go(x,c);var T=(x.year()-c.year())*12+(x.month()-c.month()),R=c.clone().add(T,"months"),U,ae;return x-R<0?(U=c.clone().add(T-1,"months"),ae=(x-R)/(R-U)):(U=c.clone().add(T+1,"months"),ae=(x-R)/(U-R)),-(T+ae)||0}e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Tb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Cb(c){if(!this.isValid())return null;var x=c!==!0,T=x?this.clone().utc():this;return T.year()<0||T.year()>9999?re(T,x?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):N(Date.prototype.toISOString)?x?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",re(T,"Z")):re(T,x?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Nb(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var c="moment",x="",T,R,U,ae;return this.isLocal()||(c=this.utcOffset()===0?"moment.utc":"moment.parseZone",x="Z"),T="["+c+'("]',R=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",U="-MM-DD[T]HH:mm:ss.SSS",ae=x+'[")]',this.format(T+R+U+ae)}function Mb(c){c||(c=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var x=re(this,c);return this.localeData().postformat(x)}function Pb(c,x){return this.isValid()&&(w(c)&&c.isValid()||it(c).isValid())?_r({to:this,from:c}).locale(this.locale()).humanize(!x):this.localeData().invalidDate()}function Db(c){return this.from(it(),c)}function Lb(c,x){return this.isValid()&&(w(c)&&c.isValid()||it(c).isValid())?_r({from:this,to:c}).locale(this.locale()).humanize(!x):this.localeData().invalidDate()}function $b(c){return this.to(it(),c)}function Zd(c){var x;return c===void 0?this._locale._abbr:(x=Mr(c),x!=null&&(this._locale=x),this)}var Xd=M("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(c){return c===void 0?this.localeData():this.locale(c)});function Qd(){return this._locale}var Vo=1e3,hn=60*Vo,Ko=60*hn,eh=(365*400+97)*24*Ko;function pn(c,x){return(c%x+x)%x}function th(c,x,T){return c<100&&c>=0?new Date(c+400,x,T)-eh:new Date(c,x,T).valueOf()}function rh(c,x,T){return c<100&&c>=0?Date.UTC(c+400,x,T)-eh:Date.UTC(c,x,T)}function Rb(c){var x,T;if(c=O(c),c===void 0||c==="millisecond"||!this.isValid())return this;switch(T=this._isUTC?rh:th,c){case"year":x=T(this.year(),0,1);break;case"quarter":x=T(this.year(),this.month()-this.month()%3,1);break;case"month":x=T(this.year(),this.month(),1);break;case"week":x=T(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":x=T(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":x=T(this.year(),this.month(),this.date());break;case"hour":x=this._d.valueOf(),x-=pn(x+(this._isUTC?0:this.utcOffset()*hn),Ko);break;case"minute":x=this._d.valueOf(),x-=pn(x,hn);break;case"second":x=this._d.valueOf(),x-=pn(x,Vo);break}return this._d.setTime(x),e.updateOffset(this,!0),this}function jb(c){var x,T;if(c=O(c),c===void 0||c==="millisecond"||!this.isValid())return this;switch(T=this._isUTC?rh:th,c){case"year":x=T(this.year()+1,0,1)-1;break;case"quarter":x=T(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":x=T(this.year(),this.month()+1,1)-1;break;case"week":x=T(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":x=T(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":x=T(this.year(),this.month(),this.date()+1)-1;break;case"hour":x=this._d.valueOf(),x+=Ko-pn(x+(this._isUTC?0:this.utcOffset()*hn),Ko)-1;break;case"minute":x=this._d.valueOf(),x+=hn-pn(x,hn)-1;break;case"second":x=this._d.valueOf(),x+=Vo-pn(x,Vo)-1;break}return this._d.setTime(x),e.updateOffset(this,!0),this}function Ib(){return this._d.valueOf()-(this._offset||0)*6e4}function qb(){return Math.floor(this.valueOf()/1e3)}function Bb(){return new Date(this.valueOf())}function Fb(){var c=this;return[c.year(),c.month(),c.date(),c.hour(),c.minute(),c.second(),c.millisecond()]}function zb(){var c=this;return{years:c.year(),months:c.month(),date:c.date(),hours:c.hours(),minutes:c.minutes(),seconds:c.seconds(),milliseconds:c.milliseconds()}}function Ub(){return this.isValid()?this.toISOString():null}function Hb(){return _(this)}function Yb(){return b({},u(this))}function Wb(){return u(this).overflow}function Gb(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}H("N",0,0,"eraAbbr"),H("NN",0,0,"eraAbbr"),H("NNN",0,0,"eraAbbr"),H("NNNN",0,0,"eraName"),H("NNNNN",0,0,"eraNarrow"),H("y",["y",1],"yo","eraYear"),H("y",["yy",2],0,"eraYear"),H("y",["yyy",3],0,"eraYear"),H("y",["yyyy",4],0,"eraYear"),Ne("N",_u),Ne("NN",_u),Ne("NNN",_u),Ne("NNNN",nv),Ne("NNNNN",sv),Ke(["N","NN","NNN","NNNN","NNNNN"],function(c,x,T,R){var U=T._locale.erasParse(c,R,T._strict);U?u(T).era=U:u(T).invalidEra=c}),Ne("y",Cr),Ne("yy",Cr),Ne("yyy",Cr),Ne("yyyy",Cr),Ne("yo",ov),Ke(["y","yy","yyy","yyyy"],Et),Ke(["yo"],function(c,x,T,R){var U;T._locale._eraYearOrdinalRegex&&(U=c.match(T._locale._eraYearOrdinalRegex)),T._locale.eraYearOrdinalParse?x[Et]=T._locale.eraYearOrdinalParse(c,U):x[Et]=parseInt(c,10)});function Vb(c,x){var T,R,U,ae=this._eras||Mr("en")._eras;for(T=0,R=ae.length;T<R;++T){switch(typeof ae[T].since){case"string":U=e(ae[T].since).startOf("day"),ae[T].since=U.valueOf();break}switch(typeof ae[T].until){case"undefined":ae[T].until=1/0;break;case"string":U=e(ae[T].until).startOf("day").valueOf(),ae[T].until=U.valueOf();break}}return ae}function Kb(c,x,T){var R,U,ae=this.eras(),pe,Re,He;for(c=c.toUpperCase(),R=0,U=ae.length;R<U;++R)if(pe=ae[R].name.toUpperCase(),Re=ae[R].abbr.toUpperCase(),He=ae[R].narrow.toUpperCase(),T)switch(x){case"N":case"NN":case"NNN":if(Re===c)return ae[R];break;case"NNNN":if(pe===c)return ae[R];break;case"NNNNN":if(He===c)return ae[R];break}else if([pe,Re,He].indexOf(c)>=0)return ae[R]}function Jb(c,x){var T=c.since<=c.until?1:-1;return x===void 0?e(c.since).year():e(c.since).year()+(x-c.offset)*T}function Zb(){var c,x,T,R=this.localeData().eras();for(c=0,x=R.length;c<x;++c)if(T=this.clone().startOf("day").valueOf(),R[c].since<=T&&T<=R[c].until||R[c].until<=T&&T<=R[c].since)return R[c].name;return""}function Xb(){var c,x,T,R=this.localeData().eras();for(c=0,x=R.length;c<x;++c)if(T=this.clone().startOf("day").valueOf(),R[c].since<=T&&T<=R[c].until||R[c].until<=T&&T<=R[c].since)return R[c].narrow;return""}function Qb(){var c,x,T,R=this.localeData().eras();for(c=0,x=R.length;c<x;++c)if(T=this.clone().startOf("day").valueOf(),R[c].since<=T&&T<=R[c].until||R[c].until<=T&&T<=R[c].since)return R[c].abbr;return""}function ev(){var c,x,T,R,U=this.localeData().eras();for(c=0,x=U.length;c<x;++c)if(T=U[c].since<=U[c].until?1:-1,R=this.clone().startOf("day").valueOf(),U[c].since<=R&&R<=U[c].until||U[c].until<=R&&R<=U[c].since)return(this.year()-e(U[c].since).year())*T+U[c].offset;return this.year()}function tv(c){return s(this,"_erasNameRegex")||gu.call(this),c?this._erasNameRegex:this._erasRegex}function rv(c){return s(this,"_erasAbbrRegex")||gu.call(this),c?this._erasAbbrRegex:this._erasRegex}function iv(c){return s(this,"_erasNarrowRegex")||gu.call(this),c?this._erasNarrowRegex:this._erasRegex}function _u(c,x){return x.erasAbbrRegex(c)}function nv(c,x){return x.erasNameRegex(c)}function sv(c,x){return x.erasNarrowRegex(c)}function ov(c,x){return x._eraYearOrdinalRegex||Cr}function gu(){var c=[],x=[],T=[],R=[],U,ae,pe=this.eras();for(U=0,ae=pe.length;U<ae;++U)x.push(Dt(pe[U].name)),c.push(Dt(pe[U].abbr)),T.push(Dt(pe[U].narrow)),R.push(Dt(pe[U].name)),R.push(Dt(pe[U].abbr)),R.push(Dt(pe[U].narrow));this._erasRegex=new RegExp("^("+R.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+x.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+c.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+T.join("|")+")","i")}H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Jo(c,x){H(0,[c,c.length],0,x)}Jo("gggg","weekYear"),Jo("ggggg","weekYear"),Jo("GGGG","isoWeekYear"),Jo("GGGGG","isoWeekYear"),qe("weekYear","gg"),qe("isoWeekYear","GG"),Q("weekYear",1),Q("isoWeekYear",1),Ne("G",sn),Ne("g",sn),Ne("GG",Ze,xt),Ne("gg",Ze,xt),Ne("GGGG",ms,hs),Ne("gggg",ms,hs),Ne("GGGGG",nn,rn),Ne("ggggg",nn,rn),Ni(["gggg","ggggg","GGGG","GGGGG"],function(c,x,T,R){x[R.substr(0,2)]=ve(c)}),Ni(["gg","GG"],function(c,x,T,R){x[R]=e.parseTwoDigitYear(c)});function av(c){return ih.call(this,c,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function lv(c){return ih.call(this,c,this.isoWeek(),this.isoWeekday(),1,4)}function uv(){return Ce(this.year(),1,4)}function cv(){return Ce(this.isoWeekYear(),1,4)}function fv(){var c=this.localeData()._week;return Ce(this.year(),c.dow,c.doy)}function dv(){var c=this.localeData()._week;return Ce(this.weekYear(),c.dow,c.doy)}function ih(c,x,T,R,U){var ae;return c==null?Oe(this,R,U).year:(ae=Ce(c,R,U),x>ae&&(x=ae),hv.call(this,c,x,T,R,U))}function hv(c,x,T,R,U){var ae=Ae(c,x,T,R,U),pe=be(ae.year,0,ae.dayOfYear);return this.year(pe.getUTCFullYear()),this.month(pe.getUTCMonth()),this.date(pe.getUTCDate()),this}H("Q",0,"Qo","quarter"),qe("quarter","Q"),Q("quarter",7),Ne("Q",Zr),Ke("Q",function(c,x){x[pr]=(ve(c)-1)*3});function pv(c){return c==null?Math.ceil((this.month()+1)/3):this.month((c-1)*3+this.month()%3)}H("D",["DD",2],"Do","date"),qe("date","D"),Q("date",9),Ne("D",Ze),Ne("DD",Ze,xt),Ne("Do",function(c,x){return c?x._dayOfMonthOrdinalParse||x._ordinalParse:x._dayOfMonthOrdinalParseLenient}),Ke(["D","DD"],sr),Ke("Do",function(c,x){x[sr]=ve(c.match(Ze)[0])});var nh=Be("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear"),qe("dayOfYear","DDD"),Q("dayOfYear",4),Ne("DDD",Kt),Ne("DDDD",tn),Ke(["DDD","DDDD"],function(c,x,T){T._dayOfYear=ve(c)});function mv(c){var x=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return c==null?x:this.add(c-x,"d")}H("m",["mm",2],0,"minute"),qe("minute","m"),Q("minute",14),Ne("m",Ze),Ne("mm",Ze,xt),Ke(["m","mm"],Jt);var _v=Be("Minutes",!1);H("s",["ss",2],0,"second"),qe("second","s"),Q("second",15),Ne("s",Ze),Ne("ss",Ze,xt),Ke(["s","ss"],mr);var gv=Be("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return this.millisecond()*10}),H(0,["SSSSS",5],0,function(){return this.millisecond()*100}),H(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),H(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),H(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),H(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),qe("millisecond","ms"),Q("millisecond",16),Ne("S",Kt,Zr),Ne("SS",Kt,xt),Ne("SSS",Kt,tn);var ti,sh;for(ti="SSSS";ti.length<=9;ti+="S")Ne(ti,Cr);function yv(c,x){x[Nr]=ve(("0."+c)*1e3)}for(ti="S";ti.length<=9;ti+="S")Ke(ti,yv);sh=Be("Milliseconds",!1),H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");function bv(){return this._isUTC?"UTC":""}function vv(){return this._isUTC?"Coordinated Universal Time":""}var ke=k.prototype;ke.add=db,ke.calendar=bb,ke.clone=vb,ke.diff=Sb,ke.endOf=jb,ke.format=Mb,ke.from=Pb,ke.fromNow=Db,ke.to=Lb,ke.toNow=$b,ke.get=et,ke.invalidAt=Wb,ke.isAfter=wb,ke.isBefore=xb,ke.isBetween=Ab,ke.isSame=kb,ke.isSameOrAfter=Eb,ke.isSameOrBefore=Ob,ke.isValid=Hb,ke.lang=Xd,ke.locale=Zd,ke.localeData=Qd,ke.max=H1,ke.min=U1,ke.parsingFlags=Yb,ke.set=Tr,ke.startOf=Rb,ke.subtract=hb,ke.toArray=Fb,ke.toObject=zb,ke.toDate=Bb,ke.toISOString=Cb,ke.inspect=Nb,typeof Symbol!="undefined"&&Symbol.for!=null&&(ke[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ke.toJSON=Ub,ke.toString=Tb,ke.unix=qb,ke.valueOf=Ib,ke.creationData=Gb,ke.eraName=Zb,ke.eraNarrow=Xb,ke.eraAbbr=Qb,ke.eraYear=ev,ke.year=fe,ke.isLeapYear=le,ke.weekYear=av,ke.isoWeekYear=lv,ke.quarter=ke.quarters=pv,ke.month=Fo,ke.daysInMonth=tu,ke.week=ke.weeks=lt,ke.isoWeek=ke.isoWeeks=qt,ke.weeksInYear=fv,ke.weeksInWeekYear=dv,ke.isoWeeksInYear=uv,ke.isoWeeksInISOWeekYear=cv,ke.date=nh,ke.day=ke.days=l1,ke.weekday=u1,ke.isoWeekday=c1,ke.dayOfYear=mv,ke.hour=ke.hours=g1,ke.minute=ke.minutes=_v,ke.second=ke.seconds=gv,ke.millisecond=ke.milliseconds=sh,ke.utcOffset=Q1,ke.utc=tb,ke.local=rb,ke.parseZone=ib,ke.hasAlignedHourOffset=nb,ke.isDST=sb,ke.isLocal=ab,ke.isUtcOffset=lb,ke.isUtc=Wd,ke.isUTC=Wd,ke.zoneAbbr=bv,ke.zoneName=vv,ke.dates=M("dates accessor is deprecated. Use date instead.",nh),ke.months=M("months accessor is deprecated. Use month instead",Fo),ke.years=M("years accessor is deprecated. Use year instead",fe),ke.zone=M("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",eb),ke.isDSTShifted=M("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",ob);function wv(c){return it(c*1e3)}function xv(){return it.apply(null,arguments).parseZone()}function oh(c){return c}var Ge=P.prototype;Ge.calendar=ee,Ge.longDateFormat=ie,Ge.invalidDate=ye,Ge.ordinal=Me,Ge.preparse=oh,Ge.postformat=oh,Ge.relativeTime=Le,Ge.pastFuture=Fe,Ge.set=B,Ge.eras=Vb,Ge.erasParse=Kb,Ge.erasConvertYear=Jb,Ge.erasAbbrRegex=rv,Ge.erasNameRegex=tv,Ge.erasNarrowRegex=iv,Ge.months=cn,Ge.monthsShort=gs,Ge.monthsParse=eu,Ge.monthsRegex=oe,Ge.monthsShortRegex=Y,Ge.week=Ue,Ge.firstDayOfYear=ht,Ge.firstDayOfWeek=Ve,Ge.weekdays=i1,Ge.weekdaysMin=s1,Ge.weekdaysShort=n1,Ge.weekdaysParse=a1,Ge.weekdaysRegex=f1,Ge.weekdaysShortRegex=d1,Ge.weekdaysMinRegex=h1,Ge.isPM=m1,Ge.meridiem=y1;function Zo(c,x,T,R){var U=Mr(),ae=h().set(R,x);return U[T](ae,c)}function ah(c,x,T){if(l(c)&&(x=c,c=void 0),c=c||"",x!=null)return Zo(c,x,T,"month");var R,U=[];for(R=0;R<12;R++)U[R]=Zo(c,R,T,"month");return U}function yu(c,x,T,R){typeof c=="boolean"?(l(x)&&(T=x,x=void 0),x=x||""):(x=c,T=x,c=!1,l(x)&&(T=x,x=void 0),x=x||"");var U=Mr(),ae=c?U._week.dow:0,pe,Re=[];if(T!=null)return Zo(x,(T+ae)%7,R,"day");for(pe=0;pe<7;pe++)Re[pe]=Zo(x,(pe+ae)%7,R,"day");return Re}function Av(c,x){return ah(c,x,"months")}function kv(c,x){return ah(c,x,"monthsShort")}function Ev(c,x,T){return yu(c,x,T,"weekdays")}function Ov(c,x,T){return yu(c,x,T,"weekdaysShort")}function Sv(c,x,T){return yu(c,x,T,"weekdaysMin")}ei("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(c){var x=c%10,T=ve(c%100/10)===1?"th":x===1?"st":x===2?"nd":x===3?"rd":"th";return c+T}}),e.lang=M("moment.lang is deprecated. Use moment.locale instead.",ei),e.langData=M("moment.langData is deprecated. Use moment.localeData instead.",Mr);var Pr=Math.abs;function Tv(){var c=this._data;return this._milliseconds=Pr(this._milliseconds),this._days=Pr(this._days),this._months=Pr(this._months),c.milliseconds=Pr(c.milliseconds),c.seconds=Pr(c.seconds),c.minutes=Pr(c.minutes),c.hours=Pr(c.hours),c.months=Pr(c.months),c.years=Pr(c.years),this}function lh(c,x,T,R){var U=_r(x,T);return c._milliseconds+=R*U._milliseconds,c._days+=R*U._days,c._months+=R*U._months,c._bubble()}function Cv(c,x){return lh(this,c,x,1)}function Nv(c,x){return lh(this,c,x,-1)}function uh(c){return c<0?Math.floor(c):Math.ceil(c)}function Mv(){var c=this._milliseconds,x=this._days,T=this._months,R=this._data,U,ae,pe,Re,He;return c>=0&&x>=0&&T>=0||c<=0&&x<=0&&T<=0||(c+=uh(bu(T)+x)*864e5,x=0,T=0),R.milliseconds=c%1e3,U=xe(c/1e3),R.seconds=U%60,ae=xe(U/60),R.minutes=ae%60,pe=xe(ae/60),R.hours=pe%24,x+=xe(pe/24),He=xe(ch(x)),T+=He,x-=uh(bu(He)),Re=xe(T/12),T%=12,R.days=x,R.months=T,R.years=Re,this}function ch(c){return c*4800/146097}function bu(c){return c*146097/4800}function Pv(c){if(!this.isValid())return NaN;var x,T,R=this._milliseconds;if(c=O(c),c==="month"||c==="quarter"||c==="year")switch(x=this._days+R/864e5,T=this._months+ch(x),c){case"month":return T;case"quarter":return T/3;case"year":return T/12}else switch(x=this._days+Math.round(bu(this._months)),c){case"week":return x/7+R/6048e5;case"day":return x+R/864e5;case"hour":return x*24+R/36e5;case"minute":return x*1440+R/6e4;case"second":return x*86400+R/1e3;case"millisecond":return Math.floor(x*864e5)+R;default:throw new Error("Unknown unit "+c)}}function Dv(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+ve(this._months/12)*31536e6:NaN}function Dr(c){return function(){return this.as(c)}}var Lv=Dr("ms"),$v=Dr("s"),Rv=Dr("m"),jv=Dr("h"),Iv=Dr("d"),qv=Dr("w"),Bv=Dr("M"),Fv=Dr("Q"),zv=Dr("y");function Uv(){return _r(this)}function Hv(c){return c=O(c),this.isValid()?this[c+"s"]():NaN}function Di(c){return function(){return this.isValid()?this._data[c]:NaN}}var Yv=Di("milliseconds"),Wv=Di("seconds"),Gv=Di("minutes"),Vv=Di("hours"),Kv=Di("days"),Jv=Di("months"),Zv=Di("years");function Xv(){return xe(this.days()/7)}var Lr=Math.round,mn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Qv(c,x,T,R,U){return U.relativeTime(x||1,!!T,c,R)}function ew(c,x,T,R){var U=_r(c).abs(),ae=Lr(U.as("s")),pe=Lr(U.as("m")),Re=Lr(U.as("h")),He=Lr(U.as("d")),Xe=Lr(U.as("M")),Lt=Lr(U.as("w")),$r=Lr(U.as("y")),ri=ae<=T.ss&&["s",ae]||ae<T.s&&["ss",ae]||pe<=1&&["m"]||pe<T.m&&["mm",pe]||Re<=1&&["h"]||Re<T.h&&["hh",Re]||He<=1&&["d"]||He<T.d&&["dd",He];return T.w!=null&&(ri=ri||Lt<=1&&["w"]||Lt<T.w&&["ww",Lt]),ri=ri||Xe<=1&&["M"]||Xe<T.M&&["MM",Xe]||$r<=1&&["y"]||["yy",$r],ri[2]=x,ri[3]=+c>0,ri[4]=R,Qv.apply(null,ri)}function tw(c){return c===void 0?Lr:typeof c=="function"?(Lr=c,!0):!1}function rw(c,x){return mn[c]===void 0?!1:x===void 0?mn[c]:(mn[c]=x,c==="s"&&(mn.ss=x-1),!0)}function iw(c,x){if(!this.isValid())return this.localeData().invalidDate();var T=!1,R=mn,U,ae;return typeof c=="object"&&(x=c,c=!1),typeof c=="boolean"&&(T=c),typeof x=="object"&&(R=Object.assign({},mn,x),x.s!=null&&x.ss==null&&(R.ss=x.s-1)),U=this.localeData(),ae=ew(this,!T,R,U),T&&(ae=U.pastFuture(+this,ae)),U.postformat(ae)}var vu=Math.abs;function _n(c){return(c>0)-(c<0)||+c}function Xo(){if(!this.isValid())return this.localeData().invalidDate();var c=vu(this._milliseconds)/1e3,x=vu(this._days),T=vu(this._months),R,U,ae,pe,Re=this.asSeconds(),He,Xe,Lt,$r;return Re?(R=xe(c/60),U=xe(R/60),c%=60,R%=60,ae=xe(T/12),T%=12,pe=c?c.toFixed(3).replace(/\.?0+$/,""):"",He=Re<0?"-":"",Xe=_n(this._months)!==_n(Re)?"-":"",Lt=_n(this._days)!==_n(Re)?"-":"",$r=_n(this._milliseconds)!==_n(Re)?"-":"",He+"P"+(ae?Xe+ae+"Y":"")+(T?Xe+T+"M":"")+(x?Lt+x+"D":"")+(U||R||c?"T":"")+(U?$r+U+"H":"")+(R?$r+R+"M":"")+(c?$r+pe+"S":"")):"P0D"}var Ye=Yo.prototype;Ye.isValid=K1,Ye.abs=Tv,Ye.add=Cv,Ye.subtract=Nv,Ye.as=Pv,Ye.asMilliseconds=Lv,Ye.asSeconds=$v,Ye.asMinutes=Rv,Ye.asHours=jv,Ye.asDays=Iv,Ye.asWeeks=qv,Ye.asMonths=Bv,Ye.asQuarters=Fv,Ye.asYears=zv,Ye.valueOf=Dv,Ye._bubble=Mv,Ye.clone=Uv,Ye.get=Hv,Ye.milliseconds=Yv,Ye.seconds=Wv,Ye.minutes=Gv,Ye.hours=Vv,Ye.days=Kv,Ye.weeks=Xv,Ye.months=Jv,Ye.years=Zv,Ye.humanize=iw,Ye.toISOString=Xo,Ye.toString=Xo,Ye.toJSON=Xo,Ye.locale=Zd,Ye.localeData=Qd,Ye.toIsoString=M("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Xo),Ye.lang=Xd,H("X",0,0,"unix"),H("x",0,0,"valueOf"),Ne("x",sn),Ne("X",Yl),Ke("X",function(c,x,T){T._d=new Date(parseFloat(c)*1e3)}),Ke("x",function(c,x,T){T._d=new Date(ve(c))});return e.version="2.29.4",t(it),e.fn=ke,e.min=Y1,e.max=W1,e.now=G1,e.utc=h,e.unix=wv,e.months=Av,e.isDate=f,e.locale=ei,e.invalid=y,e.duration=_r,e.isMoment=w,e.weekdays=Ev,e.parseZone=xv,e.localeData=Mr,e.isDuration=Wo,e.monthsShort=kv,e.weekdaysMin=Sv,e.defineLocale=au,e.updateLocale=x1,e.locales=A1,e.weekdaysShort=Ov,e.normalizeUnits=O,e.relativeTimeRounding=tw,e.relativeTimeThreshold=rw,e.calendarFormat=yb,e.prototype=ke,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e})});var Ky=Pe((Vy,Fl)=>{(function(r,e){"use strict";typeof Fl=="object"&&Fl.exports?Fl.exports=e(Gy()):typeof define=="function"&&define.amd?define(["moment"],e):e(r.moment)})(Vy,function(r){"use strict";r.version===void 0&&r.default&&(r=r.default);var e,t={},i={},n={},s={},o={},z=(r&&typeof r.version=="string"||B("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/"),r.version.split(".")),a=+z[0],l=+z[1];function f(F){return 96<F?F-87:64<F?F-29:F-48}function m(F){var J=0,W=F.split("."),Z=W[0],X=W[1]||"",I=1,H=0,W=1;for(F.charCodeAt(0)===45&&(W=-(J=1));J<Z.length;J++)H=60*H+f(Z.charCodeAt(J));for(J=0;J<X.length;J++)I/=60,H+=f(X.charCodeAt(J))*I;return H*W}function b(F){for(var J=0;J<F.length;J++)F[J]=m(F[J])}function h(F,J){for(var Z=[],X=0;X<J.length;X++)Z[X]=F[J[X]];return Z}function p(F){for(var F=F.split("|"),J=F[2].split(" "),Z=F[3].split(""),X=F[4].split(" "),I=(b(J),b(Z),b(X),X),H=Z.length,W=0;W<H;W++)I[W]=Math.round((I[W-1]||0)+6e4*I[W]);return I[H-1]=1/0,{name:F[0],abbrs:h(F[1].split(" "),Z),offsets:h(J,Z),untils:X,population:0|F[5]}}function u(F){F&&this._set(p(F))}function d(F,J){this.name=F,this.zones=J}function _(F){var J=F.toTimeString(),Z=J.match(/\([a-z ]+\)/i);(Z=Z&&Z[0]?(Z=Z[0].match(/[A-Z]/g))?Z.join(""):void 0:(Z=J.match(/[A-Z]{3,5}/g))?Z[0]:void 0)==="GMT"&&(Z=void 0),this.at=+F,this.abbr=Z,this.offset=F.getTimezoneOffset()}function y(F){this.zone=F,this.offsetScore=0,this.abbrScore=0}function g(){for(var F,J,Z=new Date().getFullYear()-2,X=new _(new Date(Z,0,1)),I=[X],H=1;H<48;H++)(J=new _(new Date(Z,H,1))).offset!==X.offset&&(F=function(W,te){for(var re;re=6e4*((te.at-W.at)/12e4|0);)(re=new _(new Date(W.at+re))).offset===W.offset?W=re:te=re;return W}(X,J),I.push(F),I.push(new _(new Date(F.at+6e4)))),X=J;for(H=0;H<4;H++)I.push(new _(new Date(Z+H,0,1))),I.push(new _(new Date(Z+H,6,1)));return I}function v(F,J){return F.offsetScore!==J.offsetScore?F.offsetScore-J.offsetScore:F.abbrScore!==J.abbrScore?F.abbrScore-J.abbrScore:F.zone.population!==J.zone.population?J.zone.population-F.zone.population:J.zone.name.localeCompare(F.zone.name)}function A(){try{var F=Intl.DateTimeFormat().resolvedOptions().timeZone;if(F&&3<F.length){var J=s[k(F)];if(J)return J;B("Moment Timezone found "+F+" from the Intl api, but did not have that data loaded.")}}catch(se){}for(var Z,X,I=g(),H=I.length,W=function(se){for(var K,ie,ce=se.length,ye={},_e=[],Ee=0;Ee<ce;Ee++)for(K in ie=o[se[Ee].offset]||{})ie.hasOwnProperty(K)&&(ye[K]=!0);for(Ee in ye)ye.hasOwnProperty(Ee)&&_e.push(s[Ee]);return _e}(I),te=[],re=0;re<W.length;re++){for(Z=new y(E(W[re])),X=0;X<H;X++)Z.scoreOffsetAt(I[X]);te.push(Z)}return te.sort(v),0<te.length?te[0].zone.name:void 0}function k(F){return(F||"").toLowerCase().replace(/\//g,"_")}function w(F){var J,Z,X,I;for(typeof F=="string"&&(F=[F]),J=0;J<F.length;J++){I=k(Z=(X=F[J].split("|"))[0]),t[I]=F[J],s[I]=Z,W=H=re=te=void 0;var H,W,te=I,re=X[2].split(" ");for(b(re),H=0;H<re.length;H++)W=re[H],o[W]=o[W]||{},o[W][te]=!0}}function E(F,J){F=k(F);var Z=t[F];return Z instanceof u?Z:typeof Z=="string"?(Z=new u(Z),t[F]=Z):i[F]&&J!==E&&(J=E(i[F],E))?((Z=t[F]=new u)._set(J),Z.name=s[F],Z):null}function M(F){var J,Z,X,I;for(typeof F=="string"&&(F=[F]),J=0;J<F.length;J++)X=k((Z=F[J].split("|"))[0]),I=k(Z[1]),i[X]=I,s[X]=Z[0],i[I]=X,s[I]=Z[1]}function j(F){w(F.zones),M(F.links);var J,Z,X,I=F.countries;if(I&&I.length)for(J=0;J<I.length;J++)Z=(X=I[J].split("|"))[0].toUpperCase(),X=X[1].split(" "),n[Z]=new d(Z,X);S.dataVersion=F.version}function D(F){return D.didShowError||(D.didShowError=!0,B("moment.tz.zoneExists('"+F+"') has been deprecated in favor of !moment.tz.zone('"+F+"')")),!!E(F)}function N(F){var J=F._f==="X"||F._f==="x";return!(!F._a||F._tzm!==void 0||J)}function B(F){typeof console!="undefined"&&typeof console.error=="function"&&console.error(F)}function S(F){var X=Array.prototype.slice.call(arguments,0,-1),J=arguments[arguments.length-1],Z=E(J),X=r.utc.apply(null,X);return Z&&!r.isMoment(F)&&N(X)&&X.add(Z.parse(X),"minutes"),X.tz(J),X}(a<2||a==2&&l<6)&&B("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+r.version+". See momentjs.com"),u.prototype={_set:function(F){this.name=F.name,this.abbrs=F.abbrs,this.untils=F.untils,this.offsets=F.offsets,this.population=F.population},_index:function(F){for(var J=+F,Z=this.untils,X=0;X<Z.length;X++)if(J<Z[X])return X},countries:function(){var F=this.name;return Object.keys(n).filter(function(J){return n[J].zones.indexOf(F)!==-1})},parse:function(F){for(var J,Z,X,I=+F,H=this.offsets,W=this.untils,te=W.length-1,re=0;re<te;re++)if(J=H[re],Z=H[re+1],X=H[re&&re-1],J<Z&&S.moveAmbiguousForward?J=Z:X<J&&S.moveInvalidForward&&(J=X),I<W[re]-6e4*J)return H[re];return H[te]},abbr:function(F){return this.abbrs[this._index(F)]},offset:function(F){return B("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(F)]},utcOffset:function(F){return this.offsets[this._index(F)]}},y.prototype.scoreOffsetAt=function(F){this.offsetScore+=Math.abs(this.zone.utcOffset(F.at)-F.offset),this.zone.abbr(F.at).replace(/[^A-Z]/g,"")!==F.abbr&&this.abbrScore++},S.version="0.5.43",S.dataVersion="",S._zones=t,S._links=i,S._names=s,S._countries=n,S.add=w,S.link=M,S.load=j,S.zone=E,S.zoneExists=D,S.guess=function(F){return e=e&&!F?e:A()},S.names=function(){var F,J=[];for(F in s)s.hasOwnProperty(F)&&(t[F]||t[i[F]])&&s[F]&&J.push(s[F]);return J.sort()},S.Zone=u,S.unpack=p,S.unpackBase60=m,S.needsOffset=N,S.moveInvalidForward=!0,S.moveAmbiguousForward=!1,S.countries=function(){return Object.keys(n)},S.zonesForCountry=function(F,J){var Z;return Z=(Z=F).toUpperCase(),(F=n[Z]||null)?(Z=F.zones.sort(),J?Z.map(function(X){return{name:X,offset:E(X).utcOffset(new Date)}}):Z):null};var P,z=r.fn;function G(F){return function(){return this._z?this._z.abbr(this):F.call(this)}}function ee(F){return function(){return this._z=null,F.apply(this,arguments)}}return r.tz=S,r.defaultZone=null,r.updateOffset=function(F,J){var Z,X=r.defaultZone;F._z===void 0&&(X&&N(F)&&!F._isUTC&&(F._d=r.utc(F._a)._d,F.utc().add(X.parse(F),"minutes")),F._z=X),F._z&&(X=F._z.utcOffset(F),Math.abs(X)<16&&(X/=60),F.utcOffset!==void 0?(Z=F._z,F.utcOffset(-X,J),F._z=Z):F.zone(X,J))},z.tz=function(F,J){if(F){if(typeof F!="string")throw new Error("Time zone name must be a string, got "+F+" ["+typeof F+"]");return this._z=E(F),this._z?r.updateOffset(this,J):B("Moment Timezone has no data for "+F+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},z.zoneName=G(z.zoneName),z.zoneAbbr=G(z.zoneAbbr),z.utc=ee(z.utc),z.local=ee(z.local),z.utcOffset=(P=z.utcOffset,function(){return 0<arguments.length&&(this._z=null),P.apply(this,arguments)}),r.tz.setDefault=function(F){return(a<2||a==2&&l<9)&&B("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+r.version+"."),r.defaultZone=F?E(F):null,r},z=r.momentProperties,Object.prototype.toString.call(z)==="[object Array]"?(z.push("_z"),z.push("_a")):z&&(z._z=null),j({version:"2023c",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Nairobi|EAT|-30|0||47e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Khartoum|CAT|-20|0||51e5","Africa/Cairo|EET EEST|-20 -30|0101010101010|29NW0 1cL0 1cN0 1fz0 1a10 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0|15e6","Africa/Casablanca|+00 +01|0 -10|010101010101010101010101|1Vq20 jA0 e00 28M0 e00 2600 gM0 2600 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0 2600 e00 28M0 e00 2600 gM0|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Juba|EAT CAT|-30 -20|01|24nx0|","Africa/Sao_Tome|GMT WAT|0 -10|010|1UQN0 2q00|","Africa/Tripoli|EET|-20|0||11e5","America/Adak|HST HDT|a0 90|01010101010101010101010|1VkA0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1Vkz0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Fortaleza|-03|30|0||34e5","America/Asuncion|-03 -04|30 40|01010101010101010101010|1Vq30 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0|28e5","America/Panama|EST|50|0||15e5","America/Mexico_City|CST CDT|60 50|01010101010|1VsU0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|20e6","America/Managua|CST|60|0||22e5","America/Caracas|-04|40|0||29e5","America/Lima|-05|50|0||11e6","America/Denver|MST MDT|70 60|01010101010101010101010|1Vkx0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|-03 -04|30 40|0101|1Vc30 1HB0 FX0|77e4","America/Chicago|CST CDT|60 50|01010101010101010101010|1Vkw0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT CST|70 60 60|01010101012|1VsV0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|81e4","America/Ciudad_Juarez|MST MDT CST|70 60 60|010101010120101010101010|1Vkx0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1wn0 cm0 EP0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|","America/Phoenix|MST|70|0||42e5","America/Whitehorse|PST PDT MST|80 70 70|0101012|1Vky0 1zb0 Op0 1zb0 Op0 1z90|23e3","America/New_York|EST EDT|50 40|01010101010101010101010|1Vkv0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|21e6","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1Vky0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|15e6","America/Halifax|AST ADT|40 30|01010101010101010101010|1Vku0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|39e4","America/Godthab|-03 -02 -01|30 20 10|0101010101012121212121|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 2so0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|17e3","America/Grand_Turk|AST EDT EST|40 40 50|01212121212121212121212|1Vkv0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|37e2","America/Havana|CST CDT|50 40|01010101010101010101010|1Vkt0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0|21e5","America/Mazatlan|MST MDT|70 60|01010101010|1VsV0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|44e4","America/Metlakatla|AKST AKDT PST|90 80 80|012010101010101010101010|1Vkz0 1zb0 uM0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|14e2","America/Miquelon|-03 -02|30 20|01010101010101010101010|1Vkt0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|61e2","America/Noronha|-02|20|0||30e2","America/Ojinaga|MST MDT CST CDT|70 60 60 50|01010101012323232323232|1Vkx0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1wn0 Rc0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|23e3","America/Santiago|-03 -04|30 40|01010101010101010101010|1VJD0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|62e5","America/Sao_Paulo|-02 -03|20 30|0101|1Vc20 1HB0 FX0|20e6","Atlantic/Azores|-01 +00|10 0|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|25e4","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1Vktu 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|+11 +08|-b0 -80|0101010|1Vkh0 1o30 14k0 1kr0 12l0 1o01|10","Asia/Bangkok|+07|-70|0||15e6","Asia/Vladivostok|+10|-a0|0||60e4","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1VsE0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|40e5","Asia/Tashkent|+05|-50|0||23e5","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1VsC0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|14e5","Europe/Istanbul|+03|-30|0||13e6","Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|40","Asia/Dhaka|+06|-60|0||16e6","Asia/Amman|EET EEST +03|-20 -30 -30|01010101012|1VrW0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 LA0 1C00|25e5","Asia/Kamchatka|+12|-c0|0||18e4","Asia/Dubai|+04|-40|0||39e5","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1VpW0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0|22e5","Asia/Kuala_Lumpur|+08|-80|0||71e5","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+09|-90|0||33e4","Asia/Shanghai|CST|-80|0||23e6","Asia/Colombo|+0530|-5u|0||22e5","Asia/Damascus|EET EEST +03|-20 -30 -30|01010101012|1VrW0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|26e5","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|35e5","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1Vpz0 1qL0 11c0 1on0 11B0 1o00 11A0 1qo0 XA0 1qp0 1cN0 1cL0 17d0 1in0 14p0 1lb0 11B0 1nX0 11B0 1qL0 WN0 1qL0|18e5","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1Vpc0 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Karachi|PKT|-50|0||24e6","Asia/Kathmandu|+0545|-5J|0||12e5","Asia/Sakhalin|+11|-b0|0||58e4","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PST|-80|0||24e6","Asia/Pyongyang|KST KST|-8u -90|01|1VGf0|29e5","Asia/Qyzylorda|+06 +05|-60 -50|01|1Xei0|73e4","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Seoul|KST|-90|0||23e6","Asia/Tehran|+0330 +0430|-3u -4u|01010101010|1VoIu 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0|14e6","Asia/Tokyo|JST|-90|0||38e6","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|27e5","Atlantic/Cape_Verde|-01|10|0||50e4","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1VsEu 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845|-8J|0||368","Australia/Lord_Howe|+11 +1030|-b0 -au|01010101010101010101010|1VsD0 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1fzu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|-05 -06|50 60|01010101010101010101010|1VJD0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 11B0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|12e5","Etc/GMT-1|+01|-10|0||","Pacific/Tongatapu|+13|-d0|0||75e3","Pacific/Kiritimati|+14|-e0|0||51e2","Etc/GMT-2|+02|-20|0||","Pacific/Tahiti|-10|a0|0||18e4","Pacific/Niue|-11|b0|0||12e2","Etc/GMT+12|-12|c0|0||","Pacific/Galapagos|-06|60|0||25e3","Etc/GMT+7|-07|70|0||","Pacific/Pitcairn|-08|80|0||56","Pacific/Gambier|-09|90|0||125","Etc/UTC|UTC|0|0||","Europe/London|GMT BST|0 -10|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1Vq00 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|67e4","Europe/Moscow|MSK|-30|0||16e6","Europe/Volgograd|MSK +04|-30 -40|010|1WQL0 5gn0|10e5","Pacific/Honolulu|HST|a0|0||37e4","MET|MET MEST|-10 -20|01010101010101010101010|1Vq10 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|","Pacific/Chatham|+1345 +1245|-dJ -cJ|01010101010101010101010|1VsC0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1io0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|600","Pacific/Apia|+14 +13|-e0 -d0|01010101|1VsC0 1cM0 1fA0 1a00 1fA0 1a00 1fA0|37e3","Pacific/Fiji|+13 +12|-d0 -c0|01010101|1UVO0 1VA0 s00 20o0 pc0 2hc0 bc0|88e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Norfolk|+11 +12|-b0 -c0|01010101010101010101|219P0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|25e4"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Khartoum|Africa/Blantyre","Africa/Khartoum|Africa/Bujumbura","Africa/Khartoum|Africa/Gaborone","Africa/Khartoum|Africa/Harare","Africa/Khartoum|Africa/Kigali","Africa/Khartoum|Africa/Lubumbashi","Africa/Khartoum|Africa/Lusaka","Africa/Khartoum|Africa/Maputo","Africa/Khartoum|Africa/Windhoek","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Nairobi|Africa/Addis_Ababa","Africa/Nairobi|Africa/Asmara","Africa/Nairobi|Africa/Asmera","Africa/Nairobi|Africa/Dar_es_Salaam","Africa/Nairobi|Africa/Djibouti","Africa/Nairobi|Africa/Kampala","Africa/Nairobi|Africa/Mogadishu","Africa/Nairobi|Indian/Antananarivo","Africa/Nairobi|Indian/Comoro","Africa/Nairobi|Indian/Mayotte","Africa/Tripoli|Europe/Kaliningrad","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Campo_Grande|America/Cuiaba","America/Caracas|America/Boa_Vista","America/Caracas|America/Guyana","America/Caracas|America/La_Paz","America/Caracas|America/Manaus","America/Caracas|America/Porto_Velho","America/Caracas|Brazil/West","America/Caracas|Etc/GMT+4","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Beulah","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Araguaina","America/Fortaleza|America/Argentina/Buenos_Aires","America/Fortaleza|America/Argentina/Catamarca","America/Fortaleza|America/Argentina/ComodRivadavia","America/Fortaleza|America/Argentina/Cordoba","America/Fortaleza|America/Argentina/Jujuy","America/Fortaleza|America/Argentina/La_Rioja","America/Fortaleza|America/Argentina/Mendoza","America/Fortaleza|America/Argentina/Rio_Gallegos","America/Fortaleza|America/Argentina/Salta","America/Fortaleza|America/Argentina/San_Juan","America/Fortaleza|America/Argentina/San_Luis","America/Fortaleza|America/Argentina/Tucuman","America/Fortaleza|America/Argentina/Ushuaia","America/Fortaleza|America/Bahia","America/Fortaleza|America/Belem","America/Fortaleza|America/Buenos_Aires","America/Fortaleza|America/Catamarca","America/Fortaleza|America/Cayenne","America/Fortaleza|America/Cordoba","America/Fortaleza|America/Jujuy","America/Fortaleza|America/Maceio","America/Fortaleza|America/Mendoza","America/Fortaleza|America/Montevideo","America/Fortaleza|America/Paramaribo","America/Fortaleza|America/Punta_Arenas","America/Fortaleza|America/Recife","America/Fortaleza|America/Rosario","America/Fortaleza|America/Santarem","America/Fortaleza|Antarctica/Palmer","America/Fortaleza|Antarctica/Rothera","America/Fortaleza|Atlantic/Stanley","America/Fortaleza|Etc/GMT+3","America/Godthab|America/Nuuk","America/Halifax|America/Glace_Bay","America/Halifax|America/Goose_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/Lima|America/Bogota","America/Lima|America/Eirunepe","America/Lima|America/Guayaquil","America/Lima|America/Porto_Acre","America/Lima|America/Rio_Branco","America/Lima|Brazil/Acre","America/Lima|Etc/GMT+5","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/Saskatchewan","America/Mazatlan|Mexico/BajaSur","America/Mexico_City|America/Bahia_Banderas","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Port-au-Prince","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Atlantic/South_Georgia","America/Noronha|Brazil/DeNoronha","America/Noronha|Etc/GMT+2","America/Panama|America/Atikokan","America/Panama|America/Cancun","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Fort_Nelson","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","America/Whitehorse|America/Dawson","America/Whitehorse|Canada/Yukon","Asia/Bangkok|Antarctica/Davis","Asia/Bangkok|Asia/Barnaul","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Hovd","Asia/Bangkok|Asia/Krasnoyarsk","Asia/Bangkok|Asia/Novokuznetsk","Asia/Bangkok|Asia/Novosibirsk","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Tomsk","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Chita|Asia/Dili","Asia/Chita|Asia/Khandyga","Asia/Chita|Asia/Yakutsk","Asia/Chita|Etc/GMT-9","Asia/Chita|Pacific/Palau","Asia/Dhaka|Antarctica/Vostok","Asia/Dhaka|Asia/Almaty","Asia/Dhaka|Asia/Bishkek","Asia/Dhaka|Asia/Dacca","Asia/Dhaka|Asia/Kashgar","Asia/Dhaka|Asia/Omsk","Asia/Dhaka|Asia/Qostanay","Asia/Dhaka|Asia/Thimbu","Asia/Dhaka|Asia/Thimphu","Asia/Dhaka|Asia/Urumqi","Asia/Dhaka|Etc/GMT-6","Asia/Dhaka|Indian/Chagos","Asia/Dubai|Asia/Baku","Asia/Dubai|Asia/Muscat","Asia/Dubai|Asia/Tbilisi","Asia/Dubai|Asia/Yerevan","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Europe/Astrakhan","Asia/Dubai|Europe/Samara","Asia/Dubai|Europe/Saratov","Asia/Dubai|Europe/Ulyanovsk","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Mauritius","Asia/Dubai|Indian/Reunion","Asia/Gaza|Asia/Hebron","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kamchatka|Asia/Anadyr","Asia/Kamchatka|Etc/GMT-12","Asia/Kamchatka|Kwajalein","Asia/Kamchatka|Pacific/Funafuti","Asia/Kamchatka|Pacific/Kwajalein","Asia/Kamchatka|Pacific/Majuro","Asia/Kamchatka|Pacific/Nauru","Asia/Kamchatka|Pacific/Tarawa","Asia/Kamchatka|Pacific/Wake","Asia/Kamchatka|Pacific/Wallis","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Brunei","Asia/Kuala_Lumpur|Asia/Choibalsan","Asia/Kuala_Lumpur|Asia/Irkutsk","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Kuala_Lumpur|Asia/Singapore","Asia/Kuala_Lumpur|Asia/Ulaanbaatar","Asia/Kuala_Lumpur|Asia/Ulan_Bator","Asia/Kuala_Lumpur|Etc/GMT-8","Asia/Kuala_Lumpur|Singapore","Asia/Makassar|Asia/Ujung_Pandang","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Sakhalin|Asia/Magadan","Asia/Sakhalin|Asia/Srednekolymsk","Asia/Sakhalin|Etc/GMT-11","Asia/Sakhalin|Pacific/Bougainville","Asia/Sakhalin|Pacific/Efate","Asia/Sakhalin|Pacific/Guadalcanal","Asia/Sakhalin|Pacific/Kosrae","Asia/Sakhalin|Pacific/Noumea","Asia/Sakhalin|Pacific/Pohnpei","Asia/Sakhalin|Pacific/Ponape","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Tashkent|Antarctica/Mawson","Asia/Tashkent|Asia/Aqtau","Asia/Tashkent|Asia/Aqtobe","Asia/Tashkent|Asia/Ashgabat","Asia/Tashkent|Asia/Ashkhabad","Asia/Tashkent|Asia/Atyrau","Asia/Tashkent|Asia/Dushanbe","Asia/Tashkent|Asia/Oral","Asia/Tashkent|Asia/Samarkand","Asia/Tashkent|Asia/Yekaterinburg","Asia/Tashkent|Etc/GMT-5","Asia/Tashkent|Indian/Kerguelen","Asia/Tashkent|Indian/Maldives","Asia/Tehran|Iran","Asia/Tokyo|Japan","Asia/Vladivostok|Antarctica/DumontDUrville","Asia/Vladivostok|Asia/Ust-Nera","Asia/Vladivostok|Etc/GMT-10","Asia/Vladivostok|Pacific/Chuuk","Asia/Vladivostok|Pacific/Port_Moresby","Asia/Vladivostok|Pacific/Truk","Asia/Vladivostok|Pacific/Yap","Atlantic/Azores|America/Scoresbysund","Atlantic/Cape_Verde|Etc/GMT+1","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Antarctica/Macquarie","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UTC|Etc/UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UCT","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Athens|Asia/Famagusta","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Kyiv","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Antarctica/Syowa","Europe/Istanbul|Asia/Aden","Europe/Istanbul|Asia/Baghdad","Europe/Istanbul|Asia/Bahrain","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Asia/Kuwait","Europe/Istanbul|Asia/Qatar","Europe/Istanbul|Asia/Riyadh","Europe/Istanbul|Etc/GMT-3","Europe/Istanbul|Europe/Minsk","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|Europe/Kirov","Europe/Moscow|Europe/Simferopol","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Galapagos|Etc/GMT+6","Pacific/Gambier|Etc/GMT+9","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kiritimati|Etc/GMT-14","Pacific/Niue|Etc/GMT+11","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pitcairn|Etc/GMT+8","Pacific/Tahiti|Etc/GMT+10","Pacific/Tahiti|Pacific/Rarotonga","Pacific/Tongatapu|Etc/GMT-13","Pacific/Tongatapu|Pacific/Enderbury","Pacific/Tongatapu|Pacific/Fakaofo","Pacific/Tongatapu|Pacific/Kanton"],countries:["AD|Europe/Andorra","AE|Asia/Dubai","AF|Asia/Kabul","AG|America/Puerto_Rico America/Antigua","AI|America/Puerto_Rico America/Anguilla","AL|Europe/Tirane","AM|Asia/Yerevan","AO|Africa/Lagos Africa/Luanda","AQ|Antarctica/Casey Antarctica/Davis Antarctica/Mawson Antarctica/Palmer Antarctica/Rothera Antarctica/Troll Asia/Urumqi Pacific/Auckland Pacific/Port_Moresby Asia/Riyadh Antarctica/McMurdo Antarctica/DumontDUrville Antarctica/Syowa Antarctica/Vostok","AR|America/Argentina/Buenos_Aires America/Argentina/Cordoba America/Argentina/Salta America/Argentina/Jujuy America/Argentina/Tucuman America/Argentina/Catamarca America/Argentina/La_Rioja America/Argentina/San_Juan America/Argentina/Mendoza America/Argentina/San_Luis America/Argentina/Rio_Gallegos America/Argentina/Ushuaia","AS|Pacific/Pago_Pago","AT|Europe/Vienna","AU|Australia/Lord_Howe Antarctica/Macquarie Australia/Hobart Australia/Melbourne Australia/Sydney Australia/Broken_Hill Australia/Brisbane Australia/Lindeman Australia/Adelaide Australia/Darwin Australia/Perth Australia/Eucla","AW|America/Puerto_Rico America/Aruba","AX|Europe/Helsinki Europe/Mariehamn","AZ|Asia/Baku","BA|Europe/Belgrade Europe/Sarajevo","BB|America/Barbados","BD|Asia/Dhaka","BE|Europe/Brussels","BF|Africa/Abidjan Africa/Ouagadougou","BG|Europe/Sofia","BH|Asia/Qatar Asia/Bahrain","BI|Africa/Maputo Africa/Bujumbura","BJ|Africa/Lagos Africa/Porto-Novo","BL|America/Puerto_Rico America/St_Barthelemy","BM|Atlantic/Bermuda","BN|Asia/Kuching Asia/Brunei","BO|America/La_Paz","BQ|America/Puerto_Rico America/Kralendijk","BR|America/Noronha America/Belem America/Fortaleza America/Recife America/Araguaina America/Maceio America/Bahia America/Sao_Paulo America/Campo_Grande America/Cuiaba America/Santarem America/Porto_Velho America/Boa_Vista America/Manaus America/Eirunepe America/Rio_Branco","BS|America/Toronto America/Nassau","BT|Asia/Thimphu","BW|Africa/Maputo Africa/Gaborone","BY|Europe/Minsk","BZ|America/Belize","CA|America/St_Johns America/Halifax America/Glace_Bay America/Moncton America/Goose_Bay America/Toronto America/Iqaluit America/Winnipeg America/Resolute America/Rankin_Inlet America/Regina America/Swift_Current America/Edmonton America/Cambridge_Bay America/Inuvik America/Dawson_Creek America/Fort_Nelson America/Whitehorse America/Dawson America/Vancouver America/Panama America/Puerto_Rico America/Phoenix America/Blanc-Sablon America/Atikokan America/Creston","CC|Asia/Yangon Indian/Cocos","CD|Africa/Maputo Africa/Lagos Africa/Kinshasa Africa/Lubumbashi","CF|Africa/Lagos Africa/Bangui","CG|Africa/Lagos Africa/Brazzaville","CH|Europe/Zurich","CI|Africa/Abidjan","CK|Pacific/Rarotonga","CL|America/Santiago America/Punta_Arenas Pacific/Easter","CM|Africa/Lagos Africa/Douala","CN|Asia/Shanghai Asia/Urumqi","CO|America/Bogota","CR|America/Costa_Rica","CU|America/Havana","CV|Atlantic/Cape_Verde","CW|America/Puerto_Rico America/Curacao","CX|Asia/Bangkok Indian/Christmas","CY|Asia/Nicosia Asia/Famagusta","CZ|Europe/Prague","DE|Europe/Zurich Europe/Berlin Europe/Busingen","DJ|Africa/Nairobi Africa/Djibouti","DK|Europe/Berlin Europe/Copenhagen","DM|America/Puerto_Rico America/Dominica","DO|America/Santo_Domingo","DZ|Africa/Algiers","EC|America/Guayaquil Pacific/Galapagos","EE|Europe/Tallinn","EG|Africa/Cairo","EH|Africa/El_Aaiun","ER|Africa/Nairobi Africa/Asmara","ES|Europe/Madrid Africa/Ceuta Atlantic/Canary","ET|Africa/Nairobi Africa/Addis_Ababa","FI|Europe/Helsinki","FJ|Pacific/Fiji","FK|Atlantic/Stanley","FM|Pacific/Kosrae Pacific/Port_Moresby Pacific/Guadalcanal Pacific/Chuuk Pacific/Pohnpei","FO|Atlantic/Faroe","FR|Europe/Paris","GA|Africa/Lagos Africa/Libreville","GB|Europe/London","GD|America/Puerto_Rico America/Grenada","GE|Asia/Tbilisi","GF|America/Cayenne","GG|Europe/London Europe/Guernsey","GH|Africa/Abidjan Africa/Accra","GI|Europe/Gibraltar","GL|America/Nuuk America/Danmarkshavn America/Scoresbysund America/Thule","GM|Africa/Abidjan Africa/Banjul","GN|Africa/Abidjan Africa/Conakry","GP|America/Puerto_Rico America/Guadeloupe","GQ|Africa/Lagos Africa/Malabo","GR|Europe/Athens","GS|Atlantic/South_Georgia","GT|America/Guatemala","GU|Pacific/Guam","GW|Africa/Bissau","GY|America/Guyana","HK|Asia/Hong_Kong","HN|America/Tegucigalpa","HR|Europe/Belgrade Europe/Zagreb","HT|America/Port-au-Prince","HU|Europe/Budapest","ID|Asia/Jakarta Asia/Pontianak Asia/Makassar Asia/Jayapura","IE|Europe/Dublin","IL|Asia/Jerusalem","IM|Europe/London Europe/Isle_of_Man","IN|Asia/Kolkata","IO|Indian/Chagos","IQ|Asia/Baghdad","IR|Asia/Tehran","IS|Africa/Abidjan Atlantic/Reykjavik","IT|Europe/Rome","JE|Europe/London Europe/Jersey","JM|America/Jamaica","JO|Asia/Amman","JP|Asia/Tokyo","KE|Africa/Nairobi","KG|Asia/Bishkek","KH|Asia/Bangkok Asia/Phnom_Penh","KI|Pacific/Tarawa Pacific/Kanton Pacific/Kiritimati","KM|Africa/Nairobi Indian/Comoro","KN|America/Puerto_Rico America/St_Kitts","KP|Asia/Pyongyang","KR|Asia/Seoul","KW|Asia/Riyadh Asia/Kuwait","KY|America/Panama America/Cayman","KZ|Asia/Almaty Asia/Qyzylorda Asia/Qostanay Asia/Aqtobe Asia/Aqtau Asia/Atyrau Asia/Oral","LA|Asia/Bangkok Asia/Vientiane","LB|Asia/Beirut","LC|America/Puerto_Rico America/St_Lucia","LI|Europe/Zurich Europe/Vaduz","LK|Asia/Colombo","LR|Africa/Monrovia","LS|Africa/Johannesburg Africa/Maseru","LT|Europe/Vilnius","LU|Europe/Brussels Europe/Luxembourg","LV|Europe/Riga","LY|Africa/Tripoli","MA|Africa/Casablanca","MC|Europe/Paris Europe/Monaco","MD|Europe/Chisinau","ME|Europe/Belgrade Europe/Podgorica","MF|America/Puerto_Rico America/Marigot","MG|Africa/Nairobi Indian/Antananarivo","MH|Pacific/Tarawa Pacific/Kwajalein Pacific/Majuro","MK|Europe/Belgrade Europe/Skopje","ML|Africa/Abidjan Africa/Bamako","MM|Asia/Yangon","MN|Asia/Ulaanbaatar Asia/Hovd Asia/Choibalsan","MO|Asia/Macau","MP|Pacific/Guam Pacific/Saipan","MQ|America/Martinique","MR|Africa/Abidjan Africa/Nouakchott","MS|America/Puerto_Rico America/Montserrat","MT|Europe/Malta","MU|Indian/Mauritius","MV|Indian/Maldives","MW|Africa/Maputo Africa/Blantyre","MX|America/Mexico_City America/Cancun America/Merida America/Monterrey America/Matamoros America/Chihuahua America/Ciudad_Juarez America/Ojinaga America/Mazatlan America/Bahia_Banderas America/Hermosillo America/Tijuana","MY|Asia/Kuching Asia/Singapore Asia/Kuala_Lumpur","MZ|Africa/Maputo","NA|Africa/Windhoek","NC|Pacific/Noumea","NE|Africa/Lagos Africa/Niamey","NF|Pacific/Norfolk","NG|Africa/Lagos","NI|America/Managua","NL|Europe/Brussels Europe/Amsterdam","NO|Europe/Berlin Europe/Oslo","NP|Asia/Kathmandu","NR|Pacific/Nauru","NU|Pacific/Niue","NZ|Pacific/Auckland Pacific/Chatham","OM|Asia/Dubai Asia/Muscat","PA|America/Panama","PE|America/Lima","PF|Pacific/Tahiti Pacific/Marquesas Pacific/Gambier","PG|Pacific/Port_Moresby Pacific/Bougainville","PH|Asia/Manila","PK|Asia/Karachi","PL|Europe/Warsaw","PM|America/Miquelon","PN|Pacific/Pitcairn","PR|America/Puerto_Rico","PS|Asia/Gaza Asia/Hebron","PT|Europe/Lisbon Atlantic/Madeira Atlantic/Azores","PW|Pacific/Palau","PY|America/Asuncion","QA|Asia/Qatar","RE|Asia/Dubai Indian/Reunion","RO|Europe/Bucharest","RS|Europe/Belgrade","RU|Europe/Kaliningrad Europe/Moscow Europe/Simferopol Europe/Kirov Europe/Volgograd Europe/Astrakhan Europe/Saratov Europe/Ulyanovsk Europe/Samara Asia/Yekaterinburg Asia/Omsk Asia/Novosibirsk Asia/Barnaul Asia/Tomsk Asia/Novokuznetsk Asia/Krasnoyarsk Asia/Irkutsk Asia/Chita Asia/Yakutsk Asia/Khandyga Asia/Vladivostok Asia/Ust-Nera Asia/Magadan Asia/Sakhalin Asia/Srednekolymsk Asia/Kamchatka Asia/Anadyr","RW|Africa/Maputo Africa/Kigali","SA|Asia/Riyadh","SB|Pacific/Guadalcanal","SC|Asia/Dubai Indian/Mahe","SD|Africa/Khartoum","SE|Europe/Berlin Europe/Stockholm","SG|Asia/Singapore","SH|Africa/Abidjan Atlantic/St_Helena","SI|Europe/Belgrade Europe/Ljubljana","SJ|Europe/Berlin Arctic/Longyearbyen","SK|Europe/Prague Europe/Bratislava","SL|Africa/Abidjan Africa/Freetown","SM|Europe/Rome Europe/San_Marino","SN|Africa/Abidjan Africa/Dakar","SO|Africa/Nairobi Africa/Mogadishu","SR|America/Paramaribo","SS|Africa/Juba","ST|Africa/Sao_Tome","SV|America/El_Salvador","SX|America/Puerto_Rico America/Lower_Princes","SY|Asia/Damascus","SZ|Africa/Johannesburg Africa/Mbabane","TC|America/Grand_Turk","TD|Africa/Ndjamena","TF|Asia/Dubai Indian/Maldives Indian/Kerguelen","TG|Africa/Abidjan Africa/Lome","TH|Asia/Bangkok","TJ|Asia/Dushanbe","TK|Pacific/Fakaofo","TL|Asia/Dili","TM|Asia/Ashgabat","TN|Africa/Tunis","TO|Pacific/Tongatapu","TR|Europe/Istanbul","TT|America/Puerto_Rico America/Port_of_Spain","TV|Pacific/Tarawa Pacific/Funafuti","TW|Asia/Taipei","TZ|Africa/Nairobi Africa/Dar_es_Salaam","UA|Europe/Simferopol Europe/Kyiv","UG|Africa/Nairobi Africa/Kampala","UM|Pacific/Pago_Pago Pacific/Tarawa Pacific/Midway Pacific/Wake","US|America/New_York America/Detroit America/Kentucky/Louisville America/Kentucky/Monticello America/Indiana/Indianapolis America/Indiana/Vincennes America/Indiana/Winamac America/Indiana/Marengo America/Indiana/Petersburg America/Indiana/Vevay America/Chicago America/Indiana/Tell_City America/Indiana/Knox America/Menominee America/North_Dakota/Center America/North_Dakota/New_Salem America/North_Dakota/Beulah America/Denver America/Boise America/Phoenix America/Los_Angeles America/Anchorage America/Juneau America/Sitka America/Metlakatla America/Yakutat America/Nome America/Adak Pacific/Honolulu","UY|America/Montevideo","UZ|Asia/Samarkand Asia/Tashkent","VA|Europe/Rome Europe/Vatican","VC|America/Puerto_Rico America/St_Vincent","VE|America/Caracas","VG|America/Puerto_Rico America/Tortola","VI|America/Puerto_Rico America/St_Thomas","VN|Asia/Bangkok Asia/Ho_Chi_Minh","VU|Pacific/Efate","WF|Pacific/Tarawa Pacific/Wallis","WS|Pacific/Apia","YE|Asia/Riyadh Asia/Aden","YT|Africa/Nairobi Indian/Mayotte","ZA|Africa/Johannesburg","ZM|Africa/Maputo Africa/Lusaka","ZW|Africa/Maputo Africa/Harare"]}),r})});(function(r,e,t){(function(){var i,n,s,o="2.2.3",a="datepicker",l=".datepicker-here",f=!1,m='<div class="datepicker"><i class="datepicker--pointer"></i><nav class="datepicker--nav"></nav><div class="datepicker--content"></div></div>',b={classes:"",inline:!1,language:"ru",startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"@",toggleSelected:!0,keyboardNav:!0,position:"bottom left",offset:12,view:"days",minView:"days",showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:",",range:!1,todayButton:!1,clearButton:!1,showEvent:"focus",autoClose:!1,monthsField:"monthsShort",prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,minSeconds:0,maxSeconds:59,hoursStep:1,minutesStep:1,secondsStep:1,onSelect:"",onShow:"",onHide:"",onChangeMonth:"",onChangeYear:"",onChangeDecade:"",onChangeView:"",onRenderCell:""},h={ctrlRight:[17,39],ctrlUp:[17,38],ctrlLeft:[17,37],ctrlDown:[17,40],shiftRight:[16,39],shiftUp:[16,38],shiftLeft:[16,37],shiftDown:[16,40],altUp:[18,38],altRight:[18,39],altLeft:[18,37],altDown:[18,40],ctrlShiftUp:[16,17,38]},p=function(u,d){this.el=u,this.$el=e(u),this.opts=e.extend(!0,{},b,d,this.$el.data()),i==t&&(i=e("body")),this.opts.startDate||(this.opts.startDate=new Date),this.el.nodeName=="INPUT"&&(this.elIsInput=!0),this.opts.altField&&(this.$altField=typeof this.opts.altField=="string"?e(this.opts.altField):this.opts.altField),this.inited=!1,this.visible=!1,this.silent=!1,this.currentDate=this.opts.startDate,this.currentView=this.opts.view,this._createShortCuts(),this.selectedDates=[],this.views={},this.keys=[],this.minRange="",this.maxRange="",this._prevOnSelectValue="",this.init()};s=p,s.prototype={VERSION:o,viewIndexes:["days","months","years"],init:function(){f||this.opts.inline||!this.elIsInput||this._buildDatepickersContainer(),this._buildBaseHtml(),this._defineLocale(this.opts.language),this._syncWithMinMaxDates(),this.elIsInput&&(this.opts.inline||(this._setPositionClasses(this.opts.position),this._bindEvents()),this.opts.keyboardNav&&!this.opts.onlyTimepicker&&this._bindKeyboardEvents(),this.$datepicker.on("mousedown",this._onMouseDownDatepicker.bind(this)),this.$datepicker.on("mouseup",this._onMouseUpDatepicker.bind(this))),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.timepicker&&(this.timepicker=new e.fn.datepicker.Timepicker(this,this.opts),this._bindTimepickerEvents()),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.views[this.currentView]=new e.fn.datepicker.Body(this,this.currentView,this.opts),this.views[this.currentView].show(),this.nav=new e.fn.datepicker.Navigation(this,this.opts),this.view=this.currentView,this.$el.on("clickCell.adp",this._onClickCell.bind(this)),this.$datepicker.on("mouseenter",".datepicker--cell",this._onMouseEnterCell.bind(this)),this.$datepicker.on("mouseleave",".datepicker--cell",this._onMouseLeaveCell.bind(this)),this.inited=!0},_createShortCuts:function(){this.minDate=this.opts.minDate?this.opts.minDate:new Date(-86399999136e5),this.maxDate=this.opts.maxDate?this.opts.maxDate:new Date(86399999136e5)},_bindEvents:function(){this.$el.on(this.opts.showEvent+".adp",this._onShowEvent.bind(this)),this.$el.on("mouseup.adp",this._onMouseUpEl.bind(this)),this.$el.on("blur.adp",this._onBlur.bind(this)),this.$el.on("keyup.adp",this._onKeyUpGeneral.bind(this)),e(r).on("resize.adp",this._onResize.bind(this)),e("body").on("mouseup.adp",this._onMouseUpBody.bind(this))},_bindKeyboardEvents:function(){this.$el.on("keydown.adp",this._onKeyDown.bind(this)),this.$el.on("keyup.adp",this._onKeyUp.bind(this)),this.$el.on("hotKey.adp",this._onHotKey.bind(this))},_bindTimepickerEvents:function(){this.$el.on("timeChange.adp",this._onTimeChange.bind(this))},isWeekend:function(u){return this.opts.weekends.indexOf(u)!==-1},_defineLocale:function(u){typeof u=="string"?(this.loc=e.fn.datepicker.language[u],this.loc||(console.warn(`Can't find language "`+u+'" in Datepicker.language, will use "ru" instead'),this.loc=e.extend(!0,{},e.fn.datepicker.language.ru)),this.loc=e.extend(!0,{},e.fn.datepicker.language.ru,e.fn.datepicker.language[u])):this.loc=e.extend(!0,{},e.fn.datepicker.language.ru,u),this.opts.dateFormat&&(this.loc.dateFormat=this.opts.dateFormat),this.opts.timeFormat&&(this.loc.timeFormat=this.opts.timeFormat),this.opts.firstDay!==""&&(this.loc.firstDay=this.opts.firstDay),this.opts.timepicker&&(this.loc.dateFormat=[this.loc.dateFormat,this.loc.timeFormat].join(this.opts.dateTimeSeparator)),this.opts.onlyTimepicker&&(this.loc.dateFormat=this.loc.timeFormat);var d=this._getWordBoundaryRegExp;(this.loc.timeFormat.match(d("aa"))||this.loc.timeFormat.match(d("AA")))&&(this.ampm=!0)},_buildDatepickersContainer:function(){f=!0,i.append('<div class="datepickers-container" id="datepickers-container"></div>'),n=e("#datepickers-container")},_buildBaseHtml:function(){var u,d=e('<div class="datepicker-inline">');u=this.el.nodeName=="INPUT"?this.opts.inline?d.insertAfter(this.$el):n:d.appendTo(this.$el),this.$datepicker=e(m).appendTo(u),this.$content=e(".datepicker--content",this.$datepicker),this.$nav=e(".datepicker--nav",this.$datepicker)},_triggerOnChange:function(){if(!this.selectedDates.length)return this._prevOnSelectValue===""?void 0:(this._prevOnSelectValue="",this.opts.onSelect("","",this));var u,d=this.selectedDates,_=s.getParsedDate(d[0]),y=this,g=new Date(_.year,_.month,_.date,_.hours,_.minutes,_.seconds);u=d.map(function(v){return y.formatDate(y.loc.dateFormat,v)}).join(this.opts.multipleDatesSeparator),(this.opts.multipleDates||this.opts.range)&&(g=d.map(function(v){var A=s.getParsedDate(v);return new Date(A.year,A.month,A.date,A.hours,A.minutes,A.seconds)})),this._prevOnSelectValue=u,this.opts.onSelect(u,g,this)},next:function(){var u=this.parsedDate,d=this.opts;switch(this.view){case"days":this.date=new Date(u.year,u.month+1,1),d.onChangeMonth&&d.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(u.year+1,u.month,1),d.onChangeYear&&d.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(u.year+10,0,1),d.onChangeDecade&&d.onChangeDecade(this.curDecade)}},prev:function(){var u=this.parsedDate,d=this.opts;switch(this.view){case"days":this.date=new Date(u.year,u.month-1,1),d.onChangeMonth&&d.onChangeMonth(this.parsedDate.month,this.parsedDate.year);break;case"months":this.date=new Date(u.year-1,u.month,1),d.onChangeYear&&d.onChangeYear(this.parsedDate.year);break;case"years":this.date=new Date(u.year-10,0,1),d.onChangeDecade&&d.onChangeDecade(this.curDecade)}},formatDate:function(u,d){d=d||this.date;var _,y=u,g=this._getWordBoundaryRegExp,v=this.loc,A=s.getLeadingZeroNum,k=s.getDecade(d),w=s.getParsedDate(d),E=w.fullHours,M=w.hours,j=u.match(g("aa"))||u.match(g("AA")),D="am",N=this._replacer;switch(this.opts.timepicker&&this.timepicker&&j&&(_=this.timepicker._getValidHoursFromDate(d,j),E=A(_.hours),M=_.hours,D=_.dayPeriod),!0){case/@/.test(y):y=y.replace(/@/,d.getTime());case/aa/.test(y):y=N(y,g("aa"),D);case/AA/.test(y):y=N(y,g("AA"),D.toUpperCase());case/dd/.test(y):y=N(y,g("dd"),w.fullDate);case/d/.test(y):y=N(y,g("d"),w.date);case/DD/.test(y):y=N(y,g("DD"),v.days[w.day]);case/D/.test(y):y=N(y,g("D"),v.daysShort[w.day]);case/mm/.test(y):y=N(y,g("mm"),w.fullMonth);case/m/.test(y):y=N(y,g("m"),w.month+1);case/MM/.test(y):y=N(y,g("MM"),this.loc.months[w.month]);case/M/.test(y):y=N(y,g("M"),v.monthsShort[w.month]);case/ss/.test(y):y=N(y,g("ss"),w.fullSeconds);case/s/.test(y):y=N(y,g("s"),w.seconds);case/ii/.test(y):y=N(y,g("ii"),w.fullMinutes);case/i/.test(y):y=N(y,g("i"),w.minutes);case/hh/.test(y):y=N(y,g("hh"),E);case/h/.test(y):y=N(y,g("h"),M);case/yyyy/.test(y):y=N(y,g("yyyy"),w.year);case/yyyy1/.test(y):y=N(y,g("yyyy1"),k[0]);case/yyyy2/.test(y):y=N(y,g("yyyy2"),k[1]);case/yy/.test(y):y=N(y,g("yy"),w.year.toString().slice(-2))}return y},_replacer:function(u,d,_){return u.replace(d,function(y,g,v,A){return g+_+A})},_getWordBoundaryRegExp:function(u){var d="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+d+")("+u+")($|<|"+d+")","g")},selectDate:function(u){var d=this,_=d.opts,y=d.parsedDate,g=d.selectedDates,v=g.length,A="";if(Array.isArray(u))return void u.forEach(function(k){d.selectDate(k)});if(u instanceof Date){if(this.lastSelectedDate=u,this.timepicker&&this.timepicker._setTime(u),d._trigger("selectDate",u),this.timepicker&&(u.setHours(this.timepicker.hours),u.setMinutes(this.timepicker.minutes),u.setSeconds(this.timepicker.seconds)),d.view=="days"&&u.getMonth()!=y.month&&_.moveToOtherMonthsOnSelect&&(A=new Date(u.getFullYear(),u.getMonth(),1)),d.view=="years"&&u.getFullYear()!=y.year&&_.moveToOtherYearsOnSelect&&(A=new Date(u.getFullYear(),0,1)),A&&(d.silent=!0,d.date=A,d.silent=!1,d.nav._render()),_.multipleDates&&!_.range){if(v===_.multipleDates)return;d._isSelected(u)||d.selectedDates.push(u)}else _.range?v==2?(d.selectedDates=[u],d.minRange=u,d.maxRange=""):v==1?(d.selectedDates.push(u),d.maxRange?d.minRange=u:d.maxRange=u,s.bigger(d.maxRange,d.minRange)&&(d.maxRange=d.minRange,d.minRange=u),d.selectedDates=[d.minRange,d.maxRange]):(d.selectedDates=[u],d.minRange=u):d.selectedDates=[u];d._setInputValue(),_.onSelect&&d._triggerOnChange(),_.autoClose&&!this.timepickerIsActive&&(_.multipleDates||_.range?_.range&&d.selectedDates.length==2&&d.hide():d.hide()),d.views[this.currentView]._render()}},removeDate:function(u){var d=this.selectedDates,_=this;if(u instanceof Date)return d.some(function(y,g){if(s.isSame(y,u))return d.splice(g,1),_.selectedDates.length?_.lastSelectedDate=_.selectedDates[_.selectedDates.length-1]:(_.minRange="",_.maxRange="",_.lastSelectedDate=""),_.views[_.currentView]._render(),_._setInputValue(),_.opts.onSelect&&_._triggerOnChange(),!0})},today:function(){this.silent=!0,this.view=this.opts.minView,this.silent=!1,this.date=new Date,this.opts.todayButton instanceof Date&&this.selectDate(this.opts.todayButton)},clear:function(){this.selectedDates=[],this.minRange="",this.maxRange="",this.views[this.currentView]._render(),this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()},update:function(u,d){var _=arguments.length,y=this.lastSelectedDate;return _==2?this.opts[u]=d:_==1&&typeof u=="object"&&(this.opts=e.extend(!0,this.opts,u)),this._createShortCuts(),this._syncWithMinMaxDates(),this._defineLocale(this.opts.language),this.nav._addButtonsIfNeed(),this.opts.onlyTimepicker||this.nav._render(),this.views[this.currentView]._render(),this.elIsInput&&!this.opts.inline&&(this._setPositionClasses(this.opts.position),this.visible&&this.setPosition(this.opts.position)),this.opts.classes&&this.$datepicker.addClass(this.opts.classes),this.opts.onlyTimepicker&&this.$datepicker.addClass("-only-timepicker-"),this.opts.timepicker&&(y&&this.timepicker._handleDate(y),this.timepicker._updateRanges(),this.timepicker._updateCurrentTime(),y&&(y.setHours(this.timepicker.hours),y.setMinutes(this.timepicker.minutes),y.setSeconds(this.timepicker.seconds))),this._setInputValue(),this},_syncWithMinMaxDates:function(){var u=this.date.getTime();this.silent=!0,this.minTime>u&&(this.date=this.minDate),this.maxTime<u&&(this.date=this.maxDate),this.silent=!1},_isSelected:function(u,d){var _=!1;return this.selectedDates.some(function(y){if(s.isSame(y,u,d))return _=y,!0}),_},_setInputValue:function(){var u,d=this,_=d.opts,y=d.loc.dateFormat,g=_.altFieldDateFormat,v=d.selectedDates.map(function(A){return d.formatDate(y,A)});_.altField&&d.$altField.length&&(u=this.selectedDates.map(function(A){return d.formatDate(g,A)}),u=u.join(this.opts.multipleDatesSeparator),this.$altField.val(u)),v=v.join(this.opts.multipleDatesSeparator),this.$el.val(v)},_isInRange:function(u,d){var _=u.getTime(),y=s.getParsedDate(u),g=s.getParsedDate(this.minDate),v=s.getParsedDate(this.maxDate),A=new Date(y.year,y.month,g.date).getTime(),k=new Date(y.year,y.month,v.date).getTime(),w={day:_>=this.minTime&&_<=this.maxTime,month:A>=this.minTime&&k<=this.maxTime,year:y.year>=g.year&&y.year<=v.year};return d?w[d]:w.day},_getDimensions:function(u){var d=u.offset();return{width:u.outerWidth(),height:u.outerHeight(),left:d.left,top:d.top}},_getDateFromCell:function(u){var d=this.parsedDate,_=u.data("year")||d.year,y=u.data("month")==t?d.month:u.data("month"),g=u.data("date")||1;return new Date(_,y,g)},_setPositionClasses:function(u){u=u.split(" ");var d=u[0],_=u[1],y="datepicker -"+d+"-"+_+"- -from-"+d+"-";this.visible&&(y+=" active"),this.$datepicker.removeAttr("class").addClass(y)},setPosition:function(u){u=u||this.opts.position;var d,_,y=this._getDimensions(this.$el),g=this._getDimensions(this.$datepicker),v=u.split(" "),A=this.opts.offset,k=v[0],w=v[1];switch(k){case"top":d=y.top-g.height-A;break;case"right":_=y.left+y.width+A;break;case"bottom":d=y.top+y.height+A;break;case"left":_=y.left-g.width-A}switch(w){case"top":d=y.top;break;case"right":_=y.left+y.width-g.width;break;case"bottom":d=y.top+y.height-g.height;break;case"left":_=y.left;break;case"center":/left|right/.test(k)?d=y.top+y.height/2-g.height/2:_=y.left+y.width/2-g.width/2}this.$datepicker.css({left:_,top:d})},show:function(){var u=this.opts.onShow;this.setPosition(this.opts.position),this.$datepicker.addClass("active"),this.visible=!0,u&&this._bindVisionEvents(u)},hide:function(){var u=this.opts.onHide;this.$datepicker.removeClass("active").css({left:"-100000px"}),this.focused="",this.keys=[],this.inFocus=!1,this.visible=!1,this.$el.blur(),u&&this._bindVisionEvents(u)},down:function(u){this._changeView(u,"down")},up:function(u){this._changeView(u,"up")},_bindVisionEvents:function(u){this.$datepicker.off("transitionend.dp"),u(this,!1),this.$datepicker.one("transitionend.dp",u.bind(this,this,!0))},_changeView:function(u,d){u=u||this.focused||this.date;var _=d=="up"?this.viewIndex+1:this.viewIndex-1;_>2&&(_=2),_<0&&(_=0),this.silent=!0,this.date=new Date(u.getFullYear(),u.getMonth(),1),this.silent=!1,this.view=this.viewIndexes[_]},_handleHotKey:function(u){var d,_,y,g=s.getParsedDate(this._getFocusedDate()),v=this.opts,A=!1,k=!1,w=!1,E=g.year,M=g.month,j=g.date;switch(u){case"ctrlRight":case"ctrlUp":M+=1,A=!0;break;case"ctrlLeft":case"ctrlDown":M-=1,A=!0;break;case"shiftRight":case"shiftUp":k=!0,E+=1;break;case"shiftLeft":case"shiftDown":k=!0,E-=1;break;case"altRight":case"altUp":w=!0,E+=10;break;case"altLeft":case"altDown":w=!0,E-=10;break;case"ctrlShiftUp":this.up()}y=s.getDaysCount(new Date(E,M)),_=new Date(E,M,j),y<j&&(j=y),_.getTime()<this.minTime?_=this.minDate:_.getTime()>this.maxTime&&(_=this.maxDate),this.focused=_,d=s.getParsedDate(_),A&&v.onChangeMonth&&v.onChangeMonth(d.month,d.year),k&&v.onChangeYear&&v.onChangeYear(d.year),w&&v.onChangeDecade&&v.onChangeDecade(this.curDecade)},_registerKey:function(u){var d=this.keys.some(function(_){return _==u});d||this.keys.push(u)},_unRegisterKey:function(u){var d=this.keys.indexOf(u);this.keys.splice(d,1)},_isHotKeyPressed:function(){var u,d=!1,_=this,y=this.keys.sort();for(var g in h)u=h[g],y.length==u.length&&u.every(function(v,A){return v==y[A]})&&(_._trigger("hotKey",g),d=!0);return d},_trigger:function(u,d){this.$el.trigger(u,d)},_focusNextCell:function(u,d){d=d||this.cellType;var _=s.getParsedDate(this._getFocusedDate()),y=_.year,g=_.month,v=_.date;if(!this._isHotKeyPressed()){switch(u){case 37:d=="day"&&(v-=1),d=="month"&&(g-=1),d=="year"&&(y-=1);break;case 38:d=="day"&&(v-=7),d=="month"&&(g-=3),d=="year"&&(y-=4);break;case 39:d=="day"&&(v+=1),d=="month"&&(g+=1),d=="year"&&(y+=1);break;case 40:d=="day"&&(v+=7),d=="month"&&(g+=3),d=="year"&&(y+=4)}var A=new Date(y,g,v);A.getTime()<this.minTime?A=this.minDate:A.getTime()>this.maxTime&&(A=this.maxDate),this.focused=A}},_getFocusedDate:function(){var u=this.focused||this.selectedDates[this.selectedDates.length-1],d=this.parsedDate;if(!u)switch(this.view){case"days":u=new Date(d.year,d.month,new Date().getDate());break;case"months":u=new Date(d.year,d.month,1);break;case"years":u=new Date(d.year,0,1)}return u},_getCell:function(u,d){d=d||this.cellType;var _,y=s.getParsedDate(u),g='.datepicker--cell[data-year="'+y.year+'"]';switch(d){case"month":g='[data-month="'+y.month+'"]';break;case"day":g+='[data-month="'+y.month+'"][data-date="'+y.date+'"]'}return _=this.views[this.currentView].$el.find(g),_.length?_:e("")},destroy:function(){var u=this;u.$el.off(".adp").data("datepicker",""),u.selectedDates=[],u.focused="",u.views={},u.keys=[],u.minRange="",u.maxRange="",u.opts.inline||!u.elIsInput?u.$datepicker.closest(".datepicker-inline").remove():u.$datepicker.remove()},_handleAlreadySelectedDates:function(u,d){this.opts.range?this.opts.toggleSelected?this.removeDate(d):this.selectedDates.length!=2&&this._trigger("clickCell",d):this.opts.toggleSelected&&this.removeDate(d),this.opts.toggleSelected||(this.lastSelectedDate=u,this.opts.timepicker&&(this.timepicker._setTime(u),this.timepicker.update()))},_onShowEvent:function(u){this.visible||this.show()},_onBlur:function(){!this.inFocus&&this.visible&&this.hide()},_onMouseDownDatepicker:function(u){this.inFocus=!0},_onMouseUpDatepicker:function(u){this.inFocus=!1,u.originalEvent.inFocus=!0,u.originalEvent.timepickerFocus||this.$el.focus()},_onKeyUpGeneral:function(u){var d=this.$el.val();d||this.clear()},_onResize:function(){this.visible&&this.setPosition()},_onMouseUpBody:function(u){u.originalEvent.inFocus||this.visible&&!this.inFocus&&this.hide()},_onMouseUpEl:function(u){u.originalEvent.inFocus=!0,setTimeout(this._onKeyUpGeneral.bind(this),4)},_onKeyDown:function(u){var d=u.which;if(this._registerKey(d),d>=37&&d<=40&&(u.preventDefault(),this._focusNextCell(d)),d==13&&this.focused){if(this._getCell(this.focused).hasClass("-disabled-"))return;if(this.view!=this.opts.minView)this.down();else{var _=this._isSelected(this.focused,this.cellType);if(!_)return this.timepicker&&(this.focused.setHours(this.timepicker.hours),this.focused.setMinutes(this.timepicker.minutes),this.focused.setSeconds(this.timepicker.seconds)),void this.selectDate(this.focused);this._handleAlreadySelectedDates(_,this.focused)}}d==27&&this.hide()},_onKeyUp:function(u){var d=u.which;this._unRegisterKey(d)},_onHotKey:function(u,d){this._handleHotKey(d)},_onMouseEnterCell:function(u){var d=e(u.target).closest(".datepicker--cell"),_=this._getDateFromCell(d);this.silent=!0,this.focused&&(this.focused=""),d.addClass("-focus-"),this.focused=_,this.silent=!1,this.opts.range&&this.selectedDates.length==1&&(this.minRange=this.selectedDates[0],this.maxRange="",s.less(this.minRange,this.focused)&&(this.maxRange=this.minRange,this.minRange=""),this.views[this.currentView]._update())},_onMouseLeaveCell:function(u){var d=e(u.target).closest(".datepicker--cell");d.removeClass("-focus-"),this.silent=!0,this.focused="",this.silent=!1},_onTimeChange:function(u,d,_,y){var g=new Date,v=this.selectedDates,A=!1;v.length&&(A=!0,g=this.lastSelectedDate),g.setHours(d),g.setMinutes(_),g.setSeconds(y),A||this._getCell(g).hasClass("-disabled-")?(this._setInputValue(),this.opts.onSelect&&this._triggerOnChange()):this.selectDate(g)},_onClickCell:function(u,d){this.timepicker&&(d.setHours(this.timepicker.hours),d.setMinutes(this.timepicker.minutes),d.setSeconds(this.timepicker.seconds)),this.selectDate(d)},set focused(u){if(!u&&this.focused){var d=this._getCell(this.focused);d.length&&d.removeClass("-focus-")}this._focused=u,this.opts.range&&this.selectedDates.length==1&&(this.minRange=this.selectedDates[0],this.maxRange="",s.less(this.minRange,this._focused)&&(this.maxRange=this.minRange,this.minRange="")),this.silent||(this.date=u)},get focused(){return this._focused},get parsedDate(){return s.getParsedDate(this.date)},set date(u){if(u instanceof Date)return this.currentDate=u,this.inited&&!this.silent&&(this.views[this.view]._render(),this.nav._render(),this.visible&&this.elIsInput&&this.setPosition()),u},get date(){return this.currentDate},set view(u){if(this.viewIndex=this.viewIndexes.indexOf(u),!(this.viewIndex<0))return this.prevView=this.currentView,this.currentView=u,this.inited&&(this.views[u]?this.views[u]._render():this.views[u]=new e.fn.datepicker.Body(this,u,this.opts),this.views[this.prevView].hide(),this.views[u].show(),this.nav._render(),this.opts.onChangeView&&this.opts.onChangeView(u),this.elIsInput&&this.visible&&this.setPosition()),u},get view(){return this.currentView},get cellType(){return this.view.substring(0,this.view.length-1)},get minTime(){var u=s.getParsedDate(this.minDate);return new Date(u.year,u.month,u.date).getTime()},get maxTime(){var u=s.getParsedDate(this.maxDate);return new Date(u.year,u.month,u.date).getTime()},get curDecade(){return s.getDecade(this.date)}},s.getDaysCount=function(u){return new Date(u.getFullYear(),u.getMonth()+1,0).getDate()},s.getParsedDate=function(u){return{year:u.getFullYear(),month:u.getMonth(),fullMonth:u.getMonth()+1<10?"0"+(u.getMonth()+1):u.getMonth()+1,date:u.getDate(),fullDate:u.getDate()<10?"0"+u.getDate():u.getDate(),day:u.getDay(),hours:u.getHours(),fullHours:u.getHours()<10?"0"+u.getHours():u.getHours(),minutes:u.getMinutes(),fullMinutes:u.getMinutes()<10?"0"+u.getMinutes():u.getMinutes(),seconds:u.getSeconds(),fullSeconds:u.getSeconds()<10?"0"+u.getSeconds():u.getSeconds()}},s.getDecade=function(u){var d=10*Math.floor(u.getFullYear()/10);return[d,d+9]},s.template=function(u,d){return u.replace(/#\{([\w]+)\}/g,function(_,y){if(d[y]||d[y]===0)return d[y]})},s.isSame=function(u,d,_){if(!u||!d)return!1;var y=s.getParsedDate(u),g=s.getParsedDate(d),v=_||"day",A={day:y.date==g.date&&y.month==g.month&&y.year==g.year,month:y.month==g.month&&y.year==g.year,year:y.year==g.year};return A[v]},s.less=function(u,d,_){return!(!u||!d)&&d.getTime()<u.getTime()},s.bigger=function(u,d,_){return!(!u||!d)&&d.getTime()>u.getTime()},s.getLeadingZeroNum=function(u){return parseInt(u)<10?"0"+u:u},s.resetTime=function(u){if(typeof u=="object")return u=s.getParsedDate(u),new Date(u.year,u.month,u.date)},e.fn.datepicker=function(u){return this.each(function(){if(e.data(this,a)){var d=e.data(this,a);d.opts=e.extend(!0,d.opts,u),d.update()}else e.data(this,a,new p(this,u))})},e.fn.datepicker.Constructor=p,e.fn.datepicker.language={ru:{days:["\u0412\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435","\u041F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A","\u0412\u0442\u043E\u0440\u043D\u0438\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041F\u044F\u0442\u043D\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043E\u0442\u0430"],daysShort:["\u0412\u043E\u0441","\u041F\u043E\u043D","\u0412\u0442\u043E","\u0421\u0440\u0435","\u0427\u0435\u0442","\u041F\u044F\u0442","\u0421\u0443\u0431"],daysMin:["\u0412\u0441","\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431"],months:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"],monthsShort:["\u042F\u043D\u0432","\u0424\u0435\u0432","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0439","\u0418\u044E\u043D","\u0418\u044E\u043B","\u0410\u0432\u0433","\u0421\u0435\u043D","\u041E\u043A\u0442","\u041D\u043E\u044F","\u0414\u0435\u043A"],today:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F",clear:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}},e(function(){e(l).datepicker()})})(),function(){var i={days:'<div class="datepicker--days datepicker--body"><div class="datepicker--days-names"></div><div class="datepicker--cells datepicker--cells-days"></div></div>',months:'<div class="datepicker--months datepicker--body"><div class="datepicker--cells datepicker--cells-months"></div></div>',years:'<div class="datepicker--years datepicker--body"><div class="datepicker--cells datepicker--cells-years"></div></div>'},n=e.fn.datepicker,s=n.Constructor;n.Body=function(o,a,l){this.d=o,this.type=a,this.opts=l,this.$el=e(""),this.opts.onlyTimepicker||this.init()},n.Body.prototype={init:function(){this._buildBaseHtml(),this._render(),this._bindEvents()},_bindEvents:function(){this.$el.on("click",".datepicker--cell",e.proxy(this._onClickCell,this))},_buildBaseHtml:function(){this.$el=e(i[this.type]).appendTo(this.d.$content),this.$names=e(".datepicker--days-names",this.$el),this.$cells=e(".datepicker--cells",this.$el)},_getDayNamesHtml:function(o,a,l,f){return a=a!=t?a:o,l=l||"",f=f!=t?f:0,f>7?l:a==7?this._getDayNamesHtml(o,0,l,++f):(l+='<div class="datepicker--day-name'+(this.d.isWeekend(a)?" -weekend-":"")+'">'+this.d.loc.daysMin[a]+"</div>",this._getDayNamesHtml(o,++a,l,++f))},_getCellContents:function(o,a){var l="datepicker--cell datepicker--cell-"+a,f=new Date,m=this.d,b=s.resetTime(m.minRange),h=s.resetTime(m.maxRange),p=m.opts,u=s.getParsedDate(o),d={},_=u.date;switch(a){case"day":m.isWeekend(u.day)&&(l+=" -weekend-"),u.month!=this.d.parsedDate.month&&(l+=" -other-month-",p.selectOtherMonths||(l+=" -disabled-"),p.showOtherMonths||(_=""));break;case"month":_=m.loc[m.opts.monthsField][u.month];break;case"year":var y=m.curDecade;_=u.year,(u.year<y[0]||u.year>y[1])&&(l+=" -other-decade-",p.selectOtherYears||(l+=" -disabled-"),p.showOtherYears||(_=""))}return p.onRenderCell&&(d=p.onRenderCell(o,a)||{},_=d.html?d.html:_,l+=d.classes?" "+d.classes:""),p.range&&(s.isSame(b,o,a)&&(l+=" -range-from-"),s.isSame(h,o,a)&&(l+=" -range-to-"),m.selectedDates.length==1&&m.focused?((s.bigger(b,o)&&s.less(m.focused,o)||s.less(h,o)&&s.bigger(m.focused,o))&&(l+=" -in-range-"),s.less(h,o)&&s.isSame(m.focused,o)&&(l+=" -range-from-"),s.bigger(b,o)&&s.isSame(m.focused,o)&&(l+=" -range-to-")):m.selectedDates.length==2&&s.bigger(b,o)&&s.less(h,o)&&(l+=" -in-range-")),s.isSame(f,o,a)&&(l+=" -current-"),m.focused&&s.isSame(o,m.focused,a)&&(l+=" -focus-"),m._isSelected(o,a)&&(l+=" -selected-"),m._isInRange(o,a)&&!d.disabled||(l+=" -disabled-"),{html:_,classes:l}},_getDaysHtml:function(o){var a=s.getDaysCount(o),l=new Date(o.getFullYear(),o.getMonth(),1).getDay(),f=new Date(o.getFullYear(),o.getMonth(),a).getDay(),m=l-this.d.loc.firstDay,b=6-f+this.d.loc.firstDay;m=m<0?m+7:m,b=b>6?b-7:b;for(var h,p,u=-m+1,d="",_=u,y=a+b;_<=y;_++)p=o.getFullYear(),h=o.getMonth(),d+=this._getDayHtml(new Date(p,h,_));return d},_getDayHtml:function(o){var a=this._getCellContents(o,"day");return'<div class="'+a.classes+'" data-date="'+o.getDate()+'" data-month="'+o.getMonth()+'" data-year="'+o.getFullYear()+'">'+a.html+"</div>"},_getMonthsHtml:function(o){for(var a="",l=s.getParsedDate(o),f=0;f<12;)a+=this._getMonthHtml(new Date(l.year,f)),f++;return a},_getMonthHtml:function(o){var a=this._getCellContents(o,"month");return'<div class="'+a.classes+'" data-month="'+o.getMonth()+'">'+a.html+"</div>"},_getYearsHtml:function(o){var a=(s.getParsedDate(o),s.getDecade(o)),l=a[0]-1,f="",m=l;for(m;m<=a[1]+1;m++)f+=this._getYearHtml(new Date(m,0));return f},_getYearHtml:function(o){var a=this._getCellContents(o,"year");return'<div class="'+a.classes+'" data-year="'+o.getFullYear()+'">'+a.html+"</div>"},_renderTypes:{days:function(){var o=this._getDayNamesHtml(this.d.loc.firstDay),a=this._getDaysHtml(this.d.currentDate);this.$cells.html(a),this.$names.html(o)},months:function(){var o=this._getMonthsHtml(this.d.currentDate);this.$cells.html(o)},years:function(){var o=this._getYearsHtml(this.d.currentDate);this.$cells.html(o)}},_render:function(){this.opts.onlyTimepicker||this._renderTypes[this.type].bind(this)()},_update:function(){var o,a,l,f=e(".datepicker--cell",this.$cells),m=this;f.each(function(b,h){a=e(this),l=m.d._getDateFromCell(e(this)),o=m._getCellContents(l,m.d.cellType),a.attr("class",o.classes)})},show:function(){this.opts.onlyTimepicker||(this.$el.addClass("active"),this.acitve=!0)},hide:function(){this.$el.removeClass("active"),this.active=!1},_handleClick:function(o){var a=o.data("date")||1,l=o.data("month")||0,f=o.data("year")||this.d.parsedDate.year,m=this.d;if(m.view!=this.opts.minView)return void m.down(new Date(f,l,a));var b=new Date(f,l,a),h=this.d._isSelected(b,this.d.cellType);return h?void m._handleAlreadySelectedDates.bind(m,h,b)():void m._trigger("clickCell",b)},_onClickCell:function(o){var a=e(o.target).closest(".datepicker--cell");a.hasClass("-disabled-")||this._handleClick.bind(this)(a)}}}(),function(){var i='<div class="datepicker--nav-action" data-action="prev">#{prevHtml}</div><div class="datepicker--nav-title">#{title}</div><div class="datepicker--nav-action" data-action="next">#{nextHtml}</div>',n='<div class="datepicker--buttons"></div>',s='<span class="datepicker--button" data-action="#{action}">#{label}</span>',o=e.fn.datepicker,a=o.Constructor;o.Navigation=function(l,f){this.d=l,this.opts=f,this.$buttonsContainer="",this.init()},o.Navigation.prototype={init:function(){this._buildBaseHtml(),this._bindEvents()},_bindEvents:function(){this.d.$nav.on("click",".datepicker--nav-action",e.proxy(this._onClickNavButton,this)),this.d.$nav.on("click",".datepicker--nav-title",e.proxy(this._onClickNavTitle,this)),this.d.$datepicker.on("click",".datepicker--button",e.proxy(this._onClickNavButton,this))},_buildBaseHtml:function(){this.opts.onlyTimepicker||this._render(),this._addButtonsIfNeed()},_addButtonsIfNeed:function(){this.opts.todayButton&&this._addButton("today"),this.opts.clearButton&&this._addButton("clear")},_render:function(){var l=this._getTitle(this.d.currentDate),f=a.template(i,e.extend({title:l},this.opts));this.d.$nav.html(f),this.d.view=="years"&&e(".datepicker--nav-title",this.d.$nav).addClass("-disabled-"),this.setNavStatus()},_getTitle:function(l){return this.d.formatDate(this.opts.navTitles[this.d.view],l)},_addButton:function(l){this.$buttonsContainer.length||this._addButtonsContainer();var f={action:l,label:this.d.loc[l]},m=a.template(s,f);e("[data-action="+l+"]",this.$buttonsContainer).length||this.$buttonsContainer.append(m)},_addButtonsContainer:function(){this.d.$datepicker.append(n),this.$buttonsContainer=e(".datepicker--buttons",this.d.$datepicker)},setNavStatus:function(){if((this.opts.minDate||this.opts.maxDate)&&this.opts.disableNavWhenOutOfRange){var l=this.d.parsedDate,f=l.month,m=l.year,b=l.date;switch(this.d.view){case"days":this.d._isInRange(new Date(m,f-1,1),"month")||this._disableNav("prev"),this.d._isInRange(new Date(m,f+1,1),"month")||this._disableNav("next");break;case"months":this.d._isInRange(new Date(m-1,f,b),"year")||this._disableNav("prev"),this.d._isInRange(new Date(m+1,f,b),"year")||this._disableNav("next");break;case"years":var h=a.getDecade(this.d.date);this.d._isInRange(new Date(h[0]-1,0,1),"year")||this._disableNav("prev"),this.d._isInRange(new Date(h[1]+1,0,1),"year")||this._disableNav("next")}}},_disableNav:function(l){e('[data-action="'+l+'"]',this.d.$nav).addClass("-disabled-")},_activateNav:function(l){e('[data-action="'+l+'"]',this.d.$nav).removeClass("-disabled-")},_onClickNavButton:function(l){var f=e(l.target).closest("[data-action]"),m=f.data("action");this.d[m]()},_onClickNavTitle:function(l){if(!e(l.target).hasClass("-disabled-"))return this.d.view=="days"?this.d.view="months":void(this.d.view="years")}}}(),function(){var i='<div class="datepicker--time"><div class="datepicker--time-current">   <span class="datepicker--time-current-hours">#{hourVisible}</span>   <span class="datepicker--time-current-colon">:</span>   <span class="datepicker--time-current-minutes">#{minValue}</span>   <span class="datepicker--time-current-colon">:</span>   <span class="datepicker--time-current-seconds">#{secValue}</span></div><div class="datepicker--time-sliders">   <div class="datepicker--time-row">      <input type="range" name="hours" value="#{hourValue}" min="#{hourMin}" max="#{hourMax}" step="#{hourStep}"/>   </div>   <div class="datepicker--time-row">      <input type="range" name="minutes" value="#{minValue}" min="#{minMin}" max="#{minMax}" step="#{minStep}"/>   </div>   <div class="datepicker--time-row">      <input type="range" name="seconds" value="#{secValue}" min="#{secMin}" max="#{secMax}" step="#{secStep}"/>   </div></div></div>',n=e.fn.datepicker,s=n.Constructor;n.Timepicker=function(o,a){this.d=o,this.opts=a,this.init()},n.Timepicker.prototype={init:function(){var o="input";this._setTime(this.d.date),this._buildHTML(),navigator.userAgent.match(/trident/gi)&&(o="change"),this.d.$el.on("selectDate",this._onSelectDate.bind(this)),this.$ranges.on(o,this._onChangeRange.bind(this)),this.$ranges.on("mouseup",this._onMouseUpRange.bind(this)),this.$ranges.on("mousemove focus ",this._onMouseEnterRange.bind(this)),this.$ranges.on("mouseout blur",this._onMouseOutRange.bind(this))},_setTime:function(o){var a=s.getParsedDate(o);this._handleDate(o),this.hours=a.hours<this.minHours?this.minHours:a.hours,this.minutes=a.minutes<this.minMinutes?this.minMinutes:a.minutes,this.seconds=a.seconds<this.minSeconds?this.minSeconds:a.seconds},_setMinTimeFromDate:function(o){this.minHours=o.getHours(),this.minMinutes=o.getMinutes(),this.minSeconds=o.getSeconds(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()>o.getHours()&&(this.minMinutes=this.opts.minMinutes)},_setMaxTimeFromDate:function(o){this.maxHours=o.getHours(),this.maxMinutes=o.getMinutes(),this.maxSeconds=o.getSeconds(),this.d.lastSelectedDate&&this.d.lastSelectedDate.getHours()<o.getHours()&&(this.maxMinutes=this.opts.maxMinutes)},_setDefaultMinMaxTime:function(){var o=23,a=59,l=59,f=this.opts;this.minHours=f.minHours<0||f.minHours>o?0:f.minHours,this.minMinutes=f.minMinutes<0||f.minMinutes>a?0:f.minMinutes,this.maxHours=f.maxHours<0||f.maxHours>o?o:f.maxHours,this.maxMinutes=f.maxMinutes<0||f.maxMinutes>a?a:f.maxMinutes,this.minSeconds=f.minSeconds<0||f.minSeconds>l?0:f.minSeconds,this.maxSeconds=f.maxSeconds<0||f.maxSeconds>l?l:f.maxSeconds},_validateHoursMinutes:function(o){this.hours<this.minHours?this.hours=this.minHours:this.hours>this.maxHours&&(this.hours=this.maxHours),this.minutes<this.minMinutes?this.minutes=this.minMinutes:this.minutes>this.maxMinutes&&(this.minutes=this.maxMinutes),this.seconds<this.minSeconds?this.seconds=this.minSeconds:this.seconds>this.maxSeconds&&(this.seconds=this.maxSeconds)},_buildHTML:function(){var o=s.getLeadingZeroNum,a={hourMin:this.minHours,hourMax:o(this.maxHours),hourStep:this.opts.hoursStep,hourValue:this.hours,hourVisible:o(this.displayHours),minMin:this.minMinutes,minMax:o(this.maxMinutes),minStep:this.opts.minutesStep,minValue:o(this.minutes),secMin:this.minSeconds,secMax:o(this.maxSeconds),secStep:this.opts.secondsStep,secValue:o(this.seconds)},l=s.template(i,a);this.$timepicker=e(l).appendTo(this.d.$datepicker),this.$ranges=e('[type="range"]',this.$timepicker),this.$hours=e('[name="hours"]',this.$timepicker),this.$minutes=e('[name="minutes"]',this.$timepicker),this.$seconds=e('[name="seconds"]',this.$timepicker),this.$hoursText=e(".datepicker--time-current-hours",this.$timepicker),this.$minutesText=e(".datepicker--time-current-minutes",this.$timepicker),this.$secondsText=e(".datepicker--time-current-seconds",this.$timepicker),this.d.ampm&&(this.$ampm=e('<span class="datepicker--time-current-ampm">').appendTo(e(".datepicker--time-current",this.$timepicker)).html(this.dayPeriod),this.$timepicker.addClass("-am-pm-"))},_updateCurrentTime:function(){var o=s.getLeadingZeroNum(this.displayHours),a=s.getLeadingZeroNum(this.minutes),l=s.getLeadingZeroNum(this.seconds);this.$hoursText.html(o),this.$minutesText.html(a),this.$secondsText.html(l),this.d.ampm&&this.$ampm.html(this.dayPeriod)},_updateRanges:function(){this.$hours.attr({min:this.minHours,max:this.maxHours}).val(this.hours),this.$minutes.attr({min:this.minMinutes,max:this.maxMinutes}).val(this.minutes),this.$seconds.attr({min:this.minSeconds,max:this.maxSeconds}).val(this.seconds)},_handleDate:function(o){this._setDefaultMinMaxTime(),o&&(s.isSame(o,this.d.opts.minDate)?this._setMinTimeFromDate(this.d.opts.minDate):s.isSame(o,this.d.opts.maxDate)&&this._setMaxTimeFromDate(this.d.opts.maxDate)),this._validateHoursMinutes(o)},update:function(){this._updateRanges(),this._updateCurrentTime()},_getValidHoursFromDate:function(o,a){var l=o,f=o;o instanceof Date&&(l=s.getParsedDate(o),f=l.hours);var m=a||this.d.ampm,b="am";if(m)switch(!0){case f==0:f=12;break;case f==12:b="pm";break;case f>11:f-=12,b="pm"}return{hours:f,dayPeriod:b}},set hours(o){this._hours=o;var a=this._getValidHoursFromDate(o);this.displayHours=a.hours,this.dayPeriod=a.dayPeriod},get hours(){return this._hours},_onChangeRange:function(o){var a=e(o.target),l=a.attr("name");this.d.timepickerIsActive=!0,this[l]=a.val(),this._updateCurrentTime(),this.d._trigger("timeChange",[this.hours,this.minutes,this.seconds]),this._handleDate(this.d.lastSelectedDate),this.update()},_onSelectDate:function(o,a){this._handleDate(a),this.update()},_onMouseEnterRange:function(o){var a=e(o.target).attr("name");e(".datepicker--time-current-"+a,this.$timepicker).addClass("-focus-")},_onMouseOutRange:function(o){var a=e(o.target).attr("name");this.d.inFocus||e(".datepicker--time-current-"+a,this.$timepicker).removeClass("-focus-")},_onMouseUpRange:function(o){this.d.timepickerIsActive=!1}}}()})(window,jQuery);(function(r){r.fn.datepicker.language.cs={days:["Ned\u011Ble","Pond\u011Bl\xED","\xDAter\xFD","St\u0159eda","\u010Ctvrtek","P\xE1tek","Sobota"],daysShort:["Ne","Po","\xDAt","St","\u010Ct","P\xE1","So"],daysMin:["Ne","Po","\xDAt","St","\u010Ct","P\xE1","So"],months:["Leden","\xDAnor","B\u0159ezen","Duben","Kv\u011Bten","\u010Cerven","\u010Cervenec","Srpen","Z\xE1\u0159\xED","\u0158\xEDjen","Listopad","Prosinec"],monthsShort:["Led","\xDAno","B\u0159e","Dub","Kv\u011B","\u010Cvn","\u010Cvc","Srp","Z\xE1\u0159","\u0158\xEDj","Lis","Pro"],today:"Dnes",clear:"Vymazat",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.da={days:["S\xF8ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","L\xF8rdag"],daysShort:["S\xF8n","Man","Tir","Ons","Tor","Fre","L\xF8r"],daysMin:["S\xF8","Ma","Ti","On","To","Fr","L\xF8"],months:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"I dag",clear:"Nulstil",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.de={days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],daysShort:["Son","Mon","Die","Mit","Don","Fre","Sam"],daysMin:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","M\xE4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Feb","M\xE4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],today:"Heute",clear:"Aufr\xE4umen",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.en={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",dateFormat:"mm/dd/yyyy",timeFormat:"hh:ii aa",firstDay:0}})(jQuery);(function(r){r.fn.datepicker.language.es={days:["Domingo","Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado"],daysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Augosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],today:"Hoy",clear:"Limpiar",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii aa",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.fi={days:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],daysShort:["Su","Ma","Ti","Ke","To","Pe","La"],daysMin:["Su","Ma","Ti","Ke","To","Pe","La"],months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes\xE4kuu","Hein\xE4kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],monthsShort:["Tammi","Helmi","Maalis","Huhti","Touko","Kes\xE4","Hein\xE4","Elo","Syys","Loka","Marras","Joulu"],today:"T\xE4n\xE4\xE4n",clear:"Tyhjenn\xE4",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.fr={days:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],daysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],daysMin:["Di","Lu","Ma","Me","Je","Ve","Sa"],months:["Janvier","F\xE9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xFBt","Septembre","Octobre","Novembre","Decembre"],monthsShort:["Jan","F\xE9v","Mars","Avr","Mai","Juin","Juil","Ao\xFBt","Sep","Oct","Nov","Dec"],today:"Aujourd'hui",clear:"Effacer",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){(function(e){e.fn.datepicker.language.hu={days:["Vas\xE1rnap","H\xE9tf\u0151","Kedd","Szerda","Cs\xFCt\xF6rt\xF6k","P\xE9ntek","Szombat"],daysShort:["Va","H\xE9","Ke","Sze","Cs","P\xE9","Szo"],daysMin:["V","H","K","Sz","Cs","P","Sz"],months:["Janu\xE1r","Febru\xE1r","M\xE1rcius","\xC1prilis","M\xE1jus","J\xFAnius","J\xFAlius","Augusztus","Szeptember","Okt\xF3ber","November","December"],monthsShort:["Jan","Feb","M\xE1r","\xC1pr","M\xE1j","J\xFAn","J\xFAl","Aug","Szep","Okt","Nov","Dec"],today:"Ma",clear:"T\xF6rl\xE9s",dateFormat:"yyyy-mm-dd",timeFormat:"hh:ii aa",firstDay:1}})(jQuery)})(jQuery);(function(r){r.fn.datepicker.language.nl={days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],daysShort:["zo","ma","di","wo","do","vr","za"],daysMin:["zo","ma","di","wo","do","vr","za"],months:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Vandaag",clear:"Legen",dateFormat:"dd-MM-yy",timeFormat:"hh:ii",firstDay:0}})(jQuery);(function(r){r.fn.datepicker.language.pl={days:["Niedziela","Poniedzia\u0142ek","Wtorek","\u015Aroda","Czwartek","Pi\u0105tek","Sobota"],daysShort:["Nie","Pon","Wto","\u015Aro","Czw","Pi\u0105","Sob"],daysMin:["Nd","Pn","Wt","\u015Ar","Czw","Pt","So"],months:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017Adziernik","Listopad","Grudzie\u0144"],monthsShort:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Pa\u017A","Lis","Gru"],today:"Dzisiaj",clear:"Wyczy\u015B\u0107",dateFormat:"yyyy-mm-dd",timeFormat:"hh:ii:aa",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language["pt-BR"]={days:["Domingo","Segunda","Ter\xE7a","Quarta","Quinta","Sexta","S\xE1bado"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],daysMin:["Do","Se","Te","Qu","Qu","Se","Sa"],months:["Janeiro","Fevereiro","Mar\xE7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",clear:"Limpar",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:0}})(jQuery);(function(r){r.fn.datepicker.language.pt={days:["Domingo","Segunda","Ter\xE7a","Quarta","Quinta","Sexta","S\xE1bado"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],daysMin:["Do","Se","Te","Qa","Qi","Sx","Sa"],months:["Janeiro","Fevereiro","Mar\xE7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",clear:"Limpar",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.ro={days:["Duminic\u0103","Luni","Mar\u0163i","Miercuri","Joi","Vineri","S\xE2mb\u0103t\u0103"],daysShort:["Dum","Lun","Mar","Mie","Joi","Vin","S\xE2m"],daysMin:["D","L","Ma","Mi","J","V","S"],months:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],monthsShort:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sept","Oct","Nov","Dec"],today:"Azi",clear:"\u015Eterge",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.sk={days:["Nede\u013Ea","Pondelok","Utorok","Streda","\u0160tvrtok","Piatok","Sobota"],daysShort:["Ned","Pon","Uto","Str","\u0160tv","Pia","Sob"],daysMin:["Ne","Po","Ut","St","\u0160t","Pi","So"],months:["Janu\xE1r","Febru\xE1r","Marec","Apr\xEDl","M\xE1j","J\xFAn","J\xFAl","August","September","Okt\xF3ber","November","December"],monthsShort:["Jan","Feb","Mar","Apr","M\xE1j","J\xFAn","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Dnes",clear:"Vymaza\u0165",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.zh={days:["\u5468\u65E5","\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D"],daysShort:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],daysMin:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],months:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthsShort:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],today:"\u4ECA\u5929",clear:"\u6E05\u9664",dateFormat:"yyyy-mm-dd",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.ar={days:["\u0627\u0644\u0623\u062D\u062F","\u0627\u0644\u0623\u062B\u0646\u064A\u0646","\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0627\u0644\u062E\u0645\u064A\u0633","\u0627\u0644\u062C\u0645\u0639\u0647","\u0627\u0644\u0633\u0628\u062A"],daysShort:["\u0627\u0644\u0623\u062D\u062F","\u0627\u0644\u0623\u062B\u0646\u064A\u0646","\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0627\u0644\u062E\u0645\u064A\u0633","\u0627\u0644\u062C\u0645\u0639\u0647","\u0627\u0644\u0633\u0628\u062A"],daysMin:["\u0627\u0644\u0623\u062D\u062F","\u0627\u0644\u0623\u062B\u0646\u064A\u0646","\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0627\u0644\u062E\u0645\u064A\u0633","\u0627\u0644\u062C\u0645\u0639\u0647","\u0627\u0644\u0633\u0628\u062A"],months:["\u064A\u0646\u0627\u064A\u0631","\u0641\u0628\u0631\u0627\u064A\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064A\u0644","\u0645\u0627\u064A\u0648","\u064A\u0648\u0646\u064A\u0648","\u064A\u0648\u0644\u064A\u0648","\u0623\u063A\u0633\u0637\u0633","\u0633\u0628\u062A\u0645\u0628\u0631","\u0627\u0643\u062A\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062F\u064A\u0633\u0645\u0628\u0631"],monthsShort:["\u064A\u0646\u0627\u064A\u0631","\u0641\u0628\u0631\u0627\u064A\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064A\u0644","\u0645\u0627\u064A\u0648","\u064A\u0648\u0646\u064A\u0648","\u064A\u0648\u0644\u064A\u0648","\u0623\u063A\u0633\u0637\u0633","\u0633\u0628\u062A\u0645\u0628\u0631","\u0627\u0643\u062A\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062F\u064A\u0633\u0645\u0628\u0631"],today:"\u0627\u0644\u064A\u0648\u0645",clear:"\u062D\u0630\u0641",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii aa",firstDay:6}})(jQuery);(function(r){r.fn.datepicker.language.gr={days:["\u039A\u03C5\u03C1\u03B9\u03B1\u03BA\u03AE","\u0394\u03B5\u03C5\u03C4\u03AD\u03C1\u03B1","\u03A4\u03C1\u03AF\u03C4\u03B7","\u03A4\u03B5\u03C4\u03AC\u03C1\u03C4\u03B7","\u03A0\u03AD\u03BC\u03C0\u03C4\u03B7","\u03A0\u03B1\u03C1\u03B1\u03C3\u03BA\u03B5\u03C5\u03AE","\u03A3\u03AC\u03B2\u03B2\u03B1\u03C4\u03BF"],daysShort:["\u039A\u03C5\u03C1","\u0394\u03B5\u03C5","\u03A4\u03C1\u03B9","\u03A4\u03B5\u03C4","\u03A0\u03B5\u03BC","\u03A0\u03B1\u03C1","\u03A3\u03B1\u03B2"],daysMin:["\u039A\u03C5","\u0394\u03B5","\u03A4\u03C1","\u03A4\u03B5","\u03A0\u03B5","\u03A0\u03B1","\u03A3\u03B1"],months:["\u0399\u03B1\u03BD\u03BF\u03C5\u03AC\u03C1\u03B9\u03BF\u03C2","\u03A6\u03B5\u03B2\u03C1\u03BF\u03C5\u03AC\u03C1\u03B9\u03BF\u03C2","\u039C\u03AC\u03C1\u03C4\u03B9\u03BF\u03C2","\u0391\u03C0\u03C1\u03AF\u03BB\u03B9\u03BF\u03C2","\u039C\u03AC\u03B9\u03BF\u03C2","\u0399\u03BF\u03CD\u03BD\u03B9\u03BF\u03C2","\u0399\u03BF\u03CD\u03BB\u03B9\u03BF\u03C2","\u0391\u03CD\u03B3\u03BF\u03C5\u03C3\u03C4\u03BF\u03C2","\u03A3\u03B5\u03C0\u03C4\u03AD\u03BC\u03B2\u03C1\u03B9\u03BF\u03C2","\u039F\u03BA\u03C4\u03CE\u03B2\u03C1\u03B9\u03BF\u03C2","\u039D\u03BF\u03AD\u03BC\u03B2\u03C1\u03B9\u03BF\u03C2","\u0394\u03B5\u03BA\u03AD\u03BC\u03B2\u03C1\u03B9\u03BF\u03C2"],monthsShort:["\u0399\u03B1\u03BD","\u03A6\u03B5\u03B2","\u039C\u03B1\u03C1","\u0391\u03C0\u03C1","\u039C\u03AC\u03B9","\u0399/\u03BD","\u0399/\u03BB","\u0391\u03C5\u03B3","\u03A3\u03B5\u03C0","\u039F\u03BA\u03C4","\u039D\u03BF\u03B5","\u0394\u03B5\u03BA"],today:"\u03A3\u03AE\u03BC\u03B5\u03C1\u03B1",clear:"\u039A\u03B1\u03B8\u03B1\u03C1\u03B9\u03C3\u03BC\u03CC\u03C2",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii aa",firstDay:0}})(jQuery);(function(r){r.fn.datepicker.language.it={days:["Domenica","Luned\xEC","Marted\xEC","Mercoled\xEC","Gioved\xEC","Venerd\xEC","Sabato"],daysShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],daysMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],today:"Oggi",clear:"Reset",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.tr={days:["Pazar","Pazartesi","Sal\u0131","\xC7ar\u015Famba","Per\u015Fembe","Cuma","Cumartesi"],daysShort:["Paz","Pzt","Sal","\xC7ar","Per","Cum","Cmt"],daysMin:["Pz","Pt","Sa","\xC7a","Pe","Cu","Ct"],months:["Ocak","\u015Eubat","Mart","Nisan","May\u0131s","Haziran","Temmuz","A\u011Fustos","Eyl\xFCl","Ekim","Kas\u0131m","Aral\u0131k"],monthsShort:["Oca","\u015Eub","Mar","Nis","May","Haz","Tem","A\u011Fu","Eyl","Eki","Kas","Ara"],today:"Bug\xFCn",clear:"Temizle",dateFormat:"dd.mm.yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.sv={days:["S\xF6ndag","M\xE5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xF6rdag"],daysShort:["S\xF6n","M\xE5n","Tis","Ons","Tor","Fre","L\xF6r"],daysMin:["S\xF6","M\xE5","Ti","On","To","Fr","L\xF6"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Idag",clear:"\xC5terst\xE4ll",dateFormat:"yyyy-mm-dd",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.bs={days:["Nedjelja","Ponedjeljak","Utorak","Srijeda","\u010Cetvrtak","Petak","Subota"],daysShort:["Ned","Pon","Uto","Sri","\u010Cet","Pet","Sub"],daysMin:["Ne","Po","Ut","Sr","\u010Ce","Pe","Su"],months:["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],today:"Danas",clear:"Resetiraj",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.hr={days:["Nedjelja","Ponedjeljak","Utorak","Srijeda","\u010Cetvrtak","Petak","Subota"],daysShort:["Ned","Pon","Uto","Sri","\u010Cet","Pet","Sub"],daysMin:["Ne","Po","Ut","Sr","\u010Ce","Pe","Su"],months:["Sje\u010Danj","Velja\u010Da","O\u017Eujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],monthsShort:["Sje","Velj","O\u017Eu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],today:"Danas",clear:"Resetiraj",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language.th={days:["\u0E2D\u0E32\u0E17\u0E34\u0E15\u0E22\u0E4C","\u0E08\u0E31\u0E19\u0E17\u0E23\u0E4C","\u0E2D\u0E31\u0E07\u0E04\u0E32\u0E23","\u0E1E\u0E38\u0E18","\u0E1E\u0E24\u0E2B\u0E31\u0E2A\u0E1A\u0E14\u0E35","\u0E28\u0E38\u0E01\u0E23\u0E4C","\u0E40\u0E2A\u0E32\u0E23\u0E4C"],daysShort:["\u0E2D\u0E32.","\u0E08.","\u0E2D.","\u0E1E.","\u0E1E\u0E24.","\u0E28.","\u0E2A."],daysMin:["\u0E2D\u0E32.","\u0E08.","\u0E2D.","\u0E1E.","\u0E1E\u0E24.","\u0E28.","\u0E2A."],months:["\u0E21\u0E01\u0E23\u0E32\u0E04\u0E21","\u0E01\u0E38\u0E21\u0E20\u0E32\u0E1E\u0E31\u0E19\u0E18\u0E4C","\u0E21\u0E35\u0E19\u0E32\u0E04\u0E21","\u0E40\u0E21\u0E29\u0E32\u0E22\u0E19","\u0E1E\u0E24\u0E29\u0E20\u0E32\u0E04\u0E21","\u0E21\u0E34\u0E16\u0E38\u0E19\u0E32\u0E22\u0E19","\u0E01\u0E23\u0E01\u0E0E\u0E32\u0E04\u0E21","\u0E2A\u0E34\u0E07\u0E2B\u0E32\u0E04\u0E21","\u0E01\u0E31\u0E19\u0E22\u0E32\u0E22\u0E19","\u0E15\u0E38\u0E25\u0E32\u0E04\u0E21","\u0E1E\u0E24\u0E28\u0E08\u0E34\u0E01\u0E32\u0E22\u0E19","\u0E18\u0E31\u0E19\u0E27\u0E32\u0E04\u0E21"],monthsShort:["\u0E21.\u0E04.","\u0E01.\u0E1E.","\u0E21\u0E35.\u0E04.","\u0E40\u0E21.\u0E22.","\u0E1E.\u0E04.","\u0E21\u0E34.\u0E22.","\u0E01.\u0E04.","\u0E2A.\u0E04.","\u0E01.\u0E22.","\u0E15.\u0E04.","\u0E1E.\u0E22.","\u0E18.\u0E04."],today:"\u0E43\u0E19\u0E27\u0E31\u0E19\u0E19\u0E35\u0E49",clear:"\u0E40\u0E04\u0E25\u0E35\u0E22\u0E23\u0E4C",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii aa",firstDay:0}})(jQuery);(function(r){r.fn.datepicker.language.sr={days:["\u041D\u0435\u0434\u0435\u0459\u0430","\u041F\u043E\u043D\u0435\u0434\u0435\u0459\u0430\u043A","\u0423\u0442\u043E\u0440\u0430\u043A","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0440\u0442\u0430\u043A","\u041F\u0435\u0442\u0430\u043A","\u0421\u0443\u0431\u043E\u0442\u0430"],daysShort:["\u041D\u0435\u0434","\u041F\u043E\u043D","\u0423\u0442\u043E","\u0421\u0440\u0435","\u0427\u0435\u0442","\u041F\u0435\u0442","\u0421\u0443\u0431"],daysMin:["\u041D\u0435","\u041F\u043E","\u0423\u0442","\u0421\u0440","\u0427\u0435","\u041F\u0435","\u0421\u0443"],months:["\u0408\u0430\u043D\u0443\u0430\u0440","\u0424\u0435\u0431\u0440\u0443\u0430\u0440","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0438\u043B","\u041C\u0430\u0458","\u0408\u0443\u043D","\u0408\u0443\u043B","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043F\u0442\u0435\u043C\u0431\u0430\u0440","\u041E\u043A\u0442\u043E\u0431\u0430\u0440","\u041D\u043E\u0432\u0435\u043C\u0431\u0430\u0440","\u0414\u0435\u0446\u0435\u043C\u0431\u0430\u0440"],monthsShort:["\u0408\u0430\u043D","\u0424\u0435\u0431","\u041C\u0430\u0440","\u0410\u043F\u0440","\u041C\u0430\u0458","\u0408\u0443\u043D","\u0408\u0443\u043B","\u0410\u0432\u0433","\u0421\u0435\u043F","\u041E\u043A\u0442","\u041D\u043E\u0432","\u0414\u0435\u0446"],today:"\u0414\u0430\u043D\u0430\u0441",clear:"\u0420\u0435\u0441\u0435\u0442\u0443\u0458",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);(function(r){r.fn.datepicker.language["sr-CS"]={days:["Nedelja","Ponedeljak","Utorak","Sreda","\u010Cetvrtak","Petak","Subota"],daysShort:["Ned","Pon","Uto","Sre","\u010Cet","Pet","Sub"],daysMin:["Ne","Po","Ut","Sr","\u010Ce","Pe","Su"],months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],monthsShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Avg","Sep","Okt","Nov","Dec"],today:"Danas",clear:"Resetuj",dateFormat:"dd/mm/yyyy",timeFormat:"hh:ii",firstDay:1}})(jQuery);frappe._.get_data_uri=r=>{let e=r.videoWidth,t=r.videoHeight,i=$("<canvas/>");return i[0].width=e,i[0].height=t,i[0].getContext("2d").drawImage(r,0,0,e,t),i[0].toDataURL("image/png")};function dw(){let r=document.createElement("input");return r.setAttribute("type","file"),r.setAttribute("accept","image/*"),r.setAttribute("multiple",""),r.classList.add("visually-hidden"),document.body.appendChild(r),r}function hw(r){return new Promise((e,t)=>{let i=new FileReader;i.onload=()=>e(i.result),i.onerror=t,i.readAsDataURL(r)})}frappe.ui.Capture=class{constructor(r={}){this.options=frappe.ui.Capture.OPTIONS,this.set_options(r),this.facing_mode="environment",this.images=[]}set_options(r){return this.options=ze(ze({},frappe.ui.Capture.OPTIONS),r),this}show(){this.build_dialog(),cint(frappe.boot.sysdefaults.force_web_capture_mode_for_uploads)?this.show_for_desktop():frappe.is_mobile()?this.show_for_mobile():this.show_for_desktop()}build_dialog(){let r=this;r.dialog=new frappe.ui.Dialog({title:this.options.title,animate:this.options.animate,fields:[{fieldtype:"HTML",fieldname:"capture"},{fieldtype:"HTML",fieldname:"total_count"}],on_hide:()=>{this.stop_media_stream()}}),r.$template=$(frappe.ui.Capture.TEMPLATE);let e=r.dialog.get_field("capture");$(e.wrapper).html(r.$template),r.update_count(),r.dialog.get_close_btn().on("click",()=>{r.hide()})}show_for_mobile(){let r=this;r.input||(r.input=dw()),r.input.onchange=async()=>{for(let e of r.input.files){let t=await hw(e);r.images.push(t)}r.input.remove(),r.input=null,r.render_preview(),r.dialog.show()},r.input.click()}show_for_desktop(){let r=this;this.render_stream().then(()=>{r.dialog.show()}).catch(e=>{throw r.options.error&&frappe.show_alert(frappe.ui.Capture.ERR_MESSAGE,3),e})}render_stream(){let r=this,e={video:{facingMode:this.facing_mode}};return navigator.mediaDevices.getUserMedia(e).then(t=>{r.stream=t,r.dialog.custom_actions.empty(),r.dialog.get_primary_btn().off("click"),r.setup_take_photo_action(),r.setup_preview_action(),r.setup_toggle_camera(),r.$template.find(".fc-stream-container").show(),r.$template.find(".fc-preview-container").hide(),r.video=r.$template.find("video")[0],r.video.srcObject=r.stream,r.video.load(),r.video.play()})}render_preview(){this.stop_media_stream(),this.$template.find(".fc-stream-container").hide(),this.$template.find(".fc-preview-container").show(),this.dialog.get_primary_btn().off("click");let r="";this.images.forEach((e,t)=>{r+=`
				<div class="mt-1 p-1 rounded col-md-3 col-sm-4 col-xs-4" data-idx="${t}">
					<span class="capture-remove-btn" data-idx="${t}">
						${frappe.utils.icon("close","lg")}
					</span>
					<img class="rounded" src="${e}" data-idx="${t}">
				</div>
			`}),this.$template.find(".fc-preview-container").empty(),$(this.$template.find(".fc-preview-container")).html(`<div class="row">
				${r}
			</div>`),this.setup_capture_action(),this.setup_submit_action(),this.setup_remove_action(),this.update_count(),this.dialog.custom_actions.empty()}setup_take_photo_action(){let r=this;this.dialog.set_primary_action(__("Take Photo"),()=>{let e=frappe._.get_data_uri(r.video);r.images.push(e),r.setup_preview_action(),r.update_count()})}setup_preview_action(){let r=this;!this.images.length||(this.dialog.set_secondary_action_label(__("Preview")),this.dialog.set_secondary_action(()=>{r.dialog.get_primary_btn().off("click"),r.render_preview()}))}setup_remove_action(){let r=this;Array.from(this.$template[0].getElementsByClassName("capture-remove-btn")).forEach(t=>{t.onclick=()=>{let i=parseInt(t.getAttribute("data-idx"));r.images.splice(i,1),r.render_preview()}})}update_count(){let r=this.dialog.get_field("total_count"),e=`${__("Total Images")}: <b>${this.images.length}`;this.images.length===0&&(e=__("No Images")),$(r.wrapper).html(`
			<div class="row mt-2">
				<div class="offset-4 col-4 d-flex justify-content-center">${e}</b></div>
			</div>
		`)}setup_toggle_camera(){let r=this;this.dialog.add_custom_action(__("Switch Camera"),()=>{r.facing_mode=r.facing_mode=="environment"?"user":"environment",frappe.show_alert({message:__("Switching Camera")}),r.stop_media_stream(),r.render_stream()},"btn-switch")}setup_capture_action(){let r=this;this.dialog.set_secondary_action_label(__("Capture")),this.dialog.set_secondary_action(()=>{frappe.is_mobile()?r.show_for_mobile():r.render_stream()})}setup_submit_action(){let r=this;this.dialog.set_primary_action(__("Submit"),()=>{r.hide(),r.callback&&r.callback(r.images)})}hide(){this.dialog&&this.dialog.hide(),this.stop_media_stream()}stop_media_stream(){this.stream&&this.stream.getTracks().forEach(r=>{r.stop()})}submit(r){this.callback=r}};frappe.ui.Capture.OPTIONS={title:__("Camera"),animate:!1,error:!1};frappe.ui.Capture.ERR_MESSAGE=__("Unable to load camera.");frappe.ui.Capture.TEMPLATE=`
<div class="frappe-capture">
	<div class="embed-responsive embed-responsive-16by9 fc-stream-container">
		<video class="fc-stream embed-responsive-item">${frappe.ui.Capture.ERR_MESSAGE}</video>
	</div>
	<div class="fc-preview-container px-2" style="display: none;">

	</div>
</div>
`;frappe.ui.form.Control=class{constructor(e){$.extend(this,e),this.make(),this.render_input&&this.refresh()}make(){this.make_wrapper(),this.$wrapper.attr("data-fieldtype",this.df.fieldtype).attr("data-fieldname",this.df.fieldname),this.wrapper=this.$wrapper.get(0),this.wrapper.fieldobj=this,this.tooltip=$(`<span class="tooltip-content">${__(this.df.fieldname)}</span>`),this.$wrapper.append(this.tooltip),this.tooltip.on("click",e=>{let t=$(e.target).text();frappe.utils.copy_to_clipboard(t)})}make_wrapper(){this.$wrapper=$("<div class='frappe-control'></div>").appendTo(this.parent),this.wrapper=this.$wrapper}toggle(e){this.df.hidden=e?0:1,this.refresh()}get perm(){var e;return(e=this.frm)==null?void 0:e.perm}set perm(e){console.error("Setting perm on controls isn't supported, update form's perm instead")}get_status(e){if(this.df.get_status)return this.df.get_status(this);if(!this.doctype&&!this.docname||this.df.parenttype==="Web Form"||this.df.is_web_form){let s="Write";if(cint(this.df.hidden))return e&&console.log("By Hidden: None"),"None";if(cint(this.df.hidden_due_to_dependency))return e&&console.log("By Hidden Dependency: None"),"None";cint(this.df.read_only||this.df.is_virtual||this.df.fieldtype==="Read Only")?(e&&console.log("By Read Only: Read"),s="Read"):(this.grid&&this.grid.display_status=="Read"||this.layout&&this.layout.grid&&this.layout.grid.display_status=="Read")&&(e&&console.log("By Parent Grid Read-only: Read"),s="Read");let o=this.value||this.get_model_value();return o=this.get_parsed_value(o),s==="Read"&&is_null(o)&&!["HTML","Image","Button"].includes(this.df.fieldtype)&&(s="Read"),s}var t=frappe.perm.get_field_display_status(this.df,frappe.model.get_doc(this.doctype,this.docname),this.perm||this.frm&&this.frm.perm,e);if(t==="Write"&&(this.grid||this.layout&&this.layout.grid&&!cint(this.df.allow_on_submit))){var i=this.grid||this.layout.grid;i.display_status=="Read"&&(t="Read",e&&console.log("By Parent Grid Read-only: Read"))}let n=frappe.model.get_value(this.doctype,this.docname,this.df.fieldname);return["Date","Datetime"].includes(this.df.fieldtype)&&n&&(n=frappe.datetime.str_to_user(n)),n=this.get_parsed_value(n),this.doctype&&t==="Read"&&!this.only_input&&is_null(n)&&cint(frappe.boot.sysdefaults.hide_empty_read_only_fields)&&!["HTML","Image","Button","Geolocation"].includes(this.df.fieldtype)&&(e&&console.log("By Hide Read-only, null fields: None"),t="None"),t}refresh(){this.disp_status=this.get_status(),this.$wrapper&&this.$wrapper.toggleClass("hide-control",this.disp_status=="None")&&this.refresh_input&&this.refresh_input();var e=this.get_value();this.show_translatable_button(e)}show_translatable_button(e){if(!frappe.model||!this.frm||!this.doc||!this.df.translatable||!frappe.model.can_write("Translation")||!e||!frappe.views||!frappe.views.TranslationManager||this.$wrapper.find(".clearfix .btn-translation").length)return;let t=`<a class="btn-translation no-decoration text-muted" title="${__("Open Translation")}">
				<i class="fa fa-globe"></i>
			</a>`;$(t).appendTo(this.$wrapper.find(".clearfix")).on("click",()=>{this.doc.__islocal||new frappe.views.TranslationManager({df:this.df,source_text:this.value,target_language:this.doc.language,doc:this.doc})})}get_doc(){return this.doctype&&this.docname&&locals[this.doctype]&&locals[this.doctype][this.docname]||{}}get_model_value(){if(this.doc)return this.doc[this.df.fieldname]}get_parsed_value(e){return this.parse&&(e=this.parse(e)),e}set_value(e,t=!1){return this.validate_and_set_in_model(e,null,t)}parse_validate_and_set_in_model(e,t){return e=this.get_parsed_value(e),this.validate_and_set_in_model(e,t)}validate_and_set_in_model(e,t,i=!1){var l,f,m;let n=this,s=this.get_model_value()===e;if(this.inside_change_event||s&&!i)return Promise.resolve();let o=this.get_model_value();(m=(l=this.frm)==null?void 0:l.undo_manager)==null||m.record_change({fieldname:n.df.fieldname,old_value:o,new_value:e,doctype:this.doctype,docname:this.docname,is_child:Boolean((f=this.doc)==null?void 0:f.parenttype)}),this.inside_change_event=!0;function a(b){return n.inside_change_event=!1,frappe.run_serially([()=>n._validated=!0,()=>n.set_model_value(b),()=>delete n._validated,()=>{if(n.set_mandatory&&n.set_mandatory(b),n.df.change||n.df.onchange){let h=(n.df.change||n.df.onchange).apply(n,[t]);return n.set_invalid&&n.set_invalid(),h}n.set_invalid&&n.set_invalid()}])}return e=this.validate(e),e&&e.then?e.then(b=>a(b)):a(e)}get_value(){return this.get_status()==="Write"?this.get_input_value?this.parse?this.parse(this.get_input_value()):this.get_input_value():void 0:this.value||void 0}set_model_value(e){return this.frm?(this.last_value=e,frappe.model.set_value(this.doctype,this.docname,this.df.fieldname,e,this.df.fieldtype)):(this.doc&&(this.doc[this.df.fieldname]=e),this.set_input(e),Promise.resolve())}set_focus(){if(this.$input)return this.$input.get(0).focus(),!0}};var ku;frappe.ui.form.ControlInput=(ku=class extends frappe.ui.form.Control{make(){super.make(),this.set_input_areas(),this.set_max_width(),this.df.initial_value&&this.set_value(this.df.initial_value)}make_wrapper(){this.only_input?this.$wrapper=$('<div class="form-group frappe-control">').appendTo(this.parent):(this.$wrapper=$(`<div class="frappe-control">
				<div class="form-group">
					<div class="clearfix">
						<label class="control-label" style="padding-right: 5px;"></label>
						<span class="help"></span>
					</div>
					<div class="control-input-wrapper">
						<div class="control-input"></div>
						<div class="control-value like-disabled-input" style="display: none;"></div>
						<div class="help-box small text-extra-muted hide"></div>
					</div>
				</div>
			</div>`).appendTo(this.parent),this.constructor.horizontal&&this.$wrapper.find(".form-group").addClass("horizontal"))}toggle_label(e){this.$wrapper.find(".control-label").parent().toggleClass("hide",!e)}toggle_description(e){this.$wrapper.find(".help-box").toggleClass("hide",!e)}set_input_areas(){this.only_input?this.input_area=this.wrapper:(this.label_area=this.label_span=this.$wrapper.find("label").get(0),this.input_area=this.$wrapper.find(".control-input").get(0),this.$input_wrapper=this.$wrapper.find(".control-input-wrapper"),this.disp_area=this.$wrapper.find(".control-value").get(0))}set_max_width(){this.constructor.horizontal&&this.$wrapper.addClass("input-max-width")}read_only_because_of_fetch_from(){var e,t;return this.df.fetch_from&&!this.df.fetch_if_empty&&((t=(e=this.frm)==null?void 0:e.doc)==null?void 0:t[this.df.fetch_from.split(".")[0]])}refresh_input(){var e=this,t=function(){e.has_input||(e.make_input(),e.df.on_make&&e.df.on_make(e))},i=function(){e.doctype&&e.docname?e.set_input(e.value):e.set_input(e.value||null)};if(e.disp_status!="None"){e.frm?e.value=frappe.model.get_value(e.doctype,e.docname,e.df.fieldname):e.doc&&(e.value=e.doc[e.df.fieldname]||"");let n=e.read_only_because_of_fetch_from();e.can_write()&&!n?(e.disp_area&&$(e.disp_area).toggle(!1),$(e.input_area).toggle(!0),e.$input&&e.$input.prop("disabled",!1),t(),i()):(e.only_input?(t(),i()):($(e.input_area).toggle(!1),e.disp_area&&(e.set_disp_area(e.value),$(e.disp_area).toggle(!0))),e.$input&&e.$input.prop("disabled",!0),n&&$(e.disp_area).attr("title",__("This value is fetched from {0}'s {1} field",e.df.fetch_from.split(".").map(s=>__(frappe.unscrub(s)))))),e.set_description(),e.set_label(),e.set_doc_url(),e.set_mandatory(e.value),e.set_bold(),e.set_required()}}can_write(){return this.disp_status=="Write"}set_disp_area(e){["Currency","Int","Float"].includes(this.df.fieldtype)&&(this.value===0||e===0)?e=0:e=this.value||e,["Data","Long Text","Small Text","Text","Password","MultiSelect"].includes(this.df.fieldtype)&&(e=frappe.utils.escape_html(e));let t=this.doc||this.frm&&this.frm.doc,i=frappe.format(e,this.df,{no_icon:!0,inline:!0},t);this.disp_area&&$(this.disp_area).html(i)}set_label(e){if(e&&(this.df.label=e),!(this.only_input||this.df.label==this._label)){var t="";this.label_span.innerHTML=(t?'<i class="'+t+'"></i> ':"")+__(this.df.label,null,this.df.parent)||"&nbsp;",this._label=this.df.label}}set_doc_url(){var i;let e=frappe.model.no_value_type.filter(n=>frappe.model.table_fields.indexOf(n)===-1);if(!this.df.label||!((i=this.df)!=null&&i.documentation_url)||e.includes(this.df.fieldtype))return;let t=this.$wrapper.find("span.help");t.empty(),$(`<a
			href="${frappe.utils.escape_html(this.df.documentation_url)}"
			target="_blank"
			title="${frappe.utils.escape_html(__("Documentation"))}"
		>
			${frappe.utils.icon("help","sm")}
		</a>`).appendTo(t)}set_description(e){if(e!==void 0&&(this.df.description=e),!(this.only_input||this.df.description===this._description)){if(this.df.description){let t=__(this.df.description,null,this.df.parent),i=this.$wrapper.find(".help-box");i.html(t),t.includes("<code")&&frappe.require("syntax_highlighting.bundle.js").then(()=>{i.find("code").each(function(){hljs.highlightElement(this),this.style.display="inline"})}),this.toggle_description(!0)}else this.set_empty_description();this._description=this.df.description}}set_new_description(e){this.$wrapper.find(".help-box").html(e),this.toggle_description(!0)}set_empty_description(){this.$wrapper.find(".help-box").html(""),this.toggle_description(!1)}set_mandatory(e){this.frm&&this.frm.cscript&&this.frm.cscript.is_onload||this.layout&&this.layout.is_dialog&&!this.layout.primary_action_fulfilled||this.$wrapper.toggleClass("has-error",Boolean(this.df.reqd&&is_null(e)))}set_invalid(){var t;let e=!!this.df.invalid;this.grid?(this.$wrapper.parents(".grid-static-col").toggleClass("invalid",e),(t=this.$input)==null||t.toggleClass("invalid",e),this.grid_row.columns[this.df.fieldname].is_invalid=e):this.$wrapper.toggleClass("has-error",e)}set_required(){this.label_area&&$(this.label_area).toggleClass("reqd",Boolean(this.df.reqd))}set_bold(){this.$input&&this.$input.toggleClass("bold",!!(this.df.bold||this.df.reqd)),this.disp_area&&$(this.disp_area).toggleClass("bold",!!(this.df.bold||this.df.reqd))}},he(ku,"horizontal",!0),ku);frappe.provide("frappe.phone_call");var ks;frappe.ui.form.ControlData=(ks=class extends frappe.ui.form.ControlInput{make_input(){if(this.$input)return;let{html_element:e,input_type:t,input_mode:i}=this.constructor;this.$input=$("<"+e+">").attr("type",t).attr("inputmode",i).attr("autocomplete","off").addClass("input-with-feedback form-control").prependTo(this.input_area),this.$input.on("paste",n=>{let s=frappe.utils.get_clipboard_data(n),o=this.$input.attr("maxlength");if(o&&s.length>o){let a=__("The value you pasted was {0} characters long. Max allowed characters is {1}.",[cstr(s.length).bold(),cstr(o).bold()]);if(this.frm&&frappe.model.can_write(this.frm.doctype)){let l=null;this.frm.meta.custom?l=frappe.utils.get_form_link("DocType",this.frm.doctype,!0,__("this form")):l=frappe.utils.get_form_link("Customize Form","Customize Form",!0,null,{doc_type:this.frm.doctype}),a+=`<br><br><span class="text-muted text-small">${__("{0}: You can increase the limit for the field if required via {1}",[__("Note").bold(),l])}</span>`}frappe.msgprint({message:a,indicator:"orange",title:__("Data Clipped")})}}),this.set_input_attributes(),this.input=this.$input.get(0),this.has_input=!0,this.bind_change_event(),this.setup_autoname_check(),this.setup_copy_button(),this.df.options=="URL"&&this.setup_url_field(),this.df.options=="Barcode"&&this.setup_barcode_field(),this.df.options=="IBAN"&&this.setup_iban_field()}setup_url_field(){this.$wrapper.find(".control-input").append(`<span class="link-btn">
				<a class="btn-open no-decoration" title="${__("Open Link")}" target="_blank">
					${frappe.utils.icon("link-url","sm")}
				</a>
			</span>`),this.$link=this.$wrapper.find(".link-btn"),this.$link_open=this.$link.find(".btn-open"),this.$input.on("focus",()=>{setTimeout(()=>{let e=this.get_input_value();e&&validate_url(e)&&(this.$link.toggle(!0),this.$link_open.attr("href",this.get_input_value()))},500)}),this.$input.bind("input",()=>{let e=this.get_input_value();e&&validate_url(e)?(this.$link.toggle(!0),this.$link_open.attr("href",this.get_input_value())):this.$link.toggle(!1)}),this.$input.on("blur",()=>{setTimeout(()=>{this.$link.toggle(!1)},500)})}setup_iban_field(){this.$input.on("blur",()=>{this.set_formatted_input(this.get_input_value())})}setup_copy_button(){this.df.with_copy_button&&this.$wrapper.find(".control-input").append(`<button class="btn action-btn">
					${frappe.utils.icon("clipboard","sm")}
				</button>`).find(".action-btn").click(()=>{frappe.utils.copy_to_clipboard(this.value)})}setup_barcode_field(){this.$wrapper.find(".control-input").append(`<span class="link-btn">
				<a class="btn-open no-decoration" title="${__("Scan")}">
					${frappe.utils.icon("scan","sm")}
				</a>
			</span>`),this.$scan_btn=this.$wrapper.find(".link-btn"),this.$scan_btn.toggle(!0);let e=this;$(document).on("frappe.ui.Dialog:shown",function(){e.$scan_btn.toggle(!0)}),this.$scan_btn.on("click","a",()=>{new frappe.ui.Scanner({dialog:!0,multiple:!1,on_scan(t){t&&t.result&&t.result.text&&e.set_value(t.result.text)}})})}bind_change_event(){let e=t=>{if(this.change)this.change(t);else{let i=this.get_input_value();this.parse_validate_and_set_in_model(i,t)}};this.$input.on("change",e),this.constructor.trigger_change_on_input_event&&!this.in_grid()&&this.$input.on("input",frappe.utils.debounce(e,500))}setup_autoname_check(){!this.df.parent||(this.meta=frappe.get_meta(this.df.parent),this.meta&&(this.meta.autoname&&this.meta.autoname.substr(0,6)==="field:"&&this.meta.autoname.substr(6)===this.df.fieldname||this.df.fieldname==="__newname")&&this.$input.on("keyup",()=>{if(this.set_description(""),this.doc&&this.doc.__islocal){let e=setTimeout(()=>{this.last_check&&clearTimeout(this.last_check),frappe.db.get_value(this.doctype,this.$input.val(),"name",t=>{t&&t.name&&this.set_description(__("{0} already exists. Select another name",[t.name]))},this.doc.parenttype),this.last_check=null},1e3);this.last_check=e}}))}set_input_attributes(){var e,t;if(["Data","Link","Dynamic Link","Password","Select","Read Only"].includes(this.df.fieldtype)){if((t=(e=this.frm)==null?void 0:e.meta)!=null&&t.issingle)return;this.$input.attr("maxlength",this.df.length||140)}this.$input.attr("data-fieldtype",this.df.fieldtype).attr("data-fieldname",this.df.fieldname).attr("placeholder",this.df.placeholder||""),this.doctype&&this.$input.attr("data-doctype",this.doctype),this.df.input_css&&this.$input.css(this.df.input_css),this.df.input_class&&this.$input.addClass(this.df.input_class)}set_input(e){this.last_value=this.value,this.value=e,this.set_formatted_input(e),this.set_disp_area(e),this.set_mandatory&&this.set_mandatory(e)}set_formatted_input(e){this.$input&&this.$input.val(this.format_for_input(e))}get_input_value(){return this.$input?this.$input.val():void 0}format_for_input(e){return this.df.options=="IBAN"&&e?frappe.utils.get_formatted_iban(e):e==null?"":e}parse(e){return this.df.options=="IBAN"&&e?e.replaceAll(" ",""):e}validate(e){if(!e)return"";if(this.df.is_filter)return e;if(this.df.options=="Phone")return this.df.invalid=!validate_phone(e),e;if(this.df.options=="Name")return this.df.invalid=!validate_name(e),e;if(this.df.options=="Email"){var t=frappe.utils.split_emails(e);if(t){let i=!1;return t.forEach(function(n){validate_email(n)||(i=!0)}),this.df.invalid=i,e}else return""}else return this.df.options=="URL"&&(this.df.invalid=!validate_url(e)),e}toggle_container_scroll(e,t,i=!1){let n=this.$input.parents(e)[0];n&&$(n).toggleClass(t,i)}in_grid(){return this.grid||this.layout&&this.layout.grid}},he(ks,"html_element","input"),he(ks,"input_type","text"),he(ks,"trigger_change_on_input_event",!0),ks);frappe.ui.form.ControlReadOnly=frappe.ui.form.ControlData;var kY=ut(dh());frappe.ui.form.ControlFloat=class extends frappe.ui.form.ControlInt{parse(e){return e=this.eval_expression(e),isNaN(parseFloat(e))?null:flt(e,this.get_precision())}format_for_input(e){return e==null||isNaN(Number(e))?"":format_number(e,this.get_number_format(),this.get_precision())}get_number_format(){var t;if(this.df.fieldtype==="Float"&&!((t=this.df.options)!=null&&t.trim()))return;let e=frappe.meta.get_field_currency(this.df,this.get_doc());return get_number_format(e)}get_precision(){return this.df.precision||cint(frappe.boot.sysdefaults.float_precision,null)}};frappe.ui.form.ControlPercent=frappe.ui.form.ControlFloat;frappe.ui.form.ControlCurrency=class extends frappe.ui.form.ControlFloat{get_precision(){return typeof this.df.precision!="number"&&!this.df.precision&&(frappe.boot.sysdefaults.currency_precision?this.df.precision=frappe.boot.sysdefaults.currency_precision:this.df.precision=get_number_format_info(this.get_number_format()).precision),this.df.precision}};var Eu;frappe.ui.form.ControlDate=(Eu=class extends frappe.ui.form.ControlData{make_input(){super.make_input(),this.make_picker()}make_picker(){this.set_date_options(),this.set_datepicker(),this.set_t_for_today()}set_formatted_input(e){if(e==="Today"&&(e=this.get_now_date()),super.set_formatted_input(e),this.timepicker_only||!this.datepicker)return;if(!e){this.datepicker.clear();return}let t=this.last_value&&this.last_value!==e;t||(this.datepicker.selectedDates.length>0?t=moment(this.datepicker.selectedDates[0]).format(this.date_format)!==e:t=!0),t&&this.datepicker.selectDate(frappe.datetime.str_to_obj(e))}set_date_options(){let e=frappe.boot.sysdefaults,t="en";frappe.boot.user&&(t=frappe.boot.user.language),$.fn.datepicker.language[t]||(t="en");let i=e&&e.date_format?e.date_format:"yyyy-mm-dd";this.today_text=__("Today"),this.date_format=frappe.defaultDateFormat,this.datepicker_options=ze({language:t,autoClose:!0,todayButton:!0,dateFormat:i,startDate:this.get_start_date(),keyboardNav:!1,minDate:this.df.min_date,maxDate:this.df.max_date,firstDay:frappe.datetime.get_first_day_of_the_week_index(),onSelect:()=>{this.$input.trigger("change")},onShow:()=>{this.datepicker.$datepicker.find(".datepicker--button:visible").text(this.today_text),this.update_datepicker_position()},onRenderCell:(n,s)=>{if(s==="day"&&this.df.disabled_dates){let o=moment(n).format("YYYY-MM-DD");if(this.df.disabled_dates.includes(o))return{disabled:!0,classes:"disabled"}}}},this.get_df_options())}get_start_date(){return this.get_now_date()}set_datepicker(){this.$input.datepicker(this.datepicker_options),this.datepicker=this.$input.data("datepicker"),this.datepicker.$datepicker.find('[data-action="today"]').click(()=>{this.datepicker.selectDate(this.get_now_date()),this.datepicker.hide()})}update_datepicker_position(){if(!this.frm)return;let e=this.$input,t=this.datepicker.$datepicker,i=e.offset().top,n=e.outerHeight(),s=$(window).height(),o=$(window).scrollTop(),a=t.outerHeight()+12,l=s-(i-o+n),f=i-o,m="bottom left";l<a&&f>a?(m="top left",this.timepicker_only&&(this.datepicker.opts.offset=-30)):(m="bottom left",this.timepicker_only&&(this.datepicker.opts.offset=12)),this.datepicker.update("position",m)}get_now_date(){return frappe.datetime.convert_to_system_tz(frappe.datetime.now_date(!0),!1).toDate()}set_t_for_today(){var e=this;this.$input.on("keydown",function(t){if(t.which===84)return e.df.fieldtype=="Date"&&e.set_value(frappe.datetime.nowdate()),e.df.fieldtype=="Datetime"&&e.set_value(frappe.datetime.now_datetime()),e.df.fieldtype=="Time"&&e.set_value(frappe.datetime.now_time()),!1})}eval_expression(e,t){if(!e||!t)return e;let i=e.match(/[\+\-]\s*\d*\.?\d+\s*[a-zA-Z]/g),n;switch(t){case"date":n="YYYY-MM-DD",e=frappe.datetime.user_to_str(e,!1);break;case"time":n="HH:mm:ss",e=frappe.datetime.user_to_str(e,!0);break;case"datetime":n="YYYY-MM-DD HH:mm:ss",e=frappe.datetime.user_to_str(e,!1);break}if(!i)return e;let s={};return i.forEach(o=>{let a=o.match(/[\+\-]/)[0],l=flt(o.match(/\d*\.?\d+/)[0]),f=o.match(/[a-zA-Z]+/)[0],m;a==="-"&&(l=-l),["datetime","date"].includes(t)&&(f.toLowerCase()==="d"?m="days":f==="M"?m="months":f.toLowerCase()==="y"&&(m="years")),["datetime","time"].includes(t)&&(f.toLowerCase()==="h"?m="hours":f==="m"?m="minutes":f.toLowerCase()==="s"&&(m="seconds")),m&&(s[m]=(s[m]||0)+l)}),Object.keys(s).length&&(e=moment(e,n).add(s).format(n)),e}parse(e){if(e)return e=="Invalid date"?"":this.eval_expression(e,"date")}format_for_input(e){return e?frappe.datetime.str_to_user(e,!1,!0):""}validate(e){if(e&&!frappe.datetime.validate(e)){let t=frappe.sys_defaults,i=t&&t.date_format?t.date_format:"yyyy-mm-dd";return frappe.msgprint(__("Date {0} must be in format: {1}",[e,i])),""}return e}get_df_options(){let e=this.df.options;if(!e)return{};let t={};if(typeof e=="string")try{t=JSON.parse(e)}catch(i){console.warn(`Invalid JSON in options of "${this.df.fieldname}"`)}else typeof e=="object"&&(t=e);return t}},he(Eu,"trigger_change_on_input_event",!1),Eu);frappe.ui.form.ControlTime=class extends frappe.ui.form.ControlDate{set_formatted_input(e){super.set_formatted_input(e)}make_input(){this.timepicker_only=!0,super.make_input()}make_picker(){this.set_time_options(),this.set_datepicker(),this.refresh()}set_time_options(){let e=frappe.boot.sysdefaults,t=e&&e.time_format?e.time_format:"HH:mm:ss";this.time_format=frappe.defaultTimeFormat,this.datepicker_options={language:"en",timepicker:!0,onlyTimepicker:!0,timeFormat:t.toLowerCase().replace("mm","ii"),startDate:frappe.datetime.now_time(!0),onSelect:()=>{moment(this.get_value(),t).format("HH:mm:ss")!=moment(this.value,t).format("HH:mm:ss")&&this.$input.trigger("change")},onShow:()=>{$(".datepicker--button:visible").text(__("Now")),this.update_datepicker_position()},keyboardNav:!1,todayButton:!0}}set_input(e){if(super.set_input(e),!this.datepicker)return;if(!e){this.datepicker.clear();return}let t=this.last_value&&this.last_value!==e,i=frappe.sys_defaults.time_format||"HH:mm:ss";t||(this.datepicker.selectedDates.length>0?t=moment(this.datepicker.selectedDates[0]).format(this.time_format)!==e:t=!0),t&&this.datepicker.selectDate(frappe.datetime.moment_to_date_obj(moment(e,i)))}set_datepicker(){if(this.$input.datepicker(this.datepicker_options),this.datepicker=this.$input.data("datepicker"),this.datepicker.$datepicker.find('[data-action="today"]').click(()=>{this.datepicker.selectDate(frappe.datetime.now_time(!0)),this.datepicker.hide()}),this.datepicker.opts.timeFormat.indexOf("s")==-1){let e=this.datepicker.timepicker;e.$seconds.parent().css("display","none"),e.$secondsText.css("display","none"),e.$secondsText.prev().css("display","none")}}set_description(){let{description:e}=this.df,{time_zone:t}=frappe.sys_defaults;frappe.datetime.is_system_time_zone()||(e?e.includes(t)||(this.df.description+="<br>"+t):this.df.description=t),super.set_description()}parse(e){if(e)return e=="Invalid date"&&(e=""),this.eval_expression(e,"time")}format_for_input(e){return e?frappe.datetime.str_to_user(e,!0):""}validate(e){if(e&&!frappe.datetime.validate(e)){let t=frappe.sys_defaults,i=t&&t.time_format?t.time_format:"HH:mm:ss";return frappe.msgprint(__("Time {0} must be in format: {1}",[e,i])),""}return e}};frappe.ui.form.ControlDatetime=class extends frappe.ui.form.ControlDate{set_formatted_input(e){if(this.datetime_format="DD-MM-YYYY HH:mm:ss",this.timepicker_only||!this.datepicker)return;if(e)e.toLowerCase()==="today"?e=this.get_now_date():e.toLowerCase()==="now"&&(e=frappe.datetime.now_datetime());else{this.datepicker.clear();return}let t=this.last_value&&this.last_value!==e;e=this.format_for_input(e),this.$input&&this.$input.val(e),t||(this.datepicker.selectedDates.length>0?t=moment(this.datepicker.selectedDates[0]).format(this.datetime_format)!==e:t=!0),t&&this.datepicker.selectDate(frappe.datetime.user_to_obj(e))}get_start_date(){this.value=this.value==null||this.value==""?void 0:this.value;let e=frappe.datetime.convert_to_user_tz(this.value);return frappe.datetime.str_to_obj(e)}set_date_options(){super.set_date_options(),this.today_text=__("Now");let e=frappe.boot.sysdefaults;this.date_format=frappe.defaultDatetimeFormat;let t=e&&e.time_format?e.time_format:"HH:mm:ss";$.extend(this.datepicker_options,{timepicker:!0,timeFormat:t.toLowerCase().replace("mm","ii")})}get_now_date(){return frappe.datetime.now_datetime(!0)}parse(e){return e&&(e=this.eval_expression(e,"datetime"),frappe.datetime.is_system_time_zone()||(e=frappe.datetime.convert_to_system_tz(e,!0)),e=="Invalid date"&&(e="")),e}format_for_input(e){return e?frappe.datetime.str_to_user(e,!1):""}set_description(){let e=this.df.description,t=this.get_user_time_zone();this.df.hide_timezone||(e?e.includes(t)||(this.df.description+="<br>"+t):this.df.description=t),super.set_description()}get_user_time_zone(){return frappe.boot.time_zone?frappe.boot.time_zone.user:frappe.sys_defaults.time_zone}set_datepicker(){if(super.set_datepicker(),this.datepicker.opts.timeFormat.indexOf("s")==-1){let e=this.datepicker.timepicker;e.$seconds.parent().css("display","none"),e.$secondsText.css("display","none"),e.$secondsText.prev().css("display","none")}}get_model_value(){let e=super.get_model_value();return!e&&!this.doc&&(e=this.last_value),e?frappe.datetime.get_datetime_as_string(e):""}};frappe.ui.form.ControlDateRange=class extends frappe.ui.form.ControlData{make_input(){super.make_input(),this.set_date_options(),this.set_datepicker(),this.refresh()}set_date_options(){var i,n;var e=this;let t=(n=(i=frappe.boot)==null?void 0:i.user)==null?void 0:n.language;this.datepicker_options={language:$.fn.datepicker.language[t]?t:"en",range:!0,autoClose:!0,toggleSelected:!1,firstDay:frappe.datetime.get_first_day_of_the_week_index()},this.datepicker_options.dateFormat=frappe.boot.sysdefaults.date_format||"yyyy-mm-dd",this.datepicker_options.onSelect=function(){e.$input.trigger("change")}}set_datepicker(){this.$input.datepicker(this.datepicker_options),this.datepicker=this.$input.data("datepicker")}set_input(e,t){if(this.last_value=this.value,e&&t?this.value=[e,t]:this.value=e,this.value){let i=this.format_for_input(this.value[0],this.value[1]);this.$input&&this.$input.val(i)}else this.$input&&this.$input.val("");this.set_disp_area(e||""),this.set_mandatory&&this.set_mandatory(e)}parse(e){if(e==null||typeof e=="object")return e;let t=__("{0} to {1}").replace("{0}","").replace("{1}","");if(e=e&&e.replace(t,","),e&&e.includes(",")){var i=e.split(","),n=moment(frappe.datetime.user_to_obj(i[0])).format("YYYY-MM-DD"),s=moment(frappe.datetime.user_to_obj(i[i.length-1])).format("YYYY-MM-DD");return[n,s]}}format_for_input(e,t){return e&&t?(e=frappe.datetime.str_to_user(e,!1,!0),t=frappe.datetime.str_to_user(t,!1,!0),__("{0} to {1}",[e,t])):""}};var ra;frappe.ui.form.ControlSelect=(ra=class extends frappe.ui.form.ControlData{make_input(){super.make_input();let e=this.df.input_class&&this.df.input_class.includes("input-xs");this.set_icon(e),this.df.placeholder&&this.set_placeholder(e),this.$input.addClass("ellipsis"),this.set_options()}set_icon(e){let t=`<div class="select-icon ${e?"xs":""}">
				${frappe.utils.icon("select",e?"xs":"sm")}
			</div>`;this.only_input?this.$wrapper.append(t):this.$wrapper.find(".control-input").addClass("flex align-center").append(t)}set_placeholder(e){let t=`<div class="placeholder ellipsis text-extra-muted ${e?"xs":""}">
				<span>${this.df.placeholder}</span>
			</div>`;this.only_input?this.$wrapper.append(t):this.$wrapper.find(".control-input").append(t),this.toggle_placeholder(),this.$input&&this.$input.on("select-change",()=>this.toggle_placeholder())}set_formatted_input(e){e==null&&(e=""),this.set_options(e),super.set_formatted_input(e);var t="";this.$input&&(t=this.$input.val()),e&&t&&e!==t&&this.set_model_value(t)}set_options(e){var t=this.df.options||[];if(typeof this.df.options=="string"&&(t=this.df.options.split(`
`)),JSON.stringify(t)!==this.last_options&&(this.last_options=JSON.stringify(t),this.$input)){var i=this.$input.find(":selected").val();this.$input.empty(),frappe.ui.form.add_options(this.$input,t||[],this.df.sort_options,this.df.context||this.df.parent||this.doctype),e===void 0&&i&&this.$input.val(i)}}get_file_attachment_list(){if(!!this.frm){var e=frappe.model.docinfo[this.frm.doctype][this.frm.docname];if(e&&e.attachments){this.set_description("");var t=[""];return $.each(e.attachments,function(i,n){t.push(n.file_url)}),t}else return this.set_description(__("Please attach a file first.")),[""]}}toggle_placeholder(){let e=Boolean(this.$input.find("option:selected").text());this.$wrapper.find(".placeholder").toggle(!e)}},he(ra,"html_element","select"),he(ra,"trigger_change_on_input_event",!1),ra);frappe.ui.form.add_options=function(r,e,t,i){let n=$(r);if(!Array.isArray(e))return n;let s=e.map(o=>pw(o,i));return t&&(s=s.sort((o,a)=>cstr(o.label).localeCompare(cstr(a.label)))),s.map(o=>$("<option>").html(cstr(o.label)).attr("value",o.value).prop("disabled",o.is_disabled).prop("selected",o.is_selected)).forEach(o=>o.appendTo(n.get(0))),n.get(0).selectedIndex=0,n.trigger("select-change"),n};(function(r){r.fn.add_options=function(t,i){return frappe.ui.form.add_options(this.get(0),t,i)},r.fn.set_working=function(){this.prop("disabled",!0)},r.fn.done_working=function(){this.prop("disabled",!1)};let e=r.fn.val;r.fn.val=function(){let t=e.apply(this,arguments);return arguments.length>0&&r(this).trigger("select-change"),t}})(jQuery);function pw(r,e){let t=null,i=null,n=!1,s=!1;if(!is_null(r)){let o=is_null(r.value),a=is_null(r.label);n=Boolean(r.disabled),s=Boolean(r.selected),o&&a&&typeof r!="object"?(t=r,i=__(r,null,e)):(t=o?"":r.value,i=a?__(t,null,e):__(r.label,null,e))}return{value:t,label:i,is_disabled:n,is_selected:s}}var na=ut(Es());frappe.ui.form.recent_link_validations={};var Ou;frappe.ui.form.ControlLink=(Ou=class extends frappe.ui.form.ControlData{make_input(){var e=this;$(`<div class="link-field ui-front" style="position: relative;">
			<input type="text" class="input-with-feedback form-control">
			<span class="link-btn">
				<a class="btn-open" tabIndex='-1' style="display: inline-block;" title="${__("Open Link")}">
					${frappe.utils.icon("arrow-right","xs")}
				</a>
			</span>
		</div>`).prependTo(this.input_area),this.$input_area=$(this.input_area),this.$input=this.$input_area.find("input"),this.$link=this.$input_area.find(".link-btn"),this.$link_open=this.$link.find(".btn-open"),this.set_input_attributes(),this.$input.on("focus",function(){e.$input.val()||e.$input.val("").trigger("input"),e.show_link_and_clear_buttons()}),this.$input.on("blur",function(){setTimeout(function(){e.$link.toggle(!1),e.hide_link_and_clear_buttons()},250)}),this.$input_area.on("mouseenter",()=>{this.show_link_and_clear_buttons()}),this.$input_area.on("mouseleave",()=>{this.$input.is(":focus")||this.hide_link_and_clear_buttons()}),this.$input.attr("data-target",this.df.options),this.input=this.$input.get(0),this.has_input=!0,this.translate_values=!0,this.setup_buttons(),this.setup_awesomeplete(),this.bind_change_event()}show_link_and_clear_buttons(){if(this.$input.val()&&this.get_options()){let e=this.get_options(),t=this.get_input_value();this.$link.toggle(!0),this.$link_open.attr("href",frappe.utils.get_form_link(e,t))}}hide_link_and_clear_buttons(){this.$link.toggle(!1)}get_options(){return this.df.options}get_reference_doctype(){return this.doctype?this.doctype:frappe.get_route&&frappe.get_route()[0]==="List"?frappe.get_route()[1]:null}setup_buttons(){this.only_input&&!this.with_link_btn&&this.$input_area.find(".link-btn").remove()}set_formatted_input(e){super.set_formatted_input(),e&&(this.title_value_map||(this.title_value_map={}),this.set_link_title(e))}get_translated(e){return this.is_translatable()?__(e):e}is_translatable(){var e;return(((e=frappe.boot)==null?void 0:e.translated_doctypes)||[]).includes(this.get_options())}is_title_link(){var e;return(((e=frappe.boot)==null?void 0:e.link_title_doctypes)||[]).includes(this.get_options())}async set_link_title(e){let t=this.get_options();if(!t||!this.is_title_link()){this.translate_and_set_input_value(e,e);return}let i=frappe.utils.get_link_title(t,e)||await frappe.utils.fetch_link_title(t,e);this.translate_and_set_input_value(i,e)}translate_and_set_input_value(e,t){let i=this.get_translated(e);this.title_value_map[i]=t,this.set_input_value(i)}parse_validate_and_set_in_model(e,t,i){return this.parse&&(e=this.parse(e,i)),i&&(this.label=this.get_translated(i),frappe.utils.add_link_title(this.df.options,e,i)),this.validate_and_set_in_model(e,t)}parse(e){return strip_html(e)}get_input_value(){var e;if(this.$input){let t=this.$input.val();return((e=this.title_value_map)==null?void 0:e[t])||t}return null}get_label_value(){return this.$input?this.$input.val():""}set_input_value(e){this.$input&&this.$input.val(e)}open_advanced_search(){var e=this.get_options();if(!!e)return new frappe.ui.form.LinkSelector({doctype:e,target:this,txt:this.get_input_value()}),!1}new_doc(){var e=this.get_options(),t=this;if(!e)return;let i=this.df;return this.frm&&this.frm.doctype!==this.df.parent&&(i=this.frm.get_docfield(this.doc.parentfield,this.df.fieldname)),i&&i.get_route_options_for_new_doc?frappe.route_options=i.get_route_options_for_new_doc(this):frappe.route_options={},frappe.route_options.name_field=this.get_label_value(),frappe._from_link=frappe.utils.deep_clone(this),frappe._from_link_scrollY=$(document).scrollTop(),frappe.ui.form.make_quick_entry(e,n=>t.set_value(n.name)),!1}setup_awesomeplete(){let e=this;this.$input.cache={},this.awesomplete=new na.default(e.input,{tabSelect:!0,minChars:0,maxItems:99,autoFirst:!0,list:[],replace:function(t){this.input.value=e.get_translated(t.label||t.value)},data:function(t){return{label:e.get_translated(t.label||t.value),value:t.value}},filter:function(){return!0},item:function(t){let i=this.get_item(t.value);i.label||(i.label=i.value);let n=frappe.utils.escape_html(e.get_translated(i.label)),s=i.html||"<strong>"+n+"</strong>";return i.description&&(e.is_title_link()||i.value!==i.description)&&(s+='<br><span class="small">'+__(frappe.utils.escape_html(i.description))+"</span>"),$('<div role="option">').on("click",o=>{e.awesomplete.select(o.currentTarget,o.currentTarget),e.show_link_and_clear_buttons()}).data("item.autocomplete",i).prop("aria-selected","false").html(`<p title="${frappe.utils.escape_html(n)}">${s}</p>`).get(0)},sort:function(){return 0}}),this.custom_awesomplete_filter&&this.custom_awesomplete_filter(this.awesomplete),this.$input.on("input",frappe.utils.debounce(function(t){var o;var i=e.get_options();if(!!i){e.$input.cache[i]||(e.$input.cache[i]={});var n=t.target.value;e.$input.cache[i][n]!=null&&(e.awesomplete.list=e.$input.cache[i][n]);var s={txt:n,doctype:i,ignore_user_permissions:e.df.ignore_user_permissions,reference_doctype:e.get_reference_doctype()||"",page_length:cint((o=frappe.boot.sysdefaults)==null?void 0:o.link_field_results_limit)||10};e.set_custom_query(s),frappe.call({type:"POST",method:"frappe.desk.search.search_link",no_spinner:!0,args:s,callback:function(a){if(!window.Cypress&&!e.$input.is(":focus"))return;a.message=e.merge_duplicates(a.message);let l=e.df.filter_description?e.df.filter_description:s.filters?e.get_filter_description(s.filters):null;if(l&&a.message.push({html:`<span class="text-muted" style="line-height: 1.5">${l}</span>`,value:"",action:()=>{}}),!e.df.only_select){frappe.model.can_create(i)&&a.message.push({html:"<span class='link-option'><i class='fa fa-plus' style='margin-right: 5px;'></i> "+__("Create a new {0}",[__(e.get_options())])+"</span>",label:__("Create a new {0}",[__(e.get_options())]),value:"create_new__link_option",action:e.new_doc});let f=frappe.ui.form.ControlLink.link_options&&frappe.ui.form.ControlLink.link_options(e);f&&(a.message=a.message.concat(f)),locals&&locals.DocType&&a.message.push({html:"<span class='link-option'><i class='fa fa-search' style='margin-right: 5px;'></i> "+__("Advanced Search")+"</span>",label:__("Advanced Search"),value:"advanced_search__link_option",action:e.open_advanced_search})}e.$input.cache[i][n]=a.message,e.awesomplete.list=e.$input.cache[i][n],e.toggle_href(i),a.message.forEach(f=>{frappe.utils.add_link_title(i,f.value,f.label)})}})}},500)),this.$input.on("blur",function(){if(e.selected){e.selected=!1;return}let t=e.get_input_value(),i=e.get_label_value(),n=e.last_value||"",s=e.label||"";t!==n&&e.parse_validate_and_set_in_model(t,null,i)}),this.$input.on("awesomplete-open",()=>{this.autocomplete_open=!0,e.get_label_value()||e.$link.toggle(!1)}),this.$input.on("awesomplete-close",t=>{this.autocomplete_open=!1,e.get_label_value()||e.$link.toggle(!1)}),this.$input.on("awesomplete-select",function(t){var i=t.originalEvent,n=e.awesomplete.get_item(i.text.value);e.autocomplete_open=!1;let s=9;if(t.keyCode===s)return t.preventDefault(),e.awesomplete.close(),!1;n.action&&(n.value="",n.label="",n.action.apply(e)),e.df.remember_last_selected_value&&(frappe.boot.user.last_selected_values[e.df.options]=n.value),e.parse_validate_and_set_in_model(n.value,null,n.label)}),this.$input.on("awesomplete-selectcomplete",function(t){t.originalEvent.text.value.indexOf("__link_option")!==-1&&e.$input.val("")})}show_untranslated(){let e=this.get_input_value();this.is_translatable()&&this.set_input_value(e)}merge_duplicates(e){return e.reduce((t,i)=>{if(t.length===0)return[i];let n=t.find(s=>s.value===i.value);return n?(i.description&&(n.description+=`, ${i.description}`),[...t]):[...t,i]},[])}toggle_href(e){frappe.model.can_select(e)&&!frappe.model.can_read(e)?this.$input_area.find(".link-btn").addClass("hide"):this.$input_area.find(".link-btn").removeClass("hide")}get_filter_description(e){let t=this.get_options(),i=[],n=null;if(frappe.model.with_doctype(t,()=>{n=frappe.get_meta(t)}),Array.isArray(e))i=e;else for(let a in e){let l=e[a];Array.isArray(l)||(l=["=",l]),i.push([a,...l])}i=i.map(a=>a.length===3?[t,...a]:a);function s(a){let l=a[0],f=a[1],m=frappe.meta.get_docfield(l,f),b=m?m.label:frappe.model.unscrub(f);m&&m.fieldtype==="Check"&&(a[3]=a[3]?__("Yes"):__("No")),a[3]&&Array.isArray(a[3])&&a[3].length>5&&(a[3]=a[3].slice(0,5),a[3].push("..."));let h;return a[3]&&Array.isArray(a[3])?h=a[3].map(p=>String(__(p)).bold()).join(", "):a[3]==null||a[3]===""?h=__("empty").bold():h=String(__(a[3])).bold(),[__(b).bold(),__(a[2]),h].join(" ")}let o=i.map(s).join(", ");return __("Filters applied for {0}",[o])}set_custom_query(e){let t=(a,l)=>{if(a)return!0;if(this.frm){let f=frappe.meta.get_docfield(this.frm.doctype,l);return!f||!["Link","Dynamic Link"].includes(f.fieldtype)}else return a!==void 0},i=a=>($.each(a,(l,f)=>{t(f,l)||delete a[l]}),a);if(this.df.link_filters&&!!this.df.link_filters.length&&this.apply_link_field_filters(),this.get_query||this.df.get_query){var n=this.get_query||this.df.get_query;if($.isPlainObject(n)){var s=null;n.filters?s=n.filters:n.query?e.query=n:s=n,s&&(s=i(s),$.extend(e,s),e.filters=s)}else if(typeof n=="string")e.query=n;else{var o=n(this.frm&&this.frm.doc||this.doc,this.doctype,this.docname);typeof o=="string"?e.query=o:$.isPlainObject(o)&&(o.filters&&i(o.filters),o.translate_values!==void 0&&(this.translate_values=o.translate_values),$.extend(e,o),e.filters=o.filters)}}this.df.filters&&(i(this.df.filters),e.filters||(e.filters={}),$.extend(e.filters,this.df.filters))}apply_link_field_filters(){let e=JSON.parse(this.df.link_filters),t=this.parse_filters(e);this.get_query=function(){return{filters:t}}}parse_filters(e){let t={};return e.forEach(i=>{var l;let[n,s,o,a]=i;if((l=a==null?void 0:a.startsWith)!=null&&l.call(a,"eval:")){a=a.split("eval:")[1];let f={doc:this.doc,parent:this.doc.parenttype?this.frm.doc:null,frappe};a=frappe.utils.eval(a,f)}t[s]=[o,a]}),t}validate(e){return this._validated||this.df.options=="[Select]"||this.df.ignore_link_validation?e:this.validate_link_and_fetch(e)}validate_link_and_fetch(e){let t=this.get_options();if(!t)return;let i=Object.values(this.fetch_map);if(!i.length&&this.df.__default_value===e)return e;let n=s=>{var a;let o="";for(let[l,f]of Object.entries(this.fetch_map))e&&(o=s[f]),(a=this.layout)!=null&&a.set_value?this.layout.set_value(l,o):this.frm&&frappe.model.set_value(this.df.parent,this.docname,l,o,this.df.fieldtype)};return e?frappe.xcall("frappe.client.validate_link",{doctype:t,docname:e,fields:i},"GET",{cache:!i.length}).then(s=>(this.frm&&!this.docname||!i.length||n(s),s.name)):(n({}),e)}fetch_map_for_quick_entry(){let e=this,t={};function i(s,o,a,l){l||(l="*"),e.layout.fetch_dict||(e.layout.fetch_dict={}),e.layout.fetch_dict.setDefault(l,{}).setDefault(s,{})[a]=o}function n(s){if((["Data","Read Only","Text","Small Text","Currency","Check","Text Editor","Attach Image","Code","Link","Float","Int","Date","Datetime","Select","Duration","Time","Percent","Phone","Barcode","Autocomplete","Icon","Color","Rating"].includes(s.fieldtype)||s.read_only==1||s.is_virtual==1)&&s.fetch_from&&s.fetch_from.indexOf(".")!=-1){var a=s.fetch_from.split(".");i(a[0],a[1],s.fieldname,s.parent)}}$.each(this.layout.fields,(s,o)=>n(o));for(let s of["*",this.df.parent])this.layout.fetch_dict||(this.layout.fetch_dict={}),this.layout.fetch_dict[s]&&this.layout.fetch_dict[s][this.df.fieldname]&&Object.assign(t,this.layout.fetch_dict[s][this.df.fieldname]);return t}get fetch_map(){let e={};if(!this.frm&&this.layout&&this.layout.fields)return this.fetch_map_for_quick_entry();if(!this.frm)return e;for(let t of["*",this.df.parent])this.frm.fetch_dict[t]&&this.frm.fetch_dict[t][this.df.fieldname]&&Object.assign(e,this.frm.fetch_dict[t][this.df.fieldname]);return e}},he(Ou,"trigger_change_on_input_event",!1),Ou);na.default&&(na.default.prototype.get_item=function(r){return this._list.find(function(e){return e.value===r})});frappe.ui.form.ControlDynamicLink=class extends frappe.ui.form.ControlLink{get_options(){let e="";if(this.df.get_options)e=this.df.get_options(this);else if(this.docname==null&&cur_dialog)e=cur_dialog.get_value(this.df.options);else if(cur_frm)e=frappe.model.get_value(this.df.parent,this.docname,this.df.options);else if(cur_list)e=cur_list.page.fields_dict[this.df.options].get_input_value();else if(cur_page){let t=`input[data-fieldname="${this.df.options}"]`,i=$(cur_page.page).find(t);e=i.length?i.val():null}return frappe.model.is_single(e)&&frappe.throw(__("{0} is not a valid DocType for Dynamic Link",[e.bold()])),e}};var sa;frappe.ui.form.ControlText=(sa=class extends frappe.ui.form.ControlData{make_wrapper(){super.make_wrapper();let e=this.$wrapper.find(".like-disabled-input");e.addClass("for-description"),e.css("white-space-collapse","preserve"),this.df.max_height&&e.css({"max-height":this.df.max_height,overflow:"auto"})}make_input(){super.make_input(),this.$input.css({height:"300px"}),this.df.max_height&&this.$input.css({"max-height":this.df.max_height})}},he(sa,"html_element","textarea"),he(sa,"horizontal",!1),sa);frappe.ui.form.ControlLongText=frappe.ui.form.ControlText;frappe.ui.form.ControlSmallText=class extends frappe.ui.form.ControlText{make_input(){super.make_input(),this.$input.css({height:"150px"})}};frappe.ui.form.ControlCode=class extends frappe.ui.form.ControlText{make_input(){this.editor||this.load_lib().then(()=>this.make_ace_editor())}refresh(){super.refresh(),this.df.fieldtype==="Code"&&this.setup_copy_button()}setup_copy_button(){var e;if(this.get_status()==="Write"){(e=this.copy_button)==null||e.remove(),this.copy_button=null;return}this.copy_button||(this.copy_button=$(`<button
				class="btn icon-btn"
				style="position: absolute; top: 32px; right: 5px;"
				onmouseover="this.classList.add('btn-default')"
				onmouseout="this.classList.remove('btn-default')"
				title="${__("Copy to Clipboard")}"
			>
				<svg class="es-icon es-line  icon-sm" style="" aria-hidden="true">
					<use class="" href="#es-line-copy-light"></use>
				</svg>
			</button>`),this.copy_button.on("click",()=>{frappe.utils.copy_to_clipboard(this.get_model_value()||this.get_value())}),this.copy_button.appendTo(this.$wrapper))}make_ace_editor(){if(this.editor)return;this.ace_editor_target=$('<div class="ace-editor-target"></div>').appendTo(this.input_area),this.ace_editor_target.addClass("border rounded"),this.ace_editor_target.css("height",300),this.df.max_height&&this.ace_editor_target.css("max-height",this.df.max_height);let e=window.ace;this.editor=e.edit(this.ace_editor_target.get(0)),this.df.max_lines||this.df.min_lines||this.df.max_height?(this.df.max_lines&&this.editor.setOption("maxLines",this.df.max_lines),this.df.min_lines&&this.editor.setOption("minLines",this.df.min_lines)):(this.expanded=!1,this.$expand_button=$(`<button class="btn btn-xs btn-default mt-2">${this.get_button_label()}</button>`).click(()=>{this.expanded=!this.expanded,this.refresh_height(),this.toggle_label()}).appendTo(this.$input_wrapper)),this.disabled&&(this.editor.setReadOnly(!0),$(this.ace_editor_target).css("pointer-events","none")),this.editor.setTheme("ace/theme/tomorrow"),this.editor.setOption("placeholder",this.df.placeholder),this.editor.setOption("showPrintMargin",!1),this.editor.setOption("wrap",this.df.wrap),this.set_language(),this.is_setting_content=!1,this.editor.session.on("change",()=>{this.is_setting_content||t()});let t=frappe.utils.debounce(()=>{let i=this.get_input_value();this.parse_validate_and_set_in_model(i)},300);Object.defineProperty(this.df,"autocompletions",{configurable:!0,get(){return this._autocompletions||[]},set:i=>{let n=i;typeof n!="function"&&(n=()=>i),this._autocompletions||(this._autocompletions=[]),this._autocompletions.push(n),this.setup_autocompletion()}})}setup_autocompletion(e){if(this._autocompletion_setup)return;let t=window.ace,i=(n,s,o,a,l)=>{if(a.length===0){l(null,[]);return}let m=(()=>{let b=this._autocompletions||[],h=[];for(let p of b){let u=p({editor:n,session:s,pos:o,prefix:a});h.push(...u)}return h})();m.length&&l(null,m.map(b=>(typeof b=="string"&&(b={value:b}),{name:"frappe",value:b.value,score:b.score,meta:b.meta,caption:b.caption})))};t.config.loadModule("ace/ext/language_tools",n=>{this.editor.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}),n.addCompleter({getCompletions:e||i})}),this._autocompletion_setup=!0}refresh_height(){this.ace_editor_target.css("height",this.expanded?600:300),this.editor.resize()}toggle_label(){this.$expand_button&&this.$expand_button.text(this.get_button_label())}get_button_label(){return this.expanded?__("Collapse",null,"Shrink code field."):__("Expand",null,"Enlarge code field.")}set_language(){let e={Javascript:"ace/mode/javascript",JS:"ace/mode/javascript",Python:"ace/mode/python",Py:"ace/mode/python",PythonExpression:"ace/mode/python",HTML:"ace/mode/html",CSS:"ace/mode/css",Markdown:"ace/mode/markdown",SCSS:"ace/mode/scss",JSON:"ace/mode/json",Golang:"ace/mode/golang",Go:"ace/mode/golang",Jinja:"ace/mode/django",SQL:"ace/mode/sql"},t=this.df.options,i=Object.keys(e);t&&!i.includes(t)&&console.warn(`Invalid language option provided for field "${this.df.label}". Valid options are ${i.join(", ")}.`);let n=e[t]||"";this.editor.session.setMode(n),this.editor.setKeyboardHandler(`ace/keyboard/${frappe.boot.user.code_editor_type||"vscode"}`)}parse(e){return e==null&&(e=""),e}set_formatted_input(e){return this.load_lib().then(()=>{!this.editor||(e||(e=""),e!==this.get_input_value()&&(this.is_setting_content=!0,this.editor.session.setValue(e),this.is_setting_content=!1))})}get_input_value(){return this.editor?this.editor.session.getValue():""}set_focus(){var e;(e=this.editor)==null||e.focus()}load_lib(){return this.library_loaded?this.library_loaded:(frappe.boot.developer_mode?this.root_lib_path="/assets/frappe/node_modules/ace-builds/src-noconflict/":this.root_lib_path="/assets/frappe/node_modules/ace-builds/src-min-noconflict/",this.library_loaded=new Promise(e=>{frappe.require(this.root_lib_path+"ace.js",()=>{window.ace.config.set("basePath",this.root_lib_path),e()})}),this.library_loaded)}};var mw=typeof global=="object"&&global&&global.Object===Object&&global,oa=mw;var _w=typeof self=="object"&&self&&self.Object===Object&&self,gw=oa||_w||Function("return this")(),bt=gw;var yw=bt.Symbol,or=yw;var hh=Object.prototype,bw=hh.hasOwnProperty,vw=hh.toString,Os=or?or.toStringTag:void 0;function ww(r){var e=bw.call(r,Os),t=r[Os];try{r[Os]=void 0;var i=!0}catch(s){}var n=vw.call(r);return i&&(e?r[Os]=t:delete r[Os]),n}var ph=ww;var xw=Object.prototype,Aw=xw.toString;function kw(r){return Aw.call(r)}var mh=kw;var Ew="[object Null]",Ow="[object Undefined]",_h=or?or.toStringTag:void 0;function Sw(r){return r==null?r===void 0?Ow:Ew:_h&&_h in Object(r)?ph(r):mh(r)}var gr=Sw;function Tw(r){return r!=null&&typeof r=="object"}var Ot=Tw;var Cw=Array.isArray,ar=Cw;function Nw(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var St=Nw;function Mw(r){return r}var aa=Mw;var Pw="[object AsyncFunction]",Dw="[object Function]",Lw="[object GeneratorFunction]",$w="[object Proxy]";function Rw(r){if(!St(r))return!1;var e=gr(r);return e==Dw||e==Lw||e==Pw||e==$w}var gn=Rw;var jw=bt["__core-js_shared__"],la=jw;var gh=function(){var r=/[^.]+$/.exec(la&&la.keys&&la.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function Iw(r){return!!gh&&gh in r}var yh=Iw;var qw=Function.prototype,Bw=qw.toString;function Fw(r){if(r!=null){try{return Bw.call(r)}catch(e){}try{return r+""}catch(e){}}return""}var Rr=Fw;var zw=/[\\^$.*+?()[\]{}|]/g,Uw=/^\[object .+?Constructor\]$/,Hw=Function.prototype,Yw=Object.prototype,Ww=Hw.toString,Gw=Yw.hasOwnProperty,Vw=RegExp("^"+Ww.call(Gw).replace(zw,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Kw(r){if(!St(r)||yh(r))return!1;var e=gn(r)?Vw:Uw;return e.test(Rr(r))}var bh=Kw;function Jw(r,e){return r==null?void 0:r[e]}var vh=Jw;function Zw(r,e){var t=vh(r,e);return bh(t)?t:void 0}var Bt=Zw;var Xw=Bt(bt,"WeakMap"),ua=Xw;var wh=Object.create,Qw=function(){function r(){}return function(e){if(!St(e))return{};if(wh)return wh(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}(),xh=Qw;function ex(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}var Ah=ex;function tx(r,e){var t=-1,i=r.length;for(e||(e=Array(i));++t<i;)e[t]=r[t];return e}var ca=tx;var rx=800,ix=16,nx=Date.now;function sx(r){var e=0,t=0;return function(){var i=nx(),n=ix-(i-t);if(t=i,n>0){if(++e>=rx)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}var kh=sx;function ox(r){return function(){return r}}var Eh=ox;var ax=function(){try{var r=Bt(Object,"defineProperty");return r({},"",{}),r}catch(e){}}(),yn=ax;var lx=yn?function(r,e){return yn(r,"toString",{configurable:!0,enumerable:!1,value:Eh(e),writable:!0})}:aa,Oh=lx;var ux=kh(Oh),Sh=ux;function cx(r,e){for(var t=-1,i=r==null?0:r.length;++t<i&&e(r[t],t,r)!==!1;);return r}var Th=cx;var fx=9007199254740991,dx=/^(?:0|[1-9]\d*)$/;function hx(r,e){var t=typeof r;return e=e==null?fx:e,!!e&&(t=="number"||t!="symbol"&&dx.test(r))&&r>-1&&r%1==0&&r<e}var fa=hx;function px(r,e,t){e=="__proto__"&&yn?yn(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}var bn=px;function mx(r,e){return r===e||r!==r&&e!==e}var vr=mx;var _x=Object.prototype,gx=_x.hasOwnProperty;function yx(r,e,t){var i=r[e];(!(gx.call(r,e)&&vr(i,t))||t===void 0&&!(e in r))&&bn(r,e,t)}var da=yx;function bx(r,e,t,i){var n=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(t[a],r[a],a,t,r):void 0;l===void 0&&(l=r[a]),n?bn(t,a,l):da(t,a,l)}return t}var wr=bx;var Ch=Math.max;function vx(r,e,t){return e=Ch(e===void 0?r.length-1:e,0),function(){for(var i=arguments,n=-1,s=Ch(i.length-e,0),o=Array(s);++n<s;)o[n]=i[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=i[n];return a[e]=t(o),Ah(r,this,a)}}var Nh=vx;function wx(r,e){return Sh(Nh(r,e,aa),r+"")}var Mh=wx;var xx=9007199254740991;function Ax(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=xx}var ha=Ax;function kx(r){return r!=null&&ha(r.length)&&!gn(r)}var ii=kx;function Ex(r,e,t){if(!St(t))return!1;var i=typeof e;return(i=="number"?ii(t)&&fa(e,t.length):i=="string"&&e in t)?vr(t[e],r):!1}var Ph=Ex;function Ox(r){return Mh(function(e,t){var i=-1,n=t.length,s=n>1?t[n-1]:void 0,o=n>2?t[2]:void 0;for(s=r.length>3&&typeof s=="function"?(n--,s):void 0,o&&Ph(t[0],t[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);++i<n;){var a=t[i];a&&r(e,a,i,s)}return e})}var Dh=Ox;var Sx=Object.prototype;function Tx(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||Sx;return r===t}var vn=Tx;function Cx(r,e){for(var t=-1,i=Array(r);++t<r;)i[t]=e(t);return i}var Lh=Cx;var Nx="[object Arguments]";function Mx(r){return Ot(r)&&gr(r)==Nx}var Su=Mx;var $h=Object.prototype,Px=$h.hasOwnProperty,Dx=$h.propertyIsEnumerable,Lx=Su(function(){return arguments}())?Su:function(r){return Ot(r)&&Px.call(r,"callee")&&!Dx.call(r,"callee")},Ss=Lx;function $x(){return!1}var Rh=$x;var qh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jh=qh&&typeof module=="object"&&module&&!module.nodeType&&module,Rx=jh&&jh.exports===qh,Ih=Rx?bt.Buffer:void 0,jx=Ih?Ih.isBuffer:void 0,Ix=jx||Rh,jr=Ix;var qx="[object Arguments]",Bx="[object Array]",Fx="[object Boolean]",zx="[object Date]",Ux="[object Error]",Hx="[object Function]",Yx="[object Map]",Wx="[object Number]",Gx="[object Object]",Vx="[object RegExp]",Kx="[object Set]",Jx="[object String]",Zx="[object WeakMap]",Xx="[object ArrayBuffer]",Qx="[object DataView]",eA="[object Float32Array]",tA="[object Float64Array]",rA="[object Int8Array]",iA="[object Int16Array]",nA="[object Int32Array]",sA="[object Uint8Array]",oA="[object Uint8ClampedArray]",aA="[object Uint16Array]",lA="[object Uint32Array]",nt={};nt[eA]=nt[tA]=nt[rA]=nt[iA]=nt[nA]=nt[sA]=nt[oA]=nt[aA]=nt[lA]=!0;nt[qx]=nt[Bx]=nt[Xx]=nt[Fx]=nt[Qx]=nt[zx]=nt[Ux]=nt[Hx]=nt[Yx]=nt[Wx]=nt[Gx]=nt[Vx]=nt[Kx]=nt[Jx]=nt[Zx]=!1;function uA(r){return Ot(r)&&ha(r.length)&&!!nt[gr(r)]}var Bh=uA;function cA(r){return function(e){return r(e)}}var wn=cA;var Fh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ts=Fh&&typeof module=="object"&&module&&!module.nodeType&&module,fA=Ts&&Ts.exports===Fh,Tu=fA&&oa.process,dA=function(){try{var r=Ts&&Ts.require&&Ts.require("util").types;return r||Tu&&Tu.binding&&Tu.binding("util")}catch(e){}}(),Ir=dA;var zh=Ir&&Ir.isTypedArray,hA=zh?wn(zh):Bh,xn=hA;var pA=Object.prototype,mA=pA.hasOwnProperty;function _A(r,e){var t=ar(r),i=!t&&Ss(r),n=!t&&!i&&jr(r),s=!t&&!i&&!n&&xn(r),o=t||i||n||s,a=o?Lh(r.length,String):[],l=a.length;for(var f in r)(e||mA.call(r,f))&&!(o&&(f=="length"||n&&(f=="offset"||f=="parent")||s&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||fa(f,l)))&&a.push(f);return a}var pa=_A;function gA(r,e){return function(t){return r(e(t))}}var ma=gA;var yA=ma(Object.keys,Object),Uh=yA;var bA=Object.prototype,vA=bA.hasOwnProperty;function wA(r){if(!vn(r))return Uh(r);var e=[];for(var t in Object(r))vA.call(r,t)&&t!="constructor"&&e.push(t);return e}var Hh=wA;function xA(r){return ii(r)?pa(r):Hh(r)}var An=xA;function AA(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var Yh=AA;var kA=Object.prototype,EA=kA.hasOwnProperty;function OA(r){if(!St(r))return Yh(r);var e=vn(r),t=[];for(var i in r)i=="constructor"&&(e||!EA.call(r,i))||t.push(i);return t}var Wh=OA;function SA(r){return ii(r)?pa(r,!0):Wh(r)}var xr=SA;var TA=Bt(Object,"create"),qr=TA;function CA(){this.__data__=qr?qr(null):{},this.size=0}var Gh=CA;function NA(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var Vh=NA;var MA="__lodash_hash_undefined__",PA=Object.prototype,DA=PA.hasOwnProperty;function LA(r){var e=this.__data__;if(qr){var t=e[r];return t===MA?void 0:t}return DA.call(e,r)?e[r]:void 0}var Kh=LA;var $A=Object.prototype,RA=$A.hasOwnProperty;function jA(r){var e=this.__data__;return qr?e[r]!==void 0:RA.call(e,r)}var Jh=jA;var IA="__lodash_hash_undefined__";function qA(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=qr&&e===void 0?IA:e,this}var Zh=qA;function kn(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}kn.prototype.clear=Gh;kn.prototype.delete=Vh;kn.prototype.get=Kh;kn.prototype.has=Jh;kn.prototype.set=Zh;var Cu=kn;function BA(){this.__data__=[],this.size=0}var Xh=BA;function FA(r,e){for(var t=r.length;t--;)if(vr(r[t][0],e))return t;return-1}var ni=FA;var zA=Array.prototype,UA=zA.splice;function HA(r){var e=this.__data__,t=ni(e,r);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():UA.call(e,t,1),--this.size,!0}var Qh=HA;function YA(r){var e=this.__data__,t=ni(e,r);return t<0?void 0:e[t][1]}var ep=YA;function WA(r){return ni(this.__data__,r)>-1}var tp=WA;function GA(r,e){var t=this.__data__,i=ni(t,r);return i<0?(++this.size,t.push([r,e])):t[i][1]=e,this}var rp=GA;function En(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}En.prototype.clear=Xh;En.prototype.delete=Qh;En.prototype.get=ep;En.prototype.has=tp;En.prototype.set=rp;var si=En;var VA=Bt(bt,"Map"),oi=VA;function KA(){this.size=0,this.__data__={hash:new Cu,map:new(oi||si),string:new Cu}}var ip=KA;function JA(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var np=JA;function ZA(r,e){var t=r.__data__;return np(e)?t[typeof e=="string"?"string":"hash"]:t.map}var ai=ZA;function XA(r){var e=ai(this,r).delete(r);return this.size-=e?1:0,e}var sp=XA;function QA(r){return ai(this,r).get(r)}var op=QA;function ek(r){return ai(this,r).has(r)}var ap=ek;function tk(r,e){var t=ai(this,r),i=t.size;return t.set(r,e),this.size+=t.size==i?0:1,this}var lp=tk;function On(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}On.prototype.clear=ip;On.prototype.delete=sp;On.prototype.get=op;On.prototype.has=ap;On.prototype.set=lp;var _a=On;function rk(r,e){for(var t=-1,i=e.length,n=r.length;++t<i;)r[n+t]=e[t];return r}var ga=rk;var ik=ma(Object.getPrototypeOf,Object),Sn=ik;var nk="[object Object]",sk=Function.prototype,ok=Object.prototype,up=sk.toString,ak=ok.hasOwnProperty,lk=up.call(Object);function uk(r){if(!Ot(r)||gr(r)!=nk)return!1;var e=Sn(r);if(e===null)return!0;var t=ak.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&up.call(t)==lk}var cp=uk;function ck(){this.__data__=new si,this.size=0}var fp=ck;function fk(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}var dp=fk;function dk(r){return this.__data__.get(r)}var hp=dk;function hk(r){return this.__data__.has(r)}var pp=hk;var pk=200;function mk(r,e){var t=this.__data__;if(t instanceof si){var i=t.__data__;if(!oi||i.length<pk-1)return i.push([r,e]),this.size=++t.size,this;t=this.__data__=new _a(i)}return t.set(r,e),this.size=t.size,this}var mp=mk;function Tn(r){var e=this.__data__=new si(r);this.size=e.size}Tn.prototype.clear=fp;Tn.prototype.delete=dp;Tn.prototype.get=hp;Tn.prototype.has=pp;Tn.prototype.set=mp;var li=Tn;function _k(r,e){return r&&wr(e,An(e),r)}var _p=_k;function gk(r,e){return r&&wr(e,xr(e),r)}var gp=gk;var wp=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yp=wp&&typeof module=="object"&&module&&!module.nodeType&&module,yk=yp&&yp.exports===wp,bp=yk?bt.Buffer:void 0,vp=bp?bp.allocUnsafe:void 0;function bk(r,e){if(e)return r.slice();var t=r.length,i=vp?vp(t):new r.constructor(t);return r.copy(i),i}var ya=bk;function vk(r,e){for(var t=-1,i=r==null?0:r.length,n=0,s=[];++t<i;){var o=r[t];e(o,t,r)&&(s[n++]=o)}return s}var xp=vk;function wk(){return[]}var ba=wk;var xk=Object.prototype,Ak=xk.propertyIsEnumerable,Ap=Object.getOwnPropertySymbols,kk=Ap?function(r){return r==null?[]:(r=Object(r),xp(Ap(r),function(e){return Ak.call(r,e)}))}:ba,Cn=kk;function Ek(r,e){return wr(r,Cn(r),e)}var kp=Ek;var Ok=Object.getOwnPropertySymbols,Sk=Ok?function(r){for(var e=[];r;)ga(e,Cn(r)),r=Sn(r);return e}:ba,va=Sk;function Tk(r,e){return wr(r,va(r),e)}var Ep=Tk;function Ck(r,e,t){var i=e(r);return ar(r)?i:ga(i,t(r))}var wa=Ck;function Nk(r){return wa(r,An,Cn)}var Cs=Nk;function Mk(r){return wa(r,xr,va)}var Op=Mk;var Pk=Bt(bt,"DataView"),xa=Pk;var Dk=Bt(bt,"Promise"),Aa=Dk;var Lk=Bt(bt,"Set"),ka=Lk;var Sp="[object Map]",$k="[object Object]",Tp="[object Promise]",Cp="[object Set]",Np="[object WeakMap]",Mp="[object DataView]",Rk=Rr(xa),jk=Rr(oi),Ik=Rr(Aa),qk=Rr(ka),Bk=Rr(ua),$i=gr;(xa&&$i(new xa(new ArrayBuffer(1)))!=Mp||oi&&$i(new oi)!=Sp||Aa&&$i(Aa.resolve())!=Tp||ka&&$i(new ka)!=Cp||ua&&$i(new ua)!=Np)&&($i=function(r){var e=gr(r),t=e==$k?r.constructor:void 0,i=t?Rr(t):"";if(i)switch(i){case Rk:return Mp;case jk:return Sp;case Ik:return Tp;case qk:return Cp;case Bk:return Np}return e});var Br=$i;var Fk=Object.prototype,zk=Fk.hasOwnProperty;function Uk(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&zk.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var Pp=Uk;var Hk=bt.Uint8Array,Nn=Hk;function Yk(r){var e=new r.constructor(r.byteLength);return new Nn(e).set(new Nn(r)),e}var Mn=Yk;function Wk(r,e){var t=e?Mn(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var Dp=Wk;var Gk=/\w*$/;function Vk(r){var e=new r.constructor(r.source,Gk.exec(r));return e.lastIndex=r.lastIndex,e}var Lp=Vk;var $p=or?or.prototype:void 0,Rp=$p?$p.valueOf:void 0;function Kk(r){return Rp?Object(Rp.call(r)):{}}var jp=Kk;function Jk(r,e){var t=e?Mn(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var Ea=Jk;var Zk="[object Boolean]",Xk="[object Date]",Qk="[object Map]",eE="[object Number]",tE="[object RegExp]",rE="[object Set]",iE="[object String]",nE="[object Symbol]",sE="[object ArrayBuffer]",oE="[object DataView]",aE="[object Float32Array]",lE="[object Float64Array]",uE="[object Int8Array]",cE="[object Int16Array]",fE="[object Int32Array]",dE="[object Uint8Array]",hE="[object Uint8ClampedArray]",pE="[object Uint16Array]",mE="[object Uint32Array]";function _E(r,e,t){var i=r.constructor;switch(e){case sE:return Mn(r);case Zk:case Xk:return new i(+r);case oE:return Dp(r,t);case aE:case lE:case uE:case cE:case fE:case dE:case hE:case pE:case mE:return Ea(r,t);case Qk:return new i;case eE:case iE:return new i(r);case tE:return Lp(r);case rE:return new i;case nE:return jp(r)}}var Ip=_E;function gE(r){return typeof r.constructor=="function"&&!vn(r)?xh(Sn(r)):{}}var Oa=gE;var yE="[object Map]";function bE(r){return Ot(r)&&Br(r)==yE}var qp=bE;var Bp=Ir&&Ir.isMap,vE=Bp?wn(Bp):qp,Fp=vE;var wE="[object Set]";function xE(r){return Ot(r)&&Br(r)==wE}var zp=xE;var Up=Ir&&Ir.isSet,AE=Up?wn(Up):zp,Hp=AE;var kE=1,EE=2,OE=4,Yp="[object Arguments]",SE="[object Array]",TE="[object Boolean]",CE="[object Date]",NE="[object Error]",Wp="[object Function]",ME="[object GeneratorFunction]",PE="[object Map]",DE="[object Number]",Gp="[object Object]",LE="[object RegExp]",$E="[object Set]",RE="[object String]",jE="[object Symbol]",IE="[object WeakMap]",qE="[object ArrayBuffer]",BE="[object DataView]",FE="[object Float32Array]",zE="[object Float64Array]",UE="[object Int8Array]",HE="[object Int16Array]",YE="[object Int32Array]",WE="[object Uint8Array]",GE="[object Uint8ClampedArray]",VE="[object Uint16Array]",KE="[object Uint32Array]",tt={};tt[Yp]=tt[SE]=tt[qE]=tt[BE]=tt[TE]=tt[CE]=tt[FE]=tt[zE]=tt[UE]=tt[HE]=tt[YE]=tt[PE]=tt[DE]=tt[Gp]=tt[LE]=tt[$E]=tt[RE]=tt[jE]=tt[WE]=tt[GE]=tt[VE]=tt[KE]=!0;tt[NE]=tt[Wp]=tt[IE]=!1;function Sa(r,e,t,i,n,s){var o,a=e&kE,l=e&EE,f=e&OE;if(t&&(o=n?t(r,i,n,s):t(r)),o!==void 0)return o;if(!St(r))return r;var m=ar(r);if(m){if(o=Pp(r),!a)return ca(r,o)}else{var b=Br(r),h=b==Wp||b==ME;if(jr(r))return ya(r,a);if(b==Gp||b==Yp||h&&!n){if(o=l||h?{}:Oa(r),!a)return l?Ep(r,gp(o,r)):kp(r,_p(o,r))}else{if(!tt[b])return n?r:{};o=Ip(r,b,a)}}s||(s=new li);var p=s.get(r);if(p)return p;s.set(r,o),Hp(r)?r.forEach(function(_){o.add(Sa(_,e,t,_,r,s))}):Fp(r)&&r.forEach(function(_,y){o.set(y,Sa(_,e,t,y,r,s))});var u=f?l?Op:Cs:l?xr:An,d=m?void 0:u(r);return Th(d||r,function(_,y){d&&(y=_,_=r[y]),da(o,y,Sa(_,e,t,y,r,s))}),o}var Vp=Sa;var JE=1,ZE=4;function XE(r){return Vp(r,JE|ZE)}var Ar=XE;var QE="__lodash_hash_undefined__";function eO(r){return this.__data__.set(r,QE),this}var Kp=eO;function tO(r){return this.__data__.has(r)}var Jp=tO;function Ta(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new _a;++e<t;)this.add(r[e])}Ta.prototype.add=Ta.prototype.push=Kp;Ta.prototype.has=Jp;var Zp=Ta;function rO(r,e){for(var t=-1,i=r==null?0:r.length;++t<i;)if(e(r[t],t,r))return!0;return!1}var Xp=rO;function iO(r,e){return r.has(e)}var Qp=iO;var nO=1,sO=2;function oO(r,e,t,i,n,s){var o=t&nO,a=r.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var f=s.get(r),m=s.get(e);if(f&&m)return f==e&&m==r;var b=-1,h=!0,p=t&sO?new Zp:void 0;for(s.set(r,e),s.set(e,r);++b<a;){var u=r[b],d=e[b];if(i)var _=o?i(d,u,b,e,r,s):i(u,d,b,r,e,s);if(_!==void 0){if(_)continue;h=!1;break}if(p){if(!Xp(e,function(y,g){if(!Qp(p,g)&&(u===y||n(u,y,t,i,s)))return p.push(g)})){h=!1;break}}else if(!(u===d||n(u,d,t,i,s))){h=!1;break}}return s.delete(r),s.delete(e),h}var Ca=oO;function aO(r){var e=-1,t=Array(r.size);return r.forEach(function(i,n){t[++e]=[n,i]}),t}var em=aO;function lO(r){var e=-1,t=Array(r.size);return r.forEach(function(i){t[++e]=i}),t}var tm=lO;var uO=1,cO=2,fO="[object Boolean]",dO="[object Date]",hO="[object Error]",pO="[object Map]",mO="[object Number]",_O="[object RegExp]",gO="[object Set]",yO="[object String]",bO="[object Symbol]",vO="[object ArrayBuffer]",wO="[object DataView]",rm=or?or.prototype:void 0,Nu=rm?rm.valueOf:void 0;function xO(r,e,t,i,n,s,o){switch(t){case wO:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case vO:return!(r.byteLength!=e.byteLength||!s(new Nn(r),new Nn(e)));case fO:case dO:case mO:return vr(+r,+e);case hO:return r.name==e.name&&r.message==e.message;case _O:case yO:return r==e+"";case pO:var a=em;case gO:var l=i&uO;if(a||(a=tm),r.size!=e.size&&!l)return!1;var f=o.get(r);if(f)return f==e;i|=cO,o.set(r,e);var m=Ca(a(r),a(e),i,n,s,o);return o.delete(r),m;case bO:if(Nu)return Nu.call(r)==Nu.call(e)}return!1}var im=xO;var AO=1,kO=Object.prototype,EO=kO.hasOwnProperty;function OO(r,e,t,i,n,s){var o=t&AO,a=Cs(r),l=a.length,f=Cs(e),m=f.length;if(l!=m&&!o)return!1;for(var b=l;b--;){var h=a[b];if(!(o?h in e:EO.call(e,h)))return!1}var p=s.get(r),u=s.get(e);if(p&&u)return p==e&&u==r;var d=!0;s.set(r,e),s.set(e,r);for(var _=o;++b<l;){h=a[b];var y=r[h],g=e[h];if(i)var v=o?i(g,y,h,e,r,s):i(y,g,h,r,e,s);if(!(v===void 0?y===g||n(y,g,t,i,s):v)){d=!1;break}_||(_=h=="constructor")}if(d&&!_){var A=r.constructor,k=e.constructor;A!=k&&"constructor"in r&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof k=="function"&&k instanceof k)&&(d=!1)}return s.delete(r),s.delete(e),d}var nm=OO;var SO=1,sm="[object Arguments]",om="[object Array]",Na="[object Object]",TO=Object.prototype,am=TO.hasOwnProperty;function CO(r,e,t,i,n,s){var o=ar(r),a=ar(e),l=o?om:Br(r),f=a?om:Br(e);l=l==sm?Na:l,f=f==sm?Na:f;var m=l==Na,b=f==Na,h=l==f;if(h&&jr(r)){if(!jr(e))return!1;o=!0,m=!1}if(h&&!m)return s||(s=new li),o||xn(r)?Ca(r,e,t,i,n,s):im(r,e,l,t,i,n,s);if(!(t&SO)){var p=m&&am.call(r,"__wrapped__"),u=b&&am.call(e,"__wrapped__");if(p||u){var d=p?r.value():r,_=u?e.value():e;return s||(s=new li),n(d,_,t,i,s)}}return h?(s||(s=new li),nm(r,e,t,i,n,s)):!1}var lm=CO;function um(r,e,t,i,n){return r===e?!0:r==null||e==null||!Ot(r)&&!Ot(e)?r!==r&&e!==e:lm(r,e,t,i,um,n)}var cm=um;function NO(r){return function(e,t,i){for(var n=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[r?a:++n];if(t(s[l],l,s)===!1)break}return e}}var fm=NO;var MO=fm(),dm=MO;function PO(r,e,t){(t!==void 0&&!vr(r[e],t)||t===void 0&&!(e in r))&&bn(r,e,t)}var Ns=PO;function DO(r){return Ot(r)&&ii(r)}var hm=DO;function LO(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}var Ms=LO;function $O(r){return wr(r,xr(r))}var pm=$O;function RO(r,e,t,i,n,s,o){var a=Ms(r,t),l=Ms(e,t),f=o.get(l);if(f){Ns(r,t,f);return}var m=s?s(a,l,t+"",r,e,o):void 0,b=m===void 0;if(b){var h=ar(l),p=!h&&jr(l),u=!h&&!p&&xn(l);m=l,h||p||u?ar(a)?m=a:hm(a)?m=ca(a):p?(b=!1,m=ya(l,!0)):u?(b=!1,m=Ea(l,!0)):m=[]:cp(l)||Ss(l)?(m=a,Ss(a)?m=pm(a):(!St(a)||gn(a))&&(m=Oa(l))):b=!1}b&&(o.set(l,m),n(m,l,i,s,o),o.delete(l)),Ns(r,t,m)}var mm=RO;function _m(r,e,t,i,n){r!==e&&dm(e,function(s,o){if(n||(n=new li),St(s))mm(r,e,o,t,_m,i,n);else{var a=i?i(Ms(r,o),s,o+"",r,e,n):void 0;a===void 0&&(a=s),Ns(r,o,a)}},xr)}var gm=_m;function jO(r,e){return cm(r,e)}var Ri=jO;var IO=Dh(function(r,e,t){gm(r,e,t)}),Ft=IO;var Ls={};cw(Ls,{Attributor:()=>$t,AttributorStore:()=>Ps,BlockBlot:()=>ji,ClassAttributor:()=>vt,ContainerBlot:()=>Rn,EmbedBlot:()=>ct,InlineBlot:()=>Ma,LeafBlot:()=>wt,ParentBlot:()=>zt,Registry:()=>fi,Scope:()=>Se,ScrollBlot:()=>Ds,StyleAttributor:()=>Ut,TextBlot:()=>jn});var Se=(r=>(r[r.TYPE=3]="TYPE",r[r.LEVEL=12]="LEVEL",r[r.ATTRIBUTE=13]="ATTRIBUTE",r[r.BLOT=14]="BLOT",r[r.INLINE=7]="INLINE",r[r.BLOCK=11]="BLOCK",r[r.BLOCK_BLOT=10]="BLOCK_BLOT",r[r.INLINE_BLOT=6]="INLINE_BLOT",r[r.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",r[r.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",r[r.ANY=15]="ANY",r))(Se||{}),$t=class{constructor(e,t,i={}){this.attrName=e,this.keyName=t;let n=Se.TYPE&Se.ATTRIBUTE;this.scope=i.scope!=null?i.scope&Se.LEVEL|n:Se.ATTRIBUTE,i.whitelist!=null&&(this.whitelist=i.whitelist)}static keys(e){return Array.from(e.attributes).map(t=>t.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t=="string"?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){let t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""}},ci=class extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}},vm=class Pu{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let i=null;try{i=e.parentNode}catch(n){return null}return this.find(i,t)}return null}create(e,t,i){let n=this.query(t);if(n==null)throw new ci(`Unable to create ${t} blot`);let s=n,o=t instanceof Node||t.nodeType===Node.TEXT_NODE?t:s.create(i),a=new s(e,o,i);return Pu.blots.set(a.domNode,a),a}find(e,t=!1){return Pu.find(e,t)}query(e,t=Se.ANY){let i;return typeof e=="string"?i=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?i=this.types.text:typeof e=="number"?e&Se.LEVEL&Se.BLOCK?i=this.types.block:e&Se.LEVEL&Se.INLINE&&(i=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(n=>(i=this.classes[n],!!i)),i=i||this.tags[e.tagName]),i==null?null:"scope"in i&&t&Se.LEVEL&i.scope&&t&Se.TYPE&i.scope?i:null}register(...e){return e.map(t=>{let i="blotName"in t,n="attrName"in t;if(!i&&!n)throw new ci("Invalid definition");if(i&&t.blotName==="abstract")throw new ci("Cannot register abstract class");let s=i?t.blotName:n?t.attrName:void 0;return this.types[s]=t,n?typeof t.keyName=="string"&&(this.attributes[t.keyName]=t):i&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map(o=>o.toUpperCase()):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach(o=>{(this.tags[o]==null||t.className==null)&&(this.tags[o]=t)}))),t})}};vm.blots=new WeakMap;var fi=vm;function ym(r,e){return(r.getAttribute("class")||"").split(/\s+/).filter(t=>t.indexOf(`${e}-`)===0)}var Du=class extends $t{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(t=>t.split("-").slice(0,-1).join("-"))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){ym(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute("class")}value(e){let t=(ym(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""}},vt=Du;function Mu(r){let e=r.split("-"),t=e.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("");return e[0]+t}var Lu=class extends $t{static keys(e){return(e.getAttribute("style")||"").split(";").map(t=>t.split(":")[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[Mu(this.keyName)]=t,!0):!1}remove(e){e.style[Mu(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){let t=e.style[Mu(this.keyName)];return this.canAdd(e,t)?t:""}},Ut=Lu,$u=class{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};let e=fi.find(this.domNode);if(e==null)return;let t=$t.keys(this.domNode),i=vt.keys(this.domNode),n=Ut.keys(this.domNode);t.concat(i).concat(n).forEach(s=>{let o=e.scroll.query(s,Se.ATTRIBUTE);o instanceof $t&&(this.attributes[o.attrName]=o)})}copy(e){Object.keys(this.attributes).forEach(t=>{let i=this.attributes[t].value(this.domNode);e.format(t,i)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}},Ps=$u,wm=class{constructor(e,t){this.scroll=e,this.domNode=t,fi.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new ci("Blot definition missing tagName");let t,i;return Array.isArray(this.tagName)?(typeof e=="string"?(i=e.toUpperCase(),parseInt(i,10).toString()===i&&(i=parseInt(i,10))):typeof e=="number"&&(i=e),typeof i=="number"?t=document.createElement(this.tagName[i-1]):i&&this.tagName.indexOf(i)>-1?t=document.createElement(i):t=document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){let e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),fi.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,i,n){let s=this.isolate(e,t);if(this.scroll.query(i,Se.BLOT)!=null&&n)s.wrap(i,n);else if(this.scroll.query(i,Se.ATTRIBUTE)!=null){let o=this.scroll.create(this.statics.scope);s.wrap(o),o.format(i,n)}}insertAt(e,t,i){let n=i==null?this.scroll.create("text",t):this.scroll.create(t,i),s=this.split(e);this.parent.insertBefore(n,s||void 0)}isolate(e,t){let i=this.split(e);if(i==null)throw new Error("Attempt to isolate at end");return i.split(t),i}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){let i=typeof e=="string"?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){let i=typeof e=="string"?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(i,this.next||void 0),typeof i.appendChild!="function")throw new ci(`Cannot wrap ${e}`);return i.appendChild(this),i}};wm.blotName="abstract";var xm=wm,Am=class extends xm{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(i+=1),[this.parent.domNode,i]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Am.scope=Se.INLINE_BLOT;var qO=Am,wt=qO,Ru=class{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){let t=e.slice(1);this.append(...t)}}at(e){let t=this.iterator(),i=t();for(;i&&e>0;)e-=1,i=t();return i}contains(e){let t=this.iterator(),i=t();for(;i;){if(i===e)return!0;i=t()}return!1}indexOf(e){let t=this.iterator(),i=t(),n=0;for(;i;){if(i===e)return n;n+=1,i=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t!=null?(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let t=0,i=this.head;for(;i!=null;){if(i===e)return t;t+=i.length(),i=i.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{let t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){let i=this.iterator(),n=i();for(;n;){let s=n.length();if(e<s||t&&e===s&&(n.next==null||n.next.length()!==0))return[n,e];e-=s,n=i()}return[null,0]}forEach(e){let t=this.iterator(),i=t();for(;i;)e(i),i=t()}forEachAt(e,t,i){if(t<=0)return;let[n,s]=this.find(e),o=e-s,a=this.iterator(n),l=a();for(;l&&o<e+t;){let f=l.length();e>o?i(l,e-o,Math.min(t,o+f-e)):i(l,0,Math.min(f,e+t-o)),o+=f,l=a()}}map(e){return this.reduce((t,i)=>(t.push(e(i)),t),[])}reduce(e,t){let i=this.iterator(),n=i();for(;n;)t=e(t,n),n=i();return t}};function bm(r,e){let t=e.find(r);if(t)return t;try{return e.create(r)}catch(i){let n=e.create(Se.INLINE);return Array.from(r.childNodes).forEach(s=>{n.domNode.appendChild(s)}),r.parentNode&&r.parentNode.replaceChild(n.domNode,r),n.attach(),n}}var km=class ui extends xm{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,ui.uiClass&&this.uiNode.classList.add(ui.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Ru,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{let t=bm(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(t){if(t instanceof ci)return;throw t}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(i,n,s)=>{i.deleteAt(n,s)})}descendant(e,t=0){let[i,n]=this.children.find(t);return e.blotName==null&&e(i)||e.blotName!=null&&i instanceof e?[i,n]:i instanceof ui?i.descendant(e,n):[null,-1]}descendants(e,t=0,i=Number.MAX_VALUE){let n=[],s=i;return this.children.forEachAt(t,i,(o,a,l)=>{(e.blotName==null&&e(o)||e.blotName!=null&&o instanceof e)&&n.push(o),o instanceof ui&&(n=n.concat(o.descendants(e,a,s))),s-=l}),n}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(t=>{e||this.statics.allowedChildren.some(i=>t instanceof i)||(t.statics.scope===Se.BLOCK_BLOT?(t.next!=null&&this.splitAfter(t),t.prev!=null&&this.splitAfter(t.prev),t.parent.unwrap(),e=!0):t instanceof ui?t.unwrap():t.remove())})}formatAt(e,t,i,n){this.children.forEachAt(e,t,(s,o,a)=>{s.formatAt(o,a,i,n)})}insertAt(e,t,i){let[n,s]=this.children.find(e);if(n)n.insertAt(s,t,i);else{let o=i==null?this.scroll.create("text",t):this.scroll.create(t,i);this.appendChild(o)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let i=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(i=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==i)&&this.domNode.insertBefore(e.domNode,i),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(i=>{e.insertBefore(i,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){let t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,t=!1){let[i,n]=this.children.find(e,t),s=[[this,e]];return i instanceof ui?s.concat(i.path(n,t)):(i!=null&&s.push([i,n]),s)}removeChild(e){this.children.remove(e)}replaceWith(e,t){let i=typeof e=="string"?this.scroll.create(e,t):e;return i instanceof ui&&this.moveChildren(i),super.replaceWith(i)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}let i=this.clone();return this.parent&&this.parent.insertBefore(i,this.next||void 0),this.children.forEachAt(e,this.length(),(n,s,o)=>{let a=n.split(s,t);a!=null&&i.appendChild(a)}),i}splitAfter(e){let t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){let i=[],n=[];e.forEach(s=>{s.target===this.domNode&&s.type==="childList"&&(i.push(...s.addedNodes),n.push(...s.removedNodes))}),n.forEach(s=>{if(s.parentNode!=null&&s.tagName!=="IFRAME"&&document.body.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let o=this.scroll.find(s);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),i.filter(s=>s.parentNode===this.domNode&&s!==this.uiNode).sort((s,o)=>s===o?0:s.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(s=>{let o=null;s.nextSibling!=null&&(o=this.scroll.find(s.nextSibling));let a=bm(s,this.scroll);(a.next!==o||a.next==null)&&(a.parent!=null&&a.parent.removeChild(this),this.insertBefore(a,o||void 0))}),this.enforceAllowedChildren()}};km.uiClass="";var BO=km,zt=BO;function FO(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(let t in r)if(r[t]!==e[t])return!1;return!0}var Pn=class Dn extends zt{static create(e){return super.create(e)}static formats(e,t){let i=t.query(Dn.blotName);if(!(i!=null&&e.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Ps(this.domNode)}format(e,t){if(e===this.statics.blotName&&!t)this.children.forEach(i=>{i instanceof Dn||(i=i.wrap(Dn.blotName,!0)),this.attributes.copy(i)}),this.unwrap();else{let i=this.scroll.query(e,Se.INLINE);if(i==null)return;i instanceof $t?this.attributes.attribute(i,t):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t)}}formats(){let e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,i,n){this.formats()[i]!=null||this.scroll.query(i,Se.ATTRIBUTE)?this.isolate(e,t).format(i,n):super.formatAt(e,t,i,n)}optimize(e){super.optimize(e);let t=this.formats();if(Object.keys(t).length===0)return this.unwrap();let i=this.next;i instanceof Dn&&i.prev===this&&FO(t,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(e,t){let i=super.replaceWith(e,t);return this.attributes.copy(i),i}update(e,t){super.update(e,t),e.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}wrap(e,t){let i=super.wrap(e,t);return i instanceof Dn&&this.attributes.move(i),i}};Pn.allowedChildren=[Pn,wt],Pn.blotName="inline",Pn.scope=Se.INLINE_BLOT,Pn.tagName="SPAN";var zO=Pn,Ma=zO,Ln=class ju extends zt{static create(e){return super.create(e)}static formats(e,t){let i=t.query(ju.blotName);if(!(i!=null&&e.tagName===i.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Ps(this.domNode)}format(e,t){let i=this.scroll.query(e,Se.BLOCK);i!=null&&(i instanceof $t?this.attributes.attribute(i,t):e===this.statics.blotName&&!t?this.replaceWith(ju.blotName):t&&(e!==this.statics.blotName||this.formats()[e]!==t)&&this.replaceWith(e,t))}formats(){let e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,i,n){this.scroll.query(i,Se.BLOCK)!=null?this.format(i,n):super.formatAt(e,t,i,n)}insertAt(e,t,i){if(i==null||this.scroll.query(t,Se.INLINE)!=null)super.insertAt(e,t,i);else{let n=this.split(e);if(n!=null){let s=this.scroll.create(t,i);n.parent.insertBefore(s,n)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,t){let i=super.replaceWith(e,t);return this.attributes.copy(i),i}update(e,t){super.update(e,t),e.some(i=>i.target===this.domNode&&i.type==="attributes")&&this.attributes.build()}};Ln.blotName="block",Ln.scope=Se.BLOCK_BLOT,Ln.tagName="P",Ln.allowedChildren=[Ma,Ln,wt];var UO=Ln,ji=UO,Iu=class extends zt{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,i,n){super.formatAt(e,t,i,n),this.enforceAllowedChildren()}insertAt(e,t,i){super.insertAt(e,t,i),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Iu.blotName="container",Iu.scope=Se.BLOCK_BLOT;var HO=Iu,Rn=HO,qu=class extends wt{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,i,n){e===0&&t===this.length()?this.format(i,n):super.formatAt(e,t,i,n)}formats(){return this.statics.formats(this.domNode,this.scroll)}},ct=qu,YO={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},WO=100,$n=class extends zt{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(i=>{this.update(i)}),this.observer.observe(this.domNode,YO),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){let i=this.registry.find(e,t);return i?i.scroll===this?i:t?this.find(i.scroll.domNode.parentNode,!0):null:null}query(e,t=Se.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(i=>{i.remove()}):super.deleteAt(e,t)}formatAt(e,t,i,n){this.update(),super.formatAt(e,t,i,n)}insertAt(e,t,i){this.update(),super.insertAt(e,t,i)}optimize(e=[],t={}){super.optimize(t);let i=t.mutationsMap||new WeakMap,n=Array.from(this.observer.takeRecords());for(;n.length>0;)e.push(n.pop());let s=(l,f=!0)=>{l==null||l===this||l.domNode.parentNode!=null&&(i.has(l.domNode)||i.set(l.domNode,[]),f&&s(l.parent))},o=l=>{i.has(l.domNode)&&(l instanceof zt&&l.children.forEach(o),i.delete(l.domNode),l.optimize(t))},a=e;for(let l=0;a.length>0;l+=1){if(l>=WO)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(f=>{let m=this.find(f.target,!0);m!=null&&(m.domNode===f.target&&(f.type==="childList"?(s(this.find(f.previousSibling,!1)),Array.from(f.addedNodes).forEach(b=>{let h=this.find(b,!1);s(h,!1),h instanceof zt&&h.children.forEach(p=>{s(p,!1)})})):f.type==="attributes"&&s(m.prev)),s(m))}),this.children.forEach(o),a=Array.from(this.observer.takeRecords()),n=a.slice();n.length>0;)e.push(n.pop())}}update(e,t={}){e=e||this.observer.takeRecords();let i=new WeakMap;e.map(n=>{let s=this.find(n.target,!0);return s==null?null:i.has(s.domNode)?(i.get(s.domNode).push(n),null):(i.set(s.domNode,[n]),s)}).forEach(n=>{n!=null&&n!==this&&i.has(n.domNode)&&n.update(i.get(n.domNode)||[],t)}),t.mutationsMap=i,i.has(this.domNode)&&super.update(i.get(this.domNode),t),this.optimize(e,t)}};$n.blotName="scroll",$n.defaultChild=ji,$n.allowedChildren=[ji,Rn],$n.scope=Se.BLOCK_BLOT,$n.tagName="DIV";var GO=$n,Ds=GO,Bu=class Em extends wt{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,i){i==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,i)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Em&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}let i=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(i,this.next||void 0),this.text=this.statics.value(this.domNode),i}update(e,t){e.some(i=>i.type==="characterData"&&i.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Bu.blotName="text",Bu.scope=Se.INLINE_BLOT;var VO=Bu,jn=VO;var yi=ut(Qt(),1);var dt=ut(Qt(),1);var Ec=ut(Qt(),1);var Hs=class extends ct{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}};Hs.blotName="break";Hs.tagName="BR";var Tt=Hs;var _t=class extends jn{},fC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Wi(r){return r.replace(/[&<>"']/g,e=>fC[e])}var mi=class extends Ma{static compare(e,t){let i=mi.order.indexOf(e),n=mi.order.indexOf(t);return i>=0||n>=0?i-n:e===t?0:e<t?-1:1}formatAt(e,t,i,n){if(mi.compare(this.statics.blotName,i)<0&&this.scroll.query(i,Se.BLOT)){let s=this.isolate(e,t);n&&s.wrap(i,n)}else super.formatAt(e,t,i,n)}optimize(e){if(super.optimize(e),this.parent instanceof mi&&mi.compare(this.statics.blotName,this.parent.statics.blotName)>0){let t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}},Ys=mi;he(Ys,"allowedChildren",[mi,Tt,ct,_t]),he(Ys,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);var Ct=Ys;var ug=1,Qe=class extends ji{constructor(){super(...arguments);he(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=Oc(this)),this.cache.delta}deleteAt(t,i){super.deleteAt(t,i),this.cache={}}formatAt(t,i,n,s){i<=0||(this.scroll.query(n,Se.BLOCK)?t+i===this.length()&&this.format(n,s):super.formatAt(t,Math.min(i,this.length()-t-1),n,s),this.cache={})}insertAt(t,i,n){if(n!=null){super.insertAt(t,i,n),this.cache={};return}if(i.length===0)return;let s=i.split(`
`),o=s.shift();o.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let a=this;s.reduce((l,f)=>(a=a.split(l,!0),a.insertAt(0,f),f.length),t+o.length)}insertBefore(t,i){let{head:n}=this.children;super.insertBefore(t,i),n instanceof Tt&&n.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+ug),this.cache.length}moveChildren(t,i){super.moveChildren(t,i),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i&&(t===0||t>=this.length()-ug)){let s=this.clone();return t===0?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}let n=super.split(t,i);return this.cache={},n}};Qe.blotName="block";Qe.tagName="P";Qe.defaultChild=Tt;Qe.allowedChildren=[Tt,Ct,ct,_t];var kt=class extends ct{attach(){super.attach(),this.attributes=new Ps(this.domNode)}delta(){return new Ec.default().insert(this.value(),ze(ze({},this.formats()),this.attributes.values()))}format(e,t){let i=this.scroll.query(e,Se.BLOCK_ATTRIBUTE);i!=null&&this.attributes.attribute(i,t)}formatAt(e,t,i,n){this.format(i,n)}insertAt(e,t,i){if(i!=null){super.insertAt(e,t,i);return}let n=t.split(`
`),s=n.pop(),o=n.map(l=>{let f=this.scroll.create(Qe.blotName);return f.insertAt(0,l),f}),a=this.split(e);o.forEach(l=>{this.parent.insertBefore(l,a)}),s&&this.parent.insertBefore(this.scroll.create("text",s),a)}};kt.scope=Se.BLOCK_BLOT;function Oc(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r.descendants(wt).reduce((t,i)=>i.length()===0?t:t.insert(i.value(),Ht(i,{},e)),new Ec.default).insert(`
`,Ht(r))}function Ht(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return r==null||("formats"in r&&typeof r.formats=="function"&&(e=ze(ze({},e),r.formats()),t&&delete e["code-token"]),r.parent==null||r.parent.statics.blotName==="scroll"||r.parent.statics.scope!==r.statics.scope)?e:Ht(r.parent,e,t)}var _i=class extends ct{static value(){}constructor(e,t,i){super(e,t),this.selection=i,this.textNode=document.createTextNode(_i.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,t){if(this.savedLength!==0){super.format(e,t);return}let i=this,n=0;for(;i!=null&&i.statics.scope!==Se.BLOCK_BLOT;)n+=i.offset(i.parent),i=i.parent;i!=null&&(this.savedLength=_i.CONTENTS.length,i.optimize(),i.formatAt(n,_i.CONTENTS.length,e,t),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;let e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);let t=this.prev instanceof _t?this.prev:null,i=t?t.length():0,n=this.next instanceof _t?this.next:null,s=n?n.text:"",{textNode:o}=this,a=o.data.split(_i.CONTENTS).join("");o.data=_i.CONTENTS;let l;if(t)l=t,(a||n)&&(t.insertAt(t.length(),a+s),n&&n.remove());else if(n)l=n,n.insertAt(0,a);else{let f=document.createTextNode(a);l=this.scroll.create(f),this.parent.insertBefore(l,this)}if(this.remove(),e){let f=(h,p)=>t&&h===t.domNode?p:h===o?i+p-1:n&&h===n.domNode?i+a.length+p:null,m=f(e.start.node,e.start.offset),b=f(e.end.node,e.end.offset);if(m!==null&&b!==null)return{startNode:l.domNode,startOffset:m,endNode:l.domNode,endOffset:b}}return null}update(e,t){if(e.some(i=>i.type==="characterData"&&i.target===this.textNode)){let i=this.restore();i&&(t.range=i)}}optimize(e){super.optimize(e);let{parent:t}=this;for(;t;){if(t.domNode.tagName==="A"){this.savedLength=_i.CONTENTS.length,t.isolate(this.offset(t),this.length()).unwrap(),this.savedLength=0;break}t=t.parent}}value(){return""}},Gi=_i;he(Gi,"blotName","cursor"),he(Gi,"className","ql-cursor"),he(Gi,"tagName","span"),he(Gi,"CONTENTS","\uFEFF");var gi=Gi;var Tc=ut(fg(),1);var Gs=new WeakMap;var Cc=["error","warn","log","info"],Nc="warn";function dg(r){if(Nc&&Cc.indexOf(r)<=Cc.indexOf(Nc)){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];console[r](...t)}}function Mc(r){return Cc.reduce((e,t)=>(e[t]=dg.bind(console,t,r),e),{})}Mc.level=r=>{Nc=r};dg.level=Mc.level;var er=Mc;var Pc=er("quill:events"),pC=["selectionchange","mousedown","mouseup","click"];pC.forEach(r=>{document.addEventListener(r,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Array.from(document.querySelectorAll(".ql-container")).forEach(n=>{let s=Gs.get(n);s&&s.emitter&&s.emitter.handleDOM(...t)})})});var Vs=class extends Tc.default{constructor(){super(),this.domListeners={},this.on("error",Pc.error)}emit(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Pc.log.call(Pc,...t),super.emit(...t)}handleDOM(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];(this.domListeners[e.type]||[]).forEach(s=>{let{node:o,handler:a}=s;(e.target===o||o.contains(e.target))&&a(e,...i)})}listenDOM(e,t,i){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:i})}};he(Vs,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),he(Vs,"sources",{API:"api",SILENT:"silent",USER:"user"});var Te=Vs;var Dc=er("quill:selection"),It=class{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}},$c=class{constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new It(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Te.sources.USER),1)}),this.emitter.on(Te.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;let i=this.getNativeRange();i!=null&&i.start.node!==this.cursor.textNode&&this.emitter.once(Te.events.SCROLL_UPDATE,(n,s)=>{try{this.root.contains(i.start.node)&&this.root.contains(i.end.node)&&this.setNativeRange(i.start.node,i.start.offset,i.end.node,i.end.offset);let o=s.some(a=>a.type==="characterData"||a.type==="childList"||a.type==="attributes"&&a.target===this.root);this.update(o?Te.sources.SILENT:n)}catch(o){}})}),this.emitter.on(Te.events.SCROLL_OPTIMIZE,(i,n)=>{if(n.range){let{startNode:s,startOffset:o,endNode:a,endOffset:l}=n.range;this.setNativeRange(s,o,a,l),this.update(Te.sources.SILENT)}}),this.update(Te.sources.SILENT)}handleComposition(){this.emitter.on(Te.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Te.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){let e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Te.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();let i=this.getNativeRange();if(!(i==null||!i.native.collapsed||this.scroll.query(e,Se.BLOCK))){if(i.start.node!==this.cursor.textNode){let n=this.scroll.find(i.start.node,!1);if(n==null)return;if(n instanceof wt){let s=n.split(i.start.offset);n.parent.insertBefore(this.cursor,s)}else n.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=this.scroll.length();e=Math.min(e,i-1),t=Math.min(e+t,i-1)-e;let n,[s,o]=this.scroll.leaf(e);if(s==null)return null;if(t>0&&o===s.length()){let[m]=this.scroll.leaf(e+1);if(m){let[b]=this.scroll.line(e),[h]=this.scroll.line(e+1);b===h&&(s=m,o=0)}}[n,o]=s.position(o,!0);let a=document.createRange();if(t>0)return a.setStart(n,o),[s,o]=this.scroll.leaf(e+t),s==null?null:([n,o]=s.position(o,!0),a.setEnd(n,o),a.getBoundingClientRect());let l="left",f;if(n instanceof Text){if(!n.data.length)return null;o<n.data.length?(a.setStart(n,o),a.setEnd(n,o+1)):(a.setStart(n,o-1),a.setEnd(n,o),l="right"),f=a.getBoundingClientRect()}else{if(!(s.domNode instanceof Element))return null;f=s.domNode.getBoundingClientRect(),o>0&&(l="right")}return{bottom:f.top+f.height,height:f.height,left:f[l],right:f[l],top:f.top,width:0}}getNativeRange(){let e=document.getSelection();if(e==null||e.rangeCount<=0)return null;let t=e.getRangeAt(0);if(t==null)return null;let i=this.normalizeNative(t);return Dc.info("getNativeRange",i),i}getRange(){let e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];let t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Lc(this.root,document.activeElement)}normalizedToRange(e){let t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);let i=t.map(o=>{let[a,l]=o,f=this.scroll.find(a,!0),m=f.offset(this.scroll);return l===0?m:f instanceof wt?m+f.index(a,l):m+f.length()}),n=Math.min(Math.max(...i),this.scroll.length()-1),s=Math.min(n,...i);return new It(s,n-s)}normalizeNative(e){if(!Lc(this.root,e.startContainer)||!e.collapsed&&!Lc(this.root,e.endContainer))return null;let t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(i=>{let{node:n,offset:s}=i;for(;!(n instanceof Text)&&n.childNodes.length>0;)if(n.childNodes.length>s)n=n.childNodes[s],s=0;else if(n.childNodes.length===s)n=n.lastChild,n instanceof Text?s=n.data.length:n.childNodes.length>0?s=n.childNodes.length:s=n.childNodes.length+1;else break;i.node=n,i.offset=s}),t}rangeToNative(e){let t=this.scroll.length(),i=(n,s)=>{n=Math.min(t-1,n);let[o,a]=this.scroll.leaf(n);return o?o.position(a,s):[null,-1]};return[...i(e.index,!1),...i(e.index+e.length,!0)]}setNativeRange(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Dc.info("setNativeRange",e,t,i,n),e!=null&&(this.root.parentNode==null||e.parentNode==null||i.parentNode==null))return;let o=document.getSelection();if(o!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});let{native:a}=this.getNativeRange()||{};if(a==null||s||e!==a.startContainer||t!==a.startOffset||i!==a.endContainer||n!==a.endOffset){e instanceof Element&&e.tagName==="BR"&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),i instanceof Element&&i.tagName==="BR"&&(n=Array.from(i.parentNode.childNodes).indexOf(i),i=i.parentNode);let l=document.createRange();l.setStart(e,t),l.setEnd(i,n),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te.sources.API;if(typeof t=="string"&&(i=t,t=!1),Dc.info("setRange",e),e!=null){let n=this.rangeToNative(e);this.setNativeRange(...n,t)}else this.setNativeRange(null);this.update(i)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te.sources.USER,t=this.lastRange,[i,n]=this.getRange();if(this.lastRange=i,this.lastNative=n,this.lastRange!=null&&(this.savedRange=this.lastRange),!Ri(t,this.lastRange)){if(!this.composing&&n!=null&&n.native.collapsed&&n.start.node!==this.cursor.textNode){let o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}let s=[Te.events.SELECTION_CHANGE,Ar(this.lastRange),Ar(t),e];this.emitter.emit(Te.events.EDITOR_CHANGE,...s),e!==Te.sources.SILENT&&this.emitter.emit(...s)}}};function Lc(r,e){try{e.parentNode}catch(t){return!1}return r.contains(e)}var hg=$c;var mC=/^[ -~]*$/,jc=class{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();let i=pg(e),n=new dt.default;return gC(i.ops.slice()).reduce((o,a)=>{let l=dt.Op.length(a),f=a.attributes||{},m=!1,b=!1;if(a.insert!=null){if(n.retain(l),typeof a.insert=="string"){let u=a.insert;b=!u.endsWith(`
`)&&(t<=o||!!this.scroll.descendant(kt,o)[0]),this.scroll.insertAt(o,u);let[d,_]=this.scroll.line(o),y=Ft({},Ht(d));if(d instanceof Qe){let[g]=d.descendant(wt,_);g&&(y=Ft(y,Ht(g)))}f=dt.AttributeMap.diff(y,f)||{}}else if(typeof a.insert=="object"){let u=Object.keys(a.insert)[0];if(u==null)return o;let d=this.scroll.query(u,Se.INLINE)!=null;if(d)(t<=o||!!this.scroll.descendant(kt,o)[0])&&(b=!0);else if(o>0){let[_,y]=this.scroll.descendant(wt,o-1);_ instanceof _t?_.value()[y]!==`
`&&(m=!0):_ instanceof ct&&_.statics.scope===Se.INLINE_BLOT&&(m=!0)}if(this.scroll.insertAt(o,u,a.insert[u]),d){let[_]=this.scroll.descendant(wt,o);if(_){let y=Ft({},Ht(_));f=dt.AttributeMap.diff(y,f)||{}}}}t+=l}else if(n.push(a),a.retain!==null&&typeof a.retain=="object"){let u=Object.keys(a.retain)[0];if(u==null)return o;this.scroll.updateEmbedAt(o,u,a.retain[u])}Object.keys(f).forEach(u=>{this.scroll.formatAt(o,l,u,f[u])});let h=m?1:0,p=b?1:0;return t+=h+p,n.retain(h),n.delete(p),o+l+h+p},0),n.reduce((o,a)=>typeof a.delete=="number"?(this.scroll.deleteAt(o,a.delete),o):o+dt.Op.length(a),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(i)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new dt.default().retain(e).delete(t))}formatLine(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(i).forEach(s=>{this.scroll.lines(e,Math.max(t,1)).forEach(o=>{o.format(s,i[s])})}),this.scroll.optimize();let n=new dt.default().retain(e).retain(t,Ar(i));return this.update(n)}formatText(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(i).forEach(s=>{this.scroll.formatAt(e,t,s,i[s])});let n=new dt.default().retain(e).retain(t,Ar(i));return this.update(n)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new dt.default)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=[],n=[];t===0?this.scroll.path(e).forEach(a=>{let[l]=a;l instanceof Qe?i.push(l):l instanceof wt&&n.push(l)}):(i=this.scroll.lines(e,t),n=this.scroll.descendants(wt,e,t));let[s,o]=[i,n].map(a=>{let l=a.shift();if(l==null)return{};let f=Ht(l);for(;Object.keys(f).length>0;){let m=a.shift();if(m==null)return f;f=_C(Ht(m),f)}return f});return ze(ze({},s),o)}getHTML(e,t){let[i,n]=this.scroll.line(e);if(i){let s=i.length();return i.length()>=n+t&&!(n===0&&t===s)?Ks(i,n,t,!0):Ks(this.scroll,e,t,!0)}return""}getText(e,t){return this.getContents(e,t).filter(i=>typeof i.insert=="string").map(i=>i.insert).join("")}insertContents(e,t){let i=pg(t),n=new dt.default().retain(e).concat(i);return this.scroll.insertContents(e,i),this.update(n)}insertEmbed(e,t,i){return this.scroll.insertAt(e,t,i),this.update(new dt.default().retain(e).insert({[t]:i}))}insertText(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(i).forEach(n=>{this.scroll.formatAt(e,t.length,n,i[n])}),this.update(new dt.default().retain(e).insert(t,Ar(i)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;let e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==Qe.blotName)return!1;let t=e;return t.children.length>1?!1:t.children.head instanceof Tt}removeFormat(e,t){let i=this.getText(e,t),[n,s]=this.scroll.line(e+t),o=0,a=new dt.default;n!=null&&(o=n.length()-s,a=n.delta().slice(s,s+o-1).insert(`
`));let f=this.getContents(e,t+o).diff(new dt.default().insert(i).concat(a)),m=new dt.default().retain(e).concat(f);return this.applyDelta(m)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,n=this.delta;if(t.length===1&&t[0].type==="characterData"&&t[0].target.data.match(mC)&&this.scroll.find(t[0].target)){let s=this.scroll.find(t[0].target),o=Ht(s),a=s.offset(this.scroll),l=t[0].oldValue.replace(gi.CONTENTS,""),f=new dt.default().insert(l),m=new dt.default().insert(s.value()),b=i&&{oldRange:mg(i.oldRange,-a),newRange:mg(i.newRange,-a)};e=new dt.default().retain(a).concat(f.diff(m,b)).reduce((p,u)=>u.insert?p.insert(u.insert,o):p.push(u),new dt.default),this.delta=n.compose(e)}else this.delta=this.getDelta(),(!e||!Ri(n.compose(e),this.delta))&&(e=n.diff(this.delta,i));return e}};function Yn(r,e,t){if(r.length===0){let[p]=Rc(t.pop());return e<=0?`</li></${p}>`:`</li></${p}>${Yn([],e-1,t)}`}let[{child:i,offset:n,length:s,indent:o,type:a},...l]=r,[f,m]=Rc(a);if(o>e)return t.push(a),o===e+1?`<${f}><li${m}>${Ks(i,n,s)}${Yn(l,o,t)}`:`<${f}><li>${Yn(r,e+1,t)}`;let b=t[t.length-1];if(o===e&&a===b)return`</li><li${m}>${Ks(i,n,s)}${Yn(l,o,t)}`;let[h]=Rc(t.pop());return`</li></${h}>${Yn(r,e-1,t)}`}function Ks(r,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in r&&typeof r.html=="function")return r.html(e,t);if(r instanceof _t)return Wi(r.value().slice(e,e+t)).replaceAll(" ","&nbsp;");if(r instanceof zt){if(r.statics.blotName==="list-container"){let f=[];return r.children.forEachAt(e,t,(m,b,h)=>{let p="formats"in m&&typeof m.formats=="function"?m.formats():{};f.push({child:m,offset:b,length:h,indent:p.indent||0,type:p.list})}),Yn(f,-1,[])}let n=[];if(r.children.forEachAt(e,t,(f,m,b)=>{n.push(Ks(f,m,b))}),i||r.statics.blotName==="list")return n.join("");let{outerHTML:s,innerHTML:o}=r.domNode,[a,l]=s.split(`>${o}<`);return a==="<table"?`<table style="border: 1px solid #000;">${n.join("")}<${l}`:`${a}>${n.join("")}<${l}`}return r.domNode instanceof Element?r.domNode.outerHTML:""}function _C(r,e){return Object.keys(e).reduce((t,i)=>{if(r[i]==null)return t;let n=e[i];return n===r[i]?t[i]=n:Array.isArray(n)?n.indexOf(r[i])<0?t[i]=n.concat([r[i]]):t[i]=n:t[i]=[n,r[i]],t},{})}function Rc(r){let e=r==="ordered"?"ol":"ul";switch(r){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function pg(r){return r.reduce((e,t)=>{if(typeof t.insert=="string"){let i=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(i,t.attributes)}return e.push(t)},new dt.default)}function mg(r,e){let{index:t,length:i}=r;return new It(t+e,i)}function gC(r){let e=[];return r.forEach(t=>{typeof t.insert=="string"?t.insert.split(`
`).forEach((n,s)=>{s&&e.push({insert:`
`,attributes:t.attributes}),n&&e.push({insert:n,attributes:t.attributes})}):e.push(t)}),e}var _g=jc;var rl=class{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}};he(rl,"DEFAULTS",{});var pt=rl;var il="\uFEFF",Ic=class extends ct{constructor(e,t){super(e,t),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(i=>{this.contentNode.appendChild(i)}),this.leftGuard=document.createTextNode(il),this.rightGuard=document.createTextNode(il),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,i,n=e.data.split(il).join("");if(e===this.leftGuard)if(this.prev instanceof _t){let s=this.prev.length();this.prev.insertAt(s,n),t={startNode:this.prev.domNode,startOffset:s+n.length}}else i=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(i),this),t={startNode:i,startOffset:n.length};else e===this.rightGuard&&(this.next instanceof _t?(this.next.insertAt(0,n),t={startNode:this.next.domNode,startOffset:n.length}):(i=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(i),this.next),t={startNode:i,startOffset:n.length}));return e.data=il,t}update(e,t){e.forEach(i=>{if(i.type==="characterData"&&(i.target===this.leftGuard||i.target===this.rightGuard)){let n=this.restore(i.target);n&&(t.range=n)}})}},Wn=Ic;var qc=class{constructor(e,t){he(this,"isComposing",!1);this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){let t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof Wn)&&(this.emitter.emit(Te.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(Te.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(Te.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(Te.events.COMPOSITION_END,e),this.isComposing=!1}},gg=qc;var Bc=class{constructor(e,t){he(this,"modules",{});this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){let t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}},Js=Bc;he(Js,"DEFAULTS",{modules:{}}),he(Js,"themes",{default:Bc});var Gn=Js;var yC=r=>r.parentElement||r.getRootNode().host||null,bC=r=>{let e=r.getBoundingClientRect(),t="offsetWidth"in r&&Math.abs(e.width)/r.offsetWidth||1,i="offsetHeight"in r&&Math.abs(e.height)/r.offsetHeight||1;return{top:e.top,right:e.left+r.clientWidth*t,bottom:e.top+r.clientHeight*i,left:e.left}},nl=r=>{let e=parseInt(r,10);return Number.isNaN(e)?0:e},yg=(r,e,t,i,n,s)=>r<t&&e>i?0:r<t?-(t-r+n):e>i?e-r>i-t?r+n-t:e-i+s:0,vC=(r,e)=>{var s,o,a,l,f;let t=r.ownerDocument,i=e,n=r;for(;n;){let m=n===t.body,b=m?{top:0,right:(o=(s=window.visualViewport)==null?void 0:s.width)!=null?o:t.documentElement.clientWidth,bottom:(l=(a=window.visualViewport)==null?void 0:a.height)!=null?l:t.documentElement.clientHeight,left:0}:bC(n),h=getComputedStyle(n),p=yg(i.left,i.right,b.left,b.right,nl(h.scrollPaddingLeft),nl(h.scrollPaddingRight)),u=yg(i.top,i.bottom,b.top,b.bottom,nl(h.scrollPaddingTop),nl(h.scrollPaddingBottom));if(p||u)if(m)(f=t.defaultView)==null||f.scrollBy(p,u);else{let{scrollLeft:d,scrollTop:_}=n;u&&(n.scrollTop+=u),p&&(n.scrollLeft+=p);let y=n.scrollLeft-d,g=n.scrollTop-_;i={left:i.left-y,top:i.top-g,right:i.right-y,bottom:i.bottom-g}}n=m||h.position==="fixed"?null:yC(n)}},bg=vC;var wC=100,xC=["block","break","cursor","inline","scroll","text"],AC=(r,e,t)=>{let i=new fi;return xC.forEach(n=>{let s=e.query(n);s&&i.register(s)}),r.forEach(n=>{var a;let s=e.query(n);s||t.error(`Cannot register "${n}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;s;)if(i.register(s),s="blotName"in s&&(a=s.requiredContainer)!=null?a:null,o+=1,o>wC){t.error(`Cycle detected in registering blot requiredContainer: "${n}"`);break}}),i},vg=AC;var Kn=er("quill"),sl=new fi;zt.uiClass="ql-ui";var Vn=class{static debug(e){e===!0&&(e="log"),er.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Gs.get(e)||sl.find(e,t)}static import(e){return this.imports[e]==null&&Kn.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){let e=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),i="attrName"in e?e.attrName:e.blotName;typeof i=="string"?this.register(`formats/${i}`,e,t):Object.keys(e).forEach(n=>{this.register(n,e[n],t)})}else{let e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],i=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!i&&Kn.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&t&&typeof t!="boolean"&&t.blotName!=="abstract"&&sl.register(t),typeof t.register=="function"&&t.register(sl)}}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=kC(e,t),this.container=this.options.container,this.container==null){Kn.error("Invalid Quill container",e);return}this.options.debug&&Vn.debug(this.options.debug);let i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Gs.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Te;let n=Ds.blotName,s=this.options.registry.query(n);if(!s||!("blotName"in s))throw new Error(`Cannot initialize Quill without "${n}" blot`);if(this.scroll=new s(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new _g(this.scroll),this.selection=new hg(this.scroll,this.emitter),this.composition=new gg(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Te.events.EDITOR_CHANGE,o=>{o===Te.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Te.events.SCROLL_UPDATE,(o,a)=>{let l=this.selection.lastRange,[f]=this.selection.getRange(),m=l&&f?{oldRange:l,newRange:f}:void 0;yr.call(this,()=>this.editor.update(null,a,m),o)}),this.emitter.on(Te.events.SCROLL_EMBED_UPDATE,(o,a)=>{let l=this.selection.lastRange,[f]=this.selection.getRange(),m=l&&f?{oldRange:l,newRange:f}:void 0;yr.call(this,()=>{let b=new yi.default().retain(o.offset(this)).retain({[o.statics.blotName]:a});return this.editor.update(b,[],m)},Vn.sources.USER)}),i){let o=this.clipboard.convert({html:`${i}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){let i=e;e=document.createElement("div"),e.classList.add(i)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,i){return[e,t,,i]=Gr(e,t,i),yr.call(this,()=>this.editor.deleteText(e,t),i,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;let t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te.sources.API;return yr.call(this,()=>{let n=this.getSelection(!0),s=new yi.default;if(n==null)return s;if(this.scroll.query(e,Se.BLOCK))s=this.editor.formatLine(n.index,n.length,{[e]:t});else{if(n.length===0)return this.selection.format(e,t),s;s=this.editor.formatText(n.index,n.length,{[e]:t})}return this.setSelection(n,Te.sources.SILENT),s},i)}formatLine(e,t,i,n,s){let o;return[e,t,o,s]=Gr(e,t,i,n,s),yr.call(this,()=>this.editor.formatLine(e,t,o),s,e,0)}formatText(e,t,i,n,s){let o;return[e,t,o,s]=Gr(e,t,i,n,s),yr.call(this,()=>this.editor.formatText(e,t,o),s,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=null;if(typeof e=="number"?i=this.selection.getBounds(e,t):i=this.selection.getBounds(e.index,e.length),!i)return null;let n=this.container.getBoundingClientRect();return{bottom:i.bottom-n.top,height:i.height,left:i.left-n.left,right:i.right-n.left,top:i.top-n.top,width:i.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=Gr(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t!=null?t:this.getLength()-e),[e,t]=Gr(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(t=t!=null?t:this.getLength()-e),[e,t]=Gr(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Vn.sources.API;return yr.call(this,()=>this.editor.insertEmbed(e,t,i),n,e)}insertText(e,t,i,n,s){let o;return[e,,o,s]=Gr(e,0,i,n,s),yr.call(this,()=>this.editor.insertText(e,t,o),s,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,i){return[e,t,,i]=Gr(e,t,i),yr.call(this,()=>this.editor.removeFormat(e,t),i,e)}scrollRectIntoView(e){bg(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){let e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API;return yr.call(this,()=>{e=new yi.default(e);let i=this.getLength(),n=this.editor.deleteText(0,i),s=this.editor.insertContents(0,e),o=this.editor.deleteText(this.getLength()-1,1);return n.compose(s).compose(o)},t)}setSelection(e,t,i){e==null?this.selection.setRange(null,t||Vn.sources.API):([e,t,,i]=Gr(e,t,i),this.selection.setRange(new It(Math.max(0,e),t),i),i!==Te.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API,i=new yi.default().insert(e);return this.setContents(i,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API;return yr.call(this,()=>(e=new yi.default(e),this.editor.applyDelta(e)),t,!0)}},me=Vn;he(me,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:sl,theme:"default"}),he(me,"events",Te.events),he(me,"sources",Te.sources),he(me,"version","2.0.3"),he(me,"imports",{delta:yi.default,parchment:Ls,"core/module":pt,"core/theme":Gn});function wg(r){return typeof r=="string"?document.querySelector(r):r}function Fc(r){return Object.entries(r!=null?r:{}).reduce((e,t)=>{let[i,n]=t;return Zt(ze({},e),{[i]:n===!0?{}:n})},{})}function xg(r){return Object.fromEntries(Object.entries(r).filter(e=>e[1]!==void 0))}function kC(r,e){let t=wg(r);if(!t)throw new Error("Invalid Quill container");let n=!e.theme||e.theme===me.DEFAULTS.theme?Gn:me.import(`themes/${e.theme}`);if(!n)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);let p=me.DEFAULTS,{modules:s}=p,o=Au(p,["modules"]),u=n.DEFAULTS,{modules:a}=u,l=Au(u,["modules"]),f=Fc(e.modules);f!=null&&f.toolbar&&f.toolbar.constructor!==Object&&(f=Zt(ze({},f),{toolbar:{container:f.toolbar}}));let m=Ft({},Fc(s),Fc(a),f),b=ze(ze(ze({},o),xg(l)),xg(e)),h=e.registry;return h?e.formats&&Kn.warn('Ignoring "formats" option because "registry" is specified'):h=e.formats?vg(e.formats,b.registry,Kn):b.registry,Zt(ze({},b),{registry:h,container:t,theme:n,modules:Object.entries(m).reduce((d,_)=>{let[y,g]=_;if(!g)return d;let v=me.import(`modules/${y}`);return v==null?(Kn.error(`Cannot load ${y} module. Are you sure you registered it?`),d):Zt(ze({},d),{[y]:Ft({},v.DEFAULTS||{},g)})},{}),bounds:wg(b.bounds)})}function yr(r,e,t,i){if(!this.isEnabled()&&e===Te.sources.USER&&!this.allowReadOnlyEdits)return new yi.default;let n=t==null?null:this.getSelection(),s=this.editor.delta,o=r();if(n!=null&&(t===!0&&(t=n.index),i==null?n=Ag(n,o,e):i!==0&&(n=Ag(n,t,i,e)),this.setSelection(n,Te.sources.SILENT)),o.length()>0){let a=[Te.events.TEXT_CHANGE,o,s,e];this.emitter.emit(Te.events.EDITOR_CHANGE,...a),e!==Te.sources.SILENT&&this.emitter.emit(...a)}return o}function Gr(r,e,t,i,n){let s={};return typeof r.index=="number"&&typeof r.length=="number"?typeof e!="number"?(n=i,i=t,t=e,e=r.length,r=r.index):(e=r.length,r=r.index):typeof e!="number"&&(n=i,i=t,t=e,e=0),typeof t=="object"?(s=t,n=i):typeof t=="string"&&(i!=null?s[t]=i:n=t),n=n||Te.sources.API,[r,e,s,n]}function Ag(r,e,t,i){let n=typeof t=="number"?t:0;if(r==null)return null;let s,o;return e&&typeof e.transformPosition=="function"?[s,o]=[r.index,r.index+r.length].map(a=>e.transformPosition(a,i!==Te.sources.USER)):[s,o]=[r.index,r.index+r.length].map(a=>a<e||a===e&&i===Te.sources.USER?a:n>=0?a+n:Math.max(e,a+n)),new It(s,o-s)}var zc=class extends Rn{},ur=zc;var cr=ut(Qt(),1);function kg(r){return r instanceof Qe||r instanceof kt}function Eg(r){return typeof r.updateContent=="function"}var bi=class extends Ds{constructor(e,t,i){let{emitter:n}=i;super(e,t),this.emitter=n,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",s=>this.handleDragStart(s))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;let e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(Te.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(Te.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(Te.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){let[i,n]=this.line(e),[s]=this.line(e+t);if(super.deleteAt(e,t),s!=null&&i!==s&&n>0){if(i instanceof kt||s instanceof kt){this.optimize();return}let o=s.children.head instanceof Tt?null:s.children.head;i.moveChildren(s,o),i.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,t,i,n){super.formatAt(e,t,i,n),this.optimize()}insertAt(e,t,i){if(e>=this.length())if(i==null||this.scroll.query(t,Se.BLOCK)==null){let n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n),i==null&&t.endsWith(`
`)?n.insertAt(0,t.slice(0,-1),i):n.insertAt(0,t,i)}else{let n=this.scroll.create(t,i);this.appendChild(n)}else super.insertAt(e,t,i);this.optimize()}insertBefore(e,t){if(e.statics.scope===Se.INLINE_BLOT){let i=this.scroll.create(this.statics.defaultChild.blotName);i.appendChild(e),super.insertBefore(i,t)}else super.insertBefore(e,t)}insertContents(e,t){let i=this.deltaToRenderBlocks(t.concat(new cr.default().insert(`
`))),n=i.pop();if(n==null)return;this.batchStart();let s=i.shift();if(s){let l=s.type==="block"&&(s.delta.length()===0||!this.descendant(kt,e)[0]&&e<this.length()),f=s.type==="block"?s.delta:new cr.default().insert({[s.key]:s.value});Uc(this,e,f);let m=s.type==="block"?1:0,b=e+f.length()+m;l&&this.insertAt(b-1,`
`);let h=Ht(this.line(e)[0]),p=cr.AttributeMap.diff(h,s.attributes)||{};Object.keys(p).forEach(u=>{this.formatAt(b-1,1,u,p[u])}),e=b}let[o,a]=this.children.find(e);if(i.length&&(o&&(o=o.split(a),a=0),i.forEach(l=>{if(l.type==="block"){let f=this.createBlock(l.attributes,o||void 0);Uc(f,0,l.delta)}else{let f=this.create(l.key,l.value);this.insertBefore(f,o||void 0),Object.keys(l.attributes).forEach(m=>{f.format(m,l.attributes[m])})}})),n.type==="block"&&n.delta.length()){let l=o?o.offset(o.scroll)+a:this.length();Uc(this,l,n.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){let t=this.path(e).pop();if(!t)return[null,-1];let[i,n]=t;return i instanceof wt?[i,n]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(kg,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,i=(n,s,o)=>{let a=[],l=o;return n.children.forEachAt(s,o,(f,m,b)=>{kg(f)?a.push(f):f instanceof Rn&&(a=a.concat(i(f,m,l))),l-=b}),a};return i(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(Te.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=Te.sources.USER;typeof e=="string"&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(i=>{let{target:n}=i,s=this.find(n,!0);return s&&!Eg(s)}),e.length>0&&this.emitter.emit(Te.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(Te.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,i){let[n]=this.descendant(s=>s instanceof kt,e);n&&n.statics.blotName===t&&Eg(n)&&n.updateContent(i)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){let t=[],i=new cr.default;return e.forEach(n=>{var o;let s=n==null?void 0:n.insert;if(!!s)if(typeof s=="string"){let a=s.split(`
`);a.slice(0,-1).forEach(f=>{var m;i.insert(f,n.attributes),t.push({type:"block",delta:i,attributes:(m=n.attributes)!=null?m:{}}),i=new cr.default});let l=a[a.length-1];l&&i.insert(l,n.attributes)}else{let a=Object.keys(s)[0];if(!a)return;this.query(a,Se.INLINE)?i.push(n):(i.length()&&t.push({type:"block",delta:i,attributes:{}}),i=new cr.default,t.push({type:"blockEmbed",key:a,value:s[a],attributes:(o=n.attributes)!=null?o:{}}))}}),i.length()&&t.push({type:"block",delta:i,attributes:{}}),t}createBlock(e,t){let i,n={};Object.entries(e).forEach(a=>{let[l,f]=a;this.query(l,Se.BLOCK&Se.BLOT)!=null?i=l:n[l]=f});let s=this.create(i||this.statics.defaultChild.blotName,i?e[i]:void 0);this.insertBefore(s,t||void 0);let o=s.length();return Object.entries(n).forEach(a=>{let[l,f]=a;s.formatAt(0,o,l,f)}),s}};he(bi,"blotName","scroll"),he(bi,"className","ql-editor"),he(bi,"tagName","DIV"),he(bi,"defaultChild",Qe),he(bi,"allowedChildren",[Qe,kt,ur]);function Uc(r,e,t){t.reduce((i,n)=>{let s=cr.Op.length(n),o=n.attributes||{};if(n.insert!=null){if(typeof n.insert=="string"){let a=n.insert;r.insertAt(i,a);let[l]=r.descendant(wt,i),f=Ht(l);o=cr.AttributeMap.diff(f,o)||{}}else if(typeof n.insert=="object"){let a=Object.keys(n.insert)[0];if(a==null)return i;if(r.insertAt(i,a,n.insert[a]),r.scroll.query(a,Se.INLINE)!=null){let[f]=r.descendant(wt,i),m=Ht(f);o=cr.AttributeMap.diff(m,o)||{}}}}return Object.keys(o).forEach(a=>{r.formatAt(i,s,a,o[a])}),i+s},e)}var Og=bi;var Yt=ut(Qt(),1);var Hc={scope:Se.BLOCK,whitelist:["right","center","justify"]},Sg=new $t("align","align",Hc),Yc=new vt("align","ql-align",Hc),ol=new Ut("align","text-align",Hc);var Zs=class extends Ut{value(e){let t=super.value(e);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${t.split(",").map(n=>`00${parseInt(n,10).toString(16)}`.slice(-2)).join("")}`):t}},Tg=new vt("color","ql-color",{scope:Se.INLINE}),Xs=new Zs("color","color",{scope:Se.INLINE});var Cg=new vt("background","ql-bg",{scope:Se.INLINE}),Qs=new Zs("background","background-color",{scope:Se.INLINE});var Er=class extends ur{static create(e){let t=super.create(e);return t.setAttribute("spellcheck","false"),t}code(e,t){return this.children.map(i=>i.length()<=1?"":i.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>
${Wi(this.code(e,t))}
</pre>`}},gt=class extends Qe{static register(){me.register(Er)}};he(gt,"TAB","  ");var Jn=class extends Ct{};Jn.blotName="code";Jn.tagName="CODE";gt.blotName="code-block";gt.className="ql-code-block";gt.tagName="DIV";Er.blotName="code-block-container";Er.className="ql-code-block-container";Er.tagName="DIV";Er.allowedChildren=[gt];gt.allowedChildren=[_t,Tt,gi];gt.requiredContainer=Er;var Wc={scope:Se.BLOCK,whitelist:["rtl"]},al=new $t("direction","dir",Wc),Gc=new vt("direction","ql-direction",Wc),ll=new Ut("direction","direction",Wc);var Ng={scope:Se.INLINE,whitelist:["serif","monospace"]},Kc=new vt("font","ql-font",Ng),Vc=class extends Ut{value(e){return super.value(e).replace(/["']/g,"")}},ul=new Vc("font","font-family",Ng);var Jc=new vt("size","ql-size",{scope:Se.INLINE,whitelist:["small","large","huge"]}),cl=new Ut("size","font-size",{scope:Se.INLINE,whitelist:["10px","18px","32px"]});var Mt=ut(Qt(),1);var EC=er("quill:keyboard"),OC=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Vi=class extends pt{static match(e,t){return["altKey","ctrlKey","metaKey","shiftKey"].some(i=>!!t[i]!==e[i]&&t[i]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(i=>{this.options.bindings[i]&&this.addBinding(this.options.bindings[i])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=TC(e);if(n==null){EC.warn("Attempted to add invalid keyboard binding",n);return}typeof t=="function"&&(t={handler:t}),typeof i=="function"&&(i={handler:i}),(Array.isArray(n.key)?n.key:[n.key]).forEach(o=>{let a=ze(ze(Zt(ze({},n),{key:o}),t),i);this.bindings[a.key]=this.bindings[a.key]||[],this.bindings[a.key].push(a)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;let n=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(y=>Vi.match(e,y));if(n.length===0)return;let s=me.find(e.target,!0);if(s&&s.scroll!==this.quill.scroll)return;let o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;let[a,l]=this.quill.getLine(o.index),[f,m]=this.quill.getLeaf(o.index),[b,h]=o.length===0?[f,m]:this.quill.getLeaf(o.index+o.length),p=f instanceof jn?f.value().slice(0,m):"",u=b instanceof jn?b.value().slice(h):"",d={collapsed:o.length===0,empty:o.length===0&&a.length()<=1,format:this.quill.getFormat(o),line:a,offset:l,prefix:p,suffix:u,event:e};n.some(y=>{if(y.collapsed!=null&&y.collapsed!==d.collapsed||y.empty!=null&&y.empty!==d.empty||y.offset!=null&&y.offset!==d.offset)return!1;if(Array.isArray(y.format)){if(y.format.every(g=>d.format[g]==null))return!1}else if(typeof y.format=="object"&&!Object.keys(y.format).every(g=>y.format[g]===!0?d.format[g]!=null:y.format[g]===!1?d.format[g]==null:Ri(y.format[g],d.format[g])))return!1;return y.prefix!=null&&!y.prefix.test(d.prefix)||y.suffix!=null&&!y.suffix.test(d.suffix)?!1:y.handler.call(this,o,d,y)!==!0})&&e.preventDefault()})}handleBackspace(e,t){let i=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let n={},[s]=this.quill.getLine(e.index),o=new Mt.default().retain(e.index-i).delete(i);if(t.offset===0){let[a]=this.quill.getLine(e.index-1);if(a&&!(a.statics.blotName==="block"&&a.length()<=1)){let f=s.formats(),m=this.quill.getFormat(e.index-1,1);if(n=Mt.AttributeMap.diff(f,m)||{},Object.keys(n).length>0){let b=new Mt.default().retain(e.index+s.length()-2).retain(1,n);o=o.compose(b)}}}this.quill.updateContents(o,me.sources.USER),this.quill.focus()}handleDelete(e,t){let i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-i)return;let n={},[s]=this.quill.getLine(e.index),o=new Mt.default().retain(e.index).delete(i);if(t.offset>=s.length()-1){let[a]=this.quill.getLine(e.index+1);if(a){let l=s.formats(),f=this.quill.getFormat(e.index,1);n=Mt.AttributeMap.diff(l,f)||{},Object.keys(n).length>0&&(o=o.retain(a.length()-1).retain(1,n))}}this.quill.updateContents(o,me.sources.USER),this.quill.focus()}handleDeleteRange(e){eo({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){let i=Object.keys(t.format).reduce((s,o)=>(this.quill.scroll.query(o,Se.BLOCK)&&!Array.isArray(t.format[o])&&(s[o]=t.format[o]),s),{}),n=new Mt.default().retain(e.index).delete(e.length).insert(`
`,i);this.quill.updateContents(n,me.sources.USER),this.quill.setSelection(e.index+1,me.sources.SILENT),this.quill.focus()}},SC={bindings:{bold:Zc("bold"),italic:Zc("italic"),underline:Zc("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(r,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",me.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(r,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",me.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(r,e){e.format.indent!=null?this.quill.format("indent","-1",me.sources.USER):e.format.list!=null&&this.quill.format("list",!1,me.sources.USER)}},"indent code-block":Mg(!0),"outdent code-block":Mg(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(r){this.quill.deleteText(r.index-1,1,me.sources.USER)}},tab:{key:"Tab",handler(r,e){if(e.format.table)return!0;this.quill.history.cutoff();let t=new Mt.default().retain(r.index).delete(r.length).insert("	");return this.quill.updateContents(t,me.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index+1,me.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,me.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(r,e){let t={list:!1};e.format.indent&&(t.indent=!1),this.quill.formatLine(r.index,r.length,t,me.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(r){let[e,t]=this.quill.getLine(r.index),i=Zt(ze({},e.formats()),{list:"checked"}),n=new Mt.default().retain(r.index).insert(`
`,i).retain(e.length()-t-1).retain(1,{list:"unchecked"});this.quill.updateContents(n,me.sources.USER),this.quill.setSelection(r.index+1,me.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(r,e){let[t,i]=this.quill.getLine(r.index),n=new Mt.default().retain(r.index).insert(`
`,e.format).retain(t.length()-i-1).retain(1,{header:null});this.quill.updateContents(n,me.sources.USER),this.quill.setSelection(r.index+1,me.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(r){let e=this.quill.getModule("table");if(e){let[t,i,n,s]=e.getTable(r),o=CC(t,i,n,s);if(o==null)return;let a=t.offset();if(o<0){let l=new Mt.default().retain(a).insert(`
`);this.quill.updateContents(l,me.sources.USER),this.quill.setSelection(r.index+1,r.length,me.sources.SILENT)}else if(o>0){a+=t.length();let l=new Mt.default().retain(a).insert(`
`);this.quill.updateContents(l,me.sources.USER),this.quill.setSelection(a,me.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(r,e){let{event:t,line:i}=e,n=i.offset(this.quill.scroll);t.shiftKey?this.quill.setSelection(n-1,me.sources.USER):this.quill.setSelection(n+i.length(),me.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(r,e){if(this.quill.scroll.query("list")==null)return!0;let{length:t}=e.prefix,[i,n]=this.quill.getLine(r.index);if(n>t)return!0;let s;switch(e.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(r.index," ",me.sources.USER),this.quill.history.cutoff();let o=new Mt.default().retain(r.index-n).delete(t+1).retain(i.length()-2-n).retain(1,{list:s});return this.quill.updateContents(o,me.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index-t,me.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(r){let[e,t]=this.quill.getLine(r.index),i=2,n=e;for(;n!=null&&n.length()<=1&&n.formats()["code-block"];)if(n=n.prev,i-=1,i<=0){let s=new Mt.default().retain(r.index+e.length()-t-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,me.sources.USER),this.quill.setSelection(r.index-1,me.sources.SILENT),!1}return!0}},"embed left":fl("ArrowLeft",!1),"embed left shift":fl("ArrowLeft",!0),"embed right":fl("ArrowRight",!1),"embed right shift":fl("ArrowRight",!0),"table down":Pg(!1),"table up":Pg(!0)}};Vi.DEFAULTS=SC;function Mg(r){return{key:"Tab",shiftKey:!r,format:{"code-block":!0},handler(e,t){let{event:i}=t,n=this.quill.scroll.query("code-block"),{TAB:s}=n;if(e.length===0&&!i.shiftKey){this.quill.insertText(e.index,s,me.sources.USER),this.quill.setSelection(e.index+s.length,me.sources.SILENT);return}let o=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e),{index:a,length:l}=e;o.forEach((f,m)=>{r?(f.insertAt(0,s),m===0?a+=s.length:l+=s.length):f.domNode.textContent.startsWith(s)&&(f.deleteAt(0,s.length),m===0?a-=s.length:l-=s.length)}),this.quill.update(me.sources.USER),this.quill.setSelection(a,l,me.sources.SILENT)}}}function fl(r,e){return{key:r,shiftKey:e,altKey:null,[r==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(i){let{index:n}=i;r==="ArrowRight"&&(n+=i.length+1);let[s]=this.quill.getLeaf(n);return s instanceof ct?(r==="ArrowLeft"?e?this.quill.setSelection(i.index-1,i.length+1,me.sources.USER):this.quill.setSelection(i.index-1,me.sources.USER):e?this.quill.setSelection(i.index,i.length+1,me.sources.USER):this.quill.setSelection(i.index+i.length+1,me.sources.USER),!1):!0}}}function Zc(r){return{key:r[0],shortKey:!0,handler(e,t){this.quill.format(r,!t.format[r],me.sources.USER)}}}function Pg(r){return{key:r?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,t){let i=r?"prev":"next",n=t.line,s=n.parent[i];if(s!=null){if(s.statics.blotName==="table-row"){let o=s.children.head,a=n;for(;a.prev!=null;)a=a.prev,o=o.next;let l=o.offset(this.quill.scroll)+Math.min(t.offset,o.length()-1);this.quill.setSelection(l,0,me.sources.USER)}}else{let o=n.table()[i];o!=null&&(r?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,me.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,me.sources.USER))}return!1}}}function TC(r){if(typeof r=="string"||typeof r=="number")r={key:r};else if(typeof r=="object")r=Ar(r);else return null;return r.shortKey&&(r[OC]=r.shortKey,delete r.shortKey),r}function eo(r){let{quill:e,range:t}=r,i=e.getLines(t),n={};if(i.length>1){let s=i[0].formats(),o=i[i.length-1].formats();n=Mt.AttributeMap.diff(o,s)||{}}e.deleteText(t,me.sources.USER),Object.keys(n).length>0&&e.formatLine(t.index,1,n,me.sources.USER),e.setSelection(t.index,me.sources.SILENT)}function CC(r,e,t,i){return e.prev==null&&e.next==null?t.prev==null&&t.next==null?i===0?-1:1:t.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}var NC=/font-weight:\s*normal/,MC=["P","OL","UL"],Dg=r=>r&&MC.includes(r.tagName),PC=r=>{Array.from(r.querySelectorAll("br")).filter(e=>Dg(e.previousElementSibling)&&Dg(e.nextElementSibling)).forEach(e=>{var t;(t=e.parentNode)==null||t.removeChild(e)})},DC=r=>{Array.from(r.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var t;return(t=e.getAttribute("style"))==null?void 0:t.match(NC)}).forEach(e=>{var i;let t=r.createDocumentFragment();t.append(...e.childNodes),(i=e.parentNode)==null||i.replaceChild(t,e)})};function Xc(r){r.querySelector('[id^="docs-internal-guid-"]')&&(DC(r),PC(r))}var LC=/\bmso-list:[^;]*ignore/i,$C=/\bmso-list:[^;]*\bl(\d+)/i,RC=/\bmso-list:[^;]*\blevel(\d+)/i,jC=(r,e)=>{let t=r.getAttribute("style"),i=t==null?void 0:t.match($C);if(!i)return null;let n=Number(i[1]),s=t==null?void 0:t.match(RC),o=s?Number(s[1]):1,a=new RegExp(`@list l${n}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=e.match(a),f=l&&l[1]==="bullet"?"bullet":"ordered";return{id:n,indent:o,type:f,element:r}},IC=r=>{var o,a;let e=Array.from(r.querySelectorAll("[style*=mso-list]")),t=[],i=[];e.forEach(l=>{(l.getAttribute("style")||"").match(LC)?t.push(l):i.push(l)}),t.forEach(l=>{var f;return(f=l.parentNode)==null?void 0:f.removeChild(l)});let n=r.documentElement.innerHTML,s=i.map(l=>jC(l,n)).filter(l=>l);for(;s.length;){let l=[],f=s.shift();for(;f;)l.push(f),f=s.length&&((o=s[0])==null?void 0:o.element)===f.element.nextElementSibling&&s[0].id===f.id?s.shift():null;let m=document.createElement("ul");l.forEach(p=>{let u=document.createElement("li");u.setAttribute("data-list",p.type),p.indent>1&&u.setAttribute("class",`ql-indent-${p.indent-1}`),u.innerHTML=p.element.innerHTML,m.appendChild(u)});let b=(a=l[0])==null?void 0:a.element,{parentNode:h}=b!=null?b:{};b&&(h==null||h.replaceChild(m,b)),l.slice(1).forEach(p=>{let{element:u}=p;h==null||h.removeChild(u)})}};function Qc(r){r.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&IC(r)}var qC=[Qc,Xc],BC=r=>{r.documentElement&&qC.forEach(e=>{e(r)})},Lg=BC;var FC=er("quill:clipboard"),zC=[[Node.TEXT_NODE,eN],[Node.TEXT_NODE,Rg],["br",GC],[Node.ELEMENT_NODE,Rg],[Node.ELEMENT_NODE,WC],[Node.ELEMENT_NODE,YC],[Node.ELEMENT_NODE,XC],["li",JC],["ol, ul",ZC],["pre",VC],["tr",QC],["b",ef("bold")],["i",ef("italic")],["strike",ef("strike")],["style",KC]],UC=[Sg,al].reduce((r,e)=>(r[e.keyName]=e,r),{}),$g=[ol,Qs,Xs,ll,ul,cl].reduce((r,e)=>(r[e.keyName]=e,r),{}),to=class extends pt{constructor(e,t){var i;super(e,t),this.quill.root.addEventListener("copy",n=>this.onCaptureCopy(n,!1)),this.quill.root.addEventListener("cut",n=>this.onCaptureCopy(n,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],zC.concat((i=this.options.matchers)!=null?i:[]).forEach(n=>{let[s,o]=n;this.addMatcher(s,o)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:i}=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n[gt.blotName])return new Yt.default().insert(i||"",{[gt.blotName]:n[gt.blotName]});if(!t)return new Yt.default().insert(i||"",n);let s=this.convertHTML(t);return ro(s,`
`)&&(s.ops[s.ops.length-1].attributes==null||n.table)?s.compose(new Yt.default().retain(s.length()-1).delete(1)):s}normalizeHTML(e){Lg(e)}convertHTML(e){let t=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(t);let i=t.body,n=new WeakMap,[s,o]=this.prepareMatching(i,n);return hl(this.quill.scroll,i,s,o,n)}dangerouslyPasteHTML(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:me.sources.API;if(typeof e=="string"){let n=this.convert({html:e,text:""});this.quill.setContents(n,t),this.quill.setSelection(0,me.sources.SILENT)}else{let n=this.convert({html:t,text:""});this.quill.updateContents(new Yt.default().retain(e).concat(n),i),this.quill.setSelection(e+n.length(),me.sources.SILENT)}}onCaptureCopy(e){var o,a;let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();let[i]=this.quill.selection.getRange();if(i==null)return;let{html:n,text:s}=this.onCopy(i,t);(o=e.clipboardData)==null||o.setData("text/plain",s),(a=e.clipboardData)==null||a.setData("text/html",n),t&&eo({range:i,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(t=>t[0]!=="#").join(`
`)}onCapturePaste(e){var o,a,l,f,m;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();let t=this.quill.getSelection(!0);if(t==null)return;let i=(o=e.clipboardData)==null?void 0:o.getData("text/html"),n=(a=e.clipboardData)==null?void 0:a.getData("text/plain");if(!i&&!n){let b=(l=e.clipboardData)==null?void 0:l.getData("text/uri-list");b&&(n=this.normalizeURIList(b))}let s=Array.from(((f=e.clipboardData)==null?void 0:f.files)||[]);if(!i&&s.length>0){this.quill.uploader.upload(t,s);return}if(i&&s.length>0){let b=new DOMParser().parseFromString(i,"text/html");if(b.body.childElementCount===1&&((m=b.body.firstElementChild)==null?void 0:m.tagName)==="IMG"){this.quill.uploader.upload(t,s);return}}this.onPaste(t,{html:i,text:n})}onCopy(e){let t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:i,html:n}=t,s=this.quill.getFormat(e.index),o=this.convert({text:i,html:n},s);FC.log("onPaste",o,{text:i,html:n});let a=new Yt.default().retain(e.index).delete(e.length).concat(o);this.quill.updateContents(a,me.sources.USER),this.quill.setSelection(a.length()-e.length,me.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){let i=[],n=[];return this.matchers.forEach(s=>{let[o,a]=s;switch(o){case Node.TEXT_NODE:n.push(a);break;case Node.ELEMENT_NODE:i.push(a);break;default:Array.from(e.querySelectorAll(o)).forEach(l=>{if(t.has(l)){let f=t.get(l);f==null||f.push(a)}else t.set(l,[a])});break}}),[i,n]}};he(to,"DEFAULTS",{matchers:[]});function Ki(r,e,t,i){return i.query(e)?r.reduce((n,s)=>{if(!s.insert)return n;if(s.attributes&&s.attributes[e])return n.push(s);let o=t?{[e]:t}:{};return n.insert(s.insert,ze(ze({},o),s.attributes))},new Yt.default):r}function ro(r,e){let t="";for(let i=r.ops.length-1;i>=0&&t.length<e.length;--i){let n=r.ops[i];if(typeof n.insert!="string")break;t=n.insert+t}return t.slice(-1*e.length)===e}function vi(r,e){if(!(r instanceof Element))return!1;let t=e.query(r);return t&&t.prototype instanceof ct?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(r.tagName.toLowerCase())}function HC(r,e){return r.previousElementSibling&&r.nextElementSibling&&!vi(r.previousElementSibling,e)&&!vi(r.nextElementSibling,e)}var dl=new WeakMap;function jg(r){return r==null?!1:(dl.has(r)||(r.tagName==="PRE"?dl.set(r,!0):dl.set(r,jg(r.parentNode))),dl.get(r))}function hl(r,e,t,i,n){return e.nodeType===e.TEXT_NODE?i.reduce((s,o)=>o(e,s,r),new Yt.default):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((s,o)=>{let a=hl(r,o,t,i,n);return o.nodeType===e.ELEMENT_NODE&&(a=t.reduce((l,f)=>f(o,l,r),a),a=(n.get(o)||[]).reduce((l,f)=>f(o,l,r),a)),s.concat(a)},new Yt.default):new Yt.default}function ef(r){return(e,t,i)=>Ki(t,r,!0,i)}function YC(r,e,t){let i=$t.keys(r),n=vt.keys(r),s=Ut.keys(r),o={};return i.concat(n).concat(s).forEach(a=>{let l=t.query(a,Se.ATTRIBUTE);l!=null&&(o[l.attrName]=l.value(r),o[l.attrName])||(l=UC[a],l!=null&&(l.attrName===a||l.keyName===a)&&(o[l.attrName]=l.value(r)||void 0),l=$g[a],l!=null&&(l.attrName===a||l.keyName===a)&&(l=$g[a],o[l.attrName]=l.value(r)||void 0))}),Object.entries(o).reduce((a,l)=>{let[f,m]=l;return Ki(a,f,m,t)},e)}function WC(r,e,t){let i=t.query(r);if(i==null)return e;if(i.prototype instanceof ct){let n={},s=i.value(r);if(s!=null)return n[i.blotName]=s,new Yt.default().insert(n,i.formats(r,t))}else if(i.prototype instanceof ji&&!ro(e,`
`)&&e.insert(`
`),"blotName"in i&&"formats"in i&&typeof i.formats=="function")return Ki(e,i.blotName,i.formats(r,t),t);return e}function GC(r,e){return ro(e,`
`)||e.insert(`
`),e}function VC(r,e,t){let i=t.query("code-block"),n=i&&"formats"in i&&typeof i.formats=="function"?i.formats(r,t):!0;return Ki(e,"code-block",n,t)}function KC(){return new Yt.default}function JC(r,e,t){let i=t.query(r);if(i==null||i.blotName!=="list"||!ro(e,`
`))return e;let n=-1,s=r.parentNode;for(;s!=null;)["OL","UL"].includes(s.tagName)&&(n+=1),s=s.parentNode;return n<=0?e:e.reduce((o,a)=>a.insert?a.attributes&&typeof a.attributes.indent=="number"?o.push(a):o.insert(a.insert,ze({indent:n},a.attributes||{})):o,new Yt.default)}function ZC(r,e,t){let i=r,n=i.tagName==="OL"?"ordered":"bullet",s=i.getAttribute("data-checked");return s&&(n=s==="true"?"checked":"unchecked"),Ki(e,"list",n,t)}function Rg(r,e,t){if(!ro(e,`
`)){if(vi(r,t)&&(r.childNodes.length>0||r instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&r.nextSibling){let i=r.nextSibling;for(;i!=null;){if(vi(i,t))return e.insert(`
`);let n=t.query(i);if(n&&n.prototype instanceof kt)return e.insert(`
`);i=i.firstChild}}}return e}function XC(r,e,t){var s;let i={},n=r.style||{};return n.fontStyle==="italic"&&(i.italic=!0),n.textDecoration==="underline"&&(i.underline=!0),n.textDecoration==="line-through"&&(i.strike=!0),(((s=n.fontWeight)==null?void 0:s.startsWith("bold"))||parseInt(n.fontWeight,10)>=700)&&(i.bold=!0),e=Object.entries(i).reduce((o,a)=>{let[l,f]=a;return Ki(o,l,f,t)},e),parseFloat(n.textIndent||0)>0?new Yt.default().insert("	").concat(e):e}function QC(r,e,t){var n,s;let i=((n=r.parentElement)==null?void 0:n.tagName)==="TABLE"?r.parentElement:(s=r.parentElement)==null?void 0:s.parentElement;if(i!=null){let a=Array.from(i.querySelectorAll("tr")).indexOf(r)+1;return Ki(e,"table",a,t)}return e}function eN(r,e,t){var n;let i=r.data;if(((n=r.parentElement)==null?void 0:n.tagName)==="O:P")return e.insert(i.trim());if(!jg(r)){if(i.trim().length===0&&i.includes(`
`)&&!HC(r,t))return e;i=i.replace(/[^\S\u00a0]/g," "),i=i.replace(/ {2,}/g," "),(r.previousSibling==null&&r.parentElement!=null&&vi(r.parentElement,t)||r.previousSibling instanceof Element&&vi(r.previousSibling,t))&&(i=i.replace(/^ /,"")),(r.nextSibling==null&&r.parentElement!=null&&vi(r.parentElement,t)||r.nextSibling instanceof Element&&vi(r.nextSibling,t))&&(i=i.replace(/ $/,"")),i=i.replaceAll("\xA0"," ")}return e.insert(i)}var io=class extends pt{constructor(t,i){super(t,i);he(this,"lastRecorded",0);he(this,"ignoreChange",!1);he(this,"stack",{undo:[],redo:[]});he(this,"currentRange",null);this.quill.on(me.events.EDITOR_CHANGE,(n,s,o,a)=>{n===me.events.SELECTION_CHANGE?s&&a!==me.sources.SILENT&&(this.currentRange=s):n===me.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||a===me.sources.USER?this.record(s,o):this.transform(s)),this.currentRange=tf(this.currentRange,s))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",n=>{n.inputType==="historyUndo"?(this.undo(),n.preventDefault()):n.inputType==="historyRedo"&&(this.redo(),n.preventDefault())})}change(t,i){if(this.stack[t].length===0)return;let n=this.stack[t].pop();if(!n)return;let s=this.quill.getContents(),o=n.delta.invert(s);this.stack[i].push({delta:o,range:tf(n.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,me.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,i){if(t.ops.length===0)return;this.stack.redo=[];let n=t.invert(i),s=this.currentRange,o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){let a=this.stack.undo.pop();a&&(n=n.compose(a.delta),s=a.range)}else this.lastRecorded=o;n.length()!==0&&(this.stack.undo.push({delta:n,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){Ig(this.stack.undo,t),Ig(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,me.sources.USER);else{let i=rN(this.quill.scroll,t.delta);this.quill.setSelection(i,me.sources.USER)}}};he(io,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function Ig(r,e){let t=e;for(let i=r.length-1;i>=0;i-=1){let n=r[i];r[i]={delta:t.transform(n.delta,!0),range:n.range&&tf(n.range,t)},t=n.delta.transform(t),r[i].delta.length()===0&&r.splice(i,1)}}function tN(r,e){let t=e.ops[e.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(i=>r.query(i,Se.BLOCK)!=null):!1}function rN(r,e){let t=e.reduce((n,s)=>n+(s.delete||0),0),i=e.length()-t;return tN(r,e)&&(i-=1),i}function tf(r,e){if(!r)return r;let t=e.transformPosition(r.index),i=e.transformPosition(r.index+r.length);return{index:t,length:i-t}}var qg=ut(Qt(),1);var pl=class extends pt{constructor(e,t){super(e,t),e.root.addEventListener("drop",i=>{var o;i.preventDefault();let n=null;if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(i.clientX,i.clientY);else if(document.caretPositionFromPoint){let a=document.caretPositionFromPoint(i.clientX,i.clientY);n=document.createRange(),n.setStart(a.offsetNode,a.offset),n.setEnd(a.offsetNode,a.offset)}let s=n&&e.selection.normalizeNative(n);if(s){let a=e.selection.normalizedToRange(s);(o=i.dataTransfer)!=null&&o.files&&this.upload(a,i.dataTransfer.files)}})}upload(e,t){let i=[];Array.from(t).forEach(n=>{var s;n&&((s=this.options.mimetypes)==null?void 0:s.includes(n.type))&&i.push(n)}),i.length>0&&this.options.handler.call(this,e,i)}};pl.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(r,e){if(!this.quill.scroll.query("image"))return;let t=e.map(i=>new Promise(n=>{let s=new FileReader;s.onload=()=>{n(s.result)},s.readAsDataURL(i)}));Promise.all(t).then(i=>{let n=i.reduce((s,o)=>s.insert({image:o}),new qg.default().retain(r.index).delete(r.length));this.quill.updateContents(n,Te.sources.USER),this.quill.setSelection(r.index+i.length,Te.sources.SILENT)})}};var Bg=pl;var wi=ut(Qt(),1);var Fg=ut(Qt(),1);var iN=["insertText","insertReplacementText"],rf=class extends pt{constructor(e,t){super(e,t),e.root.addEventListener("beforeinput",i=>{this.handleBeforeInput(i)}),/Android/i.test(navigator.userAgent)||e.on(me.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){eo({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(t){let i=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Fg.default().retain(e.index).insert(t,i),me.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,me.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!iN.includes(e.inputType))return;let t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;let i=nN(e);if(i==null)return;let n=this.quill.selection.normalizeNative(t),s=n?this.quill.selection.normalizedToRange(n):null;s&&this.replaceText(s,i)&&e.preventDefault()}handleCompositionStart(){let e=this.quill.getSelection();e&&this.replaceText(e)}};function nN(r){var e;return typeof r.data=="string"?r.data:(e=r.dataTransfer)!=null&&e.types.includes("text/plain")?r.dataTransfer.getData("text/plain"):null}var zg=rf;var sN=/Mac/i.test(navigator.platform),oN=100,aN=r=>!!(r.key==="ArrowLeft"||r.key==="ArrowRight"||r.key==="ArrowUp"||r.key==="ArrowDown"||r.key==="Home"||sN&&r.key==="a"&&r.ctrlKey===!0),nf=class extends pt{constructor(t,i){super(t,i);he(this,"isListening",!1);he(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,i){let{line:n,event:s}=i;if(!(n instanceof zt)||!n.uiNode)return!0;let o=getComputedStyle(n.domNode).direction==="rtl";return o&&s.key!=="ArrowRight"||!o&&s.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(s.shiftKey?1:0),me.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&aN(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+oN,this.isListening)return;this.isListening=!0;let t=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){let t=document.getSelection();if(!t)return;let i=t.getRangeAt(0);if(i.collapsed!==!0||i.startOffset!==0)return;let n=this.quill.scroll.find(i.startContainer);if(!(n instanceof zt)||!n.uiNode)return;let s=document.createRange();s.setStartAfter(n.uiNode),s.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(s)}},Ug=nf;me.register({"blots/block":Qe,"blots/block/embed":kt,"blots/break":Tt,"blots/container":ur,"blots/cursor":gi,"blots/embed":Wn,"blots/inline":Ct,"blots/scroll":Og,"blots/text":_t,"modules/clipboard":to,"modules/history":io,"modules/keyboard":Vi,"modules/uploader":Bg,"modules/input":zg,"modules/uiNode":Ug});var ml=me;var sf=class extends vt{add(e,t){let i=0;if(t==="+1"||t==="-1"){let n=this.value(e)||0;i=t==="+1"?n+1:n-1}else typeof t=="number"&&(i=t);return i===0?(this.remove(e),!0):super.add(e,i.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}},lN=new sf("indent","ql-indent",{scope:Se.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),Hg=lN;var no=class extends Qe{};he(no,"blotName","blockquote"),he(no,"tagName","blockquote");var Yg=no;var so=class extends Qe{static formats(e){return this.tagName.indexOf(e.tagName)+1}};he(so,"blotName","header"),he(so,"tagName",["H1","H2","H3","H4","H5","H6"]);var Wg=so;var Ji=class extends ur{};Ji.blotName="list-container";Ji.tagName="OL";var xi=class extends Qe{static create(e){let t=super.create();return t.setAttribute("data-list",e),t}static formats(e){return e.getAttribute("data-list")||void 0}static register(){me.register(Ji)}constructor(e,t){super(e,t);let i=t.ownerDocument.createElement("span"),n=s=>{if(!e.isEnabled())return;let o=this.statics.formats(t,e);o==="checked"?(this.format("list","unchecked"),s.preventDefault()):o==="unchecked"&&(this.format("list","checked"),s.preventDefault())};i.addEventListener("mousedown",n),i.addEventListener("touchstart",n),this.attachUI(i)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):super.format(e,t)}};xi.blotName="list";xi.tagName="LI";Ji.allowedChildren=[xi];xi.requiredContainer=Ji;var oo=class extends Ct{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}};he(oo,"blotName","bold"),he(oo,"tagName",["STRONG","B"]);var Zn=oo;var ao=class extends Zn{};he(ao,"blotName","italic"),he(ao,"tagName",["EM","I"]);var Gg=ao;var tr=class extends Ct{static create(e){let t=super.create(e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}static formats(e){return e.getAttribute("href")}static sanitize(e){return of(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute("href",this.constructor.sanitize(t))}};he(tr,"blotName","link"),he(tr,"tagName","A"),he(tr,"SANITIZED_URL","about:blank"),he(tr,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function of(r,e){let t=document.createElement("a");t.href=r;let i=t.href.slice(0,t.href.indexOf(":"));return e.indexOf(i)>-1}var lo=class extends Ct{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}};he(lo,"blotName","script"),he(lo,"tagName",["SUB","SUP"]);var Vg=lo;var uo=class extends Zn{};he(uo,"blotName","strike"),he(uo,"tagName",["S","STRIKE"]);var Kg=uo;var co=class extends Ct{};he(co,"blotName","underline"),he(co,"tagName","U");var Jg=co;var Xn=class extends Wn{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");let t=super.create(e);return typeof e=="string"&&(window.katex.render(e,t,{throwOnError:!1,errorColor:"#f00"}),t.setAttribute("data-value",e)),t}static value(e){return e.getAttribute("data-value")}html(){let{formula:e}=this.value();return`<span>${e}</span>`}};he(Xn,"blotName","formula"),he(Xn,"className","ql-formula"),he(Xn,"tagName","SPAN");var Zg=Xn;var Xg=["alt","height","width"],fo=class extends ct{static create(e){let t=super.create(e);return typeof e=="string"&&t.setAttribute("src",this.sanitize(e)),t}static formats(e){return Xg.reduce((t,i)=>(e.hasAttribute(i)&&(t[i]=e.getAttribute(i)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return of(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,t){Xg.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}};he(fo,"blotName","image"),he(fo,"tagName","IMG");var Qg=fo;var e0=["height","width"],Qn=class extends kt{static create(e){let t=super.create(e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen","true"),t.setAttribute("src",this.sanitize(e)),t}static formats(e){return e0.reduce((t,i)=>(e.hasAttribute(i)&&(t[i]=e.getAttribute(i)),t),{})}static sanitize(e){return tr.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,t){e0.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){let{video:e}=this.value();return`<a href="${e}">${e}</a>`}};he(Qn,"blotName","video"),he(Qn,"className","ql-video"),he(Qn,"tagName","IFRAME");var t0=Qn;var _l=ut(Qt(),1);var ho=new vt("code-token","hljs",{scope:Se.INLINE}),br=class extends Ct{static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(gt.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,i){super(e,t,i),ho.add(this.domNode,i)}format(e,t){e!==br.blotName?super.format(e,t):t?ho.add(this.domNode,t):(ho.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),ho.value(this.domNode)||this.unwrap()}};br.blotName="code-token";br.className="ql-token";var Wt=class extends gt{static create(e){let t=super.create(e);return typeof e=="string"&&t.setAttribute("data-language",e),t}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),br.blotName,!1),super.replaceWith(e,t)}},Zi=class extends Er{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===Wt.blotName&&(this.forceNext=!0,this.children.forEach(i=>{i.format(e,t)}))}formatAt(e,t,i,n){i===Wt.blotName&&(this.forceNext=!0),super.formatAt(e,t,i,n)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;let n=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,s=Wt.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==n){if(n.trim().length>0||this.cachedText==null){let o=this.children.reduce((l,f)=>l.concat(Oc(f,!1)),new _l.default),a=e(n,s);o.diff(a).reduce((l,f)=>{let{retain:m,attributes:b}=f;return m?(b&&Object.keys(b).forEach(h=>{[Wt.blotName,br.blotName].includes(h)&&this.formatAt(l,m,h,b[h])}),l+m):l},0)}this.cachedText=n,this.forceNext=!1}}html(e,t){let[i]=this.children.find(e);return`<pre data-language="${i?Wt.formats(i.domNode):"plain"}">
${Wi(this.code(e,t))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){let t=Wt.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}};Zi.allowedChildren=[Wt];Wt.requiredContainer=Zi;Wt.allowedChildren=[br,gi,_t,Tt];var uN=(r,e,t)=>{if(typeof r.versionString=="string"){let i=r.versionString.split(".")[0];if(parseInt(i,10)>=11)return r.highlight(t,{language:e}).value}return r.highlight(e,t).value},po=class extends pt{static register(){me.register(br,!0),me.register(Wt,!0),me.register(Zi,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((i,n)=>{let{key:s}=n;return i[s]=!0,i},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(me.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof Zi))return;let t=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(i=>{let{key:n,label:s}=i,o=t.ownerDocument.createElement("option");o.textContent=s,o.setAttribute("value",n),t.appendChild(o)}),t.addEventListener("change",()=>{e.format(Wt.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(t),e.children.head&&(t.value=Wt.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(me.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(me.sources.USER);let i=this.quill.getSelection();(e==null?this.quill.scroll.descendants(Zi):[e]).forEach(s=>{s.highlight(this.highlightBlot,t)}),this.quill.update(me.sources.SILENT),i!=null&&this.quill.setSelection(i,me.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(t=this.languages[t]?t:"plain",t==="plain")return Wi(e).split(`
`).reduce((n,s,o)=>(o!==0&&n.insert(`
`,{[gt.blotName]:t}),n.insert(s)),new _l.default);let i=this.quill.root.ownerDocument.createElement("div");return i.classList.add(gt.className),i.innerHTML=uN(this.options.hljs,t,e),hl(this.quill.scroll,i,[(n,s)=>{let o=ho.value(n);return o?s.compose(new _l.default().retain(s.length(),{[br.blotName]:o})):s}],[(n,s)=>n.data.split(`
`).reduce((o,a,l)=>(l!==0&&o.insert(`
`,{[gt.blotName]:t}),o.insert(a)),s)],new WeakMap)}};po.DEFAULTS={hljs:(()=>window.hljs)(),interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};var r0=ut(Qt(),1);var af=class extends Qe{static create(e){let t=super.create();return e?t.setAttribute("data-row",e):t.setAttribute("data-row",gl()),t}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,t){e===af.blotName&&t?this.domNode.setAttribute("data-row",t):super.format(e,t)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}},Gt=af;he(Gt,"blotName","table"),he(Gt,"tagName","TD");var fr=class extends ur{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){let e=this.children.head.formats(),t=this.children.tail.formats(),i=this.next.children.head.formats(),n=this.next.children.tail.formats();return e.table===t.table&&e.table===i.table&&e.table===n.table}return!1}optimize(e){super.optimize(e),this.children.forEach(t=>{if(t.next==null)return;let i=t.formats(),n=t.next.formats();if(i.table!==n.table){let s=this.splitAfter(t);s&&s.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}};he(fr,"blotName","table-row"),he(fr,"tagName","TR");var rr=class extends ur{};he(rr,"blotName","table-body"),he(rr,"tagName","TBODY");var Vr=class extends ur{balanceCells(){let e=this.descendants(fr),t=e.reduce((i,n)=>Math.max(n.children.length,i),0);e.forEach(i=>{new Array(t-i.children.length).fill(0).forEach(()=>{let n;i.children.head!=null&&(n=Gt.formats(i.children.head.domNode));let s=this.scroll.create(Gt.blotName,n);i.appendChild(s),s.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){let[t]=this.descendant(rr);t==null||t.children.head==null||t.children.forEach(i=>{let n=i.children.at(e);n!=null&&n.remove()})}insertColumn(e){let[t]=this.descendant(rr);t==null||t.children.head==null||t.children.forEach(i=>{let n=i.children.at(e),s=Gt.formats(i.children.head.domNode),o=this.scroll.create(Gt.blotName,s);i.insertBefore(o,n)})}insertRow(e){let[t]=this.descendant(rr);if(t==null||t.children.head==null)return;let i=gl(),n=this.scroll.create(fr.blotName);t.children.head.children.forEach(()=>{let o=this.scroll.create(Gt.blotName,i);n.appendChild(o)});let s=t.children.at(e);t.insertBefore(n,s)}rows(){let e=this.children.head;return e==null?[]:e.children.map(t=>t)}};he(Vr,"blotName","table-container"),he(Vr,"tagName","TABLE");Vr.allowedChildren=[rr];rr.requiredContainer=Vr;rr.allowedChildren=[fr];fr.requiredContainer=rr;fr.allowedChildren=[Gt];Gt.requiredContainer=fr;function gl(){return`row-${Math.random().toString(36).slice(2,6)}`}var lf=class extends pt{static register(){me.register(Gt),me.register(fr),me.register(rr),me.register(Vr)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Vr).forEach(e=>{e.balanceCells()})}deleteColumn(){let[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(me.sources.USER))}deleteRow(){let[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(me.sources.USER))}deleteTable(){let[e]=this.getTable();if(e==null)return;let t=e.offset();e.remove(),this.quill.update(me.sources.USER),this.quill.setSelection(t,me.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];let[t,i]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==Gt.blotName)return[null,null,null,-1];let n=t.parent;return[n.parent.parent,n,t,i]}insertColumn(e){let t=this.quill.getSelection();if(!t)return;let[i,n,s]=this.getTable(t);if(s==null)return;let o=s.cellOffset();i.insertColumn(o+e),this.quill.update(me.sources.USER);let a=n.rowOffset();e===0&&(a+=1),this.quill.setSelection(t.index+a,t.length,me.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){let t=this.quill.getSelection();if(!t)return;let[i,n,s]=this.getTable(t);if(s==null)return;let o=n.rowOffset();i.insertRow(o+e),this.quill.update(me.sources.USER),e>0?this.quill.setSelection(t,me.sources.SILENT):this.quill.setSelection(t.index+n.children.length,t.length,me.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){let i=this.quill.getSelection();if(i==null)return;let n=new Array(e).fill(0).reduce(s=>{let o=new Array(t).fill(`
`).join("");return s.insert(o,{table:gl()})},new r0.default().retain(i.index));this.quill.updateContents(n,me.sources.USER),this.quill.setSelection(i.index,me.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(me.events.SCROLL_OPTIMIZE,e=>{e.some(t=>["TD","TR","TBODY","TABLE"].includes(t.target.tagName)?(this.quill.once(me.events.TEXT_CHANGE,(i,n,s)=>{s===me.sources.USER&&this.balanceTables()}),!0):!1)})}},i0=lf;var o0=ut(Qt(),1);var n0=er("quill:toolbar"),es=class extends pt{constructor(e,t){var i,n;if(super(e,t),Array.isArray(this.options.container)){let s=document.createElement("div");s.setAttribute("role","toolbar"),cN(s,this.options.container),(n=(i=e.container)==null?void 0:i.parentNode)==null||n.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){n0.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{var a;let o=(a=this.options.handlers)==null?void 0:a[s];o&&this.addHandler(s,o)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(me.events.EDITOR_CHANGE,()=>{let[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(n=>n.indexOf("ql-")===0);if(!t)return;if(t=t.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[t]==null&&this.quill.scroll.query(t)==null){n0.warn("ignoring attaching to nonexistent format",t,e);return}let i=e.tagName==="SELECT"?"change":"click";e.addEventListener(i,n=>{let s;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;let a=e.options[e.selectedIndex];a.hasAttribute("selected")?s=!1:s=a.value||!1}else e.classList.contains("ql-active")?s=!1:s=e.value||!e.hasAttribute("value"),n.preventDefault();this.quill.focus();let[o]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,s);else if(this.quill.scroll.query(t).prototype instanceof ct){if(s=prompt(`Enter ${t}`),!s)return;this.quill.updateContents(new o0.default().retain(o.index).delete(o.length).insert({[t]:s}),me.sources.USER)}else this.quill.format(t,s,me.sources.USER);this.update(o)}),this.controls.push([t,e])}update(e){let t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(i=>{let[n,s]=i;if(s.tagName==="SELECT"){let o=null;if(e==null)o=null;else if(t[n]==null)o=s.querySelector("option[selected]");else if(!Array.isArray(t[n])){let a=t[n];typeof a=="string"&&(a=a.replace(/"/g,'\\"')),o=s.querySelector(`option[value="${a}"]`)}o==null?(s.value="",s.selectedIndex=-1):o.selected=!0}else if(e==null)s.classList.remove("ql-active"),s.setAttribute("aria-pressed","false");else if(s.hasAttribute("value")){let o=t[n],a=o===s.getAttribute("value")||o!=null&&o.toString()===s.getAttribute("value")||o==null&&!s.getAttribute("value");s.classList.toggle("ql-active",a),s.setAttribute("aria-pressed",a.toString())}else{let o=t[n]!=null;s.classList.toggle("ql-active",o),s.setAttribute("aria-pressed",o.toString())}})}};es.DEFAULTS={};function s0(r,e,t){let i=document.createElement("button");i.setAttribute("type","button"),i.classList.add(`ql-${e}`),i.setAttribute("aria-pressed","false"),t!=null?(i.value=t,i.setAttribute("aria-label",`${e}: ${t}`)):i.setAttribute("aria-label",e),r.appendChild(i)}function cN(r,e){Array.isArray(e[0])||(e=[e]),e.forEach(t=>{let i=document.createElement("span");i.classList.add("ql-formats"),t.forEach(n=>{if(typeof n=="string")s0(i,n);else{let s=Object.keys(n)[0],o=n[s];Array.isArray(o)?fN(i,s,o):s0(i,s,o)}}),r.appendChild(i)})}function fN(r,e,t){let i=document.createElement("select");i.classList.add(`ql-${e}`),t.forEach(n=>{let s=document.createElement("option");n!==!1?s.setAttribute("value",String(n)):s.setAttribute("selected","selected"),i.appendChild(s)}),r.appendChild(i)}es.DEFAULTS={container:null,handlers:{clean(){let r=this.quill.getSelection();if(r!=null)if(r.length===0){let e=this.quill.getFormat();Object.keys(e).forEach(t=>{this.quill.scroll.query(t,Se.INLINE)!=null&&this.quill.format(t,!1,me.sources.USER)})}else this.quill.removeFormat(r.index,r.length,me.sources.USER)},direction(r){let{align:e}=this.quill.getFormat();r==="rtl"&&e==null?this.quill.format("align","right",me.sources.USER):!r&&e==="right"&&this.quill.format("align",!1,me.sources.USER),this.quill.format("direction",r,me.sources.USER)},indent(r){let e=this.quill.getSelection(),t=this.quill.getFormat(e),i=parseInt(t.indent||0,10);if(r==="+1"||r==="-1"){let n=r==="+1"?1:-1;t.direction==="rtl"&&(n*=-1),this.quill.format("indent",i+n,me.sources.USER)}},link(r){r===!0&&(r=prompt("Enter link URL:")),this.quill.format("link",r,me.sources.USER)},list(r){let e=this.quill.getSelection(),t=this.quill.getFormat(e);r==="check"?t.list==="checked"||t.list==="unchecked"?this.quill.format("list",!1,me.sources.USER):this.quill.format("list","unchecked",me.sources.USER):this.quill.format("list",r,me.sources.USER)}}};var dN='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',hN='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',pN='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',mN='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',_N='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',gN='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',yN='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',bN='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',a0='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',vN='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',wN='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',xN='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',AN='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',kN='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',EN='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',ON='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',SN='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',TN='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',CN='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',NN='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',MN='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',PN='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',DN='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',LN='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',$N='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',RN='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',jN='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',IN='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',qN='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',BN='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',FN='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',zN='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',UN='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Ai={align:{"":dN,center:hN,right:pN,justify:mN},background:_N,blockquote:gN,bold:yN,clean:bN,code:a0,"code-block":a0,color:vN,direction:{"":wN,rtl:xN},formula:AN,header:{1:kN,2:EN,3:ON,4:SN,5:TN,6:CN},italic:NN,image:MN,indent:{"+1":PN,"-1":DN},link:LN,list:{bullet:$N,check:RN,ordered:jN},script:{sub:IN,super:qN},strike:BN,table:FN,underline:zN,video:UN};var HN='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',l0=0;function u0(r,e){r.setAttribute(e,`${r.getAttribute(e)!=="true"}`)}var uf=class{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault();break;default:}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),u0(this.label,"aria-expanded"),u0(this.options,"aria-hidden")}buildItem(e){let t=document.createElement("span");t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item");let i=e.getAttribute("value");return i&&t.setAttribute("data-value",i),e.textContent&&t.setAttribute("data-label",e.textContent),t.addEventListener("click",()=>{this.selectItem(t,!0)}),t.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.selectItem(t,!0),n.preventDefault();break;case"Escape":this.escape(),n.preventDefault();break;default:}}),t}buildLabel(){let e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=HN,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){let e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${l0}`,l0+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(t=>{let i=this.buildItem(t);e.appendChild(i),t.selected===!0&&this.selectItem(i)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.container.querySelector(".ql-selected");e!==i&&(i!=null&&i.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){let i=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(i)}else this.selectItem(null);let t=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}},ki=uf;var cf=class extends ki{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(i=>{i.classList.add("ql-primary")})}buildItem(e){let t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute("value")||"",t}selectItem(e,t){super.selectItem(e,t);let i=this.label.querySelector(".ql-color-label"),n=e&&e.getAttribute("data-value")||"";i&&(i.tagName==="line"?i.style.stroke=n:i.style.fill=n)}},yl=cf;var ff=class extends ki{constructor(e,t){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(i=>{i.innerHTML=t[i.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);let i=e||this.defaultItem;if(i!=null){if(this.label.innerHTML===i.innerHTML)return;this.label.innerHTML=i.innerHTML}}},bl=ff;var YN=r=>{let{overflowY:e}=getComputedStyle(r,null);return e!=="visible"&&e!=="clip"},df=class{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,YN(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){let t=e.left+e.width/2-this.root.offsetWidth/2,i=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${i}px`,this.root.classList.remove("ql-flip");let n=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect(),o=0;if(s.right>n.right&&(o=n.right-s.right,this.root.style.left=`${t+o}px`),s.left<n.left&&(o=n.left-s.left,this.root.style.left=`${t+o}px`),s.bottom>n.bottom){let a=s.bottom-s.top,l=e.bottom-e.top+a;this.root.style.top=`${i-l}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},vl=df;var WN=[!1,"center","right","justify"],GN=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],VN=[!1,"serif","monospace"],KN=["1","2","3",!1],JN=["small",!1,"large","huge"],Kr=class extends Gn{constructor(e,t){super(e,t);let i=n=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",i);return}this.tooltip!=null&&!this.tooltip.root.contains(n.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(s=>{s.container.contains(n.target)||s.close()})};e.emitter.listenDOM("click",document.body,i)}addModule(e){let t=super.addModule(e);return e==="toolbar"&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(i=>{(i.getAttribute("class")||"").split(/\s+/).forEach(s=>{if(!!s.startsWith("ql-")&&(s=s.slice(3),t[s]!=null))if(s==="direction")i.innerHTML=t[s][""]+t[s].rtl;else if(typeof t[s]=="string")i.innerHTML=t[s];else{let o=i.value||"";o!=null&&t[s][o]&&(i.innerHTML=t[s][o])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(n=>{if(n.classList.contains("ql-align")&&(n.querySelector("option")==null&&mo(n,WN),typeof t.align=="object"))return new bl(n,t.align);if(n.classList.contains("ql-background")||n.classList.contains("ql-color")){let s=n.classList.contains("ql-background")?"background":"color";return n.querySelector("option")==null&&mo(n,GN,s==="background"?"#ffffff":"#000000"),new yl(n,t[s])}return n.querySelector("option")==null&&(n.classList.contains("ql-font")?mo(n,VN):n.classList.contains("ql-header")?mo(n,KN):n.classList.contains("ql-size")&&mo(n,JN)),new ki(n)});let i=()=>{this.pickers.forEach(n=>{n.update()})};this.quill.on(Te.events.EDITOR_CHANGE,i)}};Kr.DEFAULTS=Ft({},Gn.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let r=this.container.querySelector("input.ql-image[type=file]");r==null&&(r=document.createElement("input"),r.setAttribute("type","file"),r.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),r.classList.add("ql-image"),r.addEventListener("change",()=>{let e=this.quill.getSelection(!0);this.quill.uploader.upload(e,r.files),r.value=""}),this.container.appendChild(r)),r.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});var ts=class extends vl{constructor(e,t){super(e,t),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;t!=null?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");let i=this.quill.getBounds(this.quill.selection.savedRange);i!=null&&this.position(i),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{let{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,Te.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,Te.sources.USER)),this.quill.root.scrollTop=t;break}case"video":e=ZN(e);case"formula":{if(!e)break;let t=this.quill.getSelection(!0);if(t!=null){let i=t.index+t.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),e,Te.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(i+1," ",Te.sources.USER),this.quill.setSelection(i+2,Te.sources.USER)}break}default:}this.textbox.value="",this.hide()}};function ZN(r){let e=r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=r.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:r}function mo(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(i=>{let n=document.createElement("option");i===t?n.setAttribute("selected","selected"):n.setAttribute("value",String(i)),r.appendChild(n)})}var XN=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],wl=class extends ts{constructor(e,t){super(e,t),this.quill.on(Te.events.EDITOR_CHANGE,(i,n,s,o)=>{if(i===Te.events.SELECTION_CHANGE)if(n!=null&&n.length>0&&o===Te.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;let a=this.quill.getLines(n.index,n.length);if(a.length===1){let l=this.quill.getBounds(n);l!=null&&this.position(l)}else{let l=a[a.length-1],f=this.quill.getIndex(l),m=Math.min(l.length()-1,n.index+n.length-f),b=this.quill.getBounds(new It(f,m));b!=null&&this.position(b)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Te.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;let e=this.quill.getSelection();if(e!=null){let t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){let t=super.position(e),i=this.root.querySelector(".ql-tooltip-arrow");return i.style.marginLeft="",t!==0&&(i.style.marginLeft=`${-1*t-i.offsetWidth/2}px`),t}};he(wl,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));var _o=class extends Kr{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=XN),super(e,t),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new wl(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),Ai),this.buildPickers(e.container.querySelectorAll("select"),Ai))}};_o.DEFAULTS=Ft({},Kr.DEFAULTS,{modules:{toolbar:{handlers:{link(r){r?this.quill.theme.tooltip.edit():this.quill.format("link",!1,me.sources.USER)}}}}});var QN=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],xl=class extends ts{constructor(){super(...arguments);he(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){let i=this.linkRange;this.restoreFocus(),this.quill.formatText(i,"link",!1,Te.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(Te.events.SELECTION_CHANGE,(t,i,n)=>{if(t!=null){if(t.length===0&&n===Te.sources.USER){let[s,o]=this.quill.scroll.descendant(tr,t.index);if(s!=null){this.linkRange=new It(t.index-o,s.length());let a=tr.formats(s.domNode);this.preview.textContent=a,this.preview.setAttribute("href",a),this.show();let l=this.quill.getBounds(this.linkRange);l!=null&&this.position(l);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}};he(xl,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));var Al=class extends Kr{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=QN),super(e,t),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),Ai),this.buildPickers(e.container.querySelectorAll("select"),Ai),this.tooltip=new xl(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(t,i)=>{e.handlers.link.call(e,!i.format.link)}))}};Al.DEFAULTS=Ft({},Kr.DEFAULTS,{modules:{toolbar:{handlers:{link(r){if(r){let e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf("mailto:")!==0&&(t=`mailto:${t}`);let{tooltip:i}=this.quill.theme;i.edit("link",t)}else this.quill.format("link",!1,me.sources.USER)}}}}});var c0=Al;ml.register({"attributors/attribute/direction":al,"attributors/class/align":Yc,"attributors/class/background":Cg,"attributors/class/color":Tg,"attributors/class/direction":Gc,"attributors/class/font":Kc,"attributors/class/size":Jc,"attributors/style/align":ol,"attributors/style/background":Qs,"attributors/style/color":Xs,"attributors/style/direction":ll,"attributors/style/font":ul,"attributors/style/size":cl},!0);ml.register({"formats/align":Yc,"formats/direction":Gc,"formats/indent":Hg,"formats/background":Qs,"formats/color":Xs,"formats/font":Kc,"formats/size":Jc,"formats/blockquote":Yg,"formats/code-block":gt,"formats/header":Wg,"formats/list":xi,"formats/bold":Zn,"formats/code":Jn,"formats/italic":Gg,"formats/link":tr,"formats/script":Vg,"formats/strike":Kg,"formats/underline":Jg,"formats/formula":Zg,"formats/image":Qg,"formats/video":t0,"modules/syntax":po,"modules/table":i0,"modules/toolbar":es,"themes/bubble":_o,"themes/snow":c0,"ui/icons":Ai,"ui/picker":ki,"ui/icon-picker":bl,"ui/color-picker":yl,"ui/tooltip":vl},!0);var Ie=ml;var p0=ut(f0()),m0=ut(d0());Ie.register("modules/imageResize",p0.default);Ie.register("modules/magicUrl",m0.default);var _0=Ie.import("formats/code-block-container");_0.tagName="PRE";Ie.register(_0,!0);var eM=Ie.import("blots/embed"),h0=Ie.import("delta"),yo=class extends eM{};yo.blotName="Break";yo.tagName="br";Ie.register(yo);var g0=[!1,"8px","9px","10px","11px","12px","13px","14px","15px","16px","18px","20px","22px","24px","32px","36px","40px","48px","54px","64px","96px","128px"],y0=Ie.import("attributors/style/size");y0.whitelist=g0;Ie.register(y0,!0);var El=Ie.import("formats/table-container"),tM=El.create.bind(El);El.create=r=>{let e=tM(r);return e.classList.add("table"),e.classList.add("table-bordered"),e};Ie.register(El,!0);var rM=Ie.import("formats/link"),iM=Ie.import("formats/image"),Ol=class extends iM{static create(e){let t=super.create(e);return["style","align","src"].forEach(n=>{e[n]&&t.setAttribute(n,e[n])}),t}static value(e){return{align:e.align,style:e.style.cssText,src:e.src}}};Ie.register(Ol,!0);var mf=class extends rM{static create(e){let t=super.create(e);return e=this.sanitize(e),t.setAttribute("href",e),(e.startsWith("/")||e.indexOf(window.location.host))&&t.removeAttribute("target"),t}};Ie.register(mf,!0);var nM=Ie.import("modules/uploader");nM.DEFAULTS.mimetypes.push("image/gif","image/webp");var sM=Ie.import("attributors/style/background"),oM=Ie.import("attributors/style/color"),aM=Ie.import("attributors/style/font"),lM=Ie.import("attributors/style/align"),uM=Ie.import("attributors/style/direction");Ie.register(sM,!0);Ie.register(oM,!0);Ie.register(aM,!0);Ie.register(lM,!0);Ie.register(uM,!0);var cM=Ie.import("attributors/class/direction");Ie.register(cM,!0);var fM=Ie.import("blots/inline"),bo=class extends fM{constructor(e,t){super(e,t),this.domNode.style.color=this.domNode.color,e.outerHTML=this.domNode.outerHTML.replace(/<font/g,"<span").replace(/<\/font>/g,"</span>")}};bo.blotName="customColor";bo.tagName="font";Ie.register(bo,!0);frappe.ui.form.ControlTextEditor=class extends frappe.ui.form.ControlCode{make_wrapper(){super.make_wrapper()}make_input(){this.has_input=!0,this.make_quill_editor()}make_quill_editor(){if(this.quill)return;this.quill_container=$("<div>").appendTo(this.input_area),this.df.max_height&&$(this.quill_container).css({"max-height":this.df.max_height,overflow:"auto"}),this.quill=new Ie(this.quill_container[0],this.get_quill_options()),this.bind_events(),this.quill.getModule("toolbar").addHandler("table",this.handle_table_actions)}handle_table_actions(e){let t=this.quill.getModule("table");e==="insert-table"?t.insertTable(2,2):e==="insert-row-above"?t.insertRowAbove():e==="insert-row-below"?t.insertRowBelow():e==="insert-column-left"?t.insertColumnLeft():e==="insert-column-right"?t.insertColumnRight():e==="delete-row"?t.deleteRow():e==="delete-column"?t.deleteColumn():e==="delete-table"&&t.deleteTable(),e!=="delete-row"&&t.balanceTables()}bind_events(){this.quill.on("text-change",frappe.utils.debounce((i,n,s)=>{if(!this.is_quill_dirty(s))return;let o=this.get_input_value();this.parse_validate_and_set_in_model(o)},300)),$(this.quill.root).on("keydown",i=>{let n=frappe.ui.keys&&frappe.ui.keys.get_key(i);["ctrl+b","meta+b"].includes(n)&&i.stopPropagation()}),$(this.quill.root).on("drop",i=>{i.stopPropagation()});let e=this.$wrapper.find(".ql-size .ql-picker-label:first"),t=this.$wrapper.find(".ql-size .ql-picker-item:first");e.length&&(e.attr("data-value","---"),t.attr("data-value","---"))}is_quill_dirty(e){if(e==="api")return!1;let t=this.get_input_value();return this.value!==t}get_quill_options(){let e={modules:{toolbar:Object.keys(this.df).includes("get_toolbar_options")?this.df.get_toolbar_options():this.get_toolbar_options(),table:!0,imageResize:{},magicUrl:!0,mention:this.get_mention_options(),keyboard:{bindings:this.get_keyboard_bindings()}},theme:this.df.theme||"snow",readOnly:this.disabled||this.df.read_only,bounds:this.quill_container[0],placeholder:this.df.placeholder||""};return this.grid_row&&(e.theme=null,e.modules.toolbar=[]),e}get_mention_options(){if(!this.enable_mentions&&!this.df.enable_mentions)return null;let e=this;return{allowedChars:/^[A-Za-z0-9_]*$/,mentionDenotationChars:["@"],isolateCharacter:!0,source:frappe.utils.debounce(async function(t,i){let n=e.mention_search_method||"frappe.desk.search.get_names_for_mentions",s=await frappe.xcall(n,{search_term:t}),o=e.prioritize_involved_users_in_mention(s);i(o,t)},300),renderItem(t){return`${t.value} ${t.is_group?frappe.utils.icon("users"):""}`}}}prioritize_involved_users_in_mention(e){var i;let t=((i=this.frm)==null?void 0:i.get_involved_users())||(cur_frm==null?void 0:cur_frm.get_involved_users())||[];return e.filter(n=>t.includes(n.id)).concat(e.filter(n=>!t.includes(n.id)))}get_toolbar_options(){return[[{header:[1,2,3,4,5,6,!1]}],[{size:g0}],["bold","italic","underline","strike","clean"],[{color:[]},{background:[]}],["blockquote","code-block"],[{direction:"rtl"}],["link","image"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{align:[]}],[{indent:"-1"},{indent:"+1"}],[{table:["insert-table","insert-row-above","insert-row-below","insert-column-right","insert-column-left","delete-row","delete-column","delete-table"]}]]}parse(e){return e==null&&(e=""),frappe.dom.remove_script_and_style(e)}set_formatted_input(e){if(!this.quill||e===this.get_input_value())return;if(!e){this.quill.setText("");return}let t=this.quill.clipboard.convert({html:e,text:""},{image:Ol});this.quill.setContents(t)}get_input_value(){let e=this.quill?this.quill.root.innerHTML:"";e=e.replace(/(\s)(\s)/g," &nbsp;"),e=this.patch_unordered_list(e);try{$(e).find(".ql-editor").length||(e=`<div class="ql-editor read-mode">${e}</div>`)}catch(t){e=`<div class="ql-editor read-mode">${e}</div>`}return e}patch_unordered_list(e){let t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll("ol li[data-list=bullet]:first-child").forEach(n=>{let s=n.parentNode,o=Array.from(s.children),a=document.createElement("ul");o.forEach(l=>{a.appendChild(l)}),s.parentNode.replaceChild(a,s)}),t.innerHTML}set_focus(){this.quill.focus()}get_keyboard_bindings(){return{"table enter":{key:"Enter",formats:["table"],handler:function(t){return this.quill.updateContents(new h0().retain(t.index).delete(t.length).insert({Break:!0})),this.quill.getLeaf(t.index+1)[0].next||this.quill.updateContents(new h0().retain(t.index+1).delete(0).insert({Break:!0}),"user"),this.quill.setSelection(t.index+1,Ie.sources.SILENT),!1}}}}};var dM={TAB:"Tab",ENTER:"Enter",ESCAPE:27,UP:"ArrowUp",DOWN:"ArrowDown"},Or=dM;var hM=Ie.import("blots/embed"),rs=class extends hM{static create(e){let t=super.create(),i=document.createElement("span");return i.className="ql-mention-denotation-char",i.innerHTML=e.denotationChar,t.appendChild(i),t.innerHTML+=e.value,t.innerHTML+=`${e.isGroup==="true"?frappe.utils.icon("users"):""}`,t.dataset.id=e.id,t.dataset.value=e.value,t.dataset.denotationChar=e.denotationChar,t.dataset.isGroup=e.isGroup,e.link&&(t.dataset.link=e.link),t}static value(e){return{id:e.dataset.id,value:e.dataset.value,link:e.dataset.link||null,denotationChar:e.dataset.denotationChar,isGroup:e.dataset.isGroup}}};rs.blotName="mention";rs.tagName="span";rs.className="mention";Ie.register(rs,!0);var Sl=class{constructor(e,t){this.isOpen=!1,this.itemIndex=0,this.mentionCharPos=null,this.cursorPos=null,this.values=[],this.suspendMouseEnter=!1,this.quill=e,this.options={source:null,renderItem(i,n){return`${i.value}`},mentionDenotationChars:["@"],allowedChars:/^[a-zA-Z0-9_]*$/,minChars:0,maxChars:31,offsetTop:2,offsetLeft:0,isolateCharacter:!1,fixMentionsToQuill:!1,defaultMenuOrientation:"bottom"},Object.assign(this.options,t),this.mentionContainer=document.createElement("div"),this.mentionContainer.className="ql-mention-list-container",this.mentionContainer.style.cssText="display: none; position: absolute;",this.mentionContainer.onmousemove=this.onContainerMouseMove.bind(this),this.options.fixMentionsToQuill&&(this.mentionContainer.style.width="auto"),this.mentionList=document.createElement("ul"),this.mentionList.className="ql-mention-list",this.mentionContainer.appendChild(this.mentionList),this.quill.container.appendChild(this.mentionContainer),e.on("text-change",this.onTextChange.bind(this)),e.on("selection-change",this.onSelectionChange.bind(this)),e.keyboard.addBinding({key:Or.TAB},this.selectHandler.bind(this)),e.keyboard.bindings[Or.TAB].unshift(e.keyboard.bindings[Or.TAB].pop()),e.keyboard.addBinding({key:Or.ENTER},this.selectHandler.bind(this)),e.keyboard.bindings[Or.ENTER].unshift(e.keyboard.bindings[Or.ENTER].pop()),e.keyboard.addBinding({key:Or.ESCAPE},this.escapeHandler.bind(this)),e.keyboard.addBinding({key:Or.UP},this.upHandler.bind(this)),e.keyboard.addBinding({key:Or.DOWN},this.downHandler.bind(this))}selectHandler(){return this.isOpen?(this.selectItem(),!1):!0}escapeHandler(){return this.isOpen?(this.hideMentionList(),!1):!0}upHandler(){return this.isOpen?(this.prevItem(),!1):!0}downHandler(){return this.isOpen?(this.nextItem(),!1):!0}showMentionList(){this.mentionContainer.style.visibility="hidden",this.mentionContainer.style.display="",this.setMentionContainerPosition(),this.isOpen=!0}hideMentionList(){this.mentionContainer.style.display="none",this.isOpen=!1}highlightItem(e=!0){for(let t=0;t<this.mentionList.childNodes.length;t+=1)this.mentionList.childNodes[t].classList.remove("selected");if(this.mentionList.childNodes[this.itemIndex].classList.add("selected"),e){let t=this.mentionList.childNodes[this.itemIndex].offsetHeight,i=this.itemIndex*t,n=this.mentionContainer.scrollTop,s=n+this.mentionContainer.offsetHeight;i<n?this.mentionContainer.scrollTop=i:i>s-t&&(this.mentionContainer.scrollTop+=i-s+t)}}getItemData(){let e=this.mentionList.childNodes[this.itemIndex].dataset.link;return{id:this.mentionList.childNodes[this.itemIndex].dataset.id,value:e?`<a href="${e}" target="_blank">${this.mentionList.childNodes[this.itemIndex].dataset.value}`:this.mentionList.childNodes[this.itemIndex].dataset.value,link:e||null,denotationChar:this.mentionList.childNodes[this.itemIndex].dataset.denotationChar,isGroup:this.mentionList.childNodes[this.itemIndex].dataset.isGroup}}onContainerMouseMove(){this.suspendMouseEnter=!1}selectItem(){let e=this.getItemData();this.quill.deleteText(this.mentionCharPos,this.cursorPos-this.mentionCharPos,Ie.sources.API),this.quill.insertEmbed(this.mentionCharPos,"mention",e,Ie.sources.API),this.quill.insertText(this.mentionCharPos+1," ",Ie.sources.API),this.quill.setSelection(this.mentionCharPos+2,Ie.sources.API),this.hideMentionList()}onItemMouseEnter(e){if(this.suspendMouseEnter)return;let t=Number(e.target.dataset.index);!Number.isNaN(t)&&t!==this.itemIndex&&(this.itemIndex=t,this.highlightItem(!1))}onItemClick(e){e.stopImmediatePropagation(),e.preventDefault(),this.itemIndex=e.currentTarget.dataset.index,this.highlightItem(),this.selectItem()}renderList(e,t,i){if(t&&t.length>0){this.values=t,this.mentionList.innerHTML="";for(let n=0;n<t.length;n+=1){let s=document.createElement("li");s.className="ql-mention-list-item",s.dataset.index=n,s.dataset.id=t[n].id,s.dataset.value=t[n].value,s.dataset.isGroup=Boolean(t[n].is_group),s.dataset.denotationChar=e,t[n].link&&(s.dataset.link=t[n].link),s.innerHTML=this.options.renderItem(t[n],i),s.onmouseenter=this.onItemMouseEnter.bind(this),s.onclick=this.onItemClick.bind(this),this.mentionList.appendChild(s)}this.itemIndex=0,this.highlightItem(),this.showMentionList()}else this.hideMentionList()}nextItem(){this.itemIndex=(this.itemIndex+1)%this.values.length,this.suspendMouseEnter=!0,this.highlightItem()}prevItem(){this.itemIndex=(this.itemIndex+this.values.length-1)%this.values.length,this.suspendMouseEnter=!0,this.highlightItem()}hasValidChars(e){return this.options.allowedChars.test(e)}containerBottomIsNotVisible(e,t){return e+this.mentionContainer.offsetHeight+t.top>window.pageYOffset+window.innerHeight}containerRightIsNotVisible(e,t){if(this.options.fixMentionsToQuill)return!1;let i=e+this.mentionContainer.offsetWidth+t.left,n=window.pageXOffset+document.documentElement.clientWidth;return i>n}setMentionContainerPosition(){let e=this.quill.container.getBoundingClientRect(),t=this.quill.getBounds(this.mentionCharPos),i=this.mentionContainer.offsetHeight,n=this.options.offsetTop,s=this.options.offsetLeft;if(this.options.fixMentionsToQuill?this.mentionContainer.style.right=`${0}px`:s+=t.left,this.containerRightIsNotVisible(s,e)){let o=this.mentionContainer.offsetWidth+this.options.offsetLeft;s=e.width-o}if(this.options.defaultMenuOrientation==="top"){if(this.options.fixMentionsToQuill?n=-1*(i+this.options.offsetTop):n=t.top-(i+this.options.offsetTop),n+e.top<=0){let o=this.options.offsetTop;this.options.fixMentionsToQuill?o+=e.height:o+=t.bottom,n=o}}else if(this.options.fixMentionsToQuill?n+=e.height:n+=t.bottom,this.containerBottomIsNotVisible(n,e)){let o=this.options.offsetTop*-1;this.options.fixMentionsToQuill||(o+=t.top),n=o-i}this.mentionContainer.style.top=`${n}px`,this.mentionContainer.style.left=`${s}px`,this.mentionContainer.style.visibility="visible"}onSomethingChange(){let e=this.quill.getSelection();if(e==null)return;this.cursorPos=e.index;let t=Math.max(0,this.cursorPos-this.options.maxChars),i=this.quill.getText(t,this.cursorPos-t),n=this.options.mentionDenotationChars.reduce((s,o)=>{let a=s,l=i.lastIndexOf(o);return l>a?l:a},-1);if(n>-1){if(this.options.isolateCharacter&&!(n==0||!!i[n-1].match(/\s/g))){this.hideMentionList();return}let s=this.cursorPos-(i.length-n);this.mentionCharPos=s;let o=i.substring(n+1);if(o.length>=this.options.minChars&&this.hasValidChars(o)){let a=i[n];this.options.source(o,this.renderList.bind(this,a),a)}else this.hideMentionList()}else this.hideMentionList()}onTextChange(e,t,i){i==="user"&&this.onSomethingChange()}onSelectionChange(e){e&&e.length===0?this.onSomethingChange():this.hideMentionList()}};Ie.register("modules/mention",Sl,!0);var b0=Sl;Ie.register("modules/mention",b0,!0);frappe.ui.form.ControlComment=class extends frappe.ui.form.ControlTextEditor{make_wrapper(){this.comment_wrapper=this.no_wrapper?$('<div class="frappe-control"></div>'):$(`
			<div class="comment-input-wrapper">
				<div class="comment-input-header">
					<div>
						<span class="comment-title">${__("Comments")}</span>
						<span class="comment-count"></span>
					</div>

					<div class="form-stats-likes">
						<span class="liked-by like-action d-flex align-items-center">
							<svg class="icon icon-sm like-icon">
								<use href="#icon-heart"></use>
							</svg>
							<span class="like-count ml-2"></span>
						</span>
					</div>
				</div>
				<div class="comment-input-container">
				${frappe.avatar(frappe.session.user,"avatar-medium")}
					<div class="frappe-control col"></div>
				</div>
				<button class="btn hidden btn-comment btn-xs" style="margin-left:48px;">
					${__("Comment")}
				</button>
			</div>
		`),this.comment_wrapper.appendTo(this.parent),this.$wrapper=this.no_wrapper?this.comment_wrapper:this.comment_wrapper.find(".frappe-control"),this.wrapper=this.$wrapper,this.button=this.comment_wrapper.find(".btn-comment")}bind_events(){super.bind_events(),this.button.click(()=>{this.submit()}),this.$wrapper.on("keydown",e=>{frappe.ui.keys.get_key(e)==="ctrl+enter"&&(e.preventDefault(),this.submit())}),this.quill.on("text-change",frappe.utils.debounce(()=>{this.update_state()},300))}submit(){this.on_submit&&this.on_submit(this.get_value())}update_state(){let e=this.get_value();strip_html(e).trim()!=""||e.includes("img")?this.button.removeClass("hidden").addClass("btn-primary"):this.button.addClass("hidden").removeClass("btn-primary")}get_quill_options(){let e=super.get_quill_options();return Object.assign(e,{theme:"bubble",bounds:this.quill_container[0],placeholder:__("Type a reply / comment")})}get_toolbar_options(){return[["bold","italic","underline","strike"],["blockquote","code-block"],[{direction:"rtl"}],["link","image"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]]}clear(){this.quill.setText("")}disable(){this.quill.disable(),this.button.prop("disabled",!0)}enable(){this.quill.enable(),this.button.prop("disabled",!1)}};var Tl;frappe.ui.form.ControlCheck=(Tl=class extends frappe.ui.form.ControlData{make_wrapper(){this.$wrapper=$(`<div class="form-group frappe-control">
			<div class="checkbox">
				<label>
					<span class="input-area"></span>
					<span class="disp-area"></span>
					<span class="label-area"></span>
					<span class="ml-1 help"></span>
				</label>
				<p class="help-box small text-extra-muted"></p>
			</div>
		</div>`).appendTo(this.parent)}set_input_areas(){this.input_area=this.$wrapper.find(".input-area").get(0),!this.only_input&&(this.label_area=this.label_span=this.$wrapper.find(".label-area").get(0),this.disp_area=this.$wrapper.find(".disp-area").get(0))}make_input(){super.make_input(),this.$input.removeClass("form-control")}get_input_value(){return this.input&&this.input.checked?1:0}validate(e){return cint(e)}set_input(e){this.last_value=this.value,e=cint(e),this.value=e,this.input&&(this.input.checked=e?1:0),this.set_mandatory(e),this.set_disp_area(e)}},he(Tl,"html_element","input"),he(Tl,"input_type","checkbox"),Tl);frappe.ui.form.ControlImage=class extends frappe.ui.form.Control{make(){super.make(),this.$wrapper.css({margin:"0px"}),this.$body=$("<div></div>").appendTo(this.$wrapper).css({"margin-bottom":"10px"}),$('<div class="clearfix"></div>').appendTo(this.$wrapper)}refresh_input(){this.$body.empty();var e=this.get_doc();return e&&this.df.options&&e[this.df.options]?this.$img=$("<img src='"+e[this.df.options]+"' class='img-responsive'>").appendTo(this.$body):this.$buffer=$(`<div class='missing-image'>${frappe.utils.icon("restriction","md")}</div>`).appendTo(this.$body),!1}};frappe.ui.form.ControlAttach=class extends frappe.ui.form.ControlData{make_input(){let e=this;this.$input=$('<button class="btn btn-default btn-sm btn-attach">').html(__("Attach")).prependTo(e.input_area).on({click:function(){e.on_attach_click()},attach_doc_image:function(){e.on_attach_doc_image()}}),this.$value=$(`<div class="attached-file flex justify-between align-center">
				<div class="ellipsis">
				${frappe.utils.icon("es-line-link","sm")}
					<a class="attached-file-link" target="_blank"></a>
				</div>
				<div class="flex" style="align-items: center">
					<a class="btn btn-xs btn-default" data-action="reload_attachment">${__("Reload File")}</a>
					<a class="btn btn-xs btn-default" data-action="clear_attachment">${__("Clear")}</a>
				</div>
			</div>`).prependTo(e.input_area).toggle(!1),this.input=this.$input.get(0),this.set_input_attributes(),this.has_input=!0,frappe.utils.bind_actions_with_object(this.$value,this),this.toggle_reload_button()}clear_attachment(){let e=this;frappe.confirm(__("Are you sure you want to delete the attachment?"),function(){e.frm?(e.parse_validate_and_set_in_model(null),e.refresh(),e.frm.attachments.remove_attachment_by_filename(e.value,async()=>{await e.parse_validate_and_set_in_model(null),e.refresh(),e.frm.doc.docstatus==1?e.frm.save("Update"):e.frm.save()})):(e.dataurl=null,e.fileobj=null,e.set_input(null),e.parse_validate_and_set_in_model(null),e.refresh())})}reload_attachment(){this.file_uploader&&this.file_uploader.uploader.upload_files()}on_attach_click(){this.set_upload_options(),this.file_uploader=new frappe.ui.FileUploader(this.upload_options)}on_attach_doc_image(){this.set_upload_options(),this.upload_options.restrictions.allowed_file_types=["image/*"],this.file_uploader=new frappe.ui.FileUploader(this.upload_options)}set_upload_options(){let e={allow_multiple:!1,on_success:t=>{this.on_upload_complete(t),this.toggle_reload_button()},restrictions:{}};this.frm&&(e.doctype=this.frm.doctype,e.docname=this.frm.docname,e.fieldname=this.df.fieldname,e.make_attachments_public=this.df.make_attachment_public?1:this.frm.meta.make_attachments_public),this.df.options&&Object.assign(e,this.df.options),this.upload_options=e}set_input(e,t){if(this.last_value=this.value,this.value=e,this.value){let i=this.value.match(/^([^:]+),(.+):(.+)$/),n;i&&(n=i[1],t=i[2]+":"+i[3]),this.$input&&this.$value?(this.$input.toggle(!1),this.$value.toggle(!0).find(".attached-file-link").text(n||this.value).attr("href",t||this.value)):(this.$wrapper.html(`
					<div class="attached-file flex justify-between align-center">
						<div class="ellipsis">
							<a target="_blank"></a>
						</div>
					</div>
				`),this.$wrapper.find("a").text(n||this.value).attr("href",t||this.value))}else this.$input.toggle(!0),this.$value.toggle(!1)}get_value(){return this.value||null}async on_upload_complete(e){this.frm&&(await this.parse_validate_and_set_in_model(e.file_url),this.frm.attachments.update_attachment(e),this.frm.doc.docstatus==1?this.frm.save("Update"):this.frm.save()),this.set_value(e.file_url)}toggle_reload_button(){this.$value.find('[data-action="reload_attachment"]').toggle(this.file_uploader&&this.file_uploader.uploader.files.length>0)}};frappe.ui.form.ControlAttachImage=class extends frappe.ui.form.ControlAttach{make_input(){super.make_input(),this.$value.find(".attached-file-link").popover({trigger:"hover",placement:"top",content:()=>`<div>
					<img src="${this.get_value()}"
						width="150px"
						style="object-fit: contain;"
					/>
				</div>`,html:!0})}set_upload_options(){super.set_upload_options(),this.upload_options.restrictions.allowed_file_types=["image/*"]}};var vo=class{constructor(e){$.extend(this,e),this.wrapper=$('<div class="form-in-grid"></div>').appendTo(this.row.wrapper)}render(){var e=this;this.make_form(),this.form_area.empty(),frappe.utils.scroll_to(0,!1,0,this.wrapper.find(".grid-form-body")),this.layout=new frappe.ui.form.Layout({fields:this.row.docfields,body:this.form_area,no_submit_on_enter:!0,frm:this.row.frm,grid:this.row.grid,grid_row:this.row,grid_row_form:this}),this.layout.make(),this.fields=this.layout.fields,this.fields_dict=this.layout.fields_dict,this.layout.refresh(this.row.doc);for(var t in this.row.grid.fieldinfo||{}){var i=this.row.grid.fieldinfo[t];$.extend(e.fields_dict[t],i)}this.toggle_add_delete_button_display(this.wrapper),this.row.grid.open_grid_row=this,this.set_focus()}make_form(){if(!this.form_area){let e=`<div class="grid-form-heading">
				<div class="toolbar grid-header-toolbar">
					<span class="panel-title">
						${__("Editing Row")} #<span class="grid-form-row-index"></span></span>
					<span class="row-actions">
						<button class="btn btn-secondary btn-sm pull-right grid-collapse-row">
							${frappe.utils.icon("down")}
						</button>
						<button class="btn btn-secondary btn-sm pull-right grid-move-row hidden-xs">
							${__("Move")}</button>
						<button class="btn btn-secondary btn-sm pull-right grid-duplicate-row hidden-xs">
							${frappe.utils.icon("duplicate")}
							${__("Duplicate")}
						</button>
						<button class="btn btn-secondary btn-sm pull-right grid-insert-row hidden-xs">
							${__("Insert Above")}</button>
						<button class="btn btn-secondary btn-sm pull-right grid-insert-row-below hidden-xs">
							${__("Insert Below")}</button>
						<button class="btn btn-danger btn-sm pull-right grid-delete-row">
							${frappe.utils.icon("delete")}
						</button>
					</span>
				</div>
			</div>
			<div class="grid-form-body">
				<div class="form-area"></div>
				<div class="grid-footer-toolbar hidden-xs flex justify-between">
					<div class="grid-shortcuts">
						<span> ${frappe.utils.icon("keyboard","md")} </span>
						<span class="text-medium"> ${__("Shortcuts")}: </span>
						<kbd>${__("Ctrl + Up")}</kbd> . <kbd>${__("Ctrl + Down")}</kbd> . <kbd>${__("ESC")}</kbd>
					</div>
					<span class="row-actions">
						<button class="btn btn-secondary btn-sm pull-right grid-append-row">
							${__("Insert Below")}
						</button>
					</span>
				</div>
			</div>`;$(e).appendTo(this.wrapper),this.form_area=this.wrapper.find(".form-area"),this.row.set_row_index(),this.set_form_events()}}set_form_events(){var e=this;this.wrapper.find(".grid-delete-row").on("click",function(){return e.row.remove(),!1}),this.wrapper.find(".grid-insert-row").on("click",function(){return e.row.insert(!0),!1}),this.wrapper.find(".grid-insert-row-below").on("click",function(){return e.row.insert(!0,!0),!1}),this.wrapper.find(".grid-duplicate-row").on("click",function(){return e.row.insert(!0,!0,!0),!1}),this.wrapper.find(".grid-move-row").on("click",function(){return e.row.move(),!1}),this.wrapper.find(".grid-append-row").on("click",function(){return e.row.toggle_view(!1),e.row.grid.add_new_row(e.row.doc.idx+1,null,!0),!1}),this.wrapper.find(".grid-form-heading, .grid-footer-toolbar").on("click",function(){return e.row.toggle_view(),!1})}toggle_add_delete_button_display(e){e.find(".row-actions, .grid-append-row").toggle(this.row.grid.is_editable())}refresh_field(e){let t=this.fields_dict[e];!t||(t.docname=this.row.doc.name,t.refresh(),this.layout&&this.layout.refresh_dependency())}set_focus(){var e=this;setTimeout(function(){if(e.row.frm&&e.row.frm.doc.docstatus===0||!e.row.frm){var t=e.form_area.find("input:first");if(t.length&&!["Date","Datetime","Time"].includes(t.attr("data-fieldtype")))try{t.get(0).focus()}catch(i){}}},500)}};var Xi=class{constructor(e){this.on_grid_fields_dict={},this.on_grid_fields=[],$.extend(this,e),this.set_docfields(),this.columns={},this.columns_list=[],this.dependent_fields={mandatory:[],read_only:[]},this.row_check_html='<input type="checkbox" class="grid-row-check" tabIndex="-1">',this.default_rows_threshold_for_grid_search=20,this.make()}make(){let e=this,t=!0;this.wrapper=$('<div class="grid-row"></div>'),this.row=$('<div class="data-row row m-0"></div>').appendTo(this.wrapper).on("click",function(i){if(!($(i.target).hasClass("grid-row-check")||$(i.target).hasClass("row-index")||$(i.target).parent().hasClass("row-index"))&&!(e.grid.allow_on_grid_editing()&&e.grid.is_editable()))return e.toggle_view(),!1}),this.grid.template&&!this.grid.meta.editable_grid?this.render_template():t=this.render_row(),t&&(this.set_data(),this.wrapper.appendTo(this.parent))}set_docfields(e=!1){if(this.doc&&this.parent_df.options){frappe.meta.make_docfield_copy_for(this.parent_df.options,this.doc.name,this.docfields);let t=frappe.meta.get_docfields(this.parent_df.options,this.doc.name);e?this.docfields.forEach(i=>{Object.assign(i,t.find(n=>n.fieldname===i.fieldname))}):this.docfields=t}}set_data(){this.wrapper.data({grid_row:this,doc:this.doc||""})}set_row_index(){this.doc&&this.wrapper.attr("data-name",this.doc.name).attr("data-idx",this.doc.idx).find(".row-index span, .grid-form-row-index").html(this.doc.idx)}select(e){this.doc.__checked=e?1:0}refresh_check(){this.wrapper.find(".grid-row-check").prop("checked",this.doc?!!this.doc.__checked:!1),this.grid.debounced_refresh_remove_rows_button()}remove(){var e=this;if(this.grid.is_editable())if(this.get_open_form()&&this.hide_form(),this.frm)frappe.run_serially([()=>this.frm.script_manager.trigger("before_"+this.grid.df.fieldname+"_remove",this.doc.doctype,this.doc.name),()=>{frappe.model.clear_doc(this.doc.doctype,this.doc.name),this.frm.script_manager.trigger(this.grid.df.fieldname+"_remove",this.doc.doctype,this.doc.name),this.frm.dirty(),this.grid.refresh()}]).catch(t=>{console.trace(t)});else{let t=null;this.grid.df.get_data?t=this.grid.df.get_data():t=this.grid.df.data;let i=t.findIndex(n=>n.name===e.doc.name);i>-1&&t.splice(i,1),t.forEach(function(n,s){n.idx=s+1}),this.grid.refresh()}}insert(e,t,i){var n=this.doc.idx,s=i?this.doc:null;t&&n++,this.toggle_view(!1),this.grid.add_new_row(n,null,e,s)}move(){var e=this;frappe.prompt({fieldname:"move_to",label:__("Move to Row Number"),fieldtype:"Int",reqd:1,default:this.doc.idx},function(t){if(e.doc._sortable===!1){frappe.msgprint(__("Cannot move row"));return}let i=e.grid.get_data();i.move(e.doc.idx-1,t.move_to-1),e.frm.dirty();for(let n=0;n<i.length;n++)i[n].idx=n+1;e.toggle_view(!1),e.grid.refresh(),$(e.frm.wrapper).trigger("grid-move-row",[e.frm,e])},__("Move To"),"Update")}refresh(){this.frm&&this.doc&&this.doc.__islocal&&this.set_docfields(!0),this.frm&&this.doc&&(this.doc=locals[this.doc.doctype][this.doc.name]),this.grid.template&&!this.grid.meta.editable_grid?this.render_template():this.render_row(!0),this.grid_form&&this.grid_form.layout&&this.grid_form.layout.refresh(this.doc)}render_template(){this.set_row_index(),this.row_display&&this.row_display.remove(),this.row_index||(this.row_index=$(`<div class="template-row-index">${this.row_check_html}<span></span></div>`).appendTo(this.row)),this.doc&&this.row_index.find("span").html(this.doc.idx),this.row_display=$('<div class="row-data sortable-handle template-row"></div>').appendTo(this.row).html(frappe.render(this.grid.template,{doc:this.doc?frappe.get_format_helper(this.doc):null,frm:this.frm,row:this}))}render_row(e){if(this.show_search&&!this.show_search_row())return;let t=this;if(this.set_row_index(),!this.row_index&&!this.show_search){let i=this.doc?this.doc.idx:__("No.",null,"Title of the 'row number' column");this.header_row&&(this.row_check_html=$(this.row_check_html).attr("tabindex",-1).get(0).outerHTML),this.row_check=$(`<div class="row-check sortable-handle col">
					${this.row_check_html}
				</div>`).appendTo(this.row),this.row_index=$(`<div class="row-index sortable-handle grid-static-col col">
					<span>${i}</span>
				</div>`).appendTo(this.row).on("click",function(n){$(n.target).hasClass("grid-row-check")||t.toggle_view()})}else this.show_search&&(this.row_check=$(`
				<div class="row-check col search">
					<input type="text" class="form-control input-xs text-center invisible">
				</div>`).appendTo(this.row),this.row_index=$(`<div class="row-index col search">
					<input type="text" class="form-control input-xs text-center" >
					<span style="width: 33px;" class="d-block"></span>
				</div>`).appendTo(this.row),this.row_index.find("input").on("keyup",frappe.utils.debounce(i=>{let n={fieldtype:"Sr No"};this.grid.filter["row-index"]={df:n,value:i.target.value},i.target.value==""&&delete this.grid.filter["row-index"],this.grid.grid_sortable.option("disabled",Object.keys(this.grid.filter).length!==0),this.grid.prevent_build=!0,t.grid.refresh(),this.grid.prevent_build=!1},500)),frappe.utils.only_allow_num_decimal(this.row_index.find("input")));return this.setup_columns(),this.add_open_form_button(),this.add_column_configure_button(),this.refresh_check(),this.frm&&this.doc&&$(this.frm.wrapper).trigger("grid-row-render",[this]),!0}make_editable(){this.row.toggleClass("editable-row",this.grid.is_editable())}is_too_small(){return this.row.width()?this.row.width()<300:!1}add_open_form_button(){var e=this;if(this.doc&&!this.grid.df.in_place_edit&&!this.open_form_button){if(this.open_form_button=$('<div class="col"></div>').appendTo(this.row),!this.configure_columns){let t=__("Edit","","Edit grid row");this.open_form_button=$(`
						<div class="btn-open-row" data-toggle="tooltip" data-placement="right" title="${t}">
							<a>${frappe.utils.icon("edit","xs")}</a>
						</div>
					`).appendTo(this.open_form_button).on("click",function(){return e.toggle_view(),!1}),$(this.open_form_button).parent().on("keydown",function(i){if(i.key=="Enter")return e.toggle_view(),!1}),this.open_form_button.tooltip({delay:{show:600,hide:100}})}this.is_too_small()&&this.open_form_button.css({"margin-right":"-2px"}),$(document).on("escape",function(){e.open_form_button.parent().focus()})}}add_column_configure_button(){this.grid.df.in_place_edit&&!this.frm||(this.configure_columns&&this.frm?this.configure_columns_button=$(`
				<div class="col grid-static-col pointer">
					<a>${frappe.utils.icon("setting-gear","sm","","filter: opacity(0.5)")}</a>
				</div>
			`).appendTo(this.row).on("click",()=>{this.configure_dialog_for_columns_selector()}):this.configure_columns&&!this.frm&&(this.configure_columns_button=$(`
				<div class="col grid-static-col"></div>
			`).appendTo(this.row)))}configure_dialog_for_columns_selector(){this.grid_settings_dialog=new frappe.ui.Dialog({title:__("Configure Columns"),fields:[{fieldtype:"HTML",fieldname:"fields_html"}]}),this.grid.setup_visible_columns(),this.setup_columns_for_dialog(),this.prepare_wrapper_for_columns(),this.render_selected_columns(),this.grid_settings_dialog.show(),$(this.fields_html_wrapper).find(".add-new-fields").click(()=>{this.column_selector_for_dialog()}),this.grid_settings_dialog.set_primary_action(__("Update"),()=>{this.columns={},this.update_user_settings_for_grid(),this.grid_settings_dialog.hide()}),this.grid_settings_dialog.set_secondary_action_label(__("Reset to default")),this.grid_settings_dialog.set_secondary_action(()=>{this.reset_user_settings_for_grid(),this.grid_settings_dialog.hide()})}setup_columns_for_dialog(){this.selected_columns_for_grid=[],this.grid.visible_columns.forEach(e=>{this.selected_columns_for_grid.push({fieldname:e[0].fieldname,columns:e[0].columns||e[0].colsize,sticky:e[0].sticky})})}prepare_wrapper_for_columns(){this.fields_html_wrapper=this.grid_settings_dialog.get_field("fields_html").$wrapper[0],$(`
			<div class='form-group'>
				<div class='row' style='margin-bottom:10px;'>
					<div class='col-1'></div>
					<div class='col-5' style='padding-left:20px;'>
						${__("Fieldname").bold()}
					</div>
					<div class='col-3'>
						${__("Column Width").bold()}
					</div>
					<div class='col-2'>
						${__("Sticky").bold()}
					</div>
					<div class='col-1'></div>
				</div>
				<div class='control-input-wrapper selected-fields'>
				</div>
				<p class='help-box small text-muted'>
					<a class='add-new-fields text-muted'>
						+ ${__("Add / Remove Columns")}
					</a>
				</p>
			</div>
		`).appendTo(this.fields_html_wrapper)}column_selector_for_dialog(){let e=this.prepare_columns_for_dialog(this.selected_columns_for_grid.map(i=>i.fieldname)),t=new frappe.ui.Dialog({title:__("{0} Fields",[__(this.grid.doctype)]),fields:[{label:__("Select Fields"),fieldtype:"MultiCheck",fieldname:"fields",options:e,columns:2,sort_options:!1}],secondary_action_label:__("Select All"),secondary_action:()=>this.select_all_columns(e)});t.set_primary_action(__("Add"),()=>{let i=t.get_values().fields;this.selected_columns_for_grid=[],i&&(i.forEach(n=>{let s=frappe.meta.get_docfield(this.grid.doctype,n);this.grid.update_default_colsize(s),this.selected_columns_for_grid.push({fieldname:n,columns:s.columns||s.colsize})}),this.render_selected_columns(),t.hide())}),t.show()}select_all_columns(e){e.forEach(t=>{t.checked||$(`.checkbox.unit-checkbox input[type="checkbox"][data-unit="${t.value}"]`).prop("checked",!0).trigger("change")})}prepare_columns_for_dialog(e){let t=[],i=frappe.model.no_value_type,n=["Button"],s=o=>n.includes(o)||!i.includes(o);return e.forEach(o=>{let a=this.docfields.find(l=>l.fieldname===o);a&&!a.hidden&&s(a.fieldtype)&&t.push({label:__(a.label,null,this.grid.doctype),value:a.fieldname,checked:!0})}),this.docfields.forEach(o=>{!e.includes(o.fieldname)&&!o.hidden&&s(o.fieldtype)&&t.push({label:__(o.label,null,this.grid.doctype),value:o.fieldname,checked:!1})}),t}render_selected_columns(){let e="";this.selected_columns_for_grid&&this.selected_columns_for_grid.forEach(t=>{let i=frappe.meta.get_docfield(this.grid.doctype,t.fieldname);e+=`
					<div class='control-input flex align-center form-control fields_order sortable-handle sortable'
						style='display: block; margin-bottom: 5px; padding: 0 8px; cursor: pointer; height: 32px;' data-fieldname='${i.fieldname}'
						data-label='${i.label}' data-type='${i.fieldtype}'>

						<div class='row'>
							<div class='col-1' style='padding-top: 4px;'>
								<a style='cursor: grabbing;'>${frappe.utils.icon("drag","xs")}</a>
							</div>
							<div class='col-5' style='padding-top: 5px;'>
								${__(i.label,null,i.parent)}
							</div>
							<div class='col-3' style='padding-top: 2px; margin-top:-2px;' title='${__("Columns")}'>
								<input class='form-control column-width my-1 input-xs text-right'
								style='height: 24px; max-width: 80px; background: var(--bg-color);'
									value='${i.columns||cint(t.columns)}'
									data-fieldname='${i.fieldname}' style='background-color: var(--modal-bg); display: inline'>
							</div>
							<div class='col-2' title='${__("Sticky")}'>
								<input type='checkbox' class='form-control sticky-column'
									style='margin-top: 8px'
									${i.sticky?"checked":""}
									data-fieldname='${i.fieldname}' style='background-color: var(--modal-bg); display: inline'>
							</div>
							<div class='col-1' style='padding-top: 3px;'>
								<a class='text-muted remove-field' data-fieldname='${i.fieldname}'>
									<i class='fa fa-trash-o' aria-hidden='true'></i>
								</a>
							</div>
						</div>
					</div>`}),$(this.fields_html_wrapper).find(".selected-fields").html(e),this.prepare_handler_for_sort(),this.select_on_focus(),this.update_column_width(),this.update_sticky_column(),this.remove_selected_column()}prepare_handler_for_sort(){new Sortable($(this.fields_html_wrapper).find(".selected-fields")[0],{handle:".sortable-handle",draggable:".sortable",onUpdate:()=>{this.sort_columns()}})}sort_columns(){this.selected_columns_for_grid=[];let e=$(this.fields_html_wrapper).find(".fields_order")||[];e.each(t=>{this.selected_columns_for_grid.push({fieldname:$(e[t]).attr("data-fieldname"),columns:cint($(e[t]).find(".column-width").attr("value"))})})}select_on_focus(){$(this.fields_html_wrapper).find(".column-width").click(e=>{$(e.target).select()})}update_column_width(){$(this.fields_html_wrapper).find(".column-width").change(e=>{cint(e.target.value)===0&&(e.target.value=cint(e.target.defaultValue),frappe.throw(__("Column width cannot be zero."))),this.selected_columns_for_grid.forEach(t=>{t.fieldname===e.target.dataset.fieldname&&(t.columns=cint(e.target.value),e.target.defaultValue=cint(e.target.value))})})}update_sticky_column(){$(this.fields_html_wrapper).find(".sticky-column").change(e=>{this.selected_columns_for_grid.forEach(t=>{t.fieldname===e.target.dataset.fieldname&&(t.sticky=cint(e.target.checked),e.target.defaultValue=cint(e.target.checked))})})}remove_selected_column(){$(this.fields_html_wrapper).find(".remove-field").click(e=>{let t=e.currentTarget.dataset.fieldname,i=this.selected_columns_for_grid.filter(n=>n.fieldname!==t);i&&i.length===0&&frappe.throw(__("At least one column is required to show in the grid.")),this.selected_columns_for_grid=i,$(this.fields_html_wrapper).find(`[data-fieldname="${t}"]`).remove()})}update_user_settings_for_grid(){if(!this.selected_columns_for_grid||!this.frm)return;let e={};e[this.grid.doctype]=this.selected_columns_for_grid,frappe.model.user_settings.save(this.frm.doctype,"GridView",e).then(t=>{frappe.model.user_settings[this.frm.doctype]=t.message||t,this.grid.reset_grid()})}reset_user_settings_for_grid(){frappe.model.user_settings.save(this.frm.doctype,"GridView",null).then(e=>{frappe.model.user_settings[this.frm.doctype]=e.message||e,this.grid.reset_grid()})}setup_columns(){this.focus_set=!1,this.search_columns={},this.grid.setup_visible_columns();let e=this.grid.user_defined_columns&&this.grid.user_defined_columns.length>0?this.grid.user_defined_columns:this.docfields,t=0;this.grid.visible_columns.forEach((n,s)=>{let o=e.find(m=>(m==null?void 0:m.fieldname)===n[0].fieldname);this.set_dependant_property(o);let a=n[1];t+=a;let l=this.doc?frappe.format(this.doc[o.fieldname],o,null,this.doc):__(o.label,null,o.parent);this.doc&&o.fieldtype==="Select"&&(l=__(l));let f;!this.columns[o.fieldname]&&!this.show_search?f=this.make_column(o,a,l,s):!this.columns[o.fieldname]&&this.show_search?f=this.make_search_column(o,a):(f=this.columns[o.fieldname],this.refresh_field(o.fieldname,l)),this.doc&&(o.reqd&&!l&&f.addClass("error"),f.is_invalid?f.addClass("invalid"):(o.reqd||o.bold)&&f.addClass("bold"))});let i=$(`div[data-fieldname="${this.grid.df.fieldname}"] .form-grid-container`);t>10?i.addClass("column-limit-reached"):i.hasClass("column-limit-reached")&&(Number($(i).children(".form-grid").css("left"))!=0&&($(i).children(".form-grid").css("left",0),$(i).children().find(".grid-scroll-bar").css({width:"auto","margin-left":"0px"}),$(i).children().find(".grid-scroll-bar-rows").css("width","auto")),i.removeClass("column-limit-reached")),this.show_search&&$('<div class="col grid-static-col search"></div>').appendTo(this.row)}set_dependant_property(e){!e.reqd&&e.mandatory_depends_on&&this.evaluate_depends_on_value(e.mandatory_depends_on)&&(e.reqd=1,this.dependent_fields.mandatory.push(e)),!e.read_only&&e.read_only_depends_on&&this.evaluate_depends_on_value(e.read_only_depends_on)&&(e.read_only=1,this.dependent_fields.read_only.push(e))}refresh_dependency(){this.dependent_fields.read_only.forEach(e=>{e.read_only=0,this.set_dependant_property(e)}),this.dependent_fields.mandatory.forEach(e=>{e.reqd=0,this.set_dependant_property(e)}),this.refresh()}evaluate_depends_on_value(e){let t=null,i=this.doc;if(!i)return;let n=this.frm?this.frm.doc:this.doc||null;if(typeof e=="boolean")t=e;else if(typeof e=="function")t=e(i);else if(e.substr(0,5)=="eval:")try{t=frappe.utils.eval(e.substr(5),{doc:i,parent:n}),n&&n.istable&&e.includes("is_submittable")&&(t=!0)}catch(o){frappe.throw(__('Invalid "depends_on" expression'))}else if(e.substr(0,3)=="fn:"&&this.frm)t=this.frm.script_manager.trigger(e.substr(3),this.doctype,this.docname);else{var s=i[e];$.isArray(s)?t=!!s.length:t=!!s}return t}show_search_row(){var t,i,n,s;let e=((i=(t=this.grid)==null?void 0:t.meta)==null?void 0:i.rows_threshold_for_grid_search)>0?this.grid.meta.rows_threshold_for_grid_search:this.default_rows_threshold_for_grid_search;return this.show_search=this.show_search&&(((s=(n=this.grid)==null?void 0:n.data)==null?void 0:s.length)>=e||this.grid.filter_applied),!this.show_search&&this.wrapper.remove(),this.show_search}make_search_column(e,t){let i="",n="",s="";["Text","Small Text"].includes(e.fieldtype)?n="grid-overflow-no-ellipsis":["Int","Currency","Float","Percent"].includes(e.fieldtype)?n="text-right":e.fieldtype==="Check"?(i=__("1 = True & 0 = False"),n="text-center"):e.fieldtype==="Password"&&(s="disabled",i=__("Password cannot be filtered"));let o=$('<div class="col grid-static-col col-xs-'+t+' search"></div>').appendTo(this.row),a=$(`
			<input
				type="text"
				class="form-control input-xs ${n}"
				title="${i}"
				data-fieldtype="${e.fieldtype}"
				${s}
			>
		`).appendTo(o);return this.search_columns[e.fieldname]=o,a.on("keyup",frappe.utils.debounce(l=>{this.grid.filter[e.fieldname]={df:e,value:l.target.value},l.target.value==""&&delete this.grid.filter[e.fieldname],this.grid.grid_sortable&&this.grid.grid_sortable.option("disabled",Object.keys(this.grid.filter).length!==0),this.grid.prevent_build=!0,this.grid.grid_pagination.go_to_page(1),this.grid.refresh(),this.grid.prevent_build=!1},500)),["Currency","Float","Int","Percent","Rating"].includes(e.fieldtype)&&frappe.utils.only_allow_num_decimal(a),o}make_column(e,t,i,n){let s={1:60,2:100,3:140,4:200,5:250,6:300,7:350,8:400,9:450,10:500,11:550,12:600},o=this;var a=["Text","Small Text"].indexOf(e.fieldtype)!==-1?" grid-overflow-no-ellipsis":"";a+=["Int","Currency","Float","Percent"].indexOf(e.fieldtype)!==-1?" text-right":"",a+=["Check"].indexOf(e.fieldtype)!==-1?" text-center":"";let l="";e.sticky&&(a+=" sticky-grid-col",e.fieldname in this.grid.sticky_rows||(this.grid.sticky_rows[e.fieldname]=this.grid.sticky_row_sum,this.grid.sticky_row_sum=Object.keys(this.grid.sticky_rows).length?this.grid.sticky_row_sum+s[t]:this.grid.sticky_row_sum),l+=`left: ${this.grid.sticky_rows[e.fieldname]||71}px;`);let f,m,b=!1;function h(y){b=!0;let g=m.getBoundingClientRect().width,v=m.getBoundingClientRect().left,A=parseFloat(f.style.left),k=y.offset().left,w=y.data("fieldtype"),E=g-(k+y.width()),M=0,j=k-v,D=g-(k-v);["Date","Time","Datetime"].includes(w)&&(M=D-220),["Link","Dynamic Link"].includes(w)&&(M=D-250),j<0?f.style.left=`${A-j}px`:M<0?f.style.left=`${A+M}px`:E<0&&(f.style.left=`${A+E}px`)}function p(){let y=document.querySelectorAll(".datepicker.active")[0];y.classList.remove("active"),y.style.width="220px",setTimeout(()=>{y.classList.add("active")},600)}function u(y,g){["Date","Datetime"].includes(g.fieldtype)&&(g==null?void 0:g.read_only)||y.trigger("focus")}let d=!1;var _=$(`<div class="col grid-static-col col-xs-${t} ${a}" style="${l}"></div>`).attr("data-fieldname",e.fieldname).attr("data-fieldtype",e.fieldtype).data("df",e).appendTo(this.row).on("focusin",function(y){d||(d=!0,(e.fieldtype==="Link"||e.fieldtype==="Dynamic Link")&&frappe.utils.sleep(300).then(()=>{let g=$(this).find(".awesomplete > ul:first-of-type"),v=g.closest(".grid-field");if(v.length){let A=v.find("div.awesomplete");A=$(`<div class="awesomplete ${g.attr("id")}"></div>`),v.append(A),A.append(g);let k=y.target.getBoundingClientRect(),w=k.left-v.offset().left,E=k.top-v.offset().top+30;A.css({position:"absolute",top:`${E+10}px`,left:`${w}px`,width:"250px"})}}))}).on("click",function(y){if(frappe.ui.form.editable_row!==o)var g=o.toggle_editable_row();var v=this;let A=$(v).find('input[type="Text"]:first'),k=!1;return $(v).find("input[type='text']").each(function(){$(this).is(":focus")&&(k=!0)}),!k&&u(A,$(v).data("df")),y.pointerType=="touch"&&(A.length&&h(A),A.one("blur",()=>k=!1),A.data("fieldtype")=="Date"&&p()),g});return _.field_area=$('<div class="field-area"></div>').appendTo(_).toggle(!1),_.static_area=$('<div class="static-area ellipsis"></div>').appendTo(_).html(i),this.doc||_.attr("title",i),e.fieldname&&_.static_area.toggleClass("reqd",Boolean(e.reqd)),_.df=e,_.column_index=n,this.columns[e.fieldname]=_,this.columns_list.push(_),n==0&&this.header_row&&(_.attr("tabIndex",0),_.on("focus",function(){o.grid.grid_rows.length==0&&o.grid.add_new_row(),o.grid.grid_rows[o.grid.grid_rows.length-1].toggle_editable_row(!0),o.grid.set_focus_on_row(0),_.attr("tabIndex","")})),_}activate(){return this.toggle_editable_row(!0),this}toggle_editable_row(e){var t=this;if(this.grid.allow_on_grid_editing()&&this.grid.is_editable()&&this.doc&&e!==!1)return frappe.ui.form.editable_row&&frappe.ui.form.editable_row!==this&&frappe.ui.form.editable_row.toggle_editable_row(!1),this.row.toggleClass("editable-row",!0),this.columns_list.forEach(function(i){t.make_control(i),i.static_area.toggle(!1),i.field_area.toggle(!0)}),frappe.ui.form.editable_row=this,!1;this.row.toggleClass("editable-row",!1),this.columns_list.forEach((i,n)=>{if(!this.frm){let s=this.grid.visible_columns[n][0],o=this.doc?frappe.format(this.doc[s.fieldname],s,null,this.doc):__(s.label,null,s.parent);this.refresh_field(s.fieldname,o)}i.df.hidden||i.static_area.toggle(!0),i.field_area&&i.field_area.toggle(!1)}),frappe.ui.form.editable_row=null}make_control(e){if(e.field)return;var t=this,i=e.field_area,n=e.df,s=frappe.ui.form.make_control({df:n,parent:i,only_input:!0,with_link_btn:!0,doc:this.doc,doctype:this.doc.doctype,docname:this.doc.name,frm:this.grid.frm,grid:this.grid,grid_row:this,value:this.doc[n.fieldname]});s.get_query=this.grid.get_field(n.fieldname).get_query;let o=n.onchange;s.df.change=a=>{this.refresh_dependency(),o&&o.apply(s,[a]),t.refresh_field(s.df.fieldname)},s.refresh(),s.$input&&(s.$input.addClass("input-sm").attr("data-col-idx",e.column_index).attr("placeholder",__(n.placeholder||n.label)),this.columns_list&&this.columns_list.slice(-1)[0]===e?s.$input.attr("data-last-input",1):this.columns_list&&this.columns_list.slice(0)[0]===e&&s.$input.attr("data-first-input",1)),this.set_arrow_keys(s),e.field=s,this.on_grid_fields_dict[n.fieldname]=s,this.on_grid_fields.push(s)}set_arrow_keys(e){var t=this;let i=["Text","Small Text","Code","Text Editor","HTML Editor"];e.$input&&e.$input.on("keydown",function(n){var{ESCAPE:s,TAB:o,UP:a,DOWN:l}=frappe.ui.keyCode;if(![o,a,l,s].includes(n.which))return;var f=t.grid.get_data(),m=$(this).attr("data-fieldname"),b=$(this).attr("data-fieldtype");let h=n.metaKey||n.ctrlKey;if(!i.includes(b)&&h&&n.which!==o){t.add_new_row_using_keys(n);return}if(n.shiftKey&&n.altKey&&l===n.which){t.duplicate_row_using_keys();return}var p=function(A){if(i.includes(b)&&!n.altKey||e.autocomplete_open)return!1;A.toggle_editable_row();var k=A.columns[m].field.$input;return k&&k.focus(),!0};if(n.which===s&&!n.shiftKey)return t.doc.__unedited&&t.grid.grid_rows[t.doc.idx-1].remove(),!1;if(n.which===o&&!n.shiftKey){var u=t.wrapper.find("input:enabled:last").get(0),d=$(this).attr("data-last-input")||u===this;if(d)if(t.doc.idx===f.length)setTimeout(function(){t.grid.add_new_row(null,null,!0),t.grid.grid_rows[t.grid.grid_rows.length-1].toggle_editable_row(),t.grid.set_focus_on_row()},100);else return t.grid.grid_rows[t.doc.idx].toggle_editable_row(),t.grid.set_focus_on_row(t.doc.idx),!1}else if(n.which===a){if(t.doc.idx>1){var _=t.grid.grid_rows[t.doc.idx-2];if(p(_))return!1}}else if(n.which===l){if(t.doc.idx<f.length){var y=t.grid.grid_rows[t.doc.idx];if(p(y))return!1}}else if(n.which===o&&n.shiftKey){var g=t.wrapper.find("input:enabled:not([type='checkbox'])").first().get(0),v=$(this).attr("data-first-input")||g===this;if(v){let A=t.grid.get_current_row(n.target);if(A==0)return;t.grid.grid_rows[A-1].toggle_editable_row(!0)}}})}duplicate_row_using_keys(){setTimeout(()=>{this.insert(!1,!0,!0),this.grid.grid_rows[this.doc.idx].toggle_editable_row(),this.grid.set_focus_on_row(this.doc.idx)},100)}add_new_row_using_keys(e){let t="",i=e.metaKey||e.ctrlKey,n=e.which===40;i&&e.shiftKey?(t=n?null:1,this.grid.add_new_row(t,null,n,!1,n,!n),t=n?cint(this.grid.grid_rows.length)-1:0):i&&(t=n?this.doc.idx:this.doc.idx-1,this.insert(!1,n)),t!==""&&setTimeout(()=>{this.grid.grid_rows[t].toggle_editable_row(),this.grid.set_focus_on_row(t)},100)}get_open_form(){return frappe.ui.form.get_open_grid_form()}toggle_view(e,t){if(!this.doc)return this;this.frm&&(this.doc=locals[this.doc.doctype][this.doc.name]);var i=this.get_open_form();if(e===void 0&&(e=!i),document.activeElement&&document.activeElement.blur(),e&&i)if(i==this){t&&t();return}else i.toggle_view(!1);return e?this.show_form():this.hide_form(),t&&t(),this}show_form(){frappe.utils.is_xs()&&($(this.grid.form_grid).css("min-width","0"),$(this.grid.form_grid).css("position","unset")),this.grid_form||(this.grid_form=new vo({row:this})),this.grid_form.wrapper.css("display","block"),this.grid_form.render(),this.row.toggle(!1);let e=this.grid.cannot_add_rows||this.grid.df&&this.grid.df.cannot_add_rows;this.wrapper.find(".grid-insert-row-below, .grid-insert-row, .grid-duplicate-row, .grid-append-row").toggle(!e),this.wrapper.find(".grid-delete-row").toggle(!(this.grid.df&&this.grid.df.cannot_delete_rows)),frappe.dom.freeze("","dark grid-form"),cur_frm&&(cur_frm.cur_grid=this),this.wrapper.addClass("grid-row-open"),!frappe.dom.is_element_in_viewport(this.wrapper)&&!frappe.dom.is_element_in_modal(this.wrapper)&&frappe.utils.scroll_to(this.wrapper,!0,-15),this.frm&&(this.frm.script_manager.trigger(this.doc.parentfield+"_on_form_rendered"),this.frm.script_manager.trigger("form_render",this.doc.doctype,this.doc.name))}hide_form(){var e,t;frappe.utils.is_xs()&&($(this.grid.form_grid).css("min-width","738px"),$(this.grid.form_grid).css("position","relative")),frappe.dom.unfreeze(),this.row.toggle(!0),frappe.dom.is_element_in_modal(this.row)||frappe.utils.scroll_to(this.row,!0,15),this.refresh(),cur_frm&&(cur_frm.cur_grid=null),this.grid_form&&this.grid_form.wrapper.css("display","none"),this.wrapper.removeClass("grid-row-open"),(e=this.grid.meta)!=null&&e.editable_grid&&((t=this.open_form_button)==null||t.parent().focus())}has_prev(){return this.doc.idx>1}open_prev(){!this.doc||this.open_row_at_index(this.doc.idx-2)}has_next(){return this.doc.idx<this.grid.data.length}open_next(){!this.doc||this.open_row_at_index(this.doc.idx)}open_row_at_index(e){if(!!this.grid.data[e])return this.change_page_if_reqd(e),this.grid.grid_rows[e].toggle_view(!0),!0}change_page_if_reqd(e){let{page_index:t,page_length:i}=this.grid.grid_pagination;e++;let n;e<=(t-1)*i?n=t-1:e>t*i&&(n=t+1),n&&this.grid.grid_pagination.go_to_page(n)}refresh_field(e,t){let n=(this.grid.user_defined_columns&&this.grid.user_defined_columns.length>0?this.grid.user_defined_columns:this.docfields).find(a=>(a==null?void 0:a.fieldname)===e);n&&this.doc&&(t=frappe.format(this.doc[e],n,null,this.doc)),!t&&this.frm&&(t=frappe.format(this.doc[e],n,null,this.frm.doc));let s=this.columns[e];s&&(s.static_area.html(t||""),n&&n.reqd&&s.toggleClass("error",t===null||t===""));let o=this.on_grid_fields_dict[e];o&&(this.doc&&(o.docname=this.doc.name),o.refresh()),this.grid_form&&this.grid_form.refresh_field(e)}get_field(e){let t=this.on_grid_fields_dict[e];if(t)return t;if(this.grid_form)return this.grid_form.fields_dict[e];throw`fieldname ${e} not found`}get_visible_columns(e=[]){var t=this,i=$.map(this.docfields,function(n){var s=!n.hidden&&n.in_list_view&&t.grid.frm.get_perm(n.permlevel,"read")&&!frappe.model.layout_fields.includes(n.fieldtype)&&!e.includes(n.fieldname);return s?n:null});return i}set_field_property(e,t,i){var n=this,s=function(o){!o||(o.df[t]=i,o.refresh())};this.grid_form&&(s(this.grid_form.fields_dict[e]),this.grid_form.layout&&this.grid_form.layout.refresh_sections()),s(this.on_grid_fields_dict[e])}toggle_reqd(e,t){this.set_field_property(e,"reqd",t?1:0)}toggle_display(e,t){this.set_field_property(e,"hidden",t?0:1)}toggle_editable(e,t){this.set_field_property(e,"read_only",t?0:1)}};var wo=class{constructor(e){$.extend(this,e),this.setup_pagination()}setup_pagination(){var e;this.page_length=((e=this.grid.meta)==null?void 0:e.grid_page_length)||50,this.page_index=1,this.total_pages=Math.ceil(this.grid.data.length/this.page_length),this.render_pagination()}render_pagination(){if(this.grid.data.length<=this.page_length)this.wrapper.find(".grid-pagination").html("");else{let e=this.get_pagination_html();this.wrapper.find(".grid-pagination").html(e),this.prev_page_button=this.wrapper.find(".prev-page"),this.next_page_button=this.wrapper.find(".next-page"),this.$page_number=this.wrapper.find(".current-page-number"),this.$total_pages=this.wrapper.find(".total-page-number"),this.first_page_button=this.wrapper.find(".first-page"),this.last_page_button=this.wrapper.find(".last-page"),this.bind_pagination_events()}}bind_pagination_events(){this.prev_page_button.on("click",()=>{this.render_prev_page()}),this.next_page_button.on("click",()=>{this.render_next_page()}),this.first_page_button.on("click",()=>{this.go_to_page(1)}),this.last_page_button.on("click",()=>{this.go_to_page(this.total_pages)}),this.$page_number.on("keyup",e=>{e.currentTarget.style.width=(e.currentTarget.value.length+1)*8+"px"}),this.$page_number.on("keydown",e=>{e=e||window.event;var t=e.which?e.which:e.keyCode;let i={up:38,down:40};switch(t){case i.up:this.inc_dec_number(!0);break;case i.down:this.inc_dec_number(!1);break}return!(t>31&&(t<48||t>57)&&![37,38,39,40].includes(t))}),this.$page_number.on("focusout",e=>{this.page_index!=e.currentTarget.value&&(this.page_index=e.currentTarget.value,this.page_index<1?this.page_index=1:this.page_index>this.total_pages&&(this.page_index=this.total_pages),this.go_to_page())})}inc_dec_number(e){let t=parseInt(this.$page_number.val());e?t++:t--,!(t<1||t>this.total_pages)&&this.$page_number.val(t)}update_page_numbers(){let e=Math.ceil(this.grid.data.length/this.page_length);this.total_pages!==e&&(this.total_pages=e,this.render_pagination())}check_page_number(){this.page_index>this.total_pages&&this.page_index>1&&this.go_to_page(this.page_index-1)}get_pagination_html(){let e=`<div class="page-text">
				<input class="current-page-number page-number" type="text" value="${__(this.page_index)}"/>
				<span>${__("of")}</span>
				<span class="total-page-number page-number"> ${__(this.total_pages)} </span>
			</div>`;return $(`<button class="btn btn-secondary btn-xs first-page"">
				<span>${__("First")}</span>
			</button>
			<button class="btn btn-secondary btn-xs prev-page">${frappe.utils.icon("left","xs")}</button>
			${e}
			<button class="btn btn-secondary btn-xs next-page">${frappe.utils.icon("right","xs")}</button>
			<button class="btn btn-secondary btn-xs last-page">
				<span>${__("Last")}</span>
			</button>`)}render_next_page(){this.page_index*this.page_length<this.grid.data.length&&(this.page_index++,this.go_to_page())}render_prev_page(){this.page_index>1&&(this.page_index--,this.go_to_page())}go_to_page(e,t){e?this.page_index=e:e=this.page_index;let i=$(this.grid.parent).find(".rows").empty();this.grid.render_result_rows(i,!0),this.$page_number&&(this.$page_number.val(e),this.$page_number.css("width",(e.toString().length+1)*8+"px")),this.update_page_numbers(),t||this.grid.scroll_to_top()}go_to_last_page_to_add_row(){let e=this.total_pages,t=this.page_length;if(this.grid.data.length==t*e)this.go_to_page(e+1),frappe.utils.scroll_to(this.wrapper);else{if(this.page_index==this.total_pages)return;this.go_to_page(e)}}get_result_length(){return this.grid.data.length<this.page_index*this.page_length?this.grid.data.length:this.page_index*this.page_length}};frappe.ui.form.get_open_grid_form=function(){return $(".grid-row-open").data("grid_row")};frappe.ui.form.close_grid_form=function(){var r=frappe.ui.form.get_open_grid_form();r&&r.hide_form(),frappe.ui.form.editable_row&&frappe.ui.form.editable_row.toggle_editable_row(!1)};var xo=class{constructor(e){he(this,"debounced_refresh_remove_rows_button",frappe.utils.debounce(this.refresh_remove_rows_button,100));he(this,"debounced_duplicate_rows_button",frappe.utils.debounce(this.refresh_duplicate_rows_button,100));$.extend(this,e),this.fieldinfo={},this.doctype=this.df.options,this.sticky_row_sum=71,this.sticky_rows=[],this.doctype&&(this.meta=frappe.get_meta(this.doctype)),this.fields_map={},this.template=null,this.multiple_set=!1,this.frm&&this.frm.meta.__form_grid_templates&&this.frm.meta.__form_grid_templates[this.df.fieldname]&&(this.template=this.frm.meta.__form_grid_templates[this.df.fieldname]),this.filter={},this.is_grid=!0,this.debounced_refresh=this.refresh.bind(this),this.debounced_refresh=frappe.utils.debounce(this.debounced_refresh,100)}get perm(){var e,t;return((e=this.control)==null?void 0:e.perm)||((t=this.frm)==null?void 0:t.perm)||this.df.perm}set perm(e){console.error("Setting perm on grid isn't supported, update form's perm instead")}allow_on_grid_editing(){return!!(this.meta&&this.meta.editable_grid||!this.meta)}make(){let e=`
			<div class="grid-field">
				<label class="control-label">${__(this.df.label||"",null,this.df.parent)}</label>
				<span class="help"></span>
				<p class="text-muted small grid-description"></p>
				<div class="grid-custom-buttons"></div>
				<div class="form-grid-container">
					<div class="form-grid">
						<div class="grid-heading-row"></div>
						<div class="grid-body">
							<div class="rows"></div>
							<div class="grid-empty text-center text-extra-muted">
								${__("No rows")}
							</div>
						</div>
					</div>
				</div>
				<div class="small form-clickable-section grid-footer">
					<div class="flex justify-between">
						<div class="grid-buttons">
							<button type="button" class="btn btn-xs btn-danger grid-remove-rows hidden"
								data-action="delete_rows">
								${__("Delete")}
							</button>
							<button type="button" class="btn btn-xs btn-secondary hidden grid-duplicate-row"
								data-action="duplicate_rows">
								${__("Duplicate Row")}
							</button>
							<button type="button" class="btn btn-xs btn-danger grid-remove-all-rows hidden"
								data-action="delete_all_rows">
								${__("Delete All")}
							</button>
							<!-- hack to allow firefox include this in tabs -->
							<button type="button" class="btn btn-xs btn-secondary grid-add-row">
								${__("Add Row")}
							</button>
							<button type="button" class="grid-add-multiple-rows btn btn-xs btn-secondary hidden">
								${__("Add Multiple")}</a>
							</button>
						</div>
						<div class="grid-pagination">
						</div>
						<div class="grid-bulk-actions text-right">
							<button type="button" class="grid-download btn btn-xs btn-secondary hidden">
								${__("Download")}
							</button>
							<button type="button" class="grid-upload btn btn-xs btn-secondary hidden">
								${__("Upload")}
							</button>
						</div>
					</div>
				</div>
			</div>
		`;this.wrapper=$(e).appendTo(this.parent),$(this.parent).addClass("form-group"),this.set_grid_description(),this.set_doc_url(),frappe.utils.bind_actions_with_object(this.wrapper,this),this.form_grid=this.wrapper.find(".form-grid"),this.setup_add_row(),this.setup_grid_pagination(),this.update_idx_and_name(),this.custom_buttons={},this.grid_buttons=this.wrapper.find(".grid-buttons"),this.grid_custom_buttons=this.wrapper.find(".grid-custom-buttons"),this.remove_rows_button=this.grid_buttons.find(".grid-remove-rows"),this.remove_all_rows_button=this.grid_buttons.find(".grid-remove-all-rows"),this.duplicate_row_button=this.grid_buttons.find(".grid-duplicate-row"),this.setup_allow_bulk_edit(),this.setup_check(),this.df.on_setup&&this.df.on_setup(this)}set_grid_description(){let e=$(this.parent).find(".grid-description");this.df.description?e.html(__(this.df.description)):e.hide()}update_idx_and_name(){this.data.forEach((e,t)=>{e.idx===void 0&&(e.idx=t+1),e.name===void 0&&(e.name=this.get_random_name())})}get_random_name(){return Math.random().toString(36).slice(2,10)}set_doc_url(){var i;let e=frappe.model.no_value_type.filter(n=>frappe.model.table_fields.indexOf(n)===-1);if(!this.df.label||!((i=this.df)!=null&&i.documentation_url)||e.includes(this.df.fieldtype))return;let t=$(this.parent).find("span.help");t.empty(),$(`<a href="${this.df.documentation_url}" target="_blank">
			${frappe.utils.icon("help","sm")}
		</a>`).appendTo(t)}setup_grid_pagination(){this.grid_pagination=new wo({grid:this,wrapper:this.wrapper})}setup_check(){this.wrapper.on("click",".grid-row-check",e=>{var o;let t=$(e.currentTarget),i=t.prop("checked"),n=t.parents(".grid-heading-row:first").length!==0,s=(o=t.parents(".grid-row:first"))==null?void 0:o.attr("data-name");if(n){this.form_grid.find(".grid-row-check").prop("checked",i);let a=this.grid_pagination.get_result_length(),l=this.grid_pagination.page_index,f=this.grid_pagination.page_length;for(let m=(l-1)*f;m<a;m++)this.grid_rows[m].select(i)}else s&&(e.shiftKey&&this.last_checked_docname&&this.check_range(s,this.last_checked_docname,i),this.grid_rows_by_docname[s].select(i),this.last_checked_docname=s);this.refresh_remove_rows_button(),this.refresh_duplicate_rows_button()})}check_range(e,t,i=!0){var b;let n=this.grid_rows_by_docname[e],s=this.grid_rows_by_docname[t],o=this.grid_rows.indexOf(n),a=this.grid_rows.indexOf(s);if(o===-1||a===-1)return;let[l,f]=[o,a].sort((h,p)=>h-p),m=this.grid_rows.slice(l,f+1);for(let h of m)h.select(i),(b=h.row_check)==null||b.find(".grid-row-check").prop("checked",i)}duplicate_rows(){this.get_selected_children().forEach(t=>{this.add_new_row(null,null,!1,t,!1),this.check_range(t.name,t.name,!1)})}delete_rows(){var e=!1;let t=[],i=this.get_selected_children();i.forEach(n=>{t.push(()=>{var s;this.frm||(this.df.data=this.get_data(),this.df.data=this.df.data.filter(o=>o.idx!=n.idx)),(s=this.grid_rows_by_docname[n.name])==null||s.remove(),e=!0}),t.push(()=>frappe.timeout(.1))}),this.frm||t.push(()=>{this.df.data.forEach((n,s)=>n.idx=s+1)}),t.push(()=>{e&&(this.refresh(),this.frm&&this.frm.script_manager.trigger(this.df.fieldname+"_delete",this.doctype))}),frappe.run_serially(t),this.wrapper.find(".grid-heading-row .grid-row-check:checked:first").prop("checked",0),i.length==this.grid_pagination.page_length&&this.scroll_to_top()}delete_all_rows(){frappe.confirm(__("Are you sure you want to delete all rows?"),()=>{this.frm.doc[this.df.fieldname]=[],$(this.parent).find(".rows").empty(),this.grid_rows=[],this.refresh(),this.frm&&this.frm.script_manager.trigger(this.df.fieldname+"_delete",this.doctype),this.frm&&this.frm.dirty(),this.scroll_to_top()})}scroll_to_top(){frappe.utils.scroll_to(this.wrapper)}select_row(e){this.grid_rows_by_docname[e].select()}remove_all(){this.grid_rows.forEach(e=>{e.remove()})}refresh_remove_rows_button(){if(this.df.cannot_delete_rows)return;this.remove_rows_button.toggleClass("hidden",!this.wrapper.find(".grid-body .grid-row-check:checked:first").length);let t=this.wrapper.find(".grid-heading-row .grid-row-check:checked:first").length&&this.data.length>this.get_selected_children().length;this.remove_all_rows_button.toggleClass("hidden",!t)}refresh_duplicate_rows_button(){this.df.cannot_add_rows||this.duplicate_row_button.toggleClass("hidden",!this.wrapper.find(".grid-body .grid-row-check:checked:first").length)}get_selected(){return(this.grid_rows||[]).map(e=>e.doc.__checked?e.doc.name:null).filter(e=>e)}get_selected_children(){return(this.data||[]).map(e=>e.__checked?e:0).filter(e=>e)}reset_grid(){this.visible_columns=[],this.grid_rows=[],$(this.parent).find(".grid-body .grid-row").remove(),this.refresh()}make_head(){this.prevent_build||(this.header_row&&$(this.parent).find(".grid-heading-row .grid-row").remove(),this.header_row=new Xi({parent:$(this.parent).find(".grid-heading-row"),parent_df:this.df,docfields:this.docfields,frm:this.frm,grid:this,configure_columns:!0,header_row:!0}),this.header_search=new Xi({parent:$(this.parent).find(".grid-heading-row"),parent_df:this.df,docfields:this.docfields,frm:this.frm,grid:this,show_search:!0}),this.header_search.row.addClass("filter-row"),this.header_search.show_search||this.header_search.show_search_row()?$(this.parent).find(".grid-heading-row").addClass("with-filter"):$(this.parent).find(".grid-heading-row").removeClass("with-filter"),this.filter_applied&&this.update_search_columns())}update_search_columns(){for(let e in this.filter){if(this.filter[e]&&!this.header_search.search_columns[e]){delete this.filter[e],this.data=this.get_data(this.filter_applied);break}if(this.filter[e]&&this.filter[e].value){let t=this.header_search.row_index.find("input");e&&e!=="row-index"&&(t=this.header_search.search_columns[e].find("input")),t.val(this.filter[e].value)}}}refresh(){if(this.frm&&this.frm.setting_dependency)return;this.filter_applied=Object.keys(this.filter).length!==0,this.data=this.get_data(this.filter_applied),!this.wrapper&&this.make();let e=$(this.parent).find(".rows");this.setup_fields(),this.frm?this.display_status=frappe.perm.get_field_display_status(this.df,this.frm.doc,this.perm):this.df.is_web_form&&this.control?this.display_status=this.control.get_status():this.display_status="Write",this.display_status!=="None"&&(this.make_head(),this.grid_rows||(this.grid_rows=[]),this.truncate_rows(),this.grid_rows_by_docname={},this.grid_pagination.update_page_numbers(),this.render_result_rows(e,!1),this.grid_pagination.check_page_number(),this.wrapper.find(".grid-empty").toggleClass("hidden",Boolean(this.data.length)),this.setup_toolbar(),this.toggle_checkboxes(this.display_status!=="Read"),this.is_sortable()&&!this.sortable_setup_done&&(this.make_sortable(e),this.sortable_setup_done=!0),this.last_display_status=this.display_status,this.last_docname=this.frm&&this.frm.docname,this.form_grid.toggleClass("error",!!(this.df.reqd&&!(this.data&&this.data.length))),this.refresh_remove_rows_button(),this.wrapper.trigger("change"))}render_result_rows(e,t){let i=this.grid_pagination.get_result_length(),n=this.grid_pagination.page_index,s=this.grid_pagination.page_length;if(!!this.grid_rows)for(var o=(n-1)*s;o<i;o++){var a=this.data[o];if(!a)return;a.idx===void 0&&(a.idx=o+1),a.name===void 0&&(a.name=this.get_random_name());let l;this.grid_rows[o]&&!t?(l=this.grid_rows[o],l.doc=a,l.refresh()):(l=new Xi({parent:e,parent_df:this.df,docfields:this.docfields,doc:a,frm:this.frm,grid:this}),this.grid_rows[o]=l),this.grid_rows_by_docname[a.name]=l}}setup_toolbar(){this.is_editable()?(this.wrapper.find(".grid-footer").toggle(!0),this.cannot_add_rows||this.df&&this.df.cannot_add_rows?this.wrapper.find(".grid-add-row, .grid-add-multiple-rows, .grid-duplicate-row").addClass("hidden"):(this.wrapper.find(".grid-add-row").removeClass("hidden"),this.multiple_set&&this.wrapper.find(".grid-add-multiple-rows").removeClass("hidden"))):this.grid_rows.length<this.grid_pagination.page_length&&!this.df.allow_bulk_edit&&this.wrapper.find(".grid-footer").toggle(!1),this.wrapper.find(".grid-add-row, .grid-add-multiple-rows, .grid-upload").toggle(this.is_editable())}truncate_rows(){if(this.grid_rows.length>this.data.length){for(var e=this.data.length;e<this.grid_rows.length;e++){var t=this.grid_rows[e];t&&t.wrapper.remove()}this.grid_rows.splice(this.data.length)}}setup_fields(){this.frm&&this.frm.docname?this.df=frappe.meta.get_docfield(this.frm.doctype,this.df.fieldname,this.frm.docname):this.df.options&&(this.df=frappe.meta.get_docfield(this.df.options,this.df.fieldname)||this.df||null),this.doctype&&this.frm?this.docfields=frappe.meta.get_docfields(this.doctype,this.frm.docname):this.docfields=this.df.fields,this.docfields.forEach(e=>{this.fields_map[e.fieldname]=e})}refresh_row(e){this.grid_rows_by_docname[e]&&this.grid_rows_by_docname[e].refresh()}make_sortable(e){this.grid_sortable=new Sortable(e.get(0),{group:{name:this.df.fieldname},handle:".sortable-handle",draggable:".grid-row",animation:100,filter:"li, a",onMove:t=>{if(!this.is_editable())return!1;let i=$(t.dragged).closest(".grid-row").attr("data-idx"),n=this.data[i%this.grid_pagination.page_length];if(n&&n._sortable===!1)return!1},onUpdate:t=>{let i=$(t.item).closest(".grid-row").attr("data-idx")-1,n=this.data[i%this.grid_pagination.page_length];this.renumber_based_on_dom(),this.frm&&this.frm.script_manager.trigger(this.df.fieldname+"_move",this.df.options,n.name),this.refresh(),this.frm&&this.frm.dirty()}}),this.frm&&$(this.frm.wrapper).trigger("grid-make-sortable",[this.frm])}get_data(e){let t=[];return e?t=this.get_filtered_data():t=this.frm?this.frm.doc[this.df.fieldname]||[]:this.df.data||this.get_modal_data(),t}get_filtered_data(){let e=this.frm?this.frm.doc[this.df.fieldname]:this.df.data;if(!!e){for(let t in this.filter)e=e.filter(i=>{let{df:n,value:s}=this.filter[t];return this.get_data_based_on_fieldtype(n,i,s.toLowerCase())});return e}}get_data_based_on_fieldtype(e,t,i){let n=e.fieldname,s=e.fieldtype,o=t[n];if(s==="Check")return i=frappe.utils.string_to_boolean(i),Boolean(o)===i&&t;if(s==="Sr No"&&t.idx.toString().includes(i))return t;if(s==="Duration"&&o){if(frappe.utils.get_formatted_duration(o).includes(i))return t}else if(s==="Barcode"&&o){if((o.startsWith("<svg")?$(o).attr("data-barcode-value"):o).toLowerCase().includes(i))return t}else if(["Datetime","Date"].includes(s)&&o){if(frappe.datetime.str_to_user(o).includes(i))return t}else if(["Currency","Float","Int","Percent","Rating"].includes(s)){let a=o||0;if(s==="Rating"){let l=parseInt(e.options)||5;a=a*l}if(a.toString().indexOf(i)>-1)return t}else if(o&&o.toLowerCase().includes(i))return t}get_modal_data(){return this.df.get_data?this.df.get_data().filter(e=>{if(!this.deleted_docs||!this.deleted_docs.includes(e.name))return e}):[]}set_column_disp(e,t){if(Array.isArray(e))for(let i of e)this.update_docfield_property(i,"hidden",t?0:1),this.set_editable_grid_column_disp(i,t);else this.get_docfield(e).hidden=t?0:1,this.set_editable_grid_column_disp(e,t);this.debounced_refresh()}set_editable_grid_column_disp(e,t){this.meta.editable_grid&&this.grid_rows&&this.grid_rows.forEach(i=>{i.columns_list.forEach(n=>{n.df.fieldname==e&&(t?(n.df.hidden=!1,i!=frappe.ui.form.editable_row?(n.static_area.show(),n.field_area&&n.field_area.toggle(!1)):(n.static_area.hide(),n.field_area&&n.field_area.toggle(!0),n.field&&(n.field.refresh(),n.field.$input&&n.field.$input.toggleClass("input-sm",!0)))):(n.df.hidden=!0,n.static_area.hide()))})}),this.refresh()}toggle_reqd(e,t){this.update_docfield_property(e,"reqd",t),this.debounced_refresh()}toggle_enable(e,t){this.update_docfield_property(e,"read_only",t?0:1),this.debounced_refresh()}toggle_display(e,t){this.update_docfield_property(e,"hidden",t?0:1),this.debounced_refresh()}toggle_checkboxes(e){this.wrapper.find(".grid-row-check").prop("disabled",!e)}get_docfield(e){return frappe.meta.get_docfield(this.doctype,e,this.frm?this.frm.docname:null)}get_row(e){return typeof e=="number"?e<0?this.grid_rows[this.grid_rows.length+e]:this.grid_rows[e]:this.grid_rows_by_docname[e]}get_grid_row(e){return this.get_row(e)}get_field(e){return this.fieldinfo[e]||(this.fieldinfo[e]={}),this.fieldinfo[e]}set_value(e,t,i){var n;this.display_status!=="None"&&(i==null?void 0:i.name)&&((n=this.grid_rows_by_docname)==null?void 0:n[i.name])&&this.grid_rows_by_docname[i.name].refresh_field(e,t)}setup_add_row(){this.wrapper.find(".grid-add-row").click(()=>(this.add_new_row(null,null,!0,null,!0),this.set_focus_on_row(),!1))}add_new_row(e,t,i,n,s=!1,o=!1){if(this.is_editable()){if(s?this.grid_pagination.go_to_last_page_to_add_row():o&&this.grid_pagination.go_to_page(1),this.frm){var a=frappe.model.add_child(this.frm.doc,this.df.options,this.df.fieldname,e);n&&(a=this.duplicate_row(a,n)),a.__unedited=!0,this.frm.script_manager.trigger(this.df.fieldname+"_add",a.doctype,a.name),this.refresh()}else{this.df.data||(this.df.data=this.get_data()||[]);let l=this.docfields.reduce((m,b)=>(m[b.fieldname]=b.default,m),{}),f=this.df.data.length+1;this.df.data.push(ze({idx:f,__islocal:!0},l)),this.df.on_add_row&&this.df.on_add_row(f),this.refresh()}return i&&(e?this.wrapper.find("[data-idx='"+e+"']").data("grid_row").toggle_view(!0,t):this.allow_on_grid_editing()||this.wrapper.find(".grid-row:last").data("grid_row").toggle_view(!0,t)),a}}renumber_based_on_dom(){$(this.parent).find(".rows").find(".grid-row").each((t,i)=>{let n=$(i),s=(this.grid_pagination.page_index-1)*this.grid_pagination.page_length+t,o=this.grid_rows_by_docname[n.attr("data-name")].doc;o.idx=s+1,n.attr("data-idx",o.idx),this.frm&&(this.frm.doc[this.df.fieldname][s]=o),this.data[s]=o,this.grid_rows[s]=this.grid_rows_by_docname[o.name]})}duplicate_row(e,t){return $.each(t,function(i,n){["creation","modified","modified_by","idx","owner","parent","doctype","name","parentfield"].includes(i)||(e[i]=n)}),e}set_focus_on_row(e){!e&&e!==0&&(e=this.grid_rows.length-1),setTimeout(()=>{this.grid_rows[e].toggle_editable_row(!0),this.grid_rows[e].row.find('input[type="Text"],textarea,select').filter(":visible:first").focus()},100)}setup_visible_columns(){if(!(this.visible_columns&&this.visible_columns.length>0)){this.user_defined_columns=[],this.setup_user_defined_columns();var e=1,t=this.user_defined_columns&&this.user_defined_columns.length>0?this.user_defined_columns:this.editable_fields||this.docfields;this.visible_columns=[];for(var i in t){var n=t[i];if(a=this.user_defined_columns&&this.user_defined_columns.length>0?n:this.fields_map[n.fieldname],a&&!a.hidden&&(this.editable_fields||a.in_list_view)&&(this.frm&&this.frm.get_perm(a.permlevel,"read")||!this.frm)&&!frappe.model.layout_fields.includes(a.fieldtype)){if(a.columns?a.colsize=a.columns:this.update_default_colsize(a),a.fieldtype=="Link"&&!a.formatter&&a.parent&&frappe.meta.docfield_map[a.parent]){let f=frappe.meta.docfield_map[a.parent][a.fieldname];f&&f.formatter&&(a.formatter=f.formatter)}e+=a.colsize,this.visible_columns.push([a,a.colsize])}}for(var s=0;e<11&&s<12;){for(var o in this.visible_columns){var a=this.visible_columns[o][0],l=this.visible_columns[o][1];if(l>1&&l<11&&frappe.model.is_non_std_field(a.fieldname)){if(s<3&&["Int","Currency","Float","Check","Percent"].indexOf(a.fieldtype)!==-1)continue;this.visible_columns[o][1]+=1,e++}if(e>10)break}s++}}}update_default_colsize(e){var t=2;switch(e.fieldtype){case"Text":break;case"Small Text":t=3;break;case"Check":t=1}e.colsize=t}setup_user_defined_columns(){if(!this.frm)return;let e=frappe.get_user_settings(this.frm.doctype,"GridView");e&&e[this.doctype]&&e[this.doctype].length&&(this.user_defined_columns=e[this.doctype].map(t=>{let i=frappe.meta.get_docfield(this.doctype,t.fieldname);if(i)return i.in_list_view=1,i.columns=t.columns,i.sticky=t.sticky,i}).filter(Boolean))}is_editable(){return this.display_status=="Write"&&!this.static_rows}is_sortable(){return this.sortable_status||this.is_editable()}only_sortable(e){(e===void 0||e)&&(this.sortable_status=!0,this.static_rows=!0)}set_multiple_add(e,t){if(!this.multiple_set){var i=frappe.meta.get_docfield(this.df.options,e),n=$(this.wrapper).find(".grid-add-multiple-rows");n.removeClass("hidden"),n.on("click",()=>(new frappe.ui.form.LinkSelector({doctype:i.options,fieldname:e,qty_fieldname:t,get_query:i.get_query,target:this,txt:""}),this.grid_pagination.go_to_last_page_to_add_row(),!1)),this.multiple_set=!0}}setup_allow_bulk_edit(){var t;let e=this;if(this.frm&&((t=this.frm.get_docfield(this.df.fieldname))==null?void 0:t.allow_bulk_edit)){this.setup_download();let i={Date:n=>n&&frappe.datetime.user_to_str(n),Int:n=>cint(n),Check:n=>cint(n),Float:n=>flt(n),Currency:n=>flt(n)};frappe.flags.no_socketio=!0,$(this.wrapper).find(".grid-upload").removeClass("hidden").on("click",()=>(new frappe.ui.FileUploader({as_dataurl:!0,allow_multiple:!1,restrictions:{allowed_file_types:[".csv"]},on_success(n){var s=frappe.utils.csv_to_array(frappe.utils.get_decoded_string(n.dataurl));cint(s.length)-7>5e3&&frappe.throw(__("Cannot import table with more than 5000 rows."));var o=s[2];e.frm.clear_table(e.df.fieldname),$.each(s,(a,l)=>{if(a>6){var f=!0;if($.each(l,function(b,h){if(h)return f=!1,!1}),!f){var m=e.frm.add_child(e.df.fieldname);$.each(l,(b,h)=>{var p=o[b],u=frappe.meta.get_docfield(e.df.options,p);u&&(m[o[b]]=i[u.fieldtype]?i[u.fieldtype](h):h)})}}}),e.frm.refresh_field(e.df.fieldname),frappe.msgprint({message:__("Table updated"),title:__("Success"),indicator:"green"})}}),!1))}}setup_download(){let e=this.df.label||frappe.model.unscrub(this.df.fieldname);$(this.wrapper).find(".grid-download").removeClass("hidden").on("click",()=>{var t=[],i=[];return t.push([__("Bulk Edit {0}",[e])]),t.push([]),t.push([]),t.push([]),t.push([__("The CSV format is case sensitive")]),t.push([__("Do not edit headers which are preset in the template")]),t.push(["------"]),$.each(frappe.get_meta(this.df.options).fields,(n,s)=>{if(frappe.model.is_value_type(s.fieldtype)){t[1].push(s.label),t[2].push(s.fieldname);let o=(s.description||"")+" ";s.fieldtype==="Date"&&(o+=frappe.boot.sysdefaults.date_format),t[3].push(o),i.push(s)}}),$.each(this.frm.doc[this.df.fieldname]||[],(n,s)=>{var o=[];$.each(t[2],(a,l)=>{var f=s[l];i[a].fieldtype==="Date"&&f&&(f=frappe.datetime.str_to_user(f)),o.push(f||"")}),t.push(o)}),frappe.tools.downloadify(t,null,e),!1})}add_custom_button(e,t,i="bottom"){let n=i==="top"?this.grid_custom_buttons:this.grid_buttons,s=this.custom_buttons[e];return s?s.removeClass("hidden"):(s=$('<button type="button" class="btn btn-secondary btn-xs btn-custom">').html(__(e)).prependTo(n).on("click",t),this.custom_buttons[e]=s),s}clear_custom_buttons(){this.grid_buttons.find(".btn-custom").addClass("hidden")}update_docfield_property(e,t,i){var n;if(!!this.grid_rows){for(let s of this.grid_rows){let o=(n=s==null?void 0:s.docfields)==null?void 0:n.find(a=>a.fieldname===e);if(o)o[t]=i;else throw`field ${e} not found`}if(this.docfields.find(s=>s.fieldname===e)[t]=i,this.user_defined_columns&&this.user_defined_columns.length>0){let s=this.user_defined_columns.find(o=>o.fieldname===e);s&&Object.keys(s).includes(t)&&(s[t]=i)}this.debounced_refresh()}}get_current_row(e){let t=null;for(let i=0;i<this.grid_rows.length;i++)this.grid_rows[i].wrapper.get(0).contains(e)&&(t=i);return t}};frappe.ui.form.ControlTable=class extends frappe.ui.form.Control{make(){super.make(),this.grid=new xo({frm:this.frm,df:this.df,parent:this.wrapper,control:this}),this.frm&&(this.frm.grids[this.frm.grids.length]=this);let e=this;this.$wrapper.on("paste",":text",t=>{let i=this.df.fieldname,n=this.grid,s=n.grid_pagination,o=n.grid_rows,a=n.doctype,l=$(t.target).closest(".grid-row").data("name"),f=$(t.target).closest(".form-in-grid").length,m={Date:y=>y&&frappe.datetime.user_to_str(y),Int:y=>cint(y),Check:y=>cint(y),Float:y=>flt(y),Currency:y=>flt(y)},b=frappe.utils.get_clipboard_data(t);if(!b||f)return;let h=frappe.utils.csv_to_array(b,"	");if(h.length===1&&h[0].length===1)return;let p=[],u=[];if(this.get_field(h[0][0]))h[0].forEach(y=>{p.push(this.get_field(y));let g=frappe.meta.get_docfield(a,this.get_field(y));u.push(g?g.fieldtype:"")}),h.shift();else{let y=o[0].get_visible_columns(),g=!1;y.forEach(v=>{if(g||v.fieldname===$(t.target).data("fieldname")){p.push(v.fieldname);let A=frappe.meta.get_docfield(a,v.fieldname);u.push(A?A.fieldtype:""),g=!0}})}let d=locals[a][l].idx,_=h.length;return h.forEach((y,g)=>{setTimeout(()=>{if(!!y.filter(Boolean).length){d>this.frm.doc[i].length&&this.grid.add_new_row(),d>1&&(d-1)%s.page_length===0&&s.go_to_page(s.page_index+1);let A=o[d-1].doc.name;if(y.forEach((k,w)=>{p[w]&&(k=m[u[w]]?m[u[w]](k):k,frappe.model.set_value(a,A,p[w],k))}),d++,_>=10){let k=g+1;frappe.show_progress(__("Processing"),k,_,null,!0)}}},0)}),!1})}get_field(e){var i,n;let t;return e=e.toLowerCase(),(n=(i=this.grid)==null?void 0:i.meta)==null||n.fields.some(s=>{if(frappe.model.no_value_type.includes(s.fieldtype))return!1;if((()=>s.fieldname.toLowerCase()===e||(s.label||"").toLowerCase()===e||(__(s.label,null,s.parent)||"").toLowerCase()===e)())return t=s.fieldname,!0}),t}refresh_input(){this.grid.refresh()}get_value(){if(this.grid)return this.grid.get_data()}set_input(){}validate(){return this.get_value()}check_all_rows(){this.$wrapper.find(".grid-row-check")[0].click()}};var Ei={get_hue(r){return this.get_hsv(r)[0]},get_hsv(r){return typeof r=="string"&&(r.startsWith("#")?r=this.hex_to_rgb_values(r):r=this.get_rgb_values(r)),this.rgb_to_hsv(...r)},get_rgb_values(r){return r.replace(/[()rgb\s]/g,"").split(",").map(e=>parseInt(e))},rgb_to_hsv(r,e,t){r/=255,e/=255,t/=255;let i=Math.max(r,e,t),n=Math.min(r,e,t),s,o,a=i,l=i-n;if(o=i==0?0:l/i,i==n)s=0;else{switch(i){case r:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-r)/l+2;break;case t:s=(r-e)/l+4;break}s/=6}return[Math.round(s*360),Math.round(o*100),Math.round(a*100)]},component_to_hex(r){let e=r.toString(16);return e.length==1?"0"+e:e},rgb_to_hex(r,e,t){return"#"+this.component_to_hex(r)+this.component_to_hex(e)+this.component_to_hex(t)},hex_to_rgb_values(r){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]},hsv_to_hex(r,e,t){e/=100,t/=100,r/=360;let i,n,s,o=Math.floor(r*6),a=r*6-o,l=t*(1-e),f=t*(1-a*e),m=t*(1-(1-a)*e);switch(o%6){case 0:i=t,n=m,s=l;break;case 1:i=f,n=t,s=l;break;case 2:i=l,n=t,s=m;break;case 3:i=l,n=f,s=t;break;case 4:i=m,n=l,s=t;break;case 5:i=t,n=l,s=f;break}return i=Math.round(i*255),n=Math.round(n*255),s=Math.round(s*255),this.rgb_to_hex(i,n,s)},clamp(r,e,t){return e>t?t:e<r?r:e}};var _f=class{constructor(e){this.parent=e.parent,this.width=e.width,this.height=e.height,this.set_color(e.color),this.swatches=e.swatches,this.setup_picker()}refresh(){this.set_selector_position(!0),this.update_color_map()}setup_picker(){let e=document.createElement("template");e.innerHTML=`
			<div class="color-picker">
				<div class="swatch-section">
					${__("SWATCHES")}<br>
					<div class="swatches"></div>
				</div>
				${__("COLOR PICKER")}<br>
				<div class="color-map">
					<div class="color-selector"></div>
				</div>
				<div class="hue-map">
					<div class="hue-selector"></div>
				</div>
			</div>
		`.trim(),this.color_picker_wrapper=e.content.firstElementChild.cloneNode(!0),this.parent.appendChild(this.color_picker_wrapper),this.color_map=this.color_picker_wrapper.getElementsByClassName("color-map")[0],this.color_selector_circle=this.color_map.getElementsByClassName("color-selector")[0],this.hue_map=this.color_picker_wrapper.getElementsByClassName("hue-map")[0],this.swatches_wrapper=this.color_picker_wrapper.getElementsByClassName("swatches")[0],this.hue_selector_circle=this.hue_map.getElementsByClassName("hue-selector")[0],this.refresh(),this.setup_events(),this.setup_swatches()}setup_events(){this.setup_hue_event(),this.setup_color_event()}setup_swatches(){let e=document.createElement("template");e.innerHTML='<div class="swatch" tabindex=0></div>',this.swatches.forEach(t=>{let i=e.content.firstElementChild.cloneNode(!0);this.swatches_wrapper.appendChild(i);let n=()=>{this.set_color(t),this.set_selector_position(),this.update_color_map()};i.addEventListener("click",()=>{n()}),i.onkeydown=s=>{let o=s.keyCode;[13,32].includes(o)&&(s.preventDefault(),n())},i.style.backgroundColor=t})}set_selector_position(e){this.hue=Ei.get_hue(this.get_color()),this.color_selector_position=this.get_pointer_coords(),this.hue_selector_position={x:this.hue*this.hue_map.offsetWidth/360,y:this.hue_map.offsetHeight/2},this.update_color_selector(e),this.update_hue_selector(e)}setup_color_event(){let e=(t,i)=>{this.color_selector_position.x=t,this.color_selector_position.y=i,this.update_color(),this.update_color_selector()};this.setup_drag_event(this.color_map,e)}update_color(){let e=this.color_selector_position.x,t=this.color_selector_position.y,i=this.color_map.offsetWidth,n=this.color_map.offsetHeight,s=Ei.hsv_to_hex(this.hue,Math.round(e/i*100),Math.round((1-t/n)*100));this.set_color(s)}update_color_selector(e){let t=this.color_selector_position.x,i=this.color_selector_position.y;this.color_selector_circle.style.top=i-this.color_selector_circle.offsetHeight/2+"px",this.color_selector_circle.style.left=t-this.color_selector_circle.offsetWidth/2+"px",this.color_map.style.color=this.get_color(),!e&&this.on_change&&this.on_change(this.get_color())}setup_hue_event(){let e=(t,i)=>{this.hue_selector_position.x=t,this.hue=Math.round(t*360/this.hue_map.offsetWidth),this.update_color_map(),this.update_hue_selector(),this.update_color(),this.update_color_selector()};this.setup_drag_event(this.hue_map,e)}update_color_map(){this.color_map.style.background=`
			linear-gradient(0deg, black, transparent),
			linear-gradient(90deg, white, transparent),
			hsl(${this.hue}, 100%, 50%)
		`}update_hue_selector(){let e=this.hue_selector_position.x-1,t=this.hue_map.offsetHeight/2-1;this.hue_selector_circle.style.top=t-this.hue_selector_circle.offsetHeight/2+"px",this.hue_selector_circle.style.left=e-this.hue_selector_circle.offsetWidth/2+"px",this.hue_map.style.color=`hsl(${this.hue}, 100%, 50%)`}get_pointer_coords(){let e,t,i;[e,t,i]=Ei.get_hsv(this.get_color());let n=this.color_map.offsetWidth,s=this.color_map.offsetHeight,o=Ei.clamp(0,t*n/100,n),a=Ei.clamp(0,(1-i/100)*s,s);return{x:o,y:a}}setup_drag_event(e,t){let i=(n,s)=>{if(e.drag_enabled||s){n.preventDefault(),n=n.touches?n.touches[0]:n;let o=e.getBoundingClientRect(),a=n.clientX-o.left,l=n.clientY-o.top;a=Ei.clamp(0,a,o.width),l=Ei.clamp(0,l,o.height),t(a,l)}};e.addEventListener("mousedown",()=>e.drag_enabled=!0),document.addEventListener("mouseup",()=>e.drag_enabled=!1),document.addEventListener("mousemove",i),e.addEventListener("click",n=>i(n,!0)),e.addEventListener("touchstart",()=>e.drag_enabled=!0),e.addEventListener("touchend",()=>e.drag_enabled=!1),e.addEventListener("touchcancel",()=>e.drag_enabled=!1),e.addEventListener("touchmove",n=>{n.touches.length==1?i(n):e.drag_enabled=!1})}set_color(e){this.color=e||"#ffffff"}get_color(){return this.color||"#ffffff"}},v0=_f;frappe.ui.form.ControlColor=class extends frappe.ui.form.ControlData{make_input(){this.df.placeholder=this.df.placeholder||__("Choose a color"),super.make_input(),this.make_color_input()}make_color_input(){let e=$("<div>");this.picker=new v0({parent:e[0],color:this.get_color(),swatches:["#449CF0","#ECAD4B","#29CD42","#761ACB","#CB2929","#ED6396","#29CD42","#4463F0","#EC864B","#4F9DD9","#39E4A5","#B4CD29"]}),this.$wrapper.popover({trigger:"manual",offset:`${-this.$wrapper.width()/4}, 5`,boundary:"viewport",placement:"bottom",template:`
				<div class="popover color-picker-popover">
					<div class="picker-arrow arrow"></div>
					<div class="popover-body popover-content"></div>
				</div>
			`,content:()=>e,html:!0}).on("show.bs.popover",()=>{setTimeout(()=>{this.picker.refresh()},10)}).on("hidden.bs.popover",()=>{$("body").off("click.color-popover"),$(window).off("hashchange.color-popover")}),this.picker.on_change=t=>{this.set_value(t)},this.selected_color||(this.selected_color=$('<div class="selected-color"></div>'),this.selected_color.insertAfter(this.$input)),this.$wrapper.find(".selected-color").parent().on("click",t=>{this.$wrapper.popover("toggle"),this.get_color()||this.$input.val(""),t.stopPropagation(),$("body").on("click.color-popover",i=>{$(i.target).parents().is(".popover")||this.$wrapper.popover("hide")}),$(window).on("hashchange.color-popover",()=>{this.$wrapper.popover("hide")})})}refresh(){super.refresh();let e=this.get_color();this.picker&&this.picker.color!==e&&(this.picker.color=e,this.picker.refresh())}set_formatted_input(e){var t,i,n;super.set_formatted_input(e),(t=this.$input)==null||t.val(e),(i=this.selected_color)==null||i.css({"background-color":e||"transparent"}),(n=this.selected_color)==null||n.toggleClass("no-value",!e)}get_color(){return this.validate(this.get_value())}validate(e){if(e==="")return"";var t=/^#[0-9A-F]{6}$/i.test(e);return t?e:null}};frappe.ui.form.ControlSignature=class extends frappe.ui.form.ControlData{make(){var e=this;this.saving=!1,this.loading=!1,super.make(),this.df.label&&$(this.wrapper).find("label").text(__(this.df.label,null,this.df.parent)),this.set_doc_url(),frappe.require("/assets/frappe/js/lib/jSignature.min.js").then(()=>{e.body=$('<div class="signature-field"></div>').prependTo(e.$input_wrapper),new ResizeObserver(()=>e.make_pad()).observe(e.body[0])}),this.img_wrapper=$(`<div class="signature-display">
			<div class="missing-image attach-missing-image">
				${frappe.utils.icon("restriction","md")}</i>
			</div></div>`).prependTo(this.$input_wrapper),this.img=$("<img class='img-responsive attach-image-display'>").appendTo(this.img_wrapper).toggle(!1)}make_pad(){let e=this.body.width();e>0&&!this.$pad&&(this.$pad=this.body.jSignature({height:200,color:"var(--text-color)",decorColor:"black",width:e,lineWidth:2,backgroundColor:"var(--control-bg)"}).on("change",this.on_save_sign.bind(this)),this.load_pad(),this.$reset_button_wrapper=$(`
					<div class="signature-btn-row">
						<a href="#" type="button" class="signature-reset btn icon-btn">
							${frappe.utils.icon("es-line-reload","sm")}
						</a>
					</div>
				`).appendTo(this.$pad).on("click",".signature-reset",()=>(this.on_reset_sign(),!1)),this.refresh_input())}refresh_input(){!this.body||(this.make_pad(),this.$wrapper.find(".control-input").toggle(!1),this.set_editable(this.get_status()=="Write"),this.load_pad(),this.get_status()=="Read"&&$(this.disp_area).toggle(!1))}set_image(e){e?($(this.img_wrapper).find(".missing-image").toggle(!1),this.img.attr("src",e).toggle(!0)):($(this.img_wrapper).find(".missing-image").toggle(!0),this.img.toggle(!1))}load_pad(){if(!this.saving){var e=this.get_value();if(this.$pad){if(this.loading=!0,this.$pad.jSignature("reset"),e)try{this.$pad.jSignature("setData",e),this.set_image(e)}catch(t){console.log("Cannot set data for signature",e,t)}this.loading=!1}}}set_editable(e){this.$pad&&this.$pad.toggle(e),this.img_wrapper.toggle(!e),this.$reset_button_wrapper&&(this.$reset_button_wrapper.toggle(e),e?this.$reset_button_wrapper.addClass("editing"):this.$reset_button_wrapper.removeClass("editing"))}set_my_value(e){this.saving||this.loading||(this.saving=!0,this.set_value(e),this.saving=!1)}get_value(){return this.value?this.value:this.get_model_value()}on_reset_sign(){this.$pad.jSignature("reset"),this.set_my_value("")}on_save_sign(){if(!(this.saving||this.loading)){var e=this.$pad.jSignature("getData");this.set_my_value(e),this.set_image(this.get_value())}}on_section_collapse(){this.refresh()}};var gf;frappe.ui.form.ControlPassword=(gf=class extends frappe.ui.form.ControlData{make(){super.make(),this.enable_password_checks=!0}make_input(){var e=this;super.make_input(),this.indicator=$(`<div class="password-strength-indicator hidden">
				<div class="progress-text"></div>
				<div class="progress">
					<div class="progress-bar" role="progressbar"
						aria-valuenow="0"
						aria-valuemin="0" aria-valuemax="100">
					</div>
				</div>
			</div>`).insertAfter(this.$input),this.progress_text=this.indicator.find(".progress-text"),this.progress_bar=this.indicator.find(".progress-bar"),this.message=this.$wrapper.find(".help-box"),this.$input.on("keyup",frappe.utils.debounce(()=>{let t=e.$input.val()&&!e.$input.val().includes("*");e.toggle_password.toggleClass("hidden",!t),e.get_password_strength(e.$input.val())},500)),this.toggle_password=$(`
			<div class="toggle-password hidden">
				${frappe.utils.icon("unhide","sm")}
			</div>
		`).insertAfter(this.$input),this.toggle_password.on("click",()=>{this.$input.attr("type")==="password"?(this.$input.attr("type","text"),this.toggle_password.html(frappe.utils.icon("hide","sm"))):(this.$input.attr("type","password"),this.toggle_password.html(frappe.utils.icon("unhide","sm")))}),!this.value&&this.toggle_password.removeClass("hidden")}disable_password_checks(){this.enable_password_checks=!1}get_password_strength(e){if(!!this.enable_password_checks){if(!e){this.indicator.addClass("hidden"),this.message.addClass("hidden");return}var t=this;frappe.call({type:"POST",method:"frappe.core.doctype.user.user.test_password_strength",args:{new_password:e||""},callback:function(i){if(i.message.score!==void 0&&i.message.score!==null){let n=["red","red","orange","blue","green"];t.set_strength_indicator(n[i.message.score])}}})}}set_strength_indicator(e){let t={red:[__("Weak"),"danger",25],orange:[__("Average"),"warning",50],blue:[__("Strong"),"info",75],green:[__("Excellent"),"success",100]},i=t[e][0],n=t[e][1],s=t[e][2];this.indicator.removeClass("hidden"),this.progress_text.html(i).css("color",`var(--${e}-500)`),this.progress_bar.css("width",s+"%").attr("aria-valuenow",s).removeClass().addClass("progress-bar progress-bar-"+n);let o=__("Include symbols, numbers and capital letters in the password");this.message.html(o).toggleClass("hidden",e=="green")}},he(gf,"input_type","password"),gf);frappe.ui.form.ControlButton=class extends frappe.ui.form.ControlData{can_write(){return!0}make_input(){var e=this;let t=this.df.primary?"btn-primary":"btn-default",i=this.df.btn_size?`btn-${this.df.btn_size}`:"btn-xs";this.$input=$(`<button
				class="btn ${frappe.utils.escape_html(i)} ${frappe.utils.escape_html(t)}"
				title="${frappe.utils.escape_html(this.df.label)}"
			>`).prependTo(e.input_area).on("click",function(){e.onclick()}),this.input=this.$input.get(0),this.set_input_attributes(),this.has_input=!0,this.toggle_label(!1)}onclick(){this.frm&&this.frm.doc?this.frm.script_manager.has_handlers(this.df.fieldname,this.doctype)?this.frm.script_manager.trigger(this.df.fieldname,this.doctype,this.docname):this.df.options&&this.run_server_script():this.df.click&&this.df.click()}run_server_script(){var e=this;this.frm&&this.frm.docname&&frappe.call({method:"run_doc_method",args:{docs:this.frm.doc,method:this.df.options},btn:this.$input,callback:function(t){t.exc||e.frm.refresh_fields()}})}hide(){this.$input.hide()}set_input_areas(){super.set_input_areas(),$(this.disp_area).removeClass().addClass("hide")}set_empty_description(){this.$wrapper.find(".help-box").empty().toggle(!1)}set_label(e){e&&(this.df.label=e),e=(this.df.icon?frappe.utils.icon(this.df.icon):"")+__(this.df.label,null,this.df.parent),$(this.label_span).html("&nbsp;"),this.$input&&this.$input.html(e)}};frappe.ui.form.ControlHTML=class extends frappe.ui.form.Control{make(){super.make(),this.disp_area=this.wrapper}refresh_input(){var e=this.get_content();e&&this.$wrapper.html(e)}get_content(){var e=this.df.options||"";e=__(e);try{return frappe.render(e,this)}catch(t){return e}}html(e){this.$wrapper.html(e||this.get_content())}set_value(e){return e.appendTo?e.appendTo(this.$wrapper.empty()):(this.df.options=e,this.html(e)),Promise.resolve()}};var yf;frappe.ui.form.ControlMarkdownEditor=(yf=class extends frappe.ui.form.ControlCode{make_ace_editor(){var t,i,n;if(super.make_ace_editor(),this.markdown_container)return;let e=this.constructor.editor_class;this.ace_editor_target.wrap(`<div class="${e}-container">`),this.markdown_container=(t=this.$input_wrapper)==null?void 0:t.find(`.${e}-container`),this.editor.getSession().setUseWrapMode(!0),this.showing_preview=!1,this.preview_toggle_btn=$(`<button class="btn btn-default btn-xs ${e}-toggle">${__("Preview")}</button>`).click(s=>{this.showing_preview||this.update_preview();let o=$(s.target);this.markdown_preview.toggle(!this.showing_preview),this.ace_editor_target.toggle(this.showing_preview),this.showing_preview=!this.showing_preview,o.text(this.showing_preview?__("Edit"):__("Preview"))}),(i=this.markdown_container)==null||i.prepend(this.preview_toggle_btn),this.markdown_preview=$(`<div class="${e}-preview border rounded">`).hide(),(n=this.markdown_container)==null||n.append(this.markdown_preview),this.setup_image_drop()}set_language(){this.df.options||(this.df.options="Markdown"),super.set_language()}update_preview(){if(!this.markdown_preview)return;let e=this.get_value()||"";this.markdown_preview.html(frappe.markdown(e))}set_formatted_input(e){super.set_formatted_input(e).then(()=>{this.update_preview()})}set_disp_area(e){this.disp_area&&$(this.disp_area).text(e)}setup_image_drop(){this.ace_editor_target.on("drop",e=>{var n;e.stopPropagation(),e.preventDefault();let{dataTransfer:t}=e.originalEvent;if(!((n=t==null?void 0:t.files)!=null&&n.length))return;let i=t.files;if(!i[0].type.includes("image")){frappe.show_alert({message:__("You can only insert images in Markdown fields",[i[0].name]),indicator:"orange"});return}new frappe.ui.FileUploader({dialog_title:__("Insert Image in Markdown"),doctype:this.doctype,docname:this.docname,frm:this.frm,files:i,folder:"Home/Attachments",allow_multiple:!1,restrictions:{allowed_file_types:["image/*"]},on_success:s=>{this.frm&&!this.frm.is_new()&&this.frm.attachments.attachment_uploaded(s),this.editor.session.insert(this.editor.getCursorPosition(),`![](${encodeURI(s.file_url)})`)}})})}},he(yf,"editor_class","markdown"),yf);var bf;frappe.ui.form.ControlHTMLEditor=(bf=class extends frappe.ui.form.ControlMarkdownEditor{set_language(){this.df.options="HTML",super.set_language()}update_preview(){if(!this.markdown_preview)return;let e=this.get_value()||"";e=frappe.dom.remove_script_and_style(e),this.markdown_preview.html(e)}},he(bf,"editor_class","html"),bf);frappe.ui.form.ControlHeading=class extends frappe.ui.form.ControlHTML{get_content(){return"<h4>"+__(this.df.label,null,this.df.parent)+"</h4>"}};var wf=ut(Es());var vf;frappe.ui.form.ControlAutocomplete=(vf=class extends frappe.ui.form.ControlData{make_input(){super.make_input(),this.setup_awesomplete(),this.set_options()}set_options(){if(this.df.options){let e=this.df.options||[];this.set_data(e)}}format_for_input(e){if(e==null)return"";if(this._data&&this._data.length){let t=this._data.find(i=>i.value==e);return t?t.label:e}else return e}get_input_value(){var e;if(this.$input){let t=this.$input.val(),i=(e=this._data)==null?void 0:e.find(n=>n.label==t);return i?i.value:t}}get_awesomplete_settings(){var e=this;return{tabSelect:!0,minChars:0,maxItems:this.df.max_items||99,autoFirst:!0,list:this.get_data(),data:function(t){if(typeof t!="object"){var i={value:t};t=i}return{label:t.label||t.value,value:t.value}},filter:function(t,i){let n=t.label+t.value;return wf.default.FILTER_CONTAINS(n,i)},item:function(t){var i=this.get_item(t.value);i||(i=t),i.label||(i.label=i.value);var n=e.translate_values?__(i.label,null,i.parent):i.label,s="<strong>"+n+"</strong>";return i.description&&(s+='<br><span class="small">'+__(i.description)+"</span>"),$("<li></li>").data("item.autocomplete",i).prop("aria-selected","false").html("<a><p>"+s+"</p></a>").get(0)},sort:()=>0}}setup_awesomplete(){this.awesomplete=new wf.default(this.input,this.get_awesomplete_settings()),$(this.input_area).find(".awesomplete ul").css("min-width","100%"),this.$input.on("input",e=>{this.get_query||this.df.get_query?this.execute_query_if_exists(e.target.value):this.awesomplete.list=this.get_data()}),this.$input.on("focus",()=>{this.$input.val()||(this.$input.val(""),this.$input.trigger("input"))}),this.$input.on("blur",()=>{if(this.selected){this.selected=!1;return}var e=this.get_input_value();e!==this.last_value&&this.parse_validate_and_set_in_model(e)}),this.$input.on("awesomplete-open",()=>{this.autocomplete_open=!0}),this.$input.on("awesomplete-close",()=>{this.autocomplete_open=!1}),this.$input.on("awesomplete-selectcomplete",()=>{this.$input.trigger("change")})}validate(e){if(this.df.ignore_validation)return e||"";let t=this.awesomplete._list.map(i=>i.value);return!t.length||t.includes(e)?e:""}parse_options(e){return typeof e=="string"&&e[0]==="["&&(e=frappe.utils.parse_json(e)),typeof e=="string"&&(e=e.split(`
`)),typeof e[0]=="string"&&(e=e.map(t=>({label:t,value:t}))),e=e.map(t=>(typeof t!="string"&&(t.label=__(cstr(t.label)),t.value=cstr(t.value)),t)),e}execute_query_if_exists(e){let t={txt:e},i=this.get_query||this.df.get_query;if(!i)return;let n=function(a){return $.each(a,function(l,f){f!==void 0&&(a[l]=f)}),a},s=function(a){a.query&&(t.query=a.query),a.params&&(n(a.params),Object.assign(t,a.params)),a.translate_values!==void 0&&(this.translate_values=a.translate_values)};if($.isPlainObject(i))s(i);else if(typeof i=="string")t.query=i;else{var o=i(this.frm&&this.frm.doc||this.doc,this.doctype,this.docname);typeof o=="string"?t.query=o:$.isPlainObject(o)&&s(o)}t.query&&frappe.call({method:t.query,args:t,callback:({message:a})=>{!this.$input.is(":focus")||this.set_data(a)}})}get_data(){return this._data||[]}set_data(e){e=this.parse_options(e),this.awesomplete&&(this.awesomplete.list=e),this._data=e}},he(vf,"trigger_change_on_input_event",!1),vf);var Fy=ut(By());frappe.ui.form.ControlBarcode=class extends frappe.ui.form.ControlData{make_wrapper(){super.make_wrapper(),this.default_svg="<svg height=80></svg>";let e=this.$wrapper.find(".control-input-wrapper");this.barcode_area=$(`<div class="barcode-wrapper">${this.default_svg}</div>`),this.barcode_area.appendTo(e)}parse(e){return e?e.startsWith("<svg")?e:this.get_barcode_html(e):""}set_formatted_input(e){let t=e,i="";this.set_empty_description(),e&&e.startsWith("<svg")&&(i=$(t).attr("data-barcode-value")),!i&&this.doc&&(t=this.get_barcode_html(e),this.doc[this.df.fieldname]=t),this.$input.val(i||e),this.barcode_area.html(t||this.default_svg)}get_barcode_html(e){if(e){let t=this.barcode_area.find("svg")[0];try{return(0,Fy.default)(t,e,this.get_options(e)),$(t).attr("data-barcode-value",e),$(t).attr("width","100%"),this.barcode_area.html()}catch(i){this.set_description(`Invalid Barcode: ${String(i)}`)}}}get_options(e){let t={};return t.fontSize="16",t.width="3",t.height="50",frappe.utils.is_json(this.df.options)&&(t=JSON.parse(this.df.options),t.format&&t.format==="EAN"&&(t.format=e.length==8?"EAN8":"EAN13"),t.valueField&&this.frm&&this.frm.set_value(t.valueField,e)),t}};frappe.provide("frappe.utils");var Ed;frappe.ui.form.ControlGeolocation=(Ed=class extends frappe.ui.form.ControlData{async make(){super.make(),$(this.input_area).addClass("hidden")}set_disp_area(e){!this.disp_area||(this.map_id||(this.map_id=frappe.dom.get_unique_id(),this.map_area=$(`<div class="map-wrapper border">
					<div id="${this.map_id}" style="min-height: 400px; z-index: 1; max-width:100%"></div>
				</div>`),$(this.disp_area).html(this.map_area)),$(this.disp_area).removeClass("like-disabled-input"),$(this.disp_area).css("display","block"),this.frm?(this.make_map(),e&&this.bind_leaflet_data(e)):$(document).on("frappe.ui.Dialog:shown",()=>{this.make_map(),e&&this.bind_leaflet_data(e)}))}make_map(e){this.map||(this.customize_draw_controls(),this.bind_leaflet_map(),this.bind_leaflet_layers_control()),this.disabled?(this.map.dragging.disable(),this.map.touchZoom.disable(),this.map.doubleClickZoom.disable(),this.map.scrollWheelZoom.disable(),this.map.boxZoom.disable(),this.map.keyboard.disable(),this.map.zoomControl.remove()):(this.bind_leaflet_draw_control(),this.bound_event_listeners||this.bind_leaflet_event_listeners(),this.locate_control||this.bind_leaflet_locate_control())}bind_leaflet_data(e){this.clear_editable_layers();let t=new L.FeatureGroup().addLayer(L.geoJson(JSON.parse(e),{pointToLayer:this.point_to_layer,style:this.set_style,onEachFeature:this.on_each_feature}));this.add_non_group_layers(t,this.editableLayers),this.editableLayers.addTo(this.map),this.fit_and_recenter_map()}point_to_layer(e,t){return e.properties.point_type=="circle"?L.circle(t,{radius:e.properties.radius}):e.properties.point_type=="circlemarker"?L.circleMarker(t,{radius:e.properties.radius}):L.marker(t)}set_style(e){return{}}on_each_feature(e,t){}customize_draw_controls(){let e=L.Circle.prototype.toGeoJSON;L.Circle.include({toGeoJSON:function(){let t=e.call(this);return t.properties={point_type:"circle",radius:this.getRadius()},t}}),L.CircleMarker.include({toGeoJSON:function(){let t=e.call(this);return t.properties={point_type:"circlemarker",radius:this.getRadius()},t}}),L.Icon.Default.imagePath=frappe.utils.map_defaults.image_path}bind_leaflet_map(){this.map=L.map(this.map_id),this.map.setView(frappe.utils.map_defaults.center,frappe.utils.map_defaults.zoom),this.streetLayer=L.tileLayer(frappe.utils.map_defaults.tiles.default_tile.url,frappe.utils.map_defaults.tiles.default_tile.options),this.satelliteLayer=L.tileLayer(frappe.utils.map_defaults.tiles.satellite_tile.url,frappe.utils.map_defaults.tiles.satellite_tile.options),this.labelsLayer=L.tileLayer(frappe.utils.map_defaults.tiles.labels_tail.url,frappe.utils.map_defaults.tiles.labels_tail.options),this.terrainLayer=L.tileLayer(frappe.utils.map_defaults.tiles.terrain_lines_tail.url,frappe.utils.map_defaults.tiles.terrain_lines_tail.options),this.streetLayer.addTo(this.map),this.editableLayers=new L.FeatureGroup}bind_leaflet_layers_control(){let e={Default:this.streetLayer,Satellite:this.satelliteLayer},t={Labels:this.labelsLayer,Terrain:this.terrainLayer};L.control.layers(e,t).addTo(this.map),this.display_leaflet_overlays_control("none")}bind_leaflet_locate_control(){this.locate_control=L.control.locate({position:"topright"}),this.locate_control.addTo(this.map)}bind_leaflet_draw_control(){this.draw_control||(this.draw_control=this.get_leaflet_controls()),this.disp_status=="Write"?this.draw_control.addTo(this.map):this.draw_control.remove()}get_leaflet_controls(){return new L.Control.Draw({position:"topleft",draw:{polyline:{shapeOptions:{color:frappe.ui.color.get("blue"),weight:10}},polygon:{allowIntersection:!1,drawError:{color:frappe.ui.color.get("orange"),message:"<strong>Oh snap!<strong> you can't draw that!"},shapeOptions:{color:frappe.ui.color.get("blue")}},circle:!0,rectangle:{shapeOptions:{clickable:!1}}},edit:{featureGroup:this.editableLayers,remove:!0}})}display_leaflet_overlays_control(e=""){let t=document.querySelector(".leaflet-control-layers-overlays"),i=document.querySelector(".leaflet-control-layers-separator");t&&(t.style.display=e),i&&(i.style.display=e)}bind_leaflet_event_listeners(){this.bound_event_listeners=!0,this.map.on("draw:created",e=>{var t=e.layerType,i=e.layer;t==="marker"&&i.bindPopup("Marker"),this.editableLayers.addLayer(i),this.set_value(JSON.stringify(this.editableLayers.toGeoJSON()))}),this.map.on("draw:deleted draw:edited",e=>{let{layer:t}=e;this.editableLayers.removeLayer(t),this.set_value(JSON.stringify(this.editableLayers.toGeoJSON()))}),this.map.on("baselayerchange",e=>{e.name==="Satellite"?this.display_leaflet_overlays_control():(this.display_leaflet_overlays_control("none"),Object.values(this.map._layers).forEach(t=>{t instanceof L.TileLayer&&(t._url===frappe.utils.map_defaults.tiles.labels_tail.url||t._url===frappe.utils.map_defaults.tiles.terrain_lines_tail.url)&&this.map.removeLayer(t)}))})}add_non_group_layers(e,t){e instanceof L.LayerGroup?e.eachLayer(i=>{this.add_non_group_layers(i,t)}):t.addLayer(e)}clear_editable_layers(){this.editableLayers.eachLayer(e=>{this.editableLayers.removeLayer(e)})}fit_and_recenter_map(){try{this.map.invalidateSize(),this.map.fitBounds(this.editableLayers.getBounds(),{padding:[50,50]})}catch(e){}}on_section_collapse(e){!e&&this.fit_and_recenter_map()}},he(Ed,"horizontal",!1),Ed);var Od=ut(Es());frappe.ui.form.ControlMultiSelect=class extends frappe.ui.form.ControlAutocomplete{get_awesomplete_settings(){let e=super.get_awesomplete_settings();return Object.assign(e,{filter:function(t,i){let n=this.get_item(t.value);if(!n)return Od.default.FILTER_CONTAINS(t,i.match(/[^,]*$/)[0]);let s=a=>Od.default.FILTER_CONTAINS(a,i.match(/[^,]*$/)[0]),o=s(n.label);return!o&&n.value&&(o=s(n.value)),!o&&n.description&&(o=s(n.description)),o},replace:function(t){let i=this.input.value.match(/^.+,\s*|/)[0];this.input.value=i+t+", "}})}get_value(){let e=super.get_value();return this.df.options&&this.df.options.length&&this.df.options[0].label&&(e=e.split(",").map(t=>t.trim()),e=e.map(t=>{let i=this.df.options.find(n=>n.label===t);return i?i.value:null}).filter(t=>t!=null).join(", ")),e}set_formatted_input(e){!e||(this.df.options&&this.df.options.length&&this.df.options[0].label&&(e=e.split(",").map(t=>t.trim()).map(t=>{let i=this.df.options.find(n=>n.value===t);return i?i.label:t}).filter(t=>t!=null).join(", ")),super.set_formatted_input(e))}get_values(){return(this.get_value()||"").split(/\s*,\s*/).filter(t=>t)}get_data(){let e;this.df.get_data?(e=this.df.get_data(),e&&this.set_data(e)):e=super.get_data();let t=this.get_values()||[];return e&&e.filter(i=>!t.includes(i)),e}validate(e){if(this.df.ignore_validation)return e||"";let t=this.awesomplete._list.map(s=>s.value);return!t.length||e.replace(/,\s*$/,"").split(",").every(s=>t.includes(s))?e:""}};frappe.ui.form.ControlMultiCheck=class extends frappe.ui.form.Control{make(){super.make(),this.df.label&&(this.$label=$(`<label class="control-label">${this.df.label}</label>`).appendTo(this.wrapper)),this.$load_state=$(`<div class="load-state text-muted small">${__("Loading")}...</div>`),this.$select_buttons=this.get_select_buttons().appendTo(this.wrapper),this.$load_state.appendTo(this.wrapper);let e=this.df.columns;this.$checkbox_area=$('<div class="checkbox-options"></div>').appendTo(this.wrapper),this.$checkbox_area.get(0).style.setProperty("--checkbox-options-columns",e),this.$checkbox_area.get(0).style.setProperty("padding","1em")}refresh(){this.set_options(),this.bind_checkboxes(),super.refresh()}refresh_input(){this.select_options(this.selected_options)}set_options(){this.$load_state.show(),this.$select_buttons.hide(),this.parse_df_options(),this.df.get_data?typeof this.df.get_data().then=="function"?this.df.get_data().then(e=>{this.options=e,this.make_checkboxes()}):(this.options=this.df.get_data(),this.make_checkboxes()):this.make_checkboxes()}parse_df_options(){if(Array.isArray(this.df.options))this.options=this.df.options;else if(this.df.options&&this.df.options.length>0&&frappe.utils.is_json(this.df.options)){let e=JSON.parse(this.df.options);Array.isArray(e)?this.options=e:Array.isArray(e.options)&&(this.options=e.options)}else this.options=[]}make_checkboxes(){this.$load_state.hide(),this.$checkbox_area.empty(),this.df.sort_options!=!1&&this.options.sort((e,t)=>cstr(e.label).localeCompare(cstr(t.label))),this.options.forEach(e=>{let t=this.get_checkbox_element(e).appendTo(this.$checkbox_area);e.danger&&t.find(".label-area").addClass("text-danger"),e.$checkbox=t}),this.df.select_all&&this.setup_select_all(),this.set_checked_options()}bind_checkboxes(){$(this.wrapper).on("change",":checkbox",e=>{let t=$(e.target),i=t.attr("data-unit");if(t.is(":checked")){if(this.selected_options.includes(i))return;this.selected_options.push(i)}else{let n=this.selected_options.indexOf(i);n>-1&&this.selected_options.splice(n,1)}this.df.on_change&&this.df.on_change()})}set_checked_options(){this.selected_options=this.options.filter(e=>e.checked).map(e=>e.value),this.select_options(this.selected_options)}setup_select_all(){this.$select_buttons.show(),this.$select_buttons.find(".select-all").on("click",()=>{this.select_all()}),this.$select_buttons.find(".deselect-all").on("click",()=>{this.select_all(!0)})}select_all(e=!1){$(this.wrapper).find(":checkbox").prop("checked",e).trigger("click")}select_options(e){this.options.map(t=>t.value).forEach(t=>{let i=$(this.wrapper).find(`:checkbox[data-unit="${t}"]`)[0];i&&(i.checked=e.includes(t))})}get_value(){return this.selected_options}get_checked_options(){return this.get_value()}get_unchecked_options(){return this.options.map(e=>e.value).filter(e=>!this.selected_options.includes(e))}get_checkbox_element(e){return $(`
			<div class="checkbox unit-checkbox">
				<label title="${e.description||""}" style="display: flex; align-items: center;">
					<input type="checkbox" data-unit="${e.value}" style="flex-shrink: 0;">
					<span class="label-area" data-unit="${e.value}">${e.label}</span>
				</label>
			</div>
		`)}get_select_buttons(){return $(`
		<div class="bulk-select-options">
			<button class="btn btn-xs btn-default select-all">
				${__("Select All")}
			</button>
			<button class="btn btn-xs btn-default deselect-all">
				${__("Unselect All")}
			</button>
		</div>
		`)}};var Sd;frappe.ui.form.ControlTableMultiSelect=(Sd=class extends frappe.ui.form.ControlLink{make_input(){super.make_input(),this.$input_area.addClass("form-control table-multiselect"),this.$input.removeClass("form-control"),this.$input.on("awesomplete-selectcomplete",()=>{this.$input.val("").focus()}),this.rows=[],this._rows_list=[],this.$input_area.on("click",e=>{e.target===this.$input_area.get(0)&&this.$input.focus()}),this.$input_area.on("click",".btn-remove",e=>{let i=$(e.currentTarget).closest(".tb-selected-value"),n=decodeURIComponent(i.data().value),s=this.get_link_field();this.rows=this.rows.filter(o=>{if(o[s.fieldname]!==n)return o;frappe.run_serially([()=>this.frm.script_manager.trigger(`before_${this.df.fieldname}_remove`,this.df.options,o.name),()=>(frappe.model.clear_doc(this.df.options,o.name),this.frm.dirty(),this.refresh(),this.frm.script_manager.trigger(`${this.df.fieldname}_remove`,this.df.options,o.name))])})}),this.$input_area.on("click",".btn-link-to-form",e=>{let i=$(e.currentTarget).closest(".tb-selected-value"),n=decodeURIComponent(i.data().value),s=this.get_link_field();frappe.set_route("Form",s.options,n)}),this.$input.on("keydown",e=>{e.keyCode==frappe.ui.keyCode.BACKSPACE&&e.target.value===""&&(this.rows=this.rows.slice(0,this.rows.length-1),this.parse_validate_and_set_in_model(""))})}setup_buttons(){this.$input_area.find(".link-btn").remove()}parse(e,t){if(typeof e=="object"||!this.rows)return e;let i=this.get_link_field();if(e&&(e=e.trim(),this.awesomplete.get_item(e))){if(this.frm){let n=frappe.model.add_child(this.frm.doc,this.df.options,this.df.fieldname);n[i.fieldname]=e,this.rows=this.frm.doc[this.df.fieldname],this.frm.script_manager.trigger(`${this.df.fieldname}_add`,this.df.options,n.name)}else this.rows.push({[i.fieldname]:e});frappe.utils.add_link_title(i.options,e,t)}return this._rows_list=this.rows.map(n=>n[i.fieldname]),this.rows}get_model_value(){let e=super.get_model_value();return e&&e.filter(t=>!t.__islocal)}validate(e){let t=(e||[]).slice();if(this.df.ignore_link_validation)return t;let i=this.get_link_field();if(t.length===0)return t;let n=t.slice(0,t.length-1),o=t[t.length-1][i.fieldname];return!o||n.map(a=>a[i.fieldname]).includes(o)?n:this.validate_link_and_fetch(o).then(a=>(a===o||t.pop(),t))}set_formatted_input(e){this.rows=e||[];let t=this.get_link_field(),i=this.rows.map(n=>n[t.fieldname]);this.set_pill_html(i)}set_pill_html(e){let t=e.map(i=>this.get_pill_html(i)).join("");this.$input_area.find(".tb-selected-value").remove(),this.$input_area.prepend(t)}get_pill_html(e){let t=this.get_link_field(),i=encodeURIComponent(e),n=frappe.utils.get_link_title(t.options,e)||e;return`
			<button class="data-pill btn tb-selected-value" data-value="${i}">
				<span class="btn-link-to-form">${__(frappe.utils.escape_html(n))}</span>
				<span class="btn-remove">${frappe.utils.icon("close")}</span>
			</button>
		`}get_options(){return(this.get_link_field()||{}).options}get_link_field(){var e;if(!this._link_field){let t=frappe.get_meta(this.df.options);if(this._link_field=(e=t==null?void 0:t.fields)==null?void 0:e.find(i=>i.fieldtype==="Link"),!this._link_field)throw new Error("Table MultiSelect requires a Table with atleast one Link field")}return this._link_field}custom_awesomplete_filter(e){let t=this;e.filter=function(i){return!t._rows_list.includes(i.value)}}get_input_value(){return this.$input?this.$input.val():void 0}update_value(){let e=this.get_input_value();e!==this.last_value&&this.parse_validate_and_set_in_model(e)}},he(Sd,"horizontal",!1),Sd);var Td=ut(Es());frappe.ui.form.ControlMultiSelectPills=class extends frappe.ui.form.ControlAutocomplete{make_input(){super.make_input(),this.$input_area=$(this.input_area),this.$multiselect_wrapper=$("<div>").addClass("form-control table-multiselect").appendTo(this.$input_area),this.$input.removeClass("form-control"),this.$input_area.find(".awesomplete").appendTo(this.$multiselect_wrapper),this.$input.on("awesomplete-selectcomplete",()=>{this.$input.val("").focus()}),this.rows=[],this.$input_area.on("click",".btn-remove",e=>{let i=$(e.currentTarget).closest(".tb-selected-value"),n=decodeURIComponent(i.data().value);this.rows=this.rows.filter(s=>s!==n),this.parse_validate_and_set_in_model("")}),this.$input.on("keydown",e=>{e.keyCode==frappe.ui.keyCode.BACKSPACE&&e.target.value===""&&(this.rows=this.rows.slice(0,this.rows.length-1),this.parse_validate_and_set_in_model(""))})}parse(e){return typeof e=="object"||!this.rows?e:(e&&this.rows.push(e),this.rows)}validate(e){let t=(e||[]).slice();if(t.length===0)return t;let i=t.slice(0,t.length-1),n=t[t.length-1];return!n||i.includes(n)?i:t}set_formatted_input(e){this.rows=e||[],this.set_pill_html(this.rows)}set_pill_html(e){let t=e.map(i=>this.get_pill_html(i)).join("");this.$multiselect_wrapper.find(".tb-selected-value").remove(),this.$multiselect_wrapper.prepend(t)}get_pill_html(e){let t=this.get_label(e);return`
			<button class="data-pill btn tb-selected-value" data-value="${encodeURIComponent(e)}">
				<span class="btn-link-to-form">${__(t||frappe.utils.escape_html(e))}</span>
				<span class="btn-remove">${frappe.utils.icon("close")}</span>
			</button>
		`}get_label(e){var i;let t=(i=this._data)==null?void 0:i.find(n=>n.value===e);return t?t.label||t.value:null}get_awesomplete_settings(){let e=super.get_awesomplete_settings();return Object.assign(e,{filter:function(t,i){let n=this.get_item(t.value);if(!n)return Td.default.FILTER_CONTAINS(t,i.match(/[^,]*$/)[0]);let s=a=>Td.default.FILTER_CONTAINS(a,i.match(/[^,]*$/)[0]),o=s(n.label);return!o&&n.value&&(o=s(n.value)),!o&&n.description&&(o=s(n.description)),o}})}get_value(){return this.rows}get_values(){return this.rows}get_data(){let e;if(this.df.get_data){let i=this.$input.val();e=this.df.get_data(i),e&&e.then?(e.then(n=>{this.set_data(n)}),e=this.get_value()):this.set_data(e)}else e=super.get_data();let t=this.get_values()||[];return e&&e.filter(i=>!t.includes(i)),e}};var Cd;frappe.ui.form.ControlMultiSelectList=(Cd=class extends frappe.ui.form.ControlData{make_input(){let e=`
			<div class="multiselect-list dropdown">
				<div class="form-control cursor-pointer input-xs" data-toggle="dropdown" tabindex=0>
					<div class="status-text ellipsis"></div>
				</div>
				<ul class="dropdown-menu">
					<li class="dropdown-input-wrapper">
						<input type="text" class="form-control input-xs">
					</li>
					<div class="selectable-items">
					</div>
					<li class="text-right">
						<button class="btn btn-primary btn-xs clear-selections text-nowrap">
							${__("Clear All")}
    					</button>
					</li>
				</ul>
			</div>
		`;this.$list_wrapper=$(e),this.$input=$("<input>"),this.input=this.$input.get(0),this.has_input=!0,this.$list_wrapper.prependTo(this.input_area),this.$filter_input=this.$list_wrapper.find("input"),this.values=[],this._options=[],this._selected_values=[],this.highlighted=-1,this.$list_wrapper.on("click",".dropdown-menu",t=>{t.stopPropagation()}),this.$list_wrapper.on("click",".clear-selections",t=>{this.clear_all_selections()}),this.$list_wrapper.on("click",".selectable-item",t=>{let i=$(t.currentTarget);this.toggle_select_item(i)}),this.$list_wrapper.on("input","input",frappe.utils.debounce(t=>{this.set_options().then(()=>{let i=t.target.value,n=this._options.filter(o=>{let a=!1;return this.values.includes(o.value)?!0:(a=Awesomplete.FILTER_CONTAINS(o.label,i)||Awesomplete.FILTER_CONTAINS(o.value,i)||Awesomplete.FILTER_CONTAINS(o.description,i),a)}),s=this._selected_values.concat(n).uniqBy(o=>o.value);this.set_selectable_items(s)})},300)),this.$list_wrapper.on("keydown","input",t=>{if(t.key==="ArrowDown")this.highlight_item(1);else if(t.key==="ArrowUp")this.highlight_item(-1);else if(t.key==="Enter"&&this._$last_highlighted)return this.toggle_select_item(this._$last_highlighted),!1}),this.$list_wrapper.on("keydown",t=>{$(t.target).is("input")||t.key==="Backspace"&&this.set_value([])}),this.$list_wrapper.on("show.bs.dropdown",()=>{this.set_options().then(()=>{(!this._selected_values||!this._selected_values.length)&&(this._selected_values=this.process_options(this.values)),this._options=this._selected_values.concat(this._options).uniqBy(t=>t.value),this.set_selectable_items(this._options)})}),this.set_input_attributes()}set_input_attributes(){this.$list_wrapper.attr("data-fieldtype",this.df.fieldtype).attr("data-fieldname",this.df.fieldname),this.set_status(this.get_placeholder_text()),this.doctype&&this.$list_wrapper.attr("data-doctype",this.doctype),this.df.input_css&&this.$list_wrapper.css(this.df.input_css),this.df.input_class&&this.$list_wrapper.addClass(this.df.input_class)}clear_all_selections(){this.values=[],this._selected_values=[],this.update_status(),this.set_selectable_items(this._options),this.parse_validate_and_set_in_model("")}toggle_select_item(e){e.toggleClass("selected");let t=decodeURIComponent(e.data().value);e.hasClass("selected")?(this.values=this.values.slice(),this.values.push(t)):this.values=this.values.filter(i=>i!==t),this.update_selected_values(t),this.parse_validate_and_set_in_model(""),this.update_status()}set_value(e){return e&&(this._selected_values=[],typeof e=="string"&&(e=[e]),this.values.forEach(t=>{this.$list_wrapper.find(`.selectable-item[data-value=${CSS.escape(t)}]`).toggleClass("selected")}),this.values=e,this.values.forEach(t=>{this.update_selected_values(t),this.$list_wrapper.find(`.selectable-item[data-value=${CSS.escape(t)}]`).toggleClass("selected")}),this.parse_validate_and_set_in_model(""),this.update_status()),Promise.resolve()}update_selected_values(e){this._selected_values=this._selected_values||[];let t=this._options.concat(this._selected_values).uniqBy(i=>i.value).find(i=>i.value===e);t&&(this.values.includes(e)?this._selected_values.push(t):this._selected_values=this._selected_values.filter(i=>i.value!==e))}update_status(){let e;if(this.values.length===0)e=this.get_placeholder_text();else if(this.values.length===1){let t=this.values[0],i=this._options.find(n=>n.value===t);e=i?i.label:t}else e=__("{0} values selected",[this.values.length]);this.set_status(e)}get_placeholder_text(){return`<span class="text-extra-muted">${this.df.placeholder||""}</span>`}set_status(e){this.$list_wrapper.find(".status-text").html(e)}process_options(e){return e.map(t=>typeof t=="string"?{label:t,value:t,description:""}:(t.label||(t.label=t.value),t))}set_options(){let e=Promise.resolve();if(this.df.get_data){let t=this.$filter_input.val(),i=this.df.get_data(t);i?i.then?e=i.then(n=>{this._options=this.process_options(n)}):this._options=this.process_options(i):this._options=[]}else this._options=this.process_options(this.df.options);return e}set_selectable_items(e){let t=e.map(i=>{let n=encodeURIComponent(i.value);return`<li class="selectable-item ${this.values.includes(i.value)?"selected":""}" data-value="${n}">
				<div>
					<strong>${i.label}</strong>
					<div class="small">${i.description}</div>
				</div>
				<div class="multiselect-check">${frappe.utils.icon("tick","xs")}</div>
			</li>`}).join("");t||(t=`<li class="text-muted">${__("No values to show")}</li>`),this.$list_wrapper.find(".selectable-items").html(t),this.highlighted=-1}get_value(){return this.values}highlight_item(e){this.highlighted+=e,this.highlighted<0&&(this.highlighted=0);let t=this.$list_wrapper.find(".selectable-item");this.highlighted>t.length-1&&(this.highlighted=t.length-1);let i=t[this.highlighted];this._$last_highlighted&&this._$last_highlighted.removeClass("highlighted"),this._$last_highlighted=$(i).addClass("highlighted"),this.scroll_dropdown_if_needed(i)}scroll_dropdown_if_needed(e){e.scrollIntoView?e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}):e.parentNode.scrollTop=e.offsetTop-e.parentNode.offsetTop}},he(Cd,"trigger_change_on_input_event",!1),Cd);frappe.ui.form.ControlRating=class extends frappe.ui.form.ControlFloat{make_input(){super.make_input();let e="",t=this.df.options||5;Array.from({length:cint(t)},(s,o)=>o+1).forEach(s=>{e+=`<svg class="icon icon-md" data-rating=${s} viewBox="0 0 24 24" fill="none">
				<path class="right-half" d="M11.9987 3.00011C12.177 3.00011 12.3554 3.09303 12.4471 3.27888L14.8213 8.09112C14.8941 8.23872 15.0349 8.34102 15.1978 8.3647L20.5069 9.13641C20.917 9.19602 21.0807 9.69992 20.7841 9.9892L16.9421 13.7354C16.8243 13.8503 16.7706 14.0157 16.7984 14.1779L17.7053 19.4674C17.7753 19.8759 17.3466 20.1874 16.9798 19.9945L12.2314 17.4973C12.1586 17.459 12.0786 17.4398 11.9987 17.4398V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
				<path class="left-half" d="M11.9987 3.00011C11.8207 3.00011 11.6428 3.09261 11.5509 3.27762L9.15562 8.09836C9.08253 8.24546 8.94185 8.34728 8.77927 8.37075L3.42887 9.14298C3.01771 9.20233 2.85405 9.70811 3.1525 9.99707L7.01978 13.7414C7.13858 13.8564 7.19283 14.0228 7.16469 14.1857L6.25116 19.4762C6.18071 19.8842 6.6083 20.1961 6.97531 20.0045L11.7672 17.5022C11.8397 17.4643 11.9192 17.4454 11.9987 17.4454V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
			</svg>`});let i=`
			<div class="rating">
				${e}
			</div>
		`;if($(this.input_area).html(i),this.disabled)return;let n=this;$(this.input_area).find("svg").on("mousemove",function(s){n.update_rating(s)}).on("mouseout",function(s){$(s.currentTarget).parent().children("svg").each(function(){$(this).find(".left-half, .right-half").removeClass("star-hover")})}),$(this.input_area).find("svg").click(s=>{this.update_rating(s,!0)})}update_rating(e,t){let i=$(e.currentTarget),n=i.data("rating"),s=!1,o="star-click",a=this.df.options||5;if(t||(o="star-hover"),e.pageX-i.offset().left<i.width()/2&&(s=!0,n--),t&&!this.df.reqd){let l=n;s&&(l+=.5),this.get_value()==l/a&&(n=0,s=!1)}i.parent().children("svg").each(function(l){l<n?$(this).find(".left-half, .right-half").addClass(o):l==n&&s?($(this).find(".left-half").addClass(o),$(this).find(".right-half").removeClass(o),t&&(n+=.5)):$(this).find(".left-half, .right-half").removeClass(o)}),t&&(n=n/a,this.validate_and_set_in_model(n,e),this.doctype&&this.docname&&this.set_input(n))}get_value(){return this.value}set_formatted_input(e){let t=this.df.options||5;e=e*t,e=Math.round(e*2)/2,$(this.input_area).find("svg").children("svg").prevObject.each(function(n){n<e?($(this).find(".left-half, .right-half").addClass("star-click"),n==Math.floor(e)&&e%1==.5&&$(this).find(".right-half").removeClass("star-click")):$(this).find(".left-half, .right-half").removeClass("star-click")})}validate(e){return parseFloat(e)}};frappe.ui.form.ControlDuration=class extends frappe.ui.form.ControlData{make_input(){super.make_input(),this.make_picker()}validate(e){return e?super.validate(e):null}make_picker(){this.inputs=[],this.set_duration_options(),this.$picker=$(`<div class="duration-picker">
				<div class="picker-row row"></div>
			</div>`),this.$wrapper.append(this.$picker),this.build_numeric_input("days",this.duration_options.hide_days,0,__("Days",null,"Duration")),this.build_numeric_input("hours",!1,0,__("Hours",null,"Duration")),this.build_numeric_input("minutes",!1,0,__("Minutes",null,"Duration")),this.build_numeric_input("seconds",this.duration_options.hide_seconds,0,__("Seconds",null,"Duration")),this.set_duration_picker_value(this.value),this.$picker.hide(),this.bind_events(),this.refresh()}build_numeric_input(e,t,i,n){let s=$(`
			<input class="input-sm duration-input" data-duration="${e}" type="number" min="0" value="0">
		`),o=$('<div class="row duration-row"></div>').prepend(s);i&&s.attr("max",i),this.inputs[e]=s;let a=$(`
			<div class="col duration-col">
				<div class="row duration-row duration-label">${n}</div>
			</div>`);t&&a.addClass("hidden"),a.prepend(o),a.appendTo(this.$picker.find(".picker-row"))}set_duration_options(){this.duration_options=frappe.utils.get_duration_options(this.df)}set_duration_picker_value(e){let t=frappe.utils.seconds_to_duration(e||0,this.duration_options);this.$picker&&Object.keys(t).forEach(i=>{this.inputs[i].prop("value",t[i])})}bind_events(){let e=!1;this.$wrapper.find(".duration-input").mousedown(()=>{e=!0}),this.$picker.on("change",".duration-input",()=>{e=!1;let t=this.get_duration(),i=frappe.utils.duration_to_seconds(t.days,t.hours,t.minutes,t.seconds);this.set_value(i),this.set_focus()}),this.$input.on("focus",()=>{if(this.df.read_only)return;this.$picker.show(),this.is_duration_picker_set(this.inputs)||this.set_duration_picker_value(this.value)}),this.$input.on("blur",()=>{e?e=!1:this.$picker.hide(),this.set_formatted_input(this.value)})}get_value(){return cint(this.value)}parse(e){var n,s;if(e){if(/^\s*\d+\s*$/.test(e))return parseInt(e)}else return"";(n=this.DURATION_PARSE_REGEX)!=null||(this.DURATION_PARSE_REGEX=V3());let t=String(e).trim().match(this.DURATION_PARSE_REGEX);if(!(t!=null&&t.groups)||!Object.values(t.groups).some(o=>!!o))return null;let i=0;for(let[o,a]of Object.entries(G3))i+=parseInt(((s=t.groups)==null?void 0:s[o])||0)*a;return i}set_formatted_input(e){super.set_formatted_input(e),this.set_duration_picker_value(e)}refresh_input(){super.refresh_input(),this.set_duration_options(),this.set_duration_picker_value(this.value)}format_for_input(e){return frappe.utils.get_formatted_duration(e,this.duration_options)}get_duration(){let e={minutes:0,hours:0,days:0,seconds:0};return this.inputs&&(e.minutes=parseInt(this.inputs.minutes.val()),e.hours=parseInt(this.inputs.hours.val()),this.duration_options.hide_days||(e.days=parseInt(this.inputs.days.val())),this.duration_options.hide_seconds||(e.seconds=parseInt(this.inputs.seconds.val()))),e}is_duration_picker_set(e){let t=!1;return Object.values(e).forEach(i=>{i.prop("value")!=0&&(t=!0)}),t}};var G3={weeks:7*24*60*60,days:24*60*60,hours:60*60,minutes:60,seconds:1};function V3(){let r=(e,t)=>{let i=`(?<${e}>\\d+)`,n="(?:"+t.join("|")+")";return"\\s*(?:"+i+"\\s*"+n+")?\\s*"};return new RegExp([r("days",[__("d",null,"Days (Field: Duration)")]),r("hours",[__("h",null,"Hours (Field: Duration)")]),r("minutes",[__("m",null,"Minutes (Field: Duration)")]),r("seconds",[__("s",null,"Seconds (Field: Duration)")]),".*"].join(""),"i")}var Nd=class{constructor(e){this.parent=e.parent,this.width=e.width,this.height=e.height,this.set_icon(e.icon),this.icons=e.icons,this.setup_picker()}refresh(){this.update_icon_selected(!0)}setup_picker(){this.icon_picker_wrapper=$(`
			<div class="icon-picker">
				<div class="search-icons">
					<input type="search" placeholder="${__("Search for icons...")}" class="form-control">
					<span class="search-icon">${frappe.utils.icon("search","sm")}</span>
				</div>
				<div class="icon-section">
					<div class="icons"></div>
				</div>
			</div>
		`),this.parent.append(this.icon_picker_wrapper),this.icon_wrapper=this.icon_picker_wrapper.find(".icons"),this.search_input=this.icon_picker_wrapper.find(".search-icons > input"),this.refresh(),this.setup_icons()}setup_icons(){this.icons.forEach(e=>{let t=$(`<div id="${e}" class="icon-wrapper">${frappe.utils.icon(e,"md")}</div>`);this.icon_wrapper.append(t);let i=()=>{this.set_icon(e),this.update_icon_selected()};t.on("click",()=>{i()}),t.keydown(n=>{let s=n.keyCode;[13,32].includes(s)&&(n.preventDefault(),i())})}),this.search_input.keyup(e=>{e.preventDefault(),this.filter_icons()}),this.search_input.on("search",()=>{this.filter_icons()})}filter_icons(){let e=this.search_input.val();e?(this.icon_wrapper.find(".icon-wrapper").addClass("hidden"),this.icon_wrapper.find(`.icon-wrapper[id*='${e}']`).removeClass("hidden")):this.icon_wrapper.find(".icon-wrapper").removeClass("hidden")}update_icon_selected(e){!e&&this.on_change&&this.on_change(this.get_icon())}set_icon(e){this.icon=e||""}get_icon(){return this.icon||""}},zy=Nd;frappe.ui.form.ControlIcon=class extends frappe.ui.form.ControlData{make_input(){this.df.placeholder=this.df.placeholder||__("Choose an icon"),super.make_input(),this.get_all_icons(),this.make_icon_input()}get_all_icons(){frappe.symbols=[],$("#all-symbols > svg > symbol[id]").each(function(){this.id.includes("icon-")&&frappe.symbols.push(this.id.replace("icon-",""))})}make_icon_input(){let e=$("<div>");this.picker=new zy({parent:e,icon:this.get_icon(),icons:frappe.symbols}),this.$wrapper.popover({trigger:"manual",offset:`${-this.$wrapper.width()/4.5}, 5`,boundary:"viewport",placement:"bottom",template:`
				<div class="popover icon-picker-popover">
					<div class="picker-arrow arrow"></div>
					<div class="popover-body popover-content"></div>
				</div>
			`,content:()=>e,html:!0}).on("show.bs.popover",()=>{setTimeout(()=>{this.picker.refresh()},10)}).on("hidden.bs.popover",()=>{$("body").off("click.icon-popover"),$(window).off("hashchange.icon-popover")}),this.picker.on_change=t=>{this.set_value(t)},this.selected_icon||(this.selected_icon=$(`<div class="selected-icon">${frappe.utils.icon("folder-normal","md")}</div>`),this.selected_icon.insertAfter(this.$input)),this.$wrapper.find(".selected-icon").parent().on("click",t=>{this.$wrapper.popover("toggle"),this.get_icon()||this.$input.val(""),t.stopPropagation(),$("body").on("click.icon-popover",i=>{$(i.target).parents().is(".popover")||this.$wrapper.popover("hide")}),$(window).on("hashchange.icon-popover",()=>{this.$wrapper.popover("hide")})})}refresh(){super.refresh();let e=this.get_icon();this.picker&&this.picker.icon!==e&&(this.picker.icon=e,this.picker.refresh())}set_formatted_input(e){super.set_formatted_input(e),this.$input.val(e),this.selected_icon.find("use").attr("href","#icon-"+(e||"folder-normal")),this.selected_icon.toggleClass("no-value",!e)}get_icon(){return this.get_value()||"folder-normal"}};var Dd=ut(Hy());var Pd=class{constructor(e){this.parent=e.parent,this.width=e.width,this.height=e.height,this.country=e.country,e.country&&this.set_country(e.country),this.countries=e.countries,this.setup_picker()}refresh(){this.update_icon_selected(!0)}setup_picker(){this.phone_picker_wrapper=$(`
			<div class="phone-picker">
				<div class="search-phones">
					<input type="search" placeholder="${__("Search for countries...")}" class="form-control">
					<span class="search-phone">${frappe.utils.icon("search","sm")}</span>
				</div>
				<div class="phone-section">
					<div class="phones"></div>
				</div>
			</div>
		`),this.parent.append(this.phone_picker_wrapper),this.phone_wrapper=this.phone_picker_wrapper.find(".phones"),this.search_input=this.phone_picker_wrapper.find(".search-phones > input"),this.refresh(),this.setup_countries()}setup_countries(){Object.entries(this.countries).forEach(([e,t])=>{if(!t.isd)return;let i=$(`
				<div id="${e.toLowerCase()}" class="phone-wrapper">
					${frappe.utils.flag(t.code)}
					<span class="country">${e} (${t.isd})</span>
				</div>
			`);this.phone_wrapper.append(i);let n=()=>{this.set_country(e),this.update_icon_selected()};i.on("click",()=>{n()}),i.hover(()=>{i.toggleClass("bg-gray-100")}),this.search_input.keydown(s=>{let o=s.keyCode;[13].includes(o)&&(s.preventDefault(),n())}),this.search_input.keyup(s=>{s.preventDefault(),this.filter_icons(e,t.isd)}),this.search_input.on("search",()=>{this.filter_icons(e,t.isd)})})}filter_icons(e,t){let i=this.search_input.val();i?!t.includes(i)&&!e.toLowerCase().includes(i.toLowerCase())?this.phone_wrapper.find(`.phone-wrapper[id='${e.toLowerCase()}']`).addClass("hidden"):this.phone_wrapper.find(`.phone-wrapper[id='${e.toLowerCase()}']`).removeClass("hidden"):this.phone_wrapper.find(".phone-wrapper").removeClass("hidden")}update_icon_selected(e){!e&&this.on_change&&this.on_change(this.get_country())}set_country(e){this.country=e||""}get_country(){return this.country}reset(){this.set_country(),this.update_icon_selected()}},Yy=Pd;frappe.ui.form.ControlPhone=class extends frappe.ui.form.ControlData{async make_input(){await this.setup_country_codes(),super.make_input(),this.setup_country_code_picker(),this.input_events()}async setup_country_codes(){let e="country_code_info",t=await Dd.default.getItem(e);if(t)this.country_codes=t;else{let i=await frappe.xcall("frappe.geo.country_info.get_country_timezone_info");this.country_codes=i==null?void 0:i.country_info,Dd.default.setItem(e,this.country_codes)}}input_events(){this.$input.keydown(e=>{let t=e.keyCode;[frappe.ui.keyCode.BACKSPACE].includes(t)&&this.$input.val().length==0&&this.country_code_picker.reset()}),this.country_code_picker.on_change=e=>{if(!e)return this.reset_input();let t=this.country_codes[e].code,i=this.country_codes[e].isd;this.set_flag(t),this.$icon=this.selected_icon.find("svg"),this.$flag=this.selected_icon.find("img"),this.$icon.hasClass("hide")||this.$icon.toggleClass("hide"),this.$flag.length||this.selected_icon.prepend(this.get_country_flag(e)),this.$isd.length?this.$isd.text(i):this.selected_icon.append($(`<span class= "country"> ${i}</span>`)),this.$input.val()&&this.set_value(this.get_country(e)+"-"+this.$input.val()),this.update_padding(),this.$wrapper.popover("hide"),this.$input.focus()},this.$wrapper.find(".selected-phone").on("click",e=>{this.$wrapper.popover("toggle"),e.stopPropagation(),$("body").on("click.phone-popover",t=>{$(t.target).parents().is(".popover")||this.$wrapper.popover("hide")}),$(window).on("hashchange.phone-popover",()=>{this.$wrapper.popover("hide")})})}setup_country_code_picker(){let e=$("<div>");this.country_code_picker=new Yy({parent:e,countries:this.country_codes}),this.$wrapper.popover({trigger:"manual",offset:`${-this.$wrapper.width()/4.5}, 5`,boundary:"viewport",placement:"bottom",template:`
				<div class="popover phone-picker-popover">
					<div class="picker-arrow arrow"></div>
					<div class="popover-body popover-content"></div>
				</div>
			`,content:()=>e,html:!0}).on("show.bs.popover",()=>{setTimeout(()=>{this.country_code_picker.refresh(),this.country_code_picker.search_input.focus()},10)}).on("hidden.bs.popover",()=>{$("body").off("click.phone-popover"),$(window).off("hashchange.phone-popover")}),this.selected_icon=this.$wrapper.find(".selected-phone");let t=this.get_input_value();this.selected_icon.length||(this.selected_icon=$(`<div class="selected-phone">${frappe.utils.icon("down","sm")}</div>`),this.selected_icon.insertAfter(this.$input),this.selected_icon.append($('<span class= "country"></span>')),this.$isd=this.selected_icon.find(".country"),t&&t.split("-").length==2&&this.$isd.text(this.value.split("-")[0]))}refresh(){super.refresh(),this.get_value()||this.reset_input()}reset_input(){!this.$input||(this.$input.val(""),this.$wrapper.find(".country").text(""),this.selected_icon.find("svg").hasClass("hide")&&(this.selected_icon.find("svg").toggleClass("hide"),this.selected_icon.find("img").addClass("hide")),this.$input.css("padding-left",30))}async set_formatted_input(e){if(this.country_codes||await this.setup_country_codes(),e&&e.includes("-")&&e.split("-").length==2){this.selected_icon.find("svg").hasClass("hide")||this.selected_icon.find("svg").toggleClass("hide");let t=this.value.split("-")[0];this.get_country_code_and_change_flag(t),this.country_code_picker.set_country(t),this.country_code_picker.refresh(),this.country_code_picker.country&&this.country_code_picker.country!==this.$isd.text()&&this.$isd.length&&this.$isd.text(t),this.update_padding(),this.$input.val(e.split("-").pop())}else if(this.$isd.text().trim()&&this.value){let t=this.$isd.text()+"-"+e;this.set_value(t)}}get_value(){return this.value}set_flag(e){this.selected_icon.find("img").attr("src",`https://flagcdn.com/${e}.svg`),this.$icon=this.selected_icon.find("img"),this.$icon.hasClass("hide")&&this.$icon.toggleClass("hide")}get_country_code_and_change_flag(e){let t=this.country_codes,i=this.selected_icon.find("img");for(let n in t)if(Object.values(t[n]).includes(e)){let s=t[n].code;i=this.selected_icon.find("img"),i.length?this.set_flag(s):(this.selected_icon.prepend(this.get_country_flag(n)),this.selected_icon.find("svg").addClass("hide"))}}get_country(e){return this.country_codes[e].isd}get_country_flag(e){let i=this.country_codes[e].code;return frappe.utils.flag(i)}update_padding(){let e=this.$isd.text().length,t=e-2;e>2?this.$input.css("padding-left",60+t*7):this.$input.css("padding-left",60)}};frappe.ui.form.ControlJSON=class extends frappe.ui.form.ControlCode{set_language(){this.editor.session.setMode("ace/mode/json"),this.editor.setKeyboardHandler("ace/keyboard/vscode")}};frappe.ui.form.make_control=function(r){var e="Control"+r.df.fieldtype.replace(/ /g,"");if(frappe.ui.form[e])return new frappe.ui.form[e](r);console.log("Invalid Control Name: "+r.df.fieldtype)};frappe.provide("frappe.dom");frappe.dom={id_count:0,freeze_count:0,by_id:function(r){return document.getElementById(r)},get_unique_id:function(){let r="unique-"+frappe.dom.id_count;return frappe.dom.id_count++,r},set_unique_id:function(r){var e=$(r);if(e.attr("id"))return e.attr("id");var t="unique-"+frappe.dom.id_count;return e.attr("id",t),frappe.dom.id_count++,t},eval:function(r){if(!!r){var e=document.createElement("script");e.appendChild(document.createTextNode(r)),document.getElementsByTagName("head")[0].appendChild(e)}},remove_script_and_style:function(r){let e=["script","style","noscript","title","meta","base","head"],t=["link"];if(!this.unsafe_tags_regex){let l=e.concat(t).map(f=>`<([\\s]*)${f}`).join("|");this.unsafe_tags_regex=new RegExp(l,"im")}if(!r||!this.unsafe_tags_regex.test(r))return r;let n=new DOMParser().parseFromString(r,"text/html"),s=n.body,o=!!n.head.innerHTML;for(let a of e)for(let l of s.getElementsByTagName(a))o=!0,l.parentNode.removeChild(l);for(let a of s.getElementsByTagName("link")){let l=a.getAttribute("rel");l&&l.toLowerCase().trim()==="stylesheet"&&(o=!0,a.parentNode.removeChild(a))}return o?s.innerHTML:r},is_element_in_viewport:function(r,e=0){typeof jQuery=="function"&&r instanceof jQuery&&(r=r[0]);var t=r.getBoundingClientRect();return t.top+e>=0&&t.left+e>=0&&t.bottom-e<=$(window).height()&&t.right-e<=$(window).width()},is_element_in_modal(r){return Boolean($(r).parents(".modal").length)},set_style:function(r,e){if(!!r){var t=document.createElement("style");if(t.type="text/css",e){var i=document.getElementById(e);i&&i.parentNode.removeChild(i),t.id=e}return t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r)),document.getElementsByTagName("head")[0].appendChild(t),t}},add:function(r,e,t,i,n,s){r&&r.substr&&(r=frappe.dom.by_id(r));var o=document.createElement(e);return r&&r.appendChild(o),t&&(e.toLowerCase()=="img"?o.src=t:o.className=t),i&&frappe.dom.css(o,i),n&&(o.innerHTML=n),s&&(o.onclick=s),o},css:function(r,e){return r&&e&&$.extend(r.style,e),r},activate:function(r,e,t,i="active"){r.find(`.${t}.${i}`).removeClass(i),e.addClass(i)},freeze:function(r,e){if($("#freeze").length)$("#freeze").addClass("in");else{var t=$('<div id="freeze" class="modal-backdrop fade"></div>').on("click",function(){if(cur_frm&&cur_frm.cur_grid)return cur_frm.cur_grid.toggle_view(),!1}).appendTo("#body");t.html(repl('<div class="freeze-message-container"><div class="freeze-message"><p class="lead">%(msg)s</p></div></div>',{msg:r||""})),setTimeout(function(){t.addClass("in")},1)}e&&$("#freeze").addClass(e),frappe.dom.freeze_count++},unfreeze:function(){if(!!frappe.dom.freeze_count&&(frappe.dom.freeze_count--,!frappe.dom.freeze_count))var r=$("#freeze").removeClass("in").remove()},save_selection:function(){if(window.getSelection){var r=window.getSelection();if(r.getRangeAt&&r.rangeCount){for(var e=[],t=0,i=r.rangeCount;t<i;++t)e.push(r.getRangeAt(t));return e}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},restore_selection:function(r){if(r)if(window.getSelection){var e=window.getSelection();e.removeAllRanges();for(var t=0,i=r.length;t<i;++t)e.addRange(r[t])}else document.selection&&r.select&&r.select()},is_touchscreen:function(){return"ontouchstart"in window},handle_broken_images(r){$(r).find("img").on("error",e=>{$(e.currentTarget).addClass("no-image")})},scroll_to_bottom(r){let e=$(r);e.scrollTop(e[0].scrollHeight)},file_to_base64(r){return new Promise(e=>{let t=new FileReader;t.onload=function(){e(t.result)},t.readAsDataURL(r)})},scroll_to_section(r){setTimeout(()=>{let e=$(`a:contains("${r}")`);e.length&&(e.parent().hasClass("collapsed")&&e.click(),frappe.ui.scroll(e.parent().parent()))},200)},pixel_to_inches(r){let e=$('<div id="dpi" style="height: 1in; width: 1in; left: 100%; position: fixed; top: 100%;"></div>');e.appendTo(document.body);let t=document.getElementById("dpi").offsetWidth,i=r/t;return e.remove(),i}};frappe.ellipsis=function(r,e){return e||(e=20),r=cstr(r),r.length>e&&(r=r.substr(0,e)+"..."),r};frappe.run_serially=function(r){var e=Promise.resolve();return r.forEach(t=>{t&&(e=e.then?e.then(t):Promise.resolve())}),e};frappe.load_image=(r,e,t,i=()=>{})=>{var n=new Image;n.onload=function(){e(this)},n.onerror=t,i(n),n.src=r};frappe.timeout=r=>new Promise(e=>{setTimeout(()=>e(),r*1e3)});frappe.scrub=frappe.slug=function(r,e="_"){return r.replace(/ /g,e).toLowerCase()};frappe.unscrub=function(r){return frappe.model.unscrub(r)};frappe.get_data_pill=(r,e=null,t=null,i=null,n=!1)=>{let s="",o="";n&&(s=frappe.get_palette(r)),o=`background-color: var(${s[0]}); color: var(${s[1]})`;let a=$(`
		<button class="data-pill btn" style="${o}">
			<div class="flex align-center ellipsis">
				${i||""}
				<span class="pill-label">${r} </span>
			</div>
		</button>
	`);if(t){let l=$(`
			<span class="remove-btn cursor-pointer">
				${frappe.utils.icon("close","sm","es-icon")}
			</span>
		`);typeof t=="function"&&l.click(()=>{t(e||r,a)}),a.append(l)}return a};frappe.get_modal=function(r,e){return $(`<div class="modal fade" style="overflow: auto;" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<div class="fill-width flex title-section">
						<span class="indicator hidden"></span>
						<h4 class="modal-title">${r}</h4>
					</div>
					<div class="modal-actions">
						<button class="btn btn-modal-minimize btn-link hide">
							${frappe.utils.icon("collapse")}
						</button>
						<button class="btn btn-modal-close btn-link" data-dismiss="modal">
							${frappe.utils.icon("close","sm")}
						</button>
					</div>
				</div>
				<div class="modal-body ui-front">${e}</div>
				<div class="modal-footer hide">
					<div class="custom-actions"></div>
					<div class="standard-actions">
						<button type="button" class="btn btn-secondary btn-sm hide btn-modal-secondary">
						</button>
						<button type="button" class="btn btn-primary btn-sm hide btn-modal-primary">
							${__("Confirm")}
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>`)};frappe.is_online=function(){return frappe.boot.developer_mode==1?!0:"onLine"in navigator?navigator.onLine:!0};frappe.create_shadow_element=function(r,e,t,i){let n="custom-block-"+frappe.utils.get_random(5).toLowerCase();class s extends HTMLElement{constructor(){var b,h,p,u;super();let a=document.createElement("div");a.innerHTML=frappe.dom.remove_script_and_style(e);let l=document.createElement("link");l.rel="stylesheet",l.href=frappe.assets.bundled_asset("desk.bundle.css");let f=document.createElement("style");f.textContent=t;let m=document.createElement("script");m.textContent=`
				(function() {
					let cname = ${JSON.stringify(n)};
					let root_element = document.querySelector(cname).shadowRoot;
					${i}
				})();
			`,this.attachShadow({mode:"open"}),(b=this.shadowRoot)==null||b.appendChild(l),(h=this.shadowRoot)==null||h.appendChild(a),(p=this.shadowRoot)==null||p.appendChild(f),(u=this.shadowRoot)==null||u.appendChild(m)}}customElements.get(n)||customElements.define(n,s),r.innerHTML=`<${n}></${n}>`};$(window).on("online",function(){document.hidden||frappe.show_alert({indicator:"green",message:__("You are connected to internet.")})});$(window).on("offline",function(){document.hidden||frappe.show_alert({indicator:"orange",message:__("Connection lost. Some features might not work.")})});frappe.provide("frappe.form.formatters");frappe.form.link_formatters={};frappe.form.formatters={_right:function(r,e){return e&&(e.inline||e.only_value)?r:"<div style='text-align: right'>"+r+"</div>"},_apply_custom_formatter:function(r,e){if(e){let t=frappe.meta.docfield_map[e.parent]&&frappe.meta.docfield_map[e.parent][e.fieldname];t&&t.formatter&&typeof t.formatter=="function"&&(r=t.formatter(r,e))}return r},Data:function(r,e){return e&&e.options=="URL"?r?`<a href="${r}" title="Open Link" target="_blank">${r}</a>`:void 0:e&&e.options=="IBAN"?r?frappe.utils.get_formatted_iban(r):void 0:(r=r==null?"":r,frappe.form.formatters._apply_custom_formatter(r,e))},Autocomplete:function(r,e){return __(frappe.form.formatters.Data(r,e))},Select:function(r,e){return __(frappe.form.formatters.Data(r,e))},Float:function(r,e,t,i){if(r===null)return"";var n=e.precision||cint(frappe.boot.sysdefaults&&frappe.boot.sysdefaults.float_precision)||null;if(e.options&&e.options.trim())return e.precision=n,frappe.form.formatters.Currency(r,e,t,i);if(!(t||{}).always_show_decimals&&!is_null(r)){var s=cstr(r).split(".");(s[1]==null||cint(s[1])===0)&&(n=0)}return r=r==null||r===""?"":r,frappe.form.formatters._right(format_number(r,null,n),t)},Int:function(r,e,t){return r===null?"":cstr(e.options).trim()==="File Size"?frappe.form.formatters.FileSize(r):frappe.form.formatters._right(r==null?"":cint(r),t)},Percent:function(r,e,t){if(r===null)return"";let i=e.precision||cint(frappe.boot.sysdefaults&&frappe.boot.sysdefaults.float_precision)||2;return frappe.form.formatters._right(format_number(r,null,i)+"%",t)},Rating:function(r,e){let t="",i=e.options||5;return r=r*i,r=Math.round(r*2)/2,Array.from({length:cint(i)},(n,s)=>s+1).forEach(n=>{t+=`<svg class="icon icon-md" data-rating=${n} viewBox="0 0 24 24" fill="none">
				<path class="right-half ${n<=(r||0)?"star-click":""}" d="M11.9987 3.00011C12.177 3.00011 12.3554 3.09303 12.4471 3.27888L14.8213 8.09112C14.8941 8.23872 15.0349 8.34102 15.1978 8.3647L20.5069 9.13641C20.917 9.19602 21.0807 9.69992 20.7841 9.9892L16.9421 13.7354C16.8243 13.8503 16.7706 14.0157 16.7984 14.1779L17.7053 19.4674C17.7753 19.8759 17.3466 20.1874 16.9798 19.9945L12.2314 17.4973C12.1586 17.459 12.0786 17.4398 11.9987 17.4398V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
				<path class="left-half ${n<=(r||0)||n-.5==r?"star-click":""}" d="M11.9987 3.00011C11.8207 3.00011 11.6428 3.09261 11.5509 3.27762L9.15562 8.09836C9.08253 8.24546 8.94185 8.34728 8.77927 8.37075L3.42887 9.14298C3.01771 9.20233 2.85405 9.70811 3.1525 9.99707L7.01978 13.7414C7.13858 13.8564 7.19283 14.0228 7.16469 14.1857L6.25116 19.4762C6.18071 19.8842 6.6083 20.1961 6.97531 20.0045L11.7672 17.5022C11.8397 17.4643 11.9192 17.4454 11.9987 17.4454V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
			</svg>`}),`<div class="rating">
			${t}
		</div>`},Currency:function(r,e,t,i){if(r===null)return"";var n=frappe.meta.get_field_currency(e,i);let s;if(typeof e.precision=="number"?s=e.precision:s=cint(e.precision||frappe.boot.sysdefaults.currency_precision||2),s>2){var o=cstr(r).split("."),a=o.length>1?o[1]:"";if(a.length<3||a.length<s){let l=frappe.model.get_value(":Currency",n,"fraction_units")||100;a.length<cstr(l).length&&(s=cstr(l).length-1)}}return r=r==null||r===""?"":r,r=format_currency(r,n,s),t&&t.only_value?r:frappe.form.formatters._right(r,t)},Check:function(r){return`<input type="checkbox" disabled
			class="disabled-${r?"selected":"deselected"}">`},Link:function(r,e,t,i){var n=e._options||e.options,s=r;let o=frappe.utils.get_link_title(n,r);if(o===r&&(o=null),r&&r.match&&r.match(/^['"].*['"]$/)&&r.replace(/^.(.*).$/,"$1"),t&&(t.for_print||t.only_value))return o||r;if(frappe.form.link_formatters[n]&&i&&n!==i.doctype&&(r=frappe.form.link_formatters[n](r,i,e)),!r)return"";if(r[0]=="'"&&r[r.length-1]=="'")return r.substring(1,r.length-1);if(e&&e.link_onclick)return repl('<a onclick="%(onclick)s" href="#">%(value)s</a>',{onclick:e.link_onclick.replace(/"/g,"&quot;")+"; return false;",value:r});if(e&&n)if(frappe.model.can_read(n)){let a=document.createElement("a");return a.href=`/app/${encodeURIComponent(frappe.router.slug(n))}/${encodeURIComponent(s)}`,a.dataset.doctype=n,a.dataset.name=s,a.dataset.value=s,a.innerText=__(t&&t.label||o||r),a.outerHTML}else return o||r;else return o||r},Date:function(r){return frappe.datetime.str_to_user?(r&&(r=frappe.datetime.str_to_user(r,!1,!0),r==="Invalid date"&&(r=null)),r||""):r},DateRange:function(r){return Array.isArray(r)?__("{0} to {1}",[frappe.datetime.str_to_user(r[0]),frappe.datetime.str_to_user(r[1])]):r||""},Datetime:function(r){return r?moment(frappe.datetime.convert_to_user_tz(r)).format(frappe.boot.sysdefaults.date_format.toUpperCase()+" "+(frappe.boot.sysdefaults.time_format||"HH:mm:ss")):""},Text:function(r,e){if(r){for(var t=["<p","<div","<br","<table"],i=!1,n=0;n<t.length;n++)if(r.match(t[n])){i=!0;break}i||(r=frappe.utils.replace_newlines(r))}return frappe.form.formatters.Data(r,e)},Time:function(r){return r&&(r=frappe.datetime.str_to_user(r,!0)),r||""},Duration:function(r,e){if(r){let t=frappe.utils.get_duration_options(e);r=frappe.utils.get_formatted_duration(r,t)}return r||"0s"},LikedBy:function(r){var e="";return $.each(JSON.parse(r||"[]"),function(t,i){i&&(e+=frappe.avatar(i))}),e},Tag:function(r){var e="";return $.each((r||"").split(","),function(t,i){i&&(e+=`
				<span
					class="data-pill btn-xs align-center ellipsis"
					style="background-color: var(--control-bg); box-shadow: none; margin-right: 4px;"
					data-field="_user_tags" data-label="${i}'">
					${i}
				</span>`)}),e},Comment:function(r){return r},Assign:function(r){var e="";return $.each(JSON.parse(r||"[]"),function(t,i){i&&(e+='<span class="label label-warning" 				style="margin-right: 7px;"				data-field="_assign">'+i+"</span>")}),e},SmallText:function(r){return frappe.form.formatters.Text(r)},TextEditor:function(r){let e=frappe.form.formatters.Text(r);try{!$(e).find(".ql-editor").length&&!$(e).hasClass("ql-editor")&&(e=`<div class="ql-editor read-mode">${e}</div>`)}catch(t){e=`<div class="ql-editor read-mode">${e}</div>`}return e},Code:function(r){return"<pre>"+(r==null?"":$("<div>").text(r).html())+"</pre>"},WorkflowState:function(r){var e=frappe.get_doc("Workflow State",r);return e?repl("<span class='label label-%(style)s' 				data-workflow-state='%(value)s'				style='padding-bottom: 4px; cursor: pointer;'>				<i class='fa fa-small fa-white fa-%(icon)s'></i> %(value)s</span>",{value:r,style:e.style.toLowerCase(),icon:e.icon}):"<span class='label'>"+r+"</span>"},Email:function(r){return $("<div></div>").text(r).html()},FileSize:function(r){return r=cint(r),r>1048576?(r/1048576).toFixed(2)+"M":r>1024?(r/1024).toFixed(2)+"K":r},TableMultiSelect:function(r,e,t){r=r||[];let n=frappe.get_meta(e.options).fields.find(o=>o.fieldtype==="Link");return r.map(o=>{let a=o[n.fieldname];return`<span class="text-nowrap">
				${frappe.format(a,n,t,o)}
			</span>`}).join(", ")},Color:r=>r?`<div>
			<div class="selected-color" style="background-color: ${r}"></div>
			<span class="color-value">${r}</span>
		</div>`:"",Icon:r=>r?`<div>
			<div class="selected-icon">${frappe.utils.icon(r,"md")}</div>
			<span class="icon-value">${r}</span>
		</div>`:"",Attach:Wy,AttachImage:Wy};function Wy(r){return r?`<a href="${r}" target="_blank">${r}</a>`:""}frappe.form.get_formatter=function(r){return r||(r="Data"),frappe.form.formatters[r.replace(/ /g,"")]||frappe.form.formatters.Data};frappe.format=function(r,e,t,i){var l;let n=!1;if(e.parent){let f=(l=frappe.get_meta(e.parent))==null?void 0:l.masked_fields;n=f==null?void 0:f.includes(e.fieldname)}(!e||n)&&(e={fieldtype:"Data"}),e.fieldname=="_user_tags"&&(e=Zt(ze({},e),{fieldtype:"Tag"}));var s=e.fieldtype||"Data";s==="Dynamic Link"&&(s="Link",e._options=i?i[e.options]:null);var o=e.formatter||frappe.form.get_formatter(s),a=o(r,e,t,i);return typeof a=="string"&&(a=frappe.dom.remove_script_and_style(a)),a};frappe.get_format_helper=function(r){var e={get_formatted:function(t){var i=frappe.meta.get_docfield(r.doctype,t);return i||console.log("fieldname not found: "+t),frappe.format(r[t],i,{inline:1},r)}};return $.extend(e,r),e};frappe.form.link_formatters.User=function(r,e,t){return e&&(e.full_name||t&&e[`${t.fieldname}_full_name`])||r};var Lo=class{constructor(e,t,i,n){this.layout=n,this.card_layout=i,this.parent=e,this.df=t||{},this.columns=[],this.fields_list=[],this.fields_dict={},this.make(),this.df.label&&this.df.collapsible&&localStorage.getItem(t.css_class+"-closed")&&this.collapse(),this.row={wrapper:this.wrapper},this.refresh()}make(){let e=this.card_layout;this.wrapper=$(`<div class=
				"${this.df.is_dashboard_section?"form-dashboard-section":"form-section"}
				${e?"card-section":""}" data-fieldname="${this.df.fieldname}">
			`).appendTo(this.parent),this.df&&(this.df.label&&!this.df.hide_label&&this.make_head(),this.df.description&&(this.description_wrapper=$(`<div class="col-sm-12 form-section-description">
						${__(this.df.description)}
					</div>`),this.wrapper.append(this.description_wrapper)),this.df.css_class&&this.wrapper.addClass(this.df.css_class),this.df.hide_border&&this.wrapper.toggleClass("hide-border",!0)),this.body=$('<div class="section-body">').appendTo(this.wrapper),this.df.body_html&&this.body.append(this.df.body_html)}make_head(){if(this.head=$(`
			<div class="section-head">
				${__(this.df.label,null,this.df.parent)}
				<span class="ml-2 collapse-indicator mb-1"></span>
			</div>
		`),this.head.appendTo(this.wrapper),this.indicator=this.head.find(".collapse-indicator"),this.indicator.hide(),this.df.collapsible){this.head.addClass("collapsible"),this.collapse_link=this.head.on("click",()=>{this.collapse()});let e=this;this.collapse_link.enterKey(function(){e.collapse()}),this.set_icon(),this.indicator.show(),this.head.attr("tabindex",0),this.indicator.attr("tabindex",0)}}replace_field(e,t){var i;if((i=this.fields_dict[e])!=null&&i.df){let n=this.fields_dict[e],s=this.fields_list.findIndex(o=>o==n);this.fields_list.splice(s,1,t),this.fields_dict[e]=t,t.section=this}}add_field(e){this.fields_list.push(e),this.fields_dict[e.df.fieldname]=e,e.section=this}refresh(e){!this.df||(e=e||this.df.hidden||this.df.hidden_due_to_dependency,this.wrapper.toggleClass("hide-control",!!e))}collapse(e){!(this.head&&this.body)||(e===void 0&&(e=!this.body.hasClass("hide")),this.body.toggleClass("hide",e),this.head&&this.head.toggleClass("collapsed",e),this.set_icon(e),this.fields_list.forEach(t=>t.on_section_collapse&&t.on_section_collapse(e)),this.df.css_class&&localStorage.setItem(this.df.css_class+"-closed",e?"1":""))}set_icon(e){let t=e?"es-line-down":"es-line-up";this.indicator&&this.indicator.html(frappe.utils.icon(t,"sm","mb-1"))}is_collapsed(){return this.body.hasClass("hide")}has_missing_mandatory(){let e=!1;for(let t=0,i=this.fields_list.length;t<i;t++){let n=this.fields_list[t].df;if(n.reqd&&this.layout.doc[n.fieldname]==null){e=!0;break}}return e}hide(){this.on_section_toggle(!1)}show(){this.on_section_toggle(!0)}on_section_toggle(e){this.wrapper.toggleClass("hide-control",!e)}};var $o=class{constructor(e,t,i,n,s){var o,a;this.layout=e,this.df=t||{},this.frm=i,this.doctype=(a=(o=this.frm)==null?void 0:o.doctype)!=null?a:this.df.parent,this.label=this.df&&this.df.label,this.tab_link_container=n,this.tabs_content=s,this.make(),this.setup_listeners(),this.refresh()}make(){let e=`${frappe.scrub(this.doctype,"-")}-${this.df.fieldname}`;this.tab_link=$(`
			<li class="nav-item">
				<button class="nav-link ${this.df.active?"active":""}" id="${e}-tab"
					data-toggle="tab"
					data-fieldname="${this.df.fieldname}"
					href="#${e}"
					role="tab"
					aria-controls="${e}">
						${__(this.label,null,this.doctype)}
				</button>
			</li>
		`).appendTo(this.tab_link_container),this.wrapper=$(`<div class="tab-pane fade show ${this.df.active?"active":""}"
			id="${e}" role="tabpanel" aria-labelledby="${e}-tab">`).appendTo(this.tabs_content)}refresh(){if(!this.df)return;let e=this.df.hidden||this.df.hidden_due_to_dependency;!e&&this.frm&&!this.frm.get_perm(this.df.permlevel||0,"read")&&(e=!0),e||(e=!0,this.wrapper.find(".form-section:not(.hide-control, .empty-section), .form-dashboard-section:not(.hide-control, .empty-section)").length&&(e=!1)),this.toggle(!e)}toggle(e){this.tab_link.toggleClass("hide",!e),this.wrapper.toggleClass("hide",!e),this.tab_link.toggleClass("show",e),this.wrapper.toggleClass("show",e),this.hidden=!e}show(){this.tab_link.show()}hide(){this.tab_link.hide()}add_field(e){e.tab=this}replace_field(e){e.tab=this}set_active(){var e,t;this.tab_link.find(".nav-link").tab("show"),this.wrapper.addClass("show"),(t=(e=this.frm)==null?void 0:e.set_active_tab)==null||t.call(e,this)}is_active(){return this.wrapper.hasClass("active")}is_hidden(){return this.wrapper.hasClass("hide")&&this.tab_link.hasClass("hide")}setup_listeners(){this.tab_link.find(".nav-link").on("shown.bs.tab",()=>{var e,t;(t=(e=this.frm)==null?void 0:e.set_active_tab)==null||t.call(e,this)})}};var Ro=class{constructor(e,t){t||(t={}),this.df=t,this.section=e,this.section.columns.push(this),this.make(),this.resize_all_columns()}make(){this.wrapper=$(`
			<div class="form-column" data-fieldname="${this.df.fieldname}">
				<form>
				</form>
			</div>
		`).appendTo(this.section.body),this.form=this.wrapper.find("form").on("submit",()=>!1),this.df.description&&$(`
				<p class="col-sm-12 form-column-description">
					${__(this.df.description,null,this.df.parent)}
				</p>
			`).prependTo(this.wrapper),this.df.label&&$(`
				<label class="column-label">
					${__(this.df.label,null,this.df.parent)}
				</label>
			`).prependTo(this.wrapper)}resize_all_columns(){let e=this.section.wrapper.find(".form-column").length,t=cint(12/e);e==5&&(t=20),this.section.wrapper.find(".form-column").removeClass().addClass("form-column").addClass("col-sm-"+t)}add_field(){}refresh(){this.section.refresh()}};frappe.ui.form.Layout=class{constructor(e){this.views={},this.pages=[],this.tabs=[],this.sections=[],this.page_breaks=[],this.sections_dict={},this.fields_list=[],this.fields_dict={},this.section_count=0,this.column_count=0,$.extend(this,e)}make(){!this.parent&&this.body&&(this.parent=this.body),this.wrapper=$('<div class="form-layout">').appendTo(this.parent),this.message=$('<div class="form-message-container hidden"></div>').appendTo(this.wrapper),this.page=$('<div class="form-page"></div>').appendTo(this.wrapper),this.fields||(this.fields=this.get_doctype_fields()),this.is_tabbed_layout()&&this.setup_tabbed_layout(),this.frm&&this.setup_tooltip_events(),this.render()}setup_tabbed_layout(){$(`
			<div class="form-tabs-list">
				<ul class="nav form-tabs" id="form-tabs" role="tablist"></ul>
			</div>
		`).appendTo(this.page),this.tab_link_container=this.page.find(".form-tabs"),this.tabs_content=$('<div class="form-tab-content tab-content"></div>').appendTo(this.page),this.setup_events()}get_doctype_fields(){let e=[this.get_new_name_field()];return this.doctype_layout?e=e.concat(this.get_fields_from_layout()):e=e.concat(frappe.meta.sort_docfields(frappe.meta.docfield_map[this.doctype])),e}get_new_name_field(){return{parent:this.frm.doctype,fieldtype:"Data",fieldname:"__newname",reqd:1,hidden:1,label:__("Name"),get_status:function(e){return e.frm&&e.frm.is_new()&&e.frm.meta.autoname&&["prompt","name"].includes(e.frm.meta.autoname.toLowerCase())?"Write":"None"}}}get_fields_from_layout(){let e=[];for(let t of this.doctype_layout.fields){let i=copy_dict(frappe.meta.docfield_map[this.doctype][t.fieldname]);i.label=t.label,e.push(i)}return e}show_message(e,t,i=!1){if(!e){this.message.empty().addClass("hidden");return}let n;frappe.utils.is_html(e)?n=$("<div class='form-message border-bottom'>").html(e):n=$("<div class='form-message border-bottom'></div>").text(e);let s=$(`<div class="close-message">${frappe.utils.icon("close")}</div>`);i||(s.appendTo(n),s.on("click",()=>n.remove()));let o=t&&["yellow","blue","red","green","orange","white"].includes(t)?t:"blue";n.addClass(o).appendTo(this.message),this.message.removeClass("hidden")}render(e){let t=e||this.fields;if(this.section=null,this.column=null,this.no_opening_section()&&!this.is_tabbed_layout()&&this.fields.unshift({fieldtype:"Section Break"}),this.is_tabbed_layout()){let i={label:__("Details"),fieldtype:"Tab Break",fieldname:"__details"},n=this.fields.find(o=>o.hidden==!1);if(!((n==null?void 0:n.fieldtype)==="Tab Break"?n:null))this.fields.splice(0,0,i);else{let o=this.fields.find(a=>a.fieldname==="__newname");o&&o.get_status(this)==="Write"&&(this.fields.splice(0,1),this.fields.splice(1,0,o))}}t.forEach(i=>{switch(i.fieldtype){case"Fold":this.make_page(i);break;case"Page Break":this.make_page_break(),this.make_section(i);break;case"Section Break":this.make_section(i);break;case"Column Break":this.make_column(i);break;case"Tab Break":this.make_tab(i);break;default:this.make_field(i)}})}no_opening_section(){return this.fields[0]&&this.fields[0].fieldtype!="Section Break"||!this.fields.length}no_opening_tab(){return this.fields[1]&&this.fields[1].fieldtype!="Tab Break"||!this.fields.length}is_tabbed_layout(){return this.fields.find(e=>e.fieldtype==="Tab Break")}replace_field(e,t,i){var n;if(t.fieldname=e,this.fields_dict[e]&&this.fields_dict[e].df){let s=this.fields_dict[e],o=this.init_field(t,s.parent,i);s.$wrapper.replaceWith(o.$wrapper);let a=this.fields_list.findIndex(l=>l==s);this.fields_list.splice(a,1,o),this.fields_dict[e]=o,this.sections.forEach(l=>l.replace_field(e,o)),(n=s.tab)==null||n.replace_field(o),this.refresh_fields([t])}}make_field(e,t,i){!this.section&&this.make_section(),!this.column&&this.make_column();let n=this.column.form.get(0),s=this.init_field(e,n,i);!s||(this.fields_list.push(s),this.fields_dict[e.fieldname]=s,this.section.add_field(s),this.column.add_field(s),this.current_tab&&this.current_tab.add_field(s))}init_field(e,t,i=!1){e.mask&&(frappe.get_meta(this.doctype).masked_fields||[]).includes(e.fieldname)&&(e.fieldtype="Data",e.read_only=1);let n=frappe.ui.form.make_control({df:e,doctype:this.doctype,parent:t,frm:this.frm,render_input:i,doc:this.doc,layout:this});return n&&(n.layout=this),n}make_page_break(){this.page=$('<div class="form-page page-break"></div>').appendTo(this.wrapper)}make_page(e){let t=this,i=$(`
			<div class="form-clickable-section text-center">
				<a class="btn-fold h6 text-muted">
					${__("Show more details")}
				</a>
			</div>
		`).appendTo(this.wrapper);this.page=$('<div class="form-page second-page hide"></div>').appendTo(this.wrapper),this.fold_btn=i.find(".btn-fold").on("click",function(){let n=$(this).parent().next();n.hasClass("hide")?($(this).removeClass("btn-fold").html(__("Hide details")),n.removeClass("hide"),frappe.utils.scroll_to($(this),!0,30),t.folded=!1):($(this).addClass("btn-fold").html(__("Show more details")),n.addClass("hide"),t.folded=!0)}),this.section=null,this.folded=!0}unfold(){this.fold_btn.trigger("click")}make_section(e={}){this.section_count++,e.fieldname||(e.fieldname=`__section_${this.section_count}`,e.fieldtype="Section Break"),this.section=new Lo(this.current_tab?this.current_tab.wrapper:this.page,e,this.card_layout,this),this.sections.push(this.section),this.sections_dict[e.fieldname]=this.section,e&&(this.fields_dict[e.fieldname]=this.section,this.fields_list.push(this.section)),this.column=null}make_column(e={}){this.column_count++,e.fieldname||(e.fieldname=`__column_${this.section_count}`,e.fieldtype="Column Break"),this.column=new Ro(this.section,e),e&&e.fieldname&&this.fields_list.push(this.column)}make_tab(e){this.section=null;let t=new $o(this,e,this.frm,this.tab_link_container,this.tabs_content);return this.current_tab=t,this.make_section({fieldtype:"Section Break"}),this.tabs.push(t),t}refresh(e){e&&(this.doc=e),this.frm&&this.wrapper.find(".empty-form-alert").remove(),this.attach_doc_and_docfields(!0),this.frm&&this.frm.wrapper&&$(this.frm.wrapper).trigger("refresh-fields"),this.refresh_dependency(),this.refresh_sections(),this.frm&&this.refresh_section_collapse(),document.activeElement&&document.activeElement.tagName=="INPUT"&&this.is_numeric_field_active()&&document.activeElement.select()}is_numeric_field_active(){let t=($(document.activeElement).closest(".frappe-control").data()||{}).fieldtype;return frappe.model.numeric_fieldtypes.includes(t)}refresh_sections(){this.wrapper.find(".form-section:not(.hide-control)").each(function(){let e=$(this).removeClass("empty-section visible-section");e.find(".frappe-control:not(.hide-control)").length?e.addClass("visible-section"):(e.parent().hasClass("tab-pane")||e.parent().hasClass("form-page"))&&e.addClass("empty-section")}),this.is_tabbed_layout()&&this.refresh_tabs()}refresh_tabs(){for(let t of this.tabs)t.refresh();let e=this.tabs.filter(t=>!t.hidden);e&&e.length==1&&e[0].tab_link.toggleClass("hide show"),this.set_tab_as_active()}select_tab(e){var t;for(let i of this.tabs)if(i.label.toLowerCase()===e.toLowerCase()||((t=i.df.fieldname)==null?void 0:t.toLowerCase())===e.toLowerCase()){i.set_active();return}}set_tab_as_active(){var n,s;let e=window.location.hash.replace("#",""),t=this.tabs.find(o=>o.df.fieldname===e);if(t){t.set_active();return}let i=(s=(n=this.frm)==null?void 0:n.get_active_tab)==null?void 0:s.call(n);if(i)i.set_active();else if(this.tabs.length){let o=this.tabs.find(a=>!a.is_hidden());o&&o.set_active()}}refresh_fields(e){let t=e.map(i=>{if(i.fieldname)return i.fieldname});this.fields_list.map(i=>{t.includes(i.df.fieldname)&&(i.refresh(),i.df.default&&i.set_input(i.df.default))})}add_fields(e){this.render(e),this.refresh_fields(e)}refresh_section_collapse(){if(!!(this.sections&&this.sections.length))for(let e=0;e<this.sections.length;e++){let t=this.sections[e],i=t.df;if(i&&i.collapsible){let n=!0;i.collapsible_depends_on&&(n=!this.evaluate_depends_on_value(i.collapsible_depends_on)),n&&t.has_missing_mandatory()&&(n=!1),t.collapse(n)}}}attach_doc_and_docfields(e){let t=this;for(let i=0,n=this.fields_list.length;i<n;i++){let s=this.fields_list[i];t.doc&&(s.doc=t.doc,s.doctype=t.doc.doctype,s.docname=t.doc.name,s.df=frappe.meta.get_docfield(t.doc.doctype,s.df.fieldname,t.doc.name)||s.df),e&&s.df&&s.refresh&&s.refresh()}}refresh_section_count(){this.wrapper.find(".section-count-label:visible").each(function(e){$(this).html(e+1)})}setup_events(){let e=0,t=$(".form-tabs-list"),i=this.tabs_content[0];!t.length||($(".main-section").scroll(frappe.utils.throttle(()=>{let n=document.documentElement.scrollTop;n>0&&e<=n?(t.removeClass("form-tabs-sticky-down"),t.addClass("form-tabs-sticky-up")):(t.removeClass("form-tabs-sticky-up"),t.addClass("form-tabs-sticky-down")),e=n},500)),this.tab_link_container.off("click").on("click",".nav-link",n=>{n.preventDefault(),n.stopImmediatePropagation(),$(n.currentTarget).tab("show"),i.getBoundingClientRect().top<100&&(i.scrollIntoView(),setTimeout(()=>{$(".page-head").css("top","-15px"),$(".form-tabs-list").removeClass("form-tabs-sticky-down"),$(".form-tabs-list").addClass("form-tabs-sticky-up")},3))}))}setup_tab_events(){this.wrapper.on("keydown",e=>{if(e.which==9){let t=$(e.target),i=t.attr("data-doctype"),n=t.attr("data-fieldname");if(i)return this.handle_tab(i,n,e.shiftKey)}})}setup_tooltip_events(){$(document).on("keydown",e=>{e.altKey&&this.wrapper.addClass("show-tooltip")}),$(document).on("keyup",e=>{e.altKey||this.wrapper.removeClass("show-tooltip")}),this.frm.page&&frappe.ui.keys.add_shortcut({shortcut:"alt+hover",page:this.frm.page,description:__("Show Fieldname (click to copy on clipboard)")})}handle_tab(e,t,i){let n=null,s=null,o=this.fields_list,a=!1;if(e!=this.doctype){if(n=this.get_open_grid_row(),!n||!n.layout)return;o=n.layout.fields_list}for(let l=0,f=o.length;l<f;l++){if(o[l].df.fieldname==t){if(i){s?this.set_focus(s):$(this.primary_button).focus();break}if(l<f-1&&(a=this.focus_on_next_field(l,o)),a)break}this.is_visible(o[l])&&(s=o[l])}return a||(n?n.doc.idx==n.grid.grid_rows.length?n.toggle_view(!1,function(){n.grid.frm.layout.handle_tab(n.grid.df.parent,n.grid.df.fieldname)}):n.grid.grid_rows[n.doc.idx].toggle_view(!0):i||$(this.primary_button).focus()),!1}focus_on_next_field(e,t){for(let i=e+1,n=t.length;i<n;i++){let s=t[i];if(this.is_visible(s)){if(s.df.fieldtype==="Table")return s.grid.grid_rows&&s.grid.grid_rows.length||s.grid.add_new_row(),s.grid.grid_rows[0].show_form(),!0;if(s.df.fieldtype==="Table MultiSelect"||!frappe.model.no_value_type.includes(s.df.fieldtype))return this.set_focus(s),!0}}}is_visible(e){return e.disp_status==="Write"&&e.df&&"hidden"in e.df&&!e.df.hidden}set_focus(e){e.tab&&e.tab.set_active(),e.df.fieldtype=="Table"?e.grid.grid_rows.length?e.grid.grid_rows[0].toggle_view(!0):e.grid.add_new_row(1):e.editor?e.editor.set_focus():e.$input&&e.$input.focus()}get_open_grid_row(){return $(".grid-row-open").data("grid_row")}refresh_dependency(){let e=!1,t=this.fields_list.concat(this.tabs);for(let i in t){let n=t[i];if(n.df.depends_on||n.df.mandatory_depends_on||n.df.read_only_depends_on){e=!0;break}}if(!!e){for(let i=t.length-1;i>=0;i--){let n=t[i];n.guardian_has_value=!0,n.df.depends_on&&(n.guardian_has_value=this.evaluate_depends_on_value(n.df.depends_on),n.guardian_has_value?n.df.hidden_due_to_dependency&&(n.df.hidden_due_to_dependency=!1,n.refresh()):n.df.hidden_due_to_dependency||(n.df.hidden_due_to_dependency=!0,n.refresh())),n.df.mandatory_depends_on&&this.set_dependant_property(n.df.mandatory_depends_on,n.df.fieldname,"reqd"),n.df.read_only_depends_on&&this.set_dependant_property(n.df.read_only_depends_on,n.df.fieldname,"read_only")}this.refresh_section_count()}}set_dependant_property(e,t,i){let s=this.evaluate_depends_on_value(e)?1:0,o;this.frm?o=this.frm:(this.is_dialog||this.doctype==="Web Form")&&(o=this),o&&(this.doc&&this.doc.parent&&this.doc.parentfield?(o.setting_dependency=!0,o.set_df_property(this.doc.parentfield,i,s,this.doc.parent,t,this.doc.name),o.setting_dependency=!1,this.fields_dict[t]&&this.fields_dict[t].refresh()):o.set_df_property(t,i,s))}evaluate_depends_on_value(e){let t=null,i=this.doc;if(!i&&this.get_values&&(i=this.get_values(!0)),!i)return;let n=this.frm?this.frm.doc:this.doc||null;if(typeof e=="boolean")t=e;else if(typeof e=="function")t=e(i);else if(e.substr(0,5)=="eval:")try{t=frappe.utils.eval(e.substr(5),{doc:i,parent:n}),n&&n.istable&&e.includes("is_submittable")&&(t=!0)}catch(o){frappe.throw(__('Invalid "depends_on" expression'))}else if(e.substr(0,3)=="fn:"&&this.frm)t=this.frm.script_manager.trigger(e.substr(3),this.doctype,this.docname);else{var s=i[e];$.isArray(s)?t=!!s.length:t=!!s}return t}};frappe.provide("frappe.ui");frappe.ui.FieldGroup=class extends frappe.ui.form.Layout{constructor(e){super(e),this.dirty=!1,this.fetch_dict={},$.each(this.fields||[],function(t,i){!i.fieldname&&i.label&&(i.fieldname=i.label.replace(/ /g,"_").toLowerCase())}),this.values&&this.set_values(this.values)}make(){let e=this;this.fields&&(super.make(),this.refresh(),$.each(this.fields_list,function(t,i){let n=i.df.default;n==null||!n&&!frappe.model.is_numeric_field(i.df.fieldtype)||(n=="Today"&&i.df.fieldtype=="Date"&&(n=frappe.datetime.get_today()),i.set_input(n),e.refresh_dependency())}),this.no_submit_on_enter||this.catch_enter_as_submit(),$(this.wrapper).find("input, select").on("change awesomplete-selectcomplete",()=>{this.dirty=!0,frappe.run_serially([()=>frappe.timeout(.1),()=>e.refresh_dependency()])}))}focus_on_first_input(){this.no_focus||$.each(this.fields_list,function(e,t){if(!["Date","Datetime","Time","Check"].includes(t.df.fieldtype)&&t.set_focus)return t.set_focus(),!1})}catch_enter_as_submit(){let e=this;$(this.body).find('input[type="text"], input[type="password"], select').keypress(function(t){t.which==13&&e.has_primary_action&&(t.preventDefault(),e.get_primary_btn().trigger("click"))})}get_input(e){let t=this.fields_dict[e];return t?$(t.txt?t.txt:t.input):""}get_field(e){return this.fields_dict[e]}get_values(e,t){let i={},n=[],s=[];for(let o in this.fields_dict){let a=this.fields_dict[o];if(a.get_value){let l=a.get_value();a.df.reqd&&is_null(typeof l=="string"?strip_html(l):l)&&n.push(__(a.df.label)),a.df.reqd&&a.df.fieldtype==="Text Editor"&&is_null(strip_html(cstr(l)))&&n.push(__(a.df.label)),is_null(l)||(i[a.df.fieldname]=l)}this.is_dialog&&a.df.reqd&&!a.value&&a.refresh_input(),a.df.invalid&&s.push(__(a.df.label))}return n.length&&!e?(frappe.msgprint({title:__("Missing Values Required"),message:__("Following fields have missing values:")+"<br><br><ul><li>"+n.join("<li>")+"</ul>",indicator:"orange"}),null):s.length&&t?(frappe.msgprint({title:__("Invalid Values"),message:__("Following fields have invalid values:")+"<br><br><ul><li>"+s.join("<li>")+"</ul>",indicator:"orange"}),null):i}get_value(e){let t=this.fields_dict[e];return t&&(t.get_value?t.get_value():null)}set_value(e,t){return new Promise(i=>{let n=this.fields_dict[e];n?n.set_value(t).then(()=>{var s;(s=n.set_input)==null||s.call(n,t),this.refresh_dependency(),i()}):i()})}has_field(e){return!!this.fields_dict[e]}set_input(e,t){return this.set_value(e,t)}set_values(e){let t=[];for(let i in e)this.fields_dict[i]&&t.push(this.set_value(i,e[i]));return Promise.all(t)}clear(){for(let e in this.fields_dict){let t=this.fields_dict[e];t&&t.set_input&&t.set_input(t.df.default||"")}}set_df_property(e,t,i){if(!e)return;let n=this.get_field(e);n.df[t]=i,n.refresh()}set_query(e,t,i){i?this.fields_dict[t]&&(this.fields_dict[t].grid.get_field(e).get_query=i):this.fields_dict[e]&&(this.fields_dict[e].get_query=t)}add_fetch(e,t,i,n){n||(n="*"),this.fetch_dict.setDefault(n,{}).setDefault(e,{})[i]=t}is_new(){return this.doc.__islocal}};frappe.ui.form.LinkSelector=class{constructor(e){$.extend(this,e);var t=this;this.doctype!="[Select]"?frappe.model.with_doctype(this.doctype,function(i){t.make()}):this.make()}make(){var e=this;this.start=0,this.page_length=10,this.dialog=new frappe.ui.Dialog({title:__("Select {0}",[this.doctype=="[Select]"?__("value"):__(this.doctype)]),fields:[{fieldtype:"Data",fieldname:"txt",label:__("Beginning with"),description:__("You can use wildcard %")},{fieldtype:"HTML",fieldname:"results"},{fieldtype:"Button",fieldname:"more",label:__("More"),click:()=>{e.start+=e.page_length,e.search()}}],primary_action_label:__("Search"),primary_action:function(){e.start=0,e.search()}}),this.txt&&this.dialog.fields_dict.txt.set_input(this.txt),this.dialog.get_input("txt").on("keypress",function(t){t.which===13&&(e.start=0,e.search())}),this.dialog.show(),this.search()}search(){var e={txt:this.dialog.fields_dict.txt.get_value(),searchfield:"name",start:this.start,page_length:this.page_length},t=this;this.target.set_custom_query&&this.target.set_custom_query(e),this.target.is_grid&&this.target.fieldinfo[this.fieldname]&&this.target.fieldinfo[this.fieldname].get_query&&$.extend(e,this.target.fieldinfo[this.fieldname].get_query(cur_frm.doc)),frappe.link_search(this.doctype,e,function(i){var n=t.dialog.fields_dict.results.$wrapper;if(e.start===0&&n.empty(),i.length)for(let a of i){var s=$(repl('<div class="row link-select-row">						<div class="col-xs-4 ellipsis">							<b><a href="#">%(name)s</a></b></div>						<div class="col-xs-8">							<span class="text-muted">%(values)s</span></div>						</div>',{name:a[0],values:a.splice(1).join(", ")})).appendTo(n);s.find("a").attr("data-value",a[0]).click(function(){var l=$(this).attr("data-value");return t.target.is_grid?t.set_in_grid(l).then(()=>t.search()):(t.target.doctype?t.target.parse_validate_and_set_in_model(l):(t.target.set_input(l),t.target.$input.trigger("change")),t.dialog.hide()),!1})}else $('<p><br><span class="text-muted">'+__("No Results")+"</span>"+(frappe.model.can_create(t.doctype)?'<br><br><a class="new-doc btn btn-default btn-sm">'+__("Create a new {0}",[__(t.doctype)])+"</a>":"")+"</p>").appendTo(n).find(".new-doc").click(function(){frappe.new_doc(t.doctype)});var o=t.dialog.fields_dict.more.$wrapper;i.length<t.page_length?o.hide():o.show()},this.dialog.get_primary_btn())}set_in_grid(e){return new Promise(t=>{if(this.qty_fieldname)frappe.prompt({fieldname:"qty",fieldtype:"Float",label:"Qty",default:1,reqd:1},i=>{if(!(this.target.frm.doc[this.target.df.fieldname]||[]).some(s=>{if(s[this.fieldname]===e)return frappe.model.set_value(s.doctype,s.name,this.qty_fieldname,i.qty).then(()=>{frappe.show_alert(__("Added {0} ({1})",[e,s[this.qty_fieldname]])),t()}),!0})){let s=null;frappe.run_serially([()=>s=this.target.add_new_row(),()=>frappe.timeout(.1),()=>{let o={};return o[this.fieldname]=e,o[this.qty_fieldname]=i.qty,frappe.model.set_value(s.doctype,s.name,o)},()=>frappe.show_alert(__("Added {0} ({1})",[e,i.qty])),()=>t()])}},__("Set Quantity"),__("Set Quantity"));else if(this.dynamic_link_field){let i=this.target.add_new_row();frappe.model.set_value(i.doctype,i.name,this.dynamic_link_field,this.dynamic_link_reference),frappe.model.set_value(i.doctype,i.name,this.fieldname,e).then(()=>{frappe.show_alert(__("{0} {1} added",[this.dynamic_link_reference,e])),t()})}else{let i=this.target.add_new_row();frappe.model.set_value(i.doctype,i.name,this.fieldname,e).then(()=>{frappe.show_alert(__("{0} added",[e])),t()})}})}};frappe.link_search=function(r,e,t,i){e||(e={txt:""}),e.doctype=r,e.searchfield||(e.searchfield="name"),frappe.call({method:"frappe.desk.search.search_widget",type:"GET",args:e,callback:function(n){t&&t(n.message)},btn:i})};frappe.ui.form.MultiSelectDialog=class{constructor(e){Object.assign(this,e),this.for_select=this.doctype=="[Select]",this.for_select?this.init():frappe.model.with_doctype(this.doctype,()=>this.init())}init(){this.page_length=20,this.child_page_length=20,this.fields=this.get_fields(),this.make(),this.selected_fields=new Set}get_fields(){let e=this.get_primary_filters(),t=this.get_result_fields(),i=this.get_data_fields(),n=this.get_child_selection_fields();return[...e,...t,...i,...n]}get_result_fields(){let e=()=>{this.page_length+=20,this.get_results()};return[{fieldtype:"HTML",fieldname:"results_area"},{fieldtype:"Button",fieldname:"more_btn",label:__("More"),click:e.bind(this)}]}get_data_fields(){return this.data_fields&&this.data_fields.length?[{fieldtype:"Section Break"},...this.data_fields]:[]}get_child_selection_fields(){let e=[];if(this.allow_child_item_selection&&this.child_fieldname){let t=()=>{this.child_page_length+=20,this.show_child_results()};e.push({fieldtype:"HTML",fieldname:"child_selection_area"}),e.push({fieldtype:"Button",fieldname:"more_child_btn",hidden:1,label:__("More"),click:t.bind(this)})}return e}make(){let e=__("Select {0}",[this.for_select?__("value"):__(this.doctype)]);this.dialog=new frappe.ui.Dialog({title:e,fields:this.fields,size:this.size,primary_action_label:this.primary_action_label||__("Get Items"),secondary_action_label:__("Make {0}",[__(this.doctype)]),primary_action:()=>{let t=this.get_custom_filters(),i=cur_dialog.get_values(),n=this.get_selected_child_names(),s=[...this.get_checked_values(),...this.get_parent_name_of_selected_children()];this.action(s,Zt(ze(ze(ze({},this.args),i),t),{filtered_children:n}))},secondary_action:this.make_new_document.bind(this)}),this.add_filters_group&&this.make_filter_area(),this.args={},this.setup_results(),this.bind_events(),this.get_results(),this.dialog.show()}make_new_document(e){e&&(this.set_route_options(),frappe.new_doc(this.doctype,!0))}set_route_options(){if(frappe.route_options={},Array.isArray(this.setters))for(let e of this.setters)frappe.route_options[e.fieldname]=this.dialog.fields_dict[e.fieldname].get_value()||void 0;else Object.keys(this.setters).forEach(e=>{frappe.route_options[e]=this.dialog.fields_dict[e].get_value()||void 0})}setup_results(){this.$parent=$(this.dialog.body),this.$wrapper=this.dialog.fields_dict.results_area.$wrapper.append(`<div class="results my-3"
			style="border: 1px solid #d1d8dd; border-radius: 3px; height: 300px; overflow: auto;"></div>`),this.$results=this.$wrapper.find(".results"),this.$results.append(this.make_list_row())}show_child_results(){this.get_child_result().then(e=>{this.child_results=e.message||[],this.render_child_datatable(),this.$wrapper.addClass("hidden"),this.$child_wrapper.removeClass("hidden"),this.dialog.fields_dict.more_btn.$wrapper.hide()})}is_child_selection_enabled(){var e;return(e=this.dialog.fields_dict.allow_child_item_selection)==null?void 0:e.get_value()}toggle_child_selection(){this.is_child_selection_enabled()?this.show_child_results():(this.child_results=[],this.get_results(),this.$wrapper.removeClass("hidden"),this.$child_wrapper.addClass("hidden"))}render_child_datatable(){this.child_datatable?setTimeout(()=>{this.child_datatable.rowmanager.checkMap=[],this.child_datatable.refresh(this.get_child_datatable_rows()),this.$child_wrapper.find(".dt-scrollable").css("height","300px"),this.$child_wrapper.find(".dt-scrollable").css("overflow-y","scroll")},500):this.setup_child_datatable()}get_child_datatable_columns(){return[this.doctype,...this.child_columns].map(t=>({name:frappe.unscrub(t),editable:!1}))}get_child_datatable_rows(){return this.child_results.length>this.child_page_length?this.dialog.fields_dict.more_child_btn.toggle(!0):this.dialog.fields_dict.more_child_btn.toggle(!1),this.child_results.slice(0,this.child_page_length).map(e=>Object.values(e).slice(1))}setup_child_datatable(){let e=this.get_child_datatable_columns(),t=this.get_child_datatable_rows();this.$child_wrapper=this.dialog.fields_dict.child_selection_area.$wrapper,this.$child_wrapper.addClass("my-3"),this.child_datatable=new frappe.DataTable(this.$child_wrapper.get(0),{columns:e,data:t,layout:"fluid",inlineFilters:!0,serialNoColumn:!1,checkboxColumn:!0,cellHeight:35,noDataMessage:__("No Data"),disableReorderColumn:!0}),this.$child_wrapper.find(".dt-scrollable").css("height","300px")}get_primary_filters(){let e=[],t=new Array(3);return t[0]=[{fieldtype:"Data",label:__("Name"),fieldname:"search_term"}],t[1]=[],t[2]=[],$.isArray(this.setters)?this.setters.forEach((i,n)=>{t[(n+1)%3].push(i)}):Object.keys(this.setters).forEach((i,n)=>{let s=frappe.meta.docfield_map[this.doctype][i];t[(n+1)%3].push({fieldtype:s.fieldtype,label:s.label,fieldname:i,options:s.options,read_only:(this==null?void 0:this.read_only_setters)&&this.read_only_setters.includes(i)||0,default:this.setters[i]})}),Object.seal&&Object.seal(t),this.allow_child_item_selection&&(this.child_doctype=frappe.meta.get_docfield(this.doctype,this.child_fieldname).options,t[0].push({fieldtype:"Check",label:__("Select {0}",[__(this.child_doctype)]),fieldname:"allow_child_item_selection",onchange:this.toggle_child_selection.bind(this)})),e=[...t[0],{fieldtype:"Column Break"},...t[1],{fieldtype:"Column Break"},...t[2],{fieldtype:"Section Break",fieldname:"primary_filters_sb"}],this.add_filters_group&&e.push({fieldtype:"HTML",fieldname:"filter_area"}),e}make_filter_area(){this.filter_group=new frappe.ui.FilterGroup({parent:this.dialog.get_field("filter_area").$wrapper,doctype:this.doctype,on_change:()=>{this.is_child_selection_enabled()?this.show_child_results():this.get_results()}}),this.filter_group.wrapper.find(".apply-filters").hide()}get_custom_filters(){return this.add_filters_group&&this.filter_group?this.filter_group.get_filters().reduce((e,t)=>Object.assign(e,{[t[1]]:[t[2],t[3]]}),{}):{}}bind_events(){let e=this;this.$results.on("click",".list-item-container",function(t){!$(t.target).is(":checkbox")&&!$(t.target).is("a")&&$(this).find(":checkbox").trigger("click");let i=$(this).attr("data-item-name").trim();$(this).find(":checkbox").is(":checked")?e.selected_fields.add(i):e.selected_fields.delete(i)}),this.$results.on("click",".list-item--head :checkbox",t=>{let i=$(t.target).is(":checked");this.$results.find(".list-item-container .list-row-check").each(function(){$(this).prop("checked",i);let n=$(this).closest(".list-item-container").attr("data-item-name").trim();i?e.selected_fields.add(n):e.selected_fields.delete(n)})}),this.$parent.find(".input-with-feedback").on("change",()=>{frappe.flags.auto_scroll=!1,this.is_child_selection_enabled()?this.show_child_results():this.get_results()}),this.$parent.find('[data-fieldtype="Data"]').on("input",()=>{var t=$(this);clearTimeout(t.data("timeout")),t.data("timeout",setTimeout(function(){frappe.flags.auto_scroll=!1,e.is_child_selection_enabled()?e.show_child_results():(e.empty_list(),e.get_results())},300))})}get_parent_name_of_selected_children(){return!this.child_datatable||!this.child_datatable.datamanager.rows.length?[]:this.child_datatable.rowmanager.checkMap.reduce((t,i,n)=>{if(i==1){let s=this.child_results[n].parent;t.includes(s)||t.push(s)}return t},[])}get_selected_child_names(){return!this.child_datatable||!this.child_datatable.datamanager.rows.length?[]:this.child_datatable.rowmanager.checkMap.reduce((t,i,n)=>{if(i==1){let s=this.child_results[n].name;t.push(s)}return t},[])}get_checked_values(){return this.$results.find(".list-item-container").map(function(){if($(this).find(".list-row-check:checkbox:checked").length>0)return $(this).attr("data-item-name")}).get()}get_checked_items(){let e=this.get_checked_values();return this.results.filter(t=>e.includes(t.name))}get_datatable_columns(){return this.get_query&&this.get_query().query&&this.columns?this.columns:Array.isArray(this.setters)?["name",...this.setters.map(e=>e.fieldname)]:["name",...Object.keys(this.setters)]}make_list_row(e={}){var t=this;let i=Object.keys(e).length===0,n="";this.get_datatable_columns().forEach(function(o){n+=`<div class="list-item__content ellipsis">
				${i?`<span class="ellipsis text-muted" title="${__(frappe.model.unscrub(o))}">${__(frappe.model.unscrub(o))}</span>`:o!=="name"?`<span class="ellipsis result-row" title="${__(e[o]||"")}">${__(e[o]||"")}</span>`:`<a href="${"/app/"+frappe.router.slug(t.doctype)+"/"+e[o]||""}" class="list-id ellipsis" title="${__(e[o]||"")}">
							${__(e[o]||"")}</a>`}
			</div>`});let s=$(`<div class="list-item">
			<div class="list-item__content" style="flex: 0 0 10px;">
				<input type="checkbox" class="list-row-check" data-item-name="${e.name}" ${e.checked?"checked":""}>
			</div>
			${n}
		</div>`);return i?s.addClass("list-item--head"):s=$(`<div class="list-item-container" data-item-name="${e.name}"></div>`).append(s),s}render_result_list(e,t=0,i=!0){var n=this,s=n.dialog.fields_dict.more_btn.$wrapper;if(!frappe.flags.auto_scroll&&i&&this.empty_list(),s.hide(),$(".modal-dialog .list-item--head").css("z-index",1),e.length===0)return;t&&s.show();let o=this.get_checked_values();e.filter(a=>!o.includes(a.name)).forEach(a=>{n.$results.append(n.make_list_row(a))}),this.$results.find(".list-item--head").css("z-index",1),frappe.flags.auto_scroll&&this.$results.animate({scrollTop:n.$results.prop("scrollHeight")},500)}empty_list(){let e=this.results.filter(t=>this.selected_fields.has(t.name)).map(t=>Zt(ze({},t),{checked:!0}));this.$results.find(".list-item-container").remove(),this.render_result_list(e,0,!1)}get_filters_from_setters(){let e=this,t=(this.get_query?this.get_query().filters:{})||{},i=[];if($.isArray(this.setters))for(let n of this.setters)t[n.fieldname]=e.dialog.fields_dict[n.fieldname].get_value()||void 0,e.args[n.fieldname]=t[n.fieldname],i.push(n.fieldname);else Object.keys(this.setters).forEach(function(n){var s=e.dialog.fields_dict[n].get_value();e.dialog.fields_dict[n].df.fieldtype=="Data"&&s?t[n]=["like","%"+s+"%"]:(t[n]=s||void 0,e.args[n]=t[n],i.push(n))});return[t,i]}get_args_for_search(){let[e,t]=this.get_filters_from_setters(),i=this.get_custom_filters();return Object.assign(e,i),{doctype:this.doctype,txt:this.dialog.fields_dict.search_term.get_value(),filters:e,filter_fields:t,page_length:this.page_length+5,query:this.get_query?this.get_query().query:"",as_dict:1}}async perform_search(e){let t=await frappe.call({type:"GET",method:"frappe.desk.search.search_widget",no_spinner:!0,args:e}),i=t.message.length&&t.message.length>this.page_length?1:0;return[t.message,i]}async get_results(){let e=this.get_args_for_search(),[t,i]=await this.perform_search(e);i&&(t=t.splice(0,this.page_length)),this.results=[],t.length&&t.forEach(n=>{n.checked=0,this.results.push(n)}),this.render_result_list(this.results,i)}async get_filtered_parents_for_child_search(){let e=this.get_args_for_search();e.filter_fields=["name"];let[t,i]=await this.perform_search(e),n=[];return t.length&&(n=t.map(s=>s.name)),n}async add_parent_filters(e){let t=await this.get_filtered_parents_for_child_search();t.length&&e.push(["parent","in",t])}add_custom_child_filters(e){this.add_filters_group&&this.filter_group&&this.filter_group.get_filters().forEach(t=>{t[0]==this.child_doctype&&e.push([t[1],t[2],t[3]])})}async get_child_result(){let e=[["parentfield","=",this.child_fieldname]];return await this.add_parent_filters(e),this.add_custom_child_filters(e),frappe.call({method:"frappe.client.get_list",args:{doctype:this.child_doctype,filters:e,fields:["name","parent",...this.child_columns],parent:this.doctype,limit_page_length:this.child_page_length+5,order_by:"parent"}})}};frappe.provide("frappe.ui");window.cur_dialog=null;frappe.ui.open_dialogs=[];frappe.ui.Dialog=class extends frappe.ui.FieldGroup{constructor(e){super(),this.display=!1,this.is_dialog=!0,this.last_focus=null,$.extend(this,{animate:!0,size:null,auto_make:!0,centered:!1},e),this.auto_make&&this.make()}make(){this.$wrapper=frappe.get_modal("",""),this.static&&(this.$wrapper.modal({backdrop:"static",keyboard:!1}),this.get_close_btn().hide()),this.size||this.set_modal_size(),this.wrapper=this.$wrapper.find(".modal-dialog").get(0),this.centered&&$(this.wrapper).addClass("modal-dialog-centered"),this.size=="small"?$(this.wrapper).addClass("modal-sm"):this.size=="large"?$(this.wrapper).addClass("modal-lg"):this.size=="extra-large"&&$(this.wrapper).addClass("modal-xl"),this.make_head(),this.modal_body=this.$wrapper.find(".modal-body"),this.$body=$("<div></div>").appendTo(this.modal_body),this.body=this.$body.get(0),this.$message=$('<div class="hide modal-message"></div>').appendTo(this.modal_body),this.header=this.$wrapper.find(".modal-header"),this.footer=this.$wrapper.find(".modal-footer"),this.standard_actions=this.footer.find(".standard-actions"),this.custom_actions=this.footer.find(".custom-actions"),this.set_indicator(),super.make(),this.refresh_section_collapse(),this.action=this.action||{primary:{},secondary:{}},(this.primary_action||this.action.primary&&this.action.primary.onsubmit)&&this.set_primary_action(this.primary_action_label||this.action.primary.label||__("Submit",null,"Primary action in dialog"),this.primary_action||this.action.primary.onsubmit),this.secondary_action&&this.set_secondary_action(this.secondary_action),(this.secondary_action_label||this.action.secondary&&this.action.secondary.label)&&this.set_secondary_action_label(this.secondary_action_label||this.action.secondary.label),this.minimizable&&(this.header.find(".title-section").click(()=>this.is_minimized&&this.toggle_minimize()),this.get_minimize_btn().removeClass("hide").on("click",()=>this.toggle_minimize()));var e=this;this.$wrapper.on("hide.bs.modal",function(){var t,i,n;e.display=!1,e.is_minimized=!1,e.hide_scrollbar(!1),(n=(i=(t=frappe.ui.form).get_open_grid_form)==null?void 0:i.call(t))==null||n.hide_form(),frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1]===e&&(frappe.ui.open_dialogs.pop(),frappe.ui.open_dialogs.length?window.cur_dialog=frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1]:window.cur_dialog=null),e.onhide&&e.onhide(),e.on_hide&&e.on_hide()}).on("shown.bs.modal",function(){e.display=!0,window.cur_dialog=e,frappe.ui.open_dialogs.push(e),e.focus_on_first_input(),e.hide_scrollbar(!0),e.on_page_show&&e.on_page_show(),$(document).trigger("frappe.ui.Dialog:shown"),$(document).off("focusin.modal")}).on("scroll",function(){var t=$("input:focus");t.length&&["Date","Datetime","Time"].includes(t.attr("data-fieldtype"))&&t.blur()})}set_modal_size(){if(!this.fields){this.size="";return}let e=0,t=0;this.fields.forEach(i=>{i.fieldtype=="Column Break"?(t++,t>e&&(e=t)):i.fieldtype=="Section Break"&&(t=0)}),this.size=e>=4?"extra-large":e>=2?"large":""}get_primary_btn(){return this.standard_actions.find(".btn-primary")}get_minimize_btn(){return this.$wrapper.find(".modal-header .btn-modal-minimize")}set_alert(e,t="info"){this.clear_alert(),this.$alert=$(`<div class="alert alert-${t}">${e}</div>`).prependTo(this.body),this.$message.text(e)}clear_alert(){this.$alert&&this.$alert.remove()}set_message(e){this.$message.removeClass("hide"),this.$body.addClass("hide"),this.$message.text(e)}clear_message(){this.$message.addClass("hide"),this.$body.removeClass("hide")}clear(){super.clear(),this.clear_message()}set_primary_action(e,t){this.footer.removeClass("hide"),this.has_primary_action=!0;var i=this;let n=this.get_primary_btn().removeClass("hide").html(e);return typeof t=="function"&&n.off("click").on("click",function(){i.primary_action_fulfilled=!0;var s=i.get_values();!s||t&&t.apply(i,[s])}),n}set_secondary_action(e){return this.footer.removeClass("hide"),this.get_secondary_btn().removeClass("hide").off("click").on("click",e)}set_secondary_action_label(e){this.get_secondary_btn().removeClass("hide").html(e)}disable_primary_action(){this.get_primary_btn().addClass("disabled")}enable_primary_action(){this.get_primary_btn().removeClass("disabled")}make_head(){this.set_title(this.title)}set_title(e){this.$wrapper.find(".modal-title").html(e)}set_indicator(){this.indicator&&this.header.find(".indicator").removeClass().addClass("indicator "+this.indicator)}show(){return window.location.pathname.startsWith("/app")&&this.handle_focus(),this.animate?this.$wrapper.addClass("fade"):this.$wrapper.removeClass("fade"),this.$wrapper.modal("show"),this.$wrapper.removeClass("modal-minimize"),this.minimizable&&this.is_minimized&&($(".modal-backdrop").toggle(),this.is_minimized=!1),this.clear_message(),this.primary_action_fulfilled=!1,this.is_visible=!0,this}hide(){this.$wrapper.modal("hide"),this.is_visible=!1}handle_focus(){var t;let e=this;(t=frappe.get_route)!=null&&t.call(frappe)&&(frappe.get_route()[0]=="Form"&&(e.last_focus||(e.last_focus=document.activeElement)),$(document).on("escape",function(){e.last_focus&&(e.last_focus.focus(),e.last_focus=null)}))}get_close_btn(){return this.$wrapper.find(".btn-modal-close")}get_secondary_btn(){return this.standard_actions.find(".btn-modal-secondary")}no_cancel(){this.get_close_btn().toggle(!1)}cancel(){this.get_close_btn().trigger("click")}toggle_minimize(){$(".modal-backdrop").toggle();let e=this.$wrapper.closest(".modal").toggleClass("modal-minimize");e.attr("tabindex")?e.removeAttr("tabindex"):e.attr("tabindex",-1),this.is_minimized=!this.is_minimized;let t=this.is_minimized?"expand":"collapse";this.get_minimize_btn().html(frappe.utils.icon(t)),this.on_minimize_toggle&&this.on_minimize_toggle(this.is_minimized),this.header.find(".modal-title").toggleClass("cursor-pointer"),this.hide_scrollbar(!this.is_minimized)}hide_scrollbar(e){$("body").css("overflow",e?"hidden":"auto")}add_custom_action(e,t,i=null){this.footer.removeClass("hide");let n=$(`
			<button class="btn btn-secondary btn-sm ${i||""}">
				${e}
			</button>
		`);this.custom_actions.append(n),t&&n.click(t)}add_custom_button(){}};frappe.ui.hide_open_dialog=()=>{window.cur_dialog&&(cur_dialog.minimizable?cur_dialog.is_minimized||cur_dialog.toggle_minimize():cur_dialog.hide())};var Jy=ut(Ky());window.moment=Jy.default;frappe.provide("frappe.ui.keys");var zl=new WeakMap,Xy=[];frappe.ui.keys.shortcut_groups=zl;frappe.ui.keys.get_shortcut_group=r=>(zl.has(r)||zl.set(r,new frappe.ui.keys.AltShortcutGroup),zl.get(r));var Zy=!1,Pt=null,$d=$(document.body);frappe.ui.keys.bind_shortcut_group_event=()=>{if(Zy)return;Zy=!0;function r(){Pt?(Pt.addClass("alt-pressed"),$d.removeClass("alt-pressed")):($d.addClass("alt-pressed"),Pt&&Pt.removeClass("alt-pressed"))}function e(){Pt&&Pt.removeClass("alt-pressed"),$d.removeClass("alt-pressed")}$(document).on("keydown",t=>{let i=(frappe.ui.keys.key_map[t.which]||"").toLowerCase();if(i==="alt"&&r(),!(t.shiftKey||t.ctrlKey||t.metaKey)&&i&&t.altKey){let n=K3(i);n&&(t.preventDefault(),n.$target[0].click()),r()}}),$(document).on("keyup",t=>{t.key==="Alt"&&e()}),$(document).on("mousemove",()=>{e()})};function K3(r){let e=Xy.filter(i=>r in i.shortcuts_dict).map(i=>i.shortcuts_dict[r]).filter(i=>i.$target.is(":visible")),t=null;return Pt&&Pt.is(".open")&&(t=e.find(i=>$.contains(Pt[0],i.$target[0]))),t||(t=e.find(i=>$.contains(window.cur_page.page.page.wrapper[0],i.$target[0])),t)}frappe.ui.keys.AltShortcutGroup=class{constructor(){switch(this.shortcuts_dict={},new Intl.Locale(navigator.language).language){case"de":frappe.utils.is_mac()?this.blacklisted_letters=["e","l"]:this.blacklisted_letters=["q"];break;default:this.blacklisted_letters=[];break}Pt=null,this.bind_events(),frappe.ui.keys.bind_shortcut_group_event(),Xy.push(this)}bind_events(){$(document).on("show.bs.dropdown",e=>{Pt&&Pt.removeClass("alt-pressed");let t=$(e.target);t.is(".dropdown, .btn-group")&&(Pt=t)}),$(document).on("hide.bs.dropdown",()=>{Pt&&Pt.removeClass("alt-pressed"),Pt=null})}add(e,t){t||(t=e);let i=t.text().trim(),s=i.split("").find(a=>{a=a.toLowerCase();let l=a>="a"&&a<="z";return!this.is_taken(a)&&l});if(!s){t.attr("data-label",encodeURIComponent(i));return}for(let a in this.shortcuts_dict){let l=this.shortcuts_dict[a];if(l.text===i){l.$target=e,l.$text_el=t,this.underline_text(l);return}}let o={$target:e,$text_el:t,letter:s,text:i};this.shortcuts_dict[s.toLowerCase()]=o,this.underline_text(o)}underline_text(e){if(frappe.boot.lang==="eo")return;e.$text_el.attr("data-label",encodeURIComponent(e.text));let t=!1,i=e.text.split("").map(s=>(s===e.letter&&!t&&(s=`<span class="alt-underline">${s}</span>`,t=!0),s)).join("");i=`<span>${i}</span>`,i=e.$text_el.html().replace(e.text.trim(),i.trim()),e.$text_el.html(i)}is_taken(e){let t=frappe.ui.keys.standard_shortcuts.filter(i=>!i.page).some(i=>i.shortcut===`alt+${e}`);return e in this.shortcuts_dict||t||this.blacklisted_letters.includes(e.toLowerCase())}};var Ul=class{constructor(){this.dialog=new frappe.ui.Dialog({title:__("System Console"),minimizable:!0,static:!0,no_cancel_flag:!0,size:"large",fields:[{description:`
					${frappe.utils.icon("solid-warning","xs")}
					WARNING: Executing random untested code here is dangerous, use with extreme caution. <br>
					Usage: To execute press ctrl/cmd+enter.
					To minimize this window press Escape.
					Press shift+t to bring the window back.
					`,fieldname:"console",fieldtype:"Code",label:"Console",options:"Python",min_lines:20,max_lines:20,wrap:!0},{fieldname:"output",fieldtype:"Code",label:"Output",read_only:1}]}),this.dialog.get_close_btn().show(),this.editor=null;let e=this;this.dialog.$wrapper.on("keydown",function(t){if(t.key==="Escape")return t.preventDefault(),e.dialog.is_minimized||e.dialog.toggle_minimize(),!1})}sleep(e){return new Promise(t=>setTimeout(t,e))}async wait_for_ace(){let e=0;for(;e++<10&&!this.editor;)await this.sleep(25),this.editor=this.dialog.get_field("console").editor;if(!this.editor)throw Error("Code editor not found")}async show(){this.dialog.show(),await this.wait_for_ace(),this.bind_executer(),this.load_completions(),this.load_contextual_boilerplate()}async load_contextual_boilerplate(){var i;let e;if(cur_frm&&!cur_frm.is_new())e=`doc = frappe.get_doc("${cur_frm.doc.doctype}", "${cur_frm.doc.name}")
`;else if(cur_list&&frappe.get_route()[0]=="List"){let n=cur_list.get_args();e=`docs = frappe.get_all("${n.doctype}",
				fields="*",
				order_by="${n.order_by}",
				limit=${n.page_length},
				filters=${JSON.stringify(n.filters)},
			)
`}!this.dialog.get_value("console")&&e&&((i=this.dialog.get_field("console").editor)==null||i.insert(e))}async bind_executer(){let e=this,i=this.dialog.get_field("console").editor;i.setKeyboardHandler(null),i.commands.addCommand({name:"execute_code",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function(n){e.execute_code()}})}async execute_code(){await this.sleep(50),this.dialog.set_value("output","");let e=this.dialog.get_field("output");e.set_description("");let t=frappe.datetime.now_datetime(!0),{output:i}=await frappe.xcall("frappe.desk.doctype.system_console.system_console.execute_code",{doc:{console:this.dialog.get_value("console"),doctype:"System Console",type:"Python"}},"POST",{freeze:!0,freeze_message:__("Executing Code")}),n=frappe.datetime.now_datetime(!0);this.dialog.set_value("output",i);let s=moment(n).diff(t,"milliseconds");e.set_description(`Executed in ${s} milliseconds.
			<a target="_blank" href="/app/console-log?owner=${frappe.session.user}" >View Logs</a>`)}async load_completions(){let e=this,t=await frappe.xcall("frappe.core.doctype.server_script.server_script.get_autocompletion_items",null,"GET",{cache:!0}),i=e.dialog.get_field("console"),n=[];cur_frm&&!cur_frm.is_new()&&frappe.meta.get_fieldnames(cur_frm.doc.doctype,cur_frm.doc.parent,{fieldtype:["not in",frappe.model.no_value_type]}).forEach(s=>{n.push(`doc.${s}`)}),i.df.autocompletions=[...t,...n]}};frappe.provide("frappe.ui.keys.handlers");frappe.ui.keys.setup=function(){$(window).on("keydown",function(r){var e=frappe.ui.keys.get_key(r);if(frappe.ui.keys.handlers[e]){for(var t=null,i=0,n=frappe.ui.keys.handlers[e].length;i<n;i++){var s=frappe.ui.keys.handlers[e][i],o=s.apply(this,[r]);o===!1&&(t=o)}return t}})};var en=[];frappe.ui.keys.standard_shortcuts=en;frappe.ui.keys.add_shortcut=({shortcut:r,action:e,description:t,page:i,target:n,condition:s,ignore_inputs:o=!1}={})=>{if(n instanceof jQuery){let m=n;e=()=>{m[0].click()}}s||(s=()=>!0);let a=m=>{if(!($(document.activeElement).is("input, select, textarea, [contenteditable=true]")&&!o)&&!!s()&&e&&(!i||i.wrapper.is(":visible"))){let p=e(m);(p||p===void 0)&&m.preventDefault()}};a.page=i,frappe.ui.keys.off(r,i),frappe.ui.keys.on(r,a);let l=en.findIndex(m=>m.shortcut===r),f={shortcut:r,action:e,description:t,page:i,condition:s};l===-1?en.push(f):en[l]=f};frappe.ui.keys.show_keyboard_shortcut_dialog=()=>{if(frappe.ui.keys.is_dialog_shown)return;let r=en.filter(l=>!l.page),e=en.filter(l=>l.page&&l.page===window.cur_page.page.page),t=en.filter(l=>l.page&&l.page===window.cur_page.page.frm);function i(l,f){if(!l.length)return"";let m=l.filter(b=>b.condition?b.condition():!0).filter(b=>!!b.description).map(b=>{let h=b.shortcut.split("+").map(frappe.utils.to_title_case).join("+");return frappe.utils.is_mac()&&(h=h.replace("Ctrl","\u2318").replace("Alt","\u2325")),h=h.replace("Shift","\u21E7"),`<tr>
					<td width="40%"><kbd>${h}</kbd></td>
					<td width="60%">${b.description||""}</td>
				</tr>`}).join("");return m?(m=`<h5 style="margin: 0;">${f}</h5>
			<table style="margin-top: 10px;" class="table table-bordered">
				${m}
			</table>`,m):""}let n=i(r,__("Global Shortcuts")),s=i(e,__("Page Shortcuts")),o=i(t,__("Grid Shortcuts")),a=new frappe.ui.Dialog({title:__("Keyboard Shortcuts"),on_hide(){frappe.ui.keys.is_dialog_shown=!1}});a.$body.append(n),a.$body.append(s),a.$body.append(o),a.$body.append(`
		<div class="text-muted">
			${__("Press Alt Key to trigger additional shortcuts in Menu and Sidebar")}
		</div>
	`),a.show(),frappe.ui.keys.is_dialog_shown=!0};frappe.ui.keys.get_key=function(r){var e=r.keyCode||r.which,t=frappe.ui.keys.key_map[e]||String.fromCharCode(e);return(r.ctrlKey||r.metaKey)&&(t="ctrl+"+t),r.shiftKey&&(t="shift+"+t),r.altKey&&(t="alt+"+t),r.altKey&&r.ctrlKey,t.toLowerCase()};frappe.ui.keys.on=function(r,e){frappe.ui.keys.handlers[r]||(frappe.ui.keys.handlers[r]=[]),frappe.ui.keys.handlers[r].push(e)};frappe.ui.keys.off=function(r,e){let t=frappe.ui.keys.handlers[r];!t||t.length===0||(frappe.ui.keys.handlers[r]=t.filter(i=>e?i.page!==e:!1))};frappe.ui.keys.add_shortcut({shortcut:"ctrl+s",action:function(r){var e;return(e=document.activeElement)==null||e.blur(),frappe.app.trigger_primary_action(),r.preventDefault(),!1},description:__("Trigger Primary Action"),ignore_inputs:!0});frappe.ui.keys.add_shortcut({shortcut:"ctrl+k",action:function(r){return $("#navbar-search").focus(),r.preventDefault(),!1},description:__("Open Awesomebar")});frappe.ui.keys.add_shortcut({shortcut:"ctrl+k",action:function(r){return $("#navbar-search").focus(),r.preventDefault(),!1},description:__("Open Awesomebar")});frappe.ui.keys.add_shortcut({shortcut:"alt+s",action:function(r){r.preventDefault(),$(".dropdown-navbar-user button").eq(0).click()},description:__("Open Settings")});frappe.ui.keys.add_shortcut({shortcut:"shift+/",action:function(){frappe.ui.keys.show_keyboard_shortcut_dialog()},description:__("Show Keyboard Shortcuts")});frappe.ui.keys.add_shortcut({shortcut:"alt+h",action:function(r){r.preventDefault(),$(".dropdown-help button").eq(0).click()},description:__("Open Help")});frappe.ui.keys.on("escape",function(r){Qy()});frappe.ui.keys.on("esc",function(r){Qy()});frappe.ui.keys.on("enter",function(r){window.cur_dialog&&cur_dialog.confirm_dialog&&cur_dialog.get_primary_btn().trigger("click")});frappe.ui.keys.on("ctrl+down",function(r){let e=frappe.ui.form.get_open_grid_form();e!=null&&e.has_next()?e.toggle_view(!1,function(){e.open_next()}):r.preventDefault()});frappe.ui.keys.on("ctrl+up",function(r){let e=frappe.ui.form.get_open_grid_form();e!=null&&e.has_prev()?e.toggle_view(!1,function(){e.open_prev()}):r.preventDefault()});frappe.ui.keys.add_shortcut({shortcut:"shift+ctrl+r",action:function(){frappe.ui.toolbar.clear_cache()},description:__("Clear Cache and Reload")});frappe.ui.keys.key_map={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",91:"meta",18:"alt",27:"escape",37:"left",39:"right",38:"up",40:"down",32:"space",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",191:"/",188:"<",190:">"};"abcdefghijklmnopqrstuvwxyz".split("").forEach((r,e)=>{frappe.ui.keys.key_map[65+e]=r});frappe.ui.keyCode={ESCAPE:27,LEFT:37,RIGHT:39,UP:38,DOWN:40,ENTER:13,TAB:9,SPACE:32,BACKSPACE:8};function Qy(){var r;J3(),(r=document.activeElement)==null||r.blur(),$(document).trigger("escape")}function J3(){var r=$(".grid-row-open");if(r.length){var e=r.data("grid_row");return e.toggle_view(!1),!1}if(cur_dialog&&!cur_dialog.no_cancel_flag&&!cur_dialog.static)return cur_dialog.cancel(),!1}frappe.ui.keys.add_shortcut({shortcut:"shift+t",action:function(r){!frappe.model.can_write("System Console")||(cur_dialog!=null&&cur_dialog.is_minimized?(cur_dialog.toggle_minimize(),cur_dialog.focus_on_first_input()):new Ul().show())},description:__("Open console")});$.fn.enterKey=function(r){return this.each(function(){$(this).keypress(function(e){var t=e.keyCode?e.keyCode:e.which;t=="13"&&r.call(this,e)})})};frappe.provide("frappe.datetime");frappe.defaultDateFormat="YYYY-MM-DD";frappe.defaultTimeFormat="HH:mm:ss";frappe.defaultDatetimeFormat=frappe.defaultDateFormat+" "+frappe.defaultTimeFormat;moment.defaultFormat=frappe.defaultDateFormat;frappe.provide("frappe.datetime");$.extend(frappe.datetime,{convert_to_user_tz:function(r,e){let t=null;return frappe.boot.time_zone&&frappe.boot.time_zone.system&&frappe.boot.time_zone.user?t=moment.tz(r,frappe.boot.time_zone.system).clone().tz(frappe.boot.time_zone.user):t=moment(r),e===!1?t:t.format(frappe.defaultDatetimeFormat)},convert_to_system_tz:function(r,e){let t=null;return frappe.boot.time_zone&&frappe.boot.time_zone.system&&frappe.boot.time_zone.user?t=moment.tz(r,frappe.boot.time_zone.user).clone().tz(frappe.boot.time_zone.system):t=moment(r),e===!1?t:t.format(frappe.defaultDatetimeFormat)},is_system_time_zone:function(){return frappe.boot.time_zone&&frappe.boot.time_zone.system&&frappe.boot.time_zone.user?moment().tz(frappe.boot.time_zone.system).utcOffset()===moment().tz(frappe.boot.time_zone.user).utcOffset():!0},is_timezone_same:function(){return frappe.datetime.is_system_time_zone()},str_to_obj:function(r){return moment(r,frappe.defaultDatetimeFormat)._d},obj_to_str:function(r){return moment(r).locale("en").format()},obj_to_user:function(r){return moment(r).format(frappe.datetime.get_user_date_fmt().toUpperCase())},get_diff:function(r,e){return moment(r).diff(e,"days")},get_hour_diff:function(r,e){return moment(r).diff(e,"hours")},get_minute_diff:function(r,e){return moment(r).diff(e,"minutes")},get_day_diff:function(r,e){return moment(r).diff(e,"days")},add_days:function(r,e){return moment(r).add(e,"days").format()},add_months:function(r,e){return moment(r).add(e,"months").format()},week_start:function(){return moment().startOf("week").format()},week_end:function(){return moment().endOf("week").format()},month_start:function(){return moment().startOf("month").format()},month_end:function(){return moment().endOf("month").format()},quarter_start:function(){return moment().startOf("quarter").format()},quarter_end:function(){return moment().endOf("quarter").format()},year_start:function(){return moment().startOf("year").format()},year_end:function(){return moment().endOf("year").format()},get_user_time_fmt:function(){return frappe.sys_defaults&&frappe.sys_defaults.time_format||"HH:mm:ss"},get_user_date_fmt:function(){return frappe.sys_defaults&&frappe.sys_defaults.date_format||"yyyy-mm-dd"},get_user_fmt:function(){return frappe.sys_defaults&&frappe.sys_defaults.date_format||"yyyy-mm-dd"},str_to_user:function(r,e=!1,t=!1){if(!r)return"";let i=frappe.datetime.get_user_date_fmt().toUpperCase(),n=frappe.datetime.get_user_time_fmt();return e?moment(r,frappe.defaultTimeFormat).format(n):t||typeof r=="string"&&r.indexOf(" ")===-1?moment(r,frappe.defaultDateFormat).format(i):moment.tz(r,frappe.defaultDatetimeFormat,frappe.boot.time_zone.system).clone().tz(frappe.boot.time_zone.user).format(i+" "+n)},get_datetime_as_string:function(r){var i,n;let e=((n=(i=frappe==null?void 0:frappe.boot)==null?void 0:i.sysdefaults)==null?void 0:n.time_format)||frappe.defaultTimeFormat,t=frappe.defaultDateFormat+" "+e;return moment(r).format(t)},user_to_str:function(r,e=!1){var t=frappe.datetime.get_user_time_fmt();if(e)return moment(r,t).format(frappe.defaultTimeFormat);var i=frappe.datetime.get_user_date_fmt().toUpperCase(),n="YYYY-MM-DD";return r.indexOf(" ")!==-1&&(i+=" "+t,n+=" HH:mm:ss"),moment(r,[i.replace("YYYY","YY"),i]).locale("en").format(n)},user_to_obj:function(r){return frappe.datetime.str_to_obj(frappe.datetime.user_to_str(r))},global_date_format:function(r){var e=moment(r);return e._f&&e._f.indexOf("HH")!==-1?e.format("Do MMMM YYYY, hh:mm A"):e.format("Do MMMM YYYY")},now_date:function(r=!1){return frappe.datetime._date(frappe.defaultDateFormat,r)},now_time:function(r=!1){return frappe.datetime._date(frappe.defaultTimeFormat,r)},now_datetime:function(r=!1){return frappe.datetime._date(frappe.defaultDatetimeFormat,r)},system_datetime:function(r=!1){return frappe.datetime._date(frappe.defaultDatetimeFormat,r,!0)},_date:function(r,e=!1,t=!1){var s,o;let i=((s=frappe.boot.time_zone)==null?void 0:s.system)||frappe.sys_defaults.time_zone;t||(i=((o=frappe.boot.time_zone)==null?void 0:o.user)||i);let n=moment.tz(i);return e?frappe.datetime.moment_to_date_obj(n):n.format(r)},moment_to_date_obj:function(r){let e=new Date,t=r.toArray();return e.setFullYear(t[0]),e.setMonth(t[1]),e.setDate(t[2]),e.setHours(t[3]),e.setMinutes(t[4]),e.setSeconds(t[5]),e.setMilliseconds(t[6]),e},nowdate:function(){return frappe.datetime.now_date()},get_today:function(){return frappe.datetime.now_date()},get_time:r=>moment(r).format("hh:mm A"),validate:function(r){return moment(r,[frappe.defaultDateFormat,frappe.defaultDatetimeFormat,frappe.defaultTimeFormat],!0).isValid()},get_first_day_of_the_week_index(){let r=frappe.sys_defaults.first_day_of_the_week||"Sunday";return moment.weekdays().indexOf(r)}});frappe.provide("frappe.ui");frappe.provide("frappe.views");frappe.provide("frappe.web_form_list");var jo=class{constructor(e){Object.assign(this,e),frappe.web_form_list=this,this.wrapper=$(".web-list-table"),this.make_actions(),this.make_filters()}refresh(){this.rows=[],this.web_list_start=0,this.page_length=10,frappe.run_serially([()=>this.get_list_view_fields(),()=>this.get_data(),()=>this.remove_more(),()=>this.make_table(),()=>this.create_more()])}remove_more(){$(".more").remove()}make_filters(){this.filters={},this.filter_input=[];let e=$(".web-list-filters");frappe.call("frappe.website.doctype.web_form.web_form.get_web_form_filters",{web_form_name:this.web_form_name}).then(t=>{let i=t.message;i.length&&e.removeClass("hide"),i.forEach(n=>{if(["Text Editor","Text","Small Text"].includes(n.fieldtype)&&(n.fieldtype="Data"),["Table","Signature"].includes(n.fieldtype))return;let s=frappe.ui.form.make_control({df:{fieldtype:n.fieldtype,fieldname:n.fieldname,options:n.options,input_class:"input-xs",only_select:!0,label:__(n.label,null,n.parent),onchange:o=>{this.add_filter(n.fieldname,s.value,n.fieldtype),this.refresh()}},parent:e,render_input:1,only_input:n.fieldtype!="Check"});$(s.wrapper).addClass("col-md-2").attr("title",__(n.label,null,n.parent)).tooltip({delay:{show:600,hide:100},trigger:"hover"}),s.$input.attr("placeholder",__(n.label,null,n.parent)),this.filter_input.push(s)}),this.refresh()})}add_filter(e,t,i){t?(["Data","Currency","Float","Int"].includes(i)&&(t=["like","%"+t+"%"]),Object.assign(this.filters,Object.fromEntries([[e,t]]))):delete this.filters[e]}get_list_view_fields(){if(this.columns)return this.columns;this.list_columns&&(this.columns=this.list_columns.map(e=>({label:e.label,fieldname:e.fieldname,fieldtype:e.fieldtype,options:e.options})))}fetch_data(){if(this.condition_json&&JSON.parse(this.condition_json)){let t=frappe.utils.get_filter_from_json(this.condition_json,this.doctype);t=frappe.utils.get_filter_as_json(t),this.filters=Object.assign(this.filters,JSON.parse(t))}let e={method:"frappe.www.list.get_list_data",args:ze({doctype:this.doctype,limit_start:this.web_list_start,limit:this.page_length,web_form_name:this.web_form_name},this.filters)};return this.no_change(e)?Promise.resolve():frappe.call(e)}no_change(e){return this.last_args&&JSON.stringify(e)===this.last_args?!0:(this.last_args=JSON.stringify(e),setTimeout(()=>{this.last_args=null},3e3),!1)}async get_data(){let e=await this.fetch_data();e&&(this.data=await e.message)}more(){this.web_list_start+=this.page_length,this.fetch_data().then(e=>{e.message.length===0&&frappe.msgprint(__("No more items to display")),this.append_rows(e.message)})}make_table(){this.table=$('<table class="table"></table>'),this.make_table_head(),this.make_table_body()}make_table_head(){let e=$(`
			<thead>
				<tr>
					<th>
						<input type="checkbox" class="select-all">
					</th>
					<th>${__("Sr")}.</th>
				</tr>
			</thead>
		`);this.check_all=e.find("input.select-all"),this.check_all.on("click",t=>{this.toggle_select_all(t.target.checked)}),this.columns.forEach(t=>{let i=e.find("tr");$(`<th>${__(t.label)}</th>`).appendTo(i)}),e.appendTo(this.table)}make_table_body(){if(this.data.length)this.wrapper.empty(),this.table&&(this.table.find("tbody").remove(),this.check_all.length&&this.check_all.prop("checked",!1)),this.append_rows(this.data),this.table.appendTo(this.wrapper);else{if(this.wrapper.find(".no-result").length)return;this.wrapper.empty(),frappe.has_permission(this.doctype,"","create",()=>{this.setup_empty_state()})}}setup_empty_state(){let e=`
			<a
				class="btn btn-primary btn-sm btn-new-doc hidden-xs"
				href="${location.pathname.replace("/list","")}/new">
				${__("Create a new {0}",[__(this.doctype)])}
			</a>
		`;$(`
			<div class="no-result text-muted flex justify-center align-center">
				<div class="text-center">
					<svg class="mb-4 icon icon-xl" style="stroke: var(--text-light);">
						<use href="#icon-small-file"></use>
					</svg>
					<p class="small mb-2">${__("No {0} found",[__(this.doctype)])}</p>
					${e}
				</div>
			</div>
		`).appendTo(this.wrapper)}append_rows(e){let t=this.table.find("tbody");t.length||(t=$("<tbody></tbody>"),t.appendTo(this.table)),e.forEach(i=>{let n=$(`<tr id="${i.name}"></tr>`),s=new frappe.ui.WebFormListRow({row:n,doc:i,columns:this.columns,serial_number:this.rows.length+1,events:{on_edit:()=>this.open_form(i.name),on_select:()=>{this.toggle_new(),this.toggle_delete()}}});this.rows.push(s),n.appendTo(t)})}make_actions(){let e=$(".web-list-actions");frappe.has_permission(this.doctype,"","delete",()=>{this.add_button(e,"delete-rows","danger",!0,__("Delete"),()=>this.delete_rows())})}add_button(e,t,i,n,s,o){if($(`.${t}`).length)return;n=n?"hide":"",i=i=="danger"?"danger button-delete":i;let a=$(`
			<button class="${t} btn btn-${i} btn-sm ml-2 ${n}">${s}</button>
		`);a.on("click",()=>o()),a.appendTo(e)}create_more(){if(this.rows.length>=this.page_length){let e=$(".web-list-footer");this.add_button(e,"more","secondary",!1,__("Load More"),()=>this.more())}}toggle_select_all(e){this.rows.forEach(t=>t.toggle_select(e))}open_form(e){let t=window.location.pathname;t.includes("/list")&&(t=t.replace("/list","")),window.location.href=t+"/"+e}get_selected(){return this.rows.filter(e=>e.is_selected())}toggle_delete(){if(!this.settings.allow_delete)return;let e=$(".delete-rows");this.get_selected().length?e.removeClass("hide"):e.addClass("hide")}toggle_new(){if(!this.settings.allow_delete)return;let e=$(".button-new");this.get_selected().length?e.addClass("hide"):e.removeClass("hide")}delete_rows(){!this.settings.allow_delete||frappe.call({type:"POST",method:"frappe.website.doctype.web_form.web_form.delete_multiple",args:{web_form_name:this.web_form_name,docnames:this.get_selected().map(e=>e.doc.name)}}).then(()=>{this.refresh(),this.toggle_delete(),this.toggle_new()})}};frappe.ui.WebFormListRow=class{constructor({row:e,doc:t,columns:i,serial_number:n,events:s,options:o}){Object.assign(this,{row:e,doc:t,columns:i,serial_number:n,events:s}),this.make_row()}make_row(){let e=$('<td class="list-col-checkbox"></td>');this.checkbox=$('<input type="checkbox">'),this.checkbox.on("click",i=>{this.toggle_select(i.target.checked),i.stopImmediatePropagation()}),this.checkbox.appendTo(e),e.appendTo(this.row),$(`<td class="list-col-serial">${__(this.serial_number)}</td>`).appendTo(this.row),this.columns.forEach(i=>{let n=frappe.form.get_formatter(i.fieldtype),s=this.doc[i.fieldname]&&__(n(this.doc[i.fieldname],i,{only_value:1},this.doc))||"",o=$(`<td><p class="ellipsis">${s}</p></td>`);i.fieldtype==="Text Editor"&&(s=$(s).addClass("ellipsis"),o=$("<td></td>").append(s)),o.appendTo(this.row)}),this.row.on("click",()=>this.events.on_edit())}toggle_select(e){this.checkbox.prop("checked",e),this.events.on_select(e)}is_selected(){return this.checkbox.prop("checked")}};frappe.provide("frappe.utils");var e1={init(){this.jq=jQuery({})},trigger(r,e){!this.jq&&this.init(),this.jq.trigger(r,e)},once(r,e){!this.jq&&this.init(),this.jq.one(r,(t,i)=>e(i))},on(r,e){!this.jq&&this.init(),this.jq.bind(r,(t,i)=>e(i))},off(r,e){!this.jq&&this.init(),this.jq.unbind(r,(t,i)=>e(i))}};frappe.utils.make_event_emitter=function(r){return Object.assign(r,e1),r};var t1=e1;frappe.provide("frappe.ui");frappe.provide("frappe.web_form");var Io=class extends frappe.ui.FieldGroup{constructor(e){super(),Object.assign(this,e),frappe.web_form=this,frappe.web_form.events={},Object.assign(frappe.web_form.events,t1),this.current_section=0,this.is_multi_step_form=!1}prepare(e,t){Object.assign(this,e),this.fields=e.web_form_fields,this.doc=t}make(){this.parent.empty(),super.make(),this.set_page_breaks(),this.set_field_values(),(this.is_new||this.in_edit_mode)&&(this.setup_primary_action(),this.setup_discard_action()),this.setup_delete_action(),this.setup_previous_next_button(),this.toggle_section(),frappe.init_client_script&&frappe.init_client_script(),this.setup_listeners(),frappe.web_form.events.trigger("after_load"),this.after_load&&this.after_load()}on(e,t){let i=this.fields_dict[e];i.df.change=()=>{t(i,i.value),this.refresh_dependency(),this.make_form_dirty()}}setup_listeners(){this.fields.forEach(e=>{e.change||(e.change=()=>{this.refresh_dependency(),this.make_form_dirty()})})}make_form_dirty(){frappe.form_dirty=!0,$(".indicator-pill.orange").removeClass("hide")}set_page_breaks(){this.page_breaks=$(".page-break"),this.page_breaks.length&&this.page_breaks.each((e,t)=>{$(t).find("form").length||$(t).remove()}),this.page_breaks=$(".page-break"),this.is_multi_step_form=!!this.page_breaks.length}setup_previous_next_button(){let e=this;!e.is_multi_step_form||(this.$next_button=$(`<button class="btn btn-default btn-next btn-sm ml-2">
			${__("Next")}
		</button>`),this.$previous_button=$(`<button class="btn btn-default btn-previous btn-sm">
			${__("Previous")}
		</button>`),this.$next_button.insertAfter(".web-form-footer .right-area .discard-btn"),this.in_view_mode&&$(".web-form-footer .right-area").append(this.$next_button),$(".web-form-footer .left-area").prepend(this.$previous_button),this.$previous_button.on("click",()=>{if(!e.validate_section())return!1;for(let i=e.current_section;i<e.sections.length;i--){let n=e.is_previous_section_empty(i);if(e.current_section=e.current_section>0?e.current_section-1:e.current_section,!n)break}return e.toggle_section(),!1}),this.$next_button.on("click",()=>{if(!e.validate_section())return!1;for(let i=e.current_section;i<e.sections.length;i++){let n=e.is_next_section_empty(i);if(e.current_section=e.current_section<e.sections.length?e.current_section+1:e.current_section,!n)break}return e.toggle_section(),!1}))}set_field_values(){if(this.doc.name)this.set_values(this.doc);else return}set_default_values(){let e={};for(let i of this.fields)i.default&&(e[i.fieldname]=i.default);let t=frappe.utils.get_query_params();delete t.new,Object.assign(e,t),this.set_values(t)}setup_primary_action(){$(".web-form").on("submit",()=>this.save())}setup_discard_action(){$(".web-form-footer .discard-btn").on("click",()=>this.discard_form())}setup_delete_action(){$(".web-form-footer .delete-btn").on("click",()=>this.delete_form())}discard_form(){let e=window.location.href;return e=e.substring(0,e.lastIndexOf("/")),frappe.form_dirty?frappe.warn(__("Discard?"),__("Are you sure you want to discard the changes?"),()=>window.location.href=e,__("Discard")):window.location.href=e,!1}delete_form(){let e=window.location.href;return frappe.confirm(__("Are you sure you want to delete this record?"),()=>{frappe.call({method:"frappe.website.doctype.web_form.web_form.delete",args:{web_form_name:this.name,docname:this.doc.name},callback:()=>{frappe.msgprint(__("Deleted!")),window.location.href=e.substring(0,e.lastIndexOf("/"))}})}),!1}validate_section(){if(this.allow_incomplete)return!0;let e=$(`${this.get_page(this.current_section)} .form-control`),t=[],i=[];for(let s of e){let o=$(s).attr("data-fieldname");if(!!o&&(s=this.fields_dict[o],s&&s.get_value)){let a=s.get_value();s.df.reqd&&is_null(typeof a=="string"?strip_html(a):a)&&t.push(__(s.df.label)),s.df.reqd&&s.df.fieldtype==="Text Editor"&&is_null(strip_html(cstr(a)))&&t.push(__(s.df.label)),s.df.invalid&&i.push(__(s.df.label))}}let n="";return i.length&&(n+=__("Invalid values for fields:",null,"Error message in web form"),n+="<br><br><ul><li>"+i.join("<li>")+"</ul>"),t.length&&(n+=__("Mandatory fields required:",null,"Error message in web form"),n+="<br><br><ul><li>"+t.join("<li>")+"</ul>"),(i.length||t.length)&&frappe.msgprint({title:__("Error",null,"Title of error message in web form"),message:n,indicator:"orange"}),!(t.length||i.length)}toggle_section(){!this.is_multi_step_form||(this.render_progress_dots(),this.toggle_previous_button(),this.hide_form_pages(),this.show_form_page(),this.toggle_buttons())}render_progress_dots(){if(!!this.is_multi_step_form){if($(".center-area.paging").empty(),this.in_view_mode){let e=__("Page {0} of {1}",[this.current_section+1,this.page_breaks.length+1]);$(".center-area.paging").append(`<div>${e}</div>`);return}if(this.$slide_progress=$('<div class="slides-progress"></div>').appendTo($(".center-area.paging")),this.$slide_progress.empty(),!(this.page_breaks.length<1))for(let e=0;e<=this.page_breaks.length;e++){let t=$(`<div class="slide-step">
				<div class="slide-step-indicator"></div>
				<div class="slide-step-complete">${frappe.utils.icon("tick","xs")}</div>
			</div>`).attr({"data-step-id":e});e<this.current_section&&t.addClass("step-success"),e===this.current_section&&t.addClass("active"),this.$slide_progress.append(t)}}}toggle_buttons(){for(let e=this.current_section;e<=this.page_breaks.length;e++)if(this.is_next_section_empty(e))this.show_save_and_hide_next_button();else{this.show_next_and_hide_save_button();break}}is_next_section_empty(e){return e+1>this.page_breaks.length+1?!0:!$(`${this.get_page(e+1)}`).find(".frappe-control:not(.hide-control)").length}is_previous_section_empty(e){return e-1>this.page_breaks.length+1?!0:!$(`${this.get_page(e-1)}`).find(".frappe-control:not(.hide-control)").length}show_save_and_hide_next_button(){$(".btn-next").hide(),$(".submit-btn").show()}show_next_and_hide_save_button(){$(".btn-next").show(),!this.allow_incomplete&&$(".submit-btn").hide()}toggle_previous_button(){this.current_section==0?$(".btn-previous").hide():$(".btn-previous").show()}get_page(e){return e>0?`.page-break:eq(${e-1})`:`.form-page:eq(${e})`}show_form_page(){$(this.get_page(this.current_section)).show()}hide_form_pages(){for(let e=0;e<=this.page_breaks.length;e++)e!==this.current_section&&$(this.get_page(e)).hide()}save(){let e=this.is_new,t=this.validate&&this.validate();if(!t&&t!==void 0)return frappe.msgprint(__("Couldn't save, please check the data you have entered"),__("Validation Error")),!1;let i=super.get_values(this.allow_incomplete);if(!i||window.saving)return!1;let n=Boolean(this.accept_payment&&!this.doc.paid);return Object.assign(this.doc,i),this.doc.doctype=this.doc_type,this.doc.web_form_name=this.name,window.saving=!0,frappe.form_dirty=!1,frappe.call({type:"POST",method:"frappe.website.doctype.web_form.web_form.accept",args:{data:this.doc,web_form:this.name,for_payment:n},btn:$("btn-primary"),freeze:!0,callback:s=>{s.exc||(this.handle_success(s.message),frappe.web_form.events.trigger("after_save"),this.after_save&&this.after_save(),e&&(s.message.attachment||s.message.file)&&frappe.call({type:"POST",method:"frappe.handler.upload_file",args:{file_url:s.message.attachment||s.message.file,doctype:s.message.doctype,docname:s.message.name}}))},always:function(){window.saving=!1}}),!1}handle_success(e){this.accept_payment&&!this.doc.paid&&(window.location.href=e),this.is_new||($(".success-title").text(__("Updated")),$(".success-message").text(__("Your form has been successfully updated"))),$(".web-form-container").hide(),$(".success-page").removeClass("hide"),this.success_url?(frappe.utils.setup_timer(5,0,$(".time")),setTimeout(()=>{window.location.href=this.success_url},5e3)):this.render_success_page(e)}render_success_page(e){this.allow_edit&&e.name&&$(".success-footer").append(`
				<a href="/${this.route}/${e.name}/edit" class="edit-button btn btn-default btn-md">
					${__("Edit your response",null,"Button in web form")}
				</a>
			`),this.login_required&&!this.allow_multiple&&!this.show_list&&e.name&&$(".success-footer").append(`
				<a href="/${this.route}/${e.name}" class="view-button btn btn-default btn-md">
					${__("View your response",null,"Button in web form")}
				</a>
			`)}};frappe.ready(function(){let r=frappe.web_form_doc,e=frappe.reference_doc;t(),r.is_list?i():n();function t(){if(frappe.session.user!="Guest"||!r.login_required)return;let o=new frappe.ui.Dialog({title:__("Not Permitted"),primary_action_label:__("Login"),primary_action:()=>{window.location.replace("/login?redirect-to="+window.location.pathname)}});o.show(),o.set_message(__("You are not permitted to access this page without login."))}function i(){new jo({doctype:r.doc_type,web_form_name:r.name,list_columns:r.list_columns,condition_json:r.condition_json,settings:{allow_delete:r.allow_delete}})}function n(){let o=new Io({parent:$(".web-form-wrapper")}),a=e||{};s(r,a),o.prepare(r,a),o.make(),r.is_new&&o.set_default_values(),$(".file-size").each(function(){$(this).text(frappe.form.formatters.FileSize($(this).text()))})}function s(o,a){o.web_form_fields.forEach(l=>{if(l.is_web_form=!0,l.read_only=l.read_only||!o.is_new&&!o.in_edit_mode,l.fieldtype==="Table")return l.get_data=()=>{let f=[];return a&&a[l.fieldname]?a[l.fieldname]:f},$.each(l.fields||[],function(f,m){m.fieldtype==="Link"&&(m.only_select=!0),m.is_web_form=!0}),l.fieldtype==="Attach"&&(l.is_private=!0),delete l.parent,delete l.parentfield,delete l.parenttype,delete l.doctype,l;l.fieldtype==="Link"&&(l.only_select=!0),["Attach","Attach Image"].includes(l.fieldtype)&&(typeof l.options!="object"&&(l.options={}),l.options.disable_file_browser=!0)})}});$(".dropdown-menu a.dropdown-toggle").on("click",function(r){r.preventDefault(),r.stopImmediatePropagation(),$(this).next().hasClass("show")||$(this).parents(".dropdown-menu").first().find(".show").removeClass("show");var e=$(this).next(".dropdown-menu");return e.toggleClass("show"),$(this).parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",function(){$(".dropdown-submenu .show").removeClass("show")}),!1});frappe.get_modal=function(r,e){return $(`<div class="modal" tabindex="-1" role="dialog">
			<div class="modal-dialog modal-dialog-scrollable" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">${r}</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						${frappe.utils.icon("close-alt","sm","close-alt")}
						</button>
					</div>
					<div class="modal-body">
						${e}
					</div>
					<div class="modal-footer hidden">
						<button type="button" class="btn btn-sm btn-secondary hidden"></button>
						<button type="button" class="btn btn-sm btn-primary hidden"></button>
					</div>
				</div>
			</div>
		</div>`)};frappe.ui.Dialog=class extends frappe.ui.Dialog{get_primary_btn(){return this.$wrapper.find(".modal-footer .btn-primary")}get_secondary_btn(){return this.$wrapper.find(".modal-footer .btn-secondary")}set_primary_action(e,t){return this.$wrapper.find(".modal-footer").removeClass("hidden"),super.set_primary_action(e,t).removeClass("hidden")}set_secondary_action(e){return super.set_secondary_action(e).removeClass("hidden")}make(){super.make(),this.fields&&this.$wrapper.find(".section-body").addClass("w-100")}};})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
* Quill Editor v1.3.7
* https://quilljs.com/
* Copyright (c) 2014, Jason Chen
* Copyright (c) 2013, salesforce.com
*/
/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <http://feross.org>
* @license  MIT
*/
/*! https://mths.be/punycode v1.4.1 by @mathias */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! moment.js
//! momentjs.com
//! version : 2.29.4
//# sourceMappingURL=web_form.bundle.ZSTTYAUZ.js.map
