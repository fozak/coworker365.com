<!DOCTYPE html>
<!-- Built on Frappe. https://frappeframework.com/ -->
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="frappe">

	
		<meta name="title" content="Login"><meta name="language" content="en"><meta property="og:type"  content="article"><meta property="og:title"  content="Login"><meta name="twitter:title" content="Login"><meta name="twitter:card" content="summary">
	

	<title>Login</title>

	
	<link
		rel="shortcut icon"
		href="/files/school-favicon.png"
		type="image/x-icon"
	>
	<script defer data-api="https://frappecloud.com/api/event" data-domain="frappe.school" src="https://frappecloud.com/js/script.js"></script>
<meta name="google-site-verification" content="MjPfqRDqsELmWKKseNHZz4UkIynwc2YJrrQ57QHaVRg" />
<script defer data-domain="school.frappe.io" src="https://analytics.frappe.cloud/js/plausible.js"></script>
<link type="text/css" rel="stylesheet" href="/assets/frappe/dist/css/website.bundle.6BWVQT7S.css">
<link type="text/css" rel="stylesheet" href="/assets/lms/dist/css/lms.bundle.XC6BACD7.css">
<link type="text/css" rel="stylesheet" href="/assets/blog/css/blog.scss">
<link type="text/css" rel="stylesheet" href="/assets/frappe/dist/css/login.bundle.RO2WZJK6.css">

		

	<script>
		window.frappe = {};
		window._version_number = "1766472640.9596524";
		frappe.ready_events = [];
		frappe.ready = function(fn) {
			frappe.ready_events.push(fn);
		}
		window.dev_server = 0;
		window.socketio_port = 9000;
		window.show_language_picker = false;
	</script>
</head>
<body frappe-session-status="logged-out" data-path="login" class="">

		








<div id="page-login" data-path="login">
	
<div class="page-content-wrapper">
	<!-- breadcrumbs -->
	<div class="page-breadcrumbs">
		
			
		
	</div>

	
	<main class="container">
		<div class="page-header-wrapper">
			<div class="page-header">
				
			</div>

			
		</div>

		<div class="page_content">
<!-- login.html -->
<div>
	<noscript>
		<div class="text-center my-5">
			<h4>Javascript is disabled on your browser</h4>
			<p class="text-muted">
				You need to enable JavaScript for your app to work.<br>To enable it follow the instructions in the following link: <a href='https://enable-javascript.com/'>enable-javascript.com</a></p>
		</div>
	</noscript>
	<section class='for-login'>
		
<div class="page-card-head">
	<img class="app-logo" src="/files/school-logo.png">
	
	<h4>Login to Frappe School</h4>
	
</div>

		<div class="login-content page-card">
			<form class="form-signin form-login" role="form"><div class="page-card-body">
					<form class="form-signin form-login" role="form">
						
<div class="page-card-body">
	<div class="form-group">
		<label class="form-label sr-only" for="login_email">Email</label>
		<div class="email-field">
			<input type="text" id="login_email" class="form-control"
				placeholder="jane@example.com"
				required autofocus autocomplete="username">

			<svg class="field-icon email-icon" width="16" height="16" viewBox="0 0 16 16" fill="none"
				xmlns="http://www.w3.org/2000/svg">
				<use class="es-lock" href="#es-line-email"></use>
			</svg>
		</div>
	</div>

	<div class="form-group">
		<label class="form-label sr-only" for="login_password">Password</label>
		<div class="password-field">
			<input type="password" id="login_password" class="form-control" placeholder="•••••"
				autocomplete="current-password" required>

			<svg class="field-icon password-icon" width="16" height="16" viewBox="0 0 16 16" fill="none"
				xmlns="http://www.w3.org/2000/svg">
					<use class="es-lock" href="#es-line-lock"></use>
			</svg>
			<span toggle="#login_password" class="toggle-password text-muted">Show</span>
		</div>
	</div>

	
	<p class="forgot-password-message">
		<a href="#forgot">Forgot Password?</a>
	</p>
	
</div>

<div class="page-card-actions">
	
	<button class="btn btn-sm btn-primary btn-block btn-login" type="submit">
		Login</button>
	
	
</div>

					</form>
					<div class="social-logins text-center">
						
						<p class="text-muted login-divider">or</p>
						
						<div class="social-login-buttons">
							
							<div class="login-button-wrapper">
								<a href="https://accounts.google.com/o/oauth2/auth?redirect_uri=https%3A%2F%2Fschool.frappe.io%2Fapi%2Fmethod%2Ffrappe.www.login.login_via_google&state=eyJzaXRlIjogImh0dHBzOi8vc2Nob29sLmZyYXBwZS5pbyIsICJ0b2tlbiI6ICIwNTA1ZjlmZmI4NWRhZTdhYTBiMjg5MTlhYzg4NzFmMGQ5NWJlZjFiYTUxMDk1ZTk4ZGRiNDk0ZiIsICJyZWRpcmVjdF90byI6IG51bGx9&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email&response_type=code&client_id=810174368080-1epvhln3rtdukp3c716jd4dka4156csu.apps.googleusercontent.com"
									class="btn btn-block btn-default btn-sm btn-login-option btn-google">
									
										<img src='/assets/frappe/icons/social/google.svg' alt='Google'>
									
									Login with Google</a>
							</div>
							
						</div>

						

						
					</div>
				</div>
				</form>
		</div><div class="text-center sign-up-message">
			Don't have an account?
			<a href="#signup">Sign up</a>
		</div></section><section class='for-email-login'>
		
<div class="page-card-head">
	<img class="app-logo" src="/files/school-logo.png">
	
	<h4>Login to Frappe School</h4>
	
</div>

		<div class="login-content page-card">
			<form class="form-signin form-login" role="form">
			
<div class="page-card-body">
	<div class="form-group">
		<label class="form-label sr-only" for="login_email">Email</label>
		<div class="email-field">
			<input type="text" id="login_email" class="form-control"
				placeholder="jane@example.com"
				required autofocus autocomplete="username">

			<svg class="field-icon email-icon" width="16" height="16" viewBox="0 0 16 16" fill="none"
				xmlns="http://www.w3.org/2000/svg">
				<use class="es-lock" href="#es-line-email"></use>
			</svg>
		</div>
	</div>

	<div class="form-group">
		<label class="form-label sr-only" for="login_password">Password</label>
		<div class="password-field">
			<input type="password" id="login_password" class="form-control" placeholder="•••••"
				autocomplete="current-password" required>

			<svg class="field-icon password-icon" width="16" height="16" viewBox="0 0 16 16" fill="none"
				xmlns="http://www.w3.org/2000/svg">
					<use class="es-lock" href="#es-line-lock"></use>
			</svg>
			<span toggle="#login_password" class="toggle-password text-muted">Show</span>
		</div>
	</div>

	
	<p class="forgot-password-message">
		<a href="#forgot">Forgot Password?</a>
	</p>
	
</div>

<div class="page-card-actions">
	
	<button class="btn btn-sm btn-primary btn-block btn-login" type="submit">
		Login</button>
	
	
</div>

			</form>
		</div><div class="text-center sign-up-message">
			Don't have an account?
			<a href="#signup">Sign up</a>
		</div></section><section class='for-signup '>
		
<div class="page-card-head">
	<img class="app-logo" src="/files/school-logo.png">
	
	<h4>Create a Frappe School Account</h4>
	
</div>

		<div class="login-content page-card">
<form class="signup-form" role="form">
    <div class="page-card-body">
        <div class="form-group">
            <label class="form-label sr-only" for="signup_fullname"> Full Name </label>
            <input type="text" id="signup_fullname" class="form-control" placeholder="Jane Doe"
            required autofocus>
        </div>
        <div class="form-group">
            <label class="form-label sr-only" for="signup_email"> Email </label>
            <input type="email" id="signup_email" class="form-control"
            placeholder="jane@example.com" required>
        </div>

        
        <div class="form-group">
            <label class="form-label sr-only"> User Category </label>
            <div class="control-input-wrapper">
                <div class="control-input flex align-center">
                    <select type="text" id="user_category" data-fieldname="user_category" style="color: var(--text-light)"
                    class="input-with-feedback form-control ellipsis" data-fieldtype="Select" required>
                        <option value=""> Category </option>
                        <option value="Business Owner"> Business Owner </option>
                        <option value="Manager (Sales/Marketing/Customer)"> Manager (Sales/Marketing/Customer) </option>
                        <option value="Employee"> Employee </option>
                        <option value="Student"> Student </option>
                        <option value="Freelancer/Just looking"> Freelancer/Just looking </option>
                        <option value="Others"> Others </option>
                    </select>
                </div>
            </div>
        </div>
        

        
        <div class="form-group">
            <div class="checkbox">
                <label>
                    <span class="input-area">
                    <input type="checkbox" autocomplete="off" class="input-with-feedback"
                        data-fieldtype="Check" data-fieldname="terms" id="signup-terms" required>
                    </span>
                    <span class="label-area">
                    <div>
    I have read and agree to your <a href="/terms">Terms</a>
</div>
                    </span>
                </label>
            </div>
        </div>
        
    </div>
    <div class="page-card-actions">
        <button class="btn btn-sm btn-primary btn-block btn-signup"
            type="submit">Sign up</button>

        <p class="text-center sign-up-message">
            <a href="#login" class="blue">Have an account? Login</a>
        </p>
    </div>
</form>

<script>
    frappe.ready(function () {
        $("#user_category").on("change", (e) => {
            style_category(e);
        });

        $(".signup-form").on("submit", (e) => {
            signup(e);
        });
    });

    const style_category = (e) => {
        let category_color = $(e.currentTarget).val() ? "var(--text-color)" : "var(--text-muted)";
        $("#user_category").css("color", category_color);
    }

    const signup = (e) => {
        e.preventDefault();
        const email = ($("#signup_email").val() || "").trim();
        const full_name = frappe.utils.xss_sanitise(($("#signup_fullname").val() || "").trim());

        if (!email || !validate_email(email) || !full_name) {
            login.set_status('Valid email and name required', 'red');
            return false;
        }

        frappe.call({
            method: "lms.lms.user.sign_up",
            args: {
                "email": email,
                "full_name": full_name,
                "verify_terms": $("#signup-terms").prop("checked") ? 1 : 0,
                "user_category": $("#user_category").length ?  $("#user_category").val() : ""
            },
            statusCode: login.login_handlers
        })
        return false;
    }
</script></div>

	</section>

	<section class='for-forgot'>
		
<div class="page-card-head">
	<img class="app-logo" src="/files/school-logo.png">
	
	<h4>Forgot Password</h4>
	
</div>

		<div class="login-content page-card">
			<form class="form-signin form-forgot hide" role="form">
				<div class="page-card-body">
					<div class="email-field">
						<input type="email" id="forgot_email" class="form-control"
							placeholder="Email Address" required autofocus autocomplete="username">
						<svg class="field-icon email-icon" width="16" height="16" viewBox="0 0 16 16" fill="none"
							xmlns="http://www.w3.org/2000/svg">
							<use class="es-lock" href="#es-line-email"></use>
						</svg>

					</div>
				</div>
				<div class="page-card-actions">
					<button class="btn btn-sm btn-primary btn-block btn-forgot"
						type="submit">Reset Password</button>
					<p class="text-center sign-up-message">
						<a href="#login">Back to Login</a>
					</p>
				</div>

			</form>
		</div>
	</section>

	<section class='for-login-with-email-link'>
			
<div class="page-card-head">
	<img class="app-logo" src="/files/school-logo.png">
	
	<h4>Login with Email Link</h4>
	
</div>

		<div class="login-content page-card">
			<form class="form-signin form-login-with-email-link hide" role="form">
				<div class="page-card-body">
					<div class="email-field">
						<input type="email" id="login_with_email_link_email" class="form-control"
							placeholder="Email Address" required autofocus autocomplete="username">
						<svg class="field-icon email-icon" width="16" height="16" viewBox="0 0 16 16" fill="none"
							xmlns="http://www.w3.org/2000/svg">
							<use class="es-lock" href="#es-line-email"></use>
						</svg>
					</div>
				</div>
				<div class="page-card-actions">
					<button class="btn btn-sm btn-primary btn-block btn-login-with-email-link"
						type="submit">Send login link</button>
					<p class="text-center sign-up-message">
						<a href="#login">Back to Login</a>
					</p>
				</div>
			</form>
		</div>
	</section>
</div>
</div>

		<div class="page-footer"></div>
	</main>
	
</div>

</div>


<footer class="web-footer">
<div class="container">
<div class="footer-logo-extension">
<div class="row">
<div class="text-left col-md-6"><div>
<img alt="Footer Logo" class="footer-logo" src="/files/frappe-school-wordmark-logo.png"/>
</div></div>
<div class="text-right col-md-6">
</div>
</div>
</div>
<div class="footer-grouped-links">
<div class="row">
<div class="col-sm-2 footer-group">
<div data-label="By Frappe">
<h5 class="footer-group-label">By Frappe</h5>
<ul class="footer-group-links list-unstyled"><li class="footer-child-item" data-label="Frappe Framework">
<a href="https://www.frappeframework.com/" rel="noreferrer">Frappe Framework</a>
</li><li class="footer-child-item" data-label="ERPNext">
<a href="https://erpnext.com/" rel="noreferrer">ERPNext</a>
</li></ul>
</div>
</div>
<div class="col-sm-2 footer-group">
<div data-label="Terms">
<h5 class="footer-group-label">Terms</h5>
<ul class="footer-group-links list-unstyled"><li class="footer-child-item" data-label="Acceptable Use Policy">
<a href="https://frappe.school/acceptable-use-policy" rel="noreferrer">Acceptable Use Policy</a>
</li><li class="footer-child-item" data-label="Terms of Use">
<a href="https://frappe.school/terms-of-use" rel="noreferrer">Terms of Use</a>
</li><li class="footer-child-item" data-label="Terms of Certification">
<a href="https://frappe.school/terms-of-certification" rel="noreferrer">Terms of Certification</a>
</li></ul>
</div>
</div>
<div class="col-sm-2 footer-group">
<div data-label="Policies">
<h5 class="footer-group-label">Policies</h5>
<ul class="footer-group-links list-unstyled"><li class="footer-child-item" data-label="Privacy Policy">
<a href="https://frappe.school/privacy-policy" rel="noreferrer">Privacy Policy</a>
</li><li class="footer-child-item" data-label="Cookie Policy">
<a href="https://frappe.school/cookie-policy" rel="noreferrer">Cookie Policy</a>
</li></ul>
</div>
</div>
<div class="col-sm-2 footer-group">
<div data-label="Company">
<h5 class="footer-group-label">Company</h5>
<ul class="footer-group-links list-unstyled"><li class="footer-child-item" data-label="About Us">
<a href="/about-us" rel="noreferrer">About Us</a>
</li></ul>
</div>
</div>
</div>
</div>
<div class="footer-links">
<div class="row">
<div class="footer-col-left col-sm-6"></div>
<div class="footer-col-right col-sm-6">
<a class="footer-link" href="https://www.facebook.com/ERPNext" rel="noreferrer"><img alt="Facebook" src="/files/facebooka6675a.svg"/></a>
<a class="footer-link" href="https://twitter.com/frappetech" rel="noreferrer"><img alt="Twitter" src="/files/twitter.svg"/></a>
<a class="footer-link" href="https://medium.com/frapp%C3%A9-thoughts" rel="noreferrer"><img alt="Medium" src="/files/medium.svg"/></a>
<a class="footer-link" href="https://github.com/frappe" rel="noreferrer"><img alt="GitHub" src="/files/github (1).svg"/></a>
</div>
</div>
</div>
<div class="footer-info">
<div class="row">
<div class="footer-col-left col-sm-6 col-12">
<div class="ql-editor read-mode"><p>school@frappe.io</p></div>
</div>
<div class="footer-col-right col-sm-6 col-12 footer-powered">
			Build on <a class="text-muted" href="https://frappeframework.com?source=website_footer" target="_blank">Frappe Framework</a>  and <a class="text-muted" href="https://frappe.io/learning" target="_blank">Frappe Learning</a>
</div>
</div>
</div>
</div>
</footer><div id="all-symbols" style="display:none"></div><script type="text/javascript">fetch(`/assets/frappe/icons/timeless/icons.svg?v=${window._version_number}`, {credentials: "same-origin"}).then((r) => r.text()).then((svg) => {let c = document.getElementById("all-symbols"); c.insertAdjacentHTML("beforeend", svg);});</script><script type="text/javascript">fetch(`/assets/frappe/icons/espresso/icons.svg?v=${window._version_number}`, {credentials: "same-origin"}).then((r) => r.text()).then((svg) => {let c = document.getElementById("all-symbols"); c.insertAdjacentHTML("beforeend", svg);});</script>
	<!-- js should be loaded in body! -->
	<script>
		frappe.boot = {"lang":"en","apps_data":{"apps":[],"is_desk_apps":1,"default_path":""},"sysdefaults":{"float_precision":2,"date_format":"dd-mm-yyyy","time_format":"HH:mm:ss","first_day_of_the_week":"Sunday","number_format":"#,##,###.##","currency":null},"time_zone":{"system":"Asia/Kolkata","user":"Asia/Kolkata"},"assets_json":{"billing.bundle.js":"/assets/frappe/dist/js/billing.bundle.QQE2RPCA.js","bootstrap-4-web.bundle.js":"/assets/frappe/dist/js/bootstrap-4-web.bundle.FOZOVELL.js","calendar.bundle.js":"/assets/frappe/dist/js/calendar.bundle.4A4YITIU.js","controls.bundle.js":"/assets/frappe/dist/js/controls.bundle.RNOGRU5Y.js","data_import_tools.bundle.js":"/assets/frappe/dist/js/data_import_tools.bundle.44FYB4HH.js","desk.bundle.js":"/assets/frappe/dist/js/desk.bundle.TIMR5UVT.js","dialog.bundle.js":"/assets/frappe/dist/js/dialog.bundle.AT3QYYWV.js","form.bundle.js":"/assets/frappe/dist/js/form.bundle.O3J2FE6Y.js","frappe-web.bundle.js":"/assets/frappe/dist/js/frappe-web.bundle.7MNHTCJY.js","libs.bundle.js":"/assets/frappe/dist/js/libs.bundle.IGBCIYI5.js","list.bundle.js":"/assets/frappe/dist/js/list.bundle.2L4U4WTB.js","logtypes.bundle.js":"/assets/frappe/dist/js/logtypes.bundle.WKQH7KBM.js","onboarding_tours.bundle.js":"/assets/frappe/dist/js/onboarding_tours.bundle.RAUR6X4Z.js","photoswipe.bundle.js":"/assets/frappe/dist/js/photoswipe.bundle.YSXZQA64.js","report.bundle.js":"/assets/frappe/dist/js/report.bundle.FXYJ3SCX.js","sentry.bundle.js":"/assets/frappe/dist/js/sentry.bundle.AX44GVWW.js","syntax_highlighting.bundle.js":"/assets/frappe/dist/js/syntax_highlighting.bundle.YHGNRCUE.js","telemetry.bundle.js":"/assets/frappe/dist/js/telemetry.bundle.LKEZCADB.js","video_player.bundle.js":"/assets/frappe/dist/js/video_player.bundle.DUYYLSFO.js","web_form.bundle.js":"/assets/frappe/dist/js/web_form.bundle.64SWNHGC.js","form_builder.bundle.js":"/assets/frappe/dist/js/form_builder.bundle.W25EO5PC.js","print_format_builder.bundle.js":"/assets/frappe/dist/js/print_format_builder.bundle.VQYWNAGA.js","workflow_builder.bundle.js":"/assets/frappe/dist/js/workflow_builder.bundle.JRT7LEHB.js","build_events.bundle.js":"/assets/frappe/dist/js/build_events.bundle.BCX32TWL.js","file_uploader.bundle.js":"/assets/frappe/dist/js/file_uploader.bundle.6I5E7RKC.js","kanban_board.bundle.js":"/assets/frappe/dist/js/kanban_board.bundle.F6FPXXED.js","desk.bundle.css":"/assets/frappe/dist/css/desk.bundle.A5XN25RL.css","email.bundle.css":"/assets/frappe/dist/css/email.bundle.4TYOIQ74.css","login.bundle.css":"/assets/frappe/dist/css/login.bundle.RO2WZJK6.css","print.bundle.css":"/assets/frappe/dist/css/print.bundle.6AHLTNOV.css","print_format.bundle.css":"/assets/frappe/dist/css/print_format.bundle.4CJNH4GB.css","report.bundle.css":"/assets/frappe/dist/css/report.bundle.IU6KZZKC.css","web_form.bundle.css":"/assets/frappe/dist/css/web_form.bundle.BQNBQJSF.css","website.bundle.css":"/assets/frappe/dist/css/website.bundle.6BWVQT7S.css","lms.bundle.css":"/assets/lms/dist/css/lms.bundle.XC6BACD7.css","print_designer.bundle.js":"/assets/print_designer/dist/js/print_designer.bundle.U4ABZPDA.js","pdfjs.bundle.css":"/assets/print_designer/dist/css/pdfjs.bundle.Y2ZZDGOZ.css","print_designer.bundle.css":"/assets/print_designer/dist/css/print_designer.bundle.WMXLYJFN.css","newsletter-web.bundle.js":"/assets/newsletter/dist/js/newsletter-web.bundle.EMCZY25S.js","newsletter.bundle.js":"/assets/newsletter/dist/js/newsletter.bundle.3GCU7H5V.js","rtl_desk.bundle.css":"/assets/frappe/dist/css-rtl/desk.bundle.RNPUVSJJ.css","rtl_email.bundle.css":"/assets/frappe/dist/css-rtl/email.bundle.F7U2PZR4.css","rtl_login.bundle.css":"/assets/frappe/dist/css-rtl/login.bundle.YWYJR74D.css","rtl_print.bundle.css":"/assets/frappe/dist/css-rtl/print.bundle.ZU5SSYNE.css","rtl_print_format.bundle.css":"/assets/frappe/dist/css-rtl/print_format.bundle.6CZXOB65.css","rtl_report.bundle.css":"/assets/frappe/dist/css-rtl/report.bundle.PKY5CQI4.css","rtl_web_form.bundle.css":"/assets/frappe/dist/css-rtl/web_form.bundle.G6A5XABO.css","rtl_website.bundle.css":"/assets/frappe/dist/css-rtl/website.bundle.454QAA2Y.css","rtl_lms.bundle.css":"/assets/lms/dist/css-rtl/lms.bundle.I2H2LWC6.css","rtl_pdfjs.bundle.css":"/assets/print_designer/dist/css-rtl/pdfjs.bundle.BJFQ72CB.css","rtl_print_designer.bundle.css":"/assets/print_designer/dist/css-rtl/print_designer.bundle.UBQHM6SR.css"},"sitename":"frappeschool.frappe.cloud","is_fc_site":0}
		// for backward compatibility of some libs
		frappe.sys_defaults = frappe.boot.sysdefaults;
	</script>
	<script type="text/javascript" src="/assets/frappe/dist/js/frappe-web.bundle.7MNHTCJY.js"></script>
	
	<script type="text/javascript" src="/website_script.js"></script>
	<script type="text/javascript" src="/assets/newsletter/dist/js/newsletter-web.bundle.EMCZY25S.js"></script>
<script>// login.js
// don't remove this line (used in test)

window.disable_signup = false;
window.show_footer_on_login = false;

window.login = {};

window.verify = {};

login.bind_events = function () {
	$(window).on("hashchange", function () {
		login.route();
	});

	$(".form-login").on("submit", function (event) {
		event.preventDefault();
		var args = {};
		args.cmd = "login";
		args.usr = ($("#login_email").val() || "").trim();
		args.pwd = $("#login_password").val();
		if (!args.usr || !args.pwd) {
			
			frappe.msgprint("Both login and password required");
			return false;
		}
		login.call(args, null, "/login");
		return false;
	});

	$(".form-signup").on("submit", function (event) {
		event.preventDefault();
		var args = {};
		args.cmd = "frappe.core.doctype.user.user.sign_up";
		args.email = ($("#signup_email").val() || "").trim();
		args.redirect_to = frappe.utils.sanitise_redirect(frappe.utils.get_url_arg("redirect-to"));
		args.full_name = frappe.utils.xss_sanitise(($("#signup_fullname").val() || "").trim());
		if (!args.email || !validate_email(args.email) || !args.full_name) {
			login.set_status("Valid email and name required", 'red');
			return false;
		}
		login.call(args);
		return false;
	});

	$(".form-forgot").on("submit", function (event) {
		event.preventDefault();
		var args = {};
		args.cmd = "frappe.core.doctype.user.user.reset_password";
		args.user = ($("#forgot_email").val() || "").trim();
		if (!args.user) {
			login.set_status("Valid Login id required.", 'red');
			return false;
		}
		login.call(args);
		return false;
	});

	$(".form-login-with-email-link").on("submit", function (event) {
		event.preventDefault();
		var args = {};
		args.cmd = "frappe.www.login.send_login_link";
		args.email = ($("#login_with_email_link_email").val() || "").trim();
		if (!args.email) {
			login.set_status("Valid Login id required.", 'red');
			return false;
		}
		login.call(args).then(() => {
			login.set_status("Login link sent to your email", 'blue');
			$("#login_with_email_link_email").val("");
		}).catch(() => {
			login.set_status("Send login link", 'blue');
		});

		return false;
	});

	$(".toggle-password").click(function () {
		var input = $($(this).attr("toggle"));
		if (input.attr("type") == "password") {
			input.attr("type", "text");
			$(this).text("Hide")
		} else {
			input.attr("type", "password");
			$(this).text("Show")
		}
	});

	
}


login.route = function () {
	var route = window.location.hash.slice(1);
	if (!route) route = "login";
	route = route.replaceAll("-", "_");
	login[route]();
}

login.reset_sections = function (hide) {
	if (hide || hide === undefined) {
		$("section.for-login").toggle(false);
		$("section.for-email-login").toggle(false);
		$("section.for-forgot").toggle(false);
		$("section.for-login-with-email-link").toggle(false);
		$("section.for-signup").toggle(false);
	}
	$('section:not(.signup-disabled) .indicator').each(function () {
		$(this).removeClass().addClass('indicator').addClass('blue')
			.text($(this).attr('data-text'));
	});
}

login.login = function () {
	login.reset_sections();
	$(".for-login").toggle(true);
}

login.email = function () {
	login.reset_sections();
	$(".for-email-login").toggle(true);
	$("#login_email").focus();
}

login.steptwo = function () {
	login.reset_sections();
	$(".for-login").toggle(true);
	$("#login_email").focus();
}

login.forgot = function () {
	login.reset_sections();
	if ($("#login_email").val()) {
		$("#forgot_email").val($("#login_email").val());
	}
	$(".for-forgot").toggle(true);
	$("#forgot_email").focus();
}

login.login_with_email_link = function () {
	login.reset_sections();
	if ($("#login_email").val()) {
		$("#login_with_email_link_email").val($("#login_email").val());
	}
	$(".for-login-with-email-link").toggle(true);
	$("#login_with_email_link_email").focus();
}

login.signup = function () {
	login.reset_sections();
	$(".for-signup").toggle(true);
	$("#signup_fullname").focus();
}


// Login
login.call = function (args, callback, url="/") {
	login.set_status("Verifying...", 'blue');

	return frappe.call({
		type: "POST",
		url: url,
		args: args,
		callback: callback,
		freeze: true,
		statusCode: login.login_handlers
	});
}

login.set_status = function (message, color) {
	$('section:visible .btn-primary').text(message)
	if (color == "red") {
		$('section:visible .page-card-body').addClass("invalid");
	}
}

login.set_invalid = function (message) {
	$(".login-content.page-card").addClass('invalid-login');
	setTimeout(() => {
		$(".login-content.page-card").removeClass('invalid-login');
	}, 500)
	login.set_status(message, 'red');
	$("#login_password").focus();
}

login.login_handlers = (function () {
	var get_error_handler = function (default_message) {
		return function (xhr, data) {
			if (xhr.responseJSON) {
				data = xhr.responseJSON;
			}

			var message = default_message;
			if (data._server_messages) {
				message = ($.map(JSON.parse(data._server_messages || '[]'), function (v) {
					// temp fix for messages sent as dict
					try {
						return JSON.parse(v).message;
					} catch (e) {
						return v;
					}
				}) || []).join('<br>') || default_message;
			}

			if (message === default_message) {
				login.set_invalid(message);
			} else {
				login.reset_sections(false);
			}

		};
	}

	var login_handlers = {
		200: function (data) {
			if (data.message == 'Logged In') {
				login.set_status("Success", 'green');
				document.body.innerHTML = `<div class="centered splash">
	<img src="/assets/frappe/images/frappe-framework-logo.svg"
		style="width: auto; max-width: 200px;">
</div>`;
				window.location.href = frappe.utils.sanitise_redirect(frappe.utils.get_url_arg("redirect-to")) || data.home_page;
			} else if (data.message == 'Password Reset') {
				window.location.href = frappe.utils.sanitise_redirect(data.redirect_to);
			} else if (data.message == "No App") {
				login.set_status("Success", 'green');
				if (localStorage) {
					var last_visited =
						localStorage.getItem("last_visited")
						|| frappe.utils.sanitise_redirect(frappe.utils.get_url_arg("redirect-to"));
					localStorage.removeItem("last_visited");
				}

				if (data.redirect_to) {
					window.location.href = frappe.utils.sanitise_redirect(data.redirect_to);
				}

				if (last_visited && last_visited != "/login") {
					window.location.href = last_visited;
				} else {
					window.location.href = data.home_page;
				}
			} else if (window.location.hash === '#forgot') {
				if (data.message === 'not found') {
					login.set_status("Not a valid user", 'red');
				} else if (data.message == 'not allowed') {
					login.set_status("Not Allowed", 'red');
				} else if (data.message == 'disabled') {
					login.set_status("Not Allowed: Disabled User", 'red');
				} else {
					login.set_status("Instructions Emailed", 'green');
				}


			} else if (window.location.hash === '#signup') {
				if (cint(data.message[0]) == 0) {
					login.set_status(data.message[1], 'red');
				} else {
					login.set_status("Success", 'green');
					frappe.msgprint(data.message[1])
				}
				//login.set_status(__(data.message), 'green');
			}

			//OTP verification
			if (data.verification && data.message != 'Logged In') {
				login.set_status("Success", 'green');

				document.cookie = "tmp_id=" + data.tmp_id;

				if (data.verification.method == 'OTP App') {
					continue_otp_app(data.verification.setup, data.verification.qrcode);
				} else if (data.verification.method == 'SMS') {
					continue_sms(data.verification.setup, data.verification.prompt);
				} else if (data.verification.method == 'Email') {
					continue_email(data.verification.setup, data.verification.prompt);
				}
			}
		},
		401: get_error_handler("Invalid Login. Try again."),
		417: get_error_handler("Oops! Something went wrong."),
		404: get_error_handler("User does not exist."),
		500: get_error_handler("Something went wrong.")
	};

	return login_handlers;
})();

frappe.ready(function () {

	login.bind_events();
	if (window.show_footer_on_login) {
		$("body .web-footer").show();
	}

	$(".form-signup, .form-forgot, .form-login-with-email-link").removeClass("hide");
	$(document).trigger('login_rendered');
});

var verify_token = function (event) {
	$(".form-verify").on("submit", function (eventx) {
		eventx.preventDefault();
		var args = {};
		args.cmd = "login";
		args.otp = $("#login_token").val();
		args.tmp_id = frappe.get_cookie('tmp_id');
		if (!args.otp) {
			
			frappe.msgprint("Login token required");
			return false;
		}
		login.call(args);
		return false;
	});
}

var request_otp = function (r) {
	$('.login-content').empty();
	$('.login-content:visible').append(
		`<div id="twofactor_div">
			<form class="form-verify">
				<div class="page-card-head p-0">
					<span class="indicator blue" data-text="Verification">Verification</span>
				</div>
				<div id="otp_div"></div>
				<input type="text" id="login_token" autocomplete="off" class="form-control" placeholder="Verification Code" required="">
				<button class="btn btn-sm btn-primary btn-block mt-3" id="verify_token">Verify</button>
			</form>
		</div>`
	);
	// add event handler for submit button
	verify_token();
	$("#login_token").get(0)?.focus();
}

var continue_otp_app = function (setup, qrcode) {
	request_otp();
	var qrcode_div = $('<div class="text-muted" style="padding-bottom: 15px;"></div>');

	if (setup) {
		direction = $('<div>').attr('id', 'qr_info').text("Enter Code displayed in OTP App.");
		qrcode_div.append(direction);
		$('#otp_div').prepend(qrcode_div);
	} else {
		direction = $('<div>').attr('id', 'qr_info').text("OTP setup using OTP App was not completed. Please contact Administrator.");
		qrcode_div.append(direction);
		$('#otp_div').prepend(qrcode_div);
	}
}

var continue_sms = function (setup, prompt) {
	request_otp();
	var sms_div = $('<div class="text-muted" style="padding-bottom: 15px;"></div>');

	if (setup) {
		sms_div.append(prompt)
		$('#otp_div').prepend(sms_div);
	} else {
		direction = $('<div>').attr('id', 'qr_info').html(prompt || "SMS was not sent. Please contact Administrator.");
		sms_div.append(direction);
		$('#otp_div').prepend(sms_div)
	}
}

var continue_email = function (setup, prompt) {
	request_otp();
	var email_div = $('<div class="text-muted" style="padding-bottom: 15px;"></div>');

	if (setup) {
		email_div.append(prompt)
		$('#otp_div').prepend(email_div);
	} else {
		var direction = $('<div>').attr('id', 'qr_info').html(prompt || "Verification code email not sent. Please contact Administrator.");
		email_div.append(direction);
		$('#otp_div').prepend(email_div);
	}
}

login.route();</script>

	<script>frappe.csrf_token = "None";</script></body>
</html>