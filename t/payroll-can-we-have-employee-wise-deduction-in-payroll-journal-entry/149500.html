<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Payroll: Can we have employee-wise deduction in Payroll Journal Entry? - Frappe HR - Frappe Forum</title>
    <meta name="description" content="In Payroll Settings if  “Process Payroll Accounting Entry based on Employee” then Payroll Payable will be booked against each employee in the Journal Entry. 
Can we do the same for a deduction component, say for Providen&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.2 - https://github.com/discourse/discourse version 44986e4c0c3acf127ce03216227dd11cc78f4466">
<link rel="icon" type="image/png" href="https://discuss.coworker365.com/uploads/default/optimized/3X/a/5/a5e946e67fbe05a61d1c33d08894876d4d9dea7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="https://discuss.coworker365.com/uploads/default/optimized/3X/a/5/a5e946e67fbe05a61d1c33d08894876d4d9dea7a_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="https://discuss.coworker365.com/t/payroll-can-we-have-employee-wise-deduction-in-payroll-journal-entry/149500" />

<link rel="search" type="application/opensearchdescription+xml" href="https://discuss.coworker365.com/opensearch.xml" title="Frappe Forum Search">

    <link href="/stylesheets/color_definitions_light_8_12_296e8563dbd3c739bd4eafc35307bea3d2a15178.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" class="light-scheme" data-scheme-id="8"/>

<link href="/stylesheets/common_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="/stylesheets/desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="/stylesheets/checklist_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="checklist"  />
    <link href="/stylesheets/discourse-details_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="/stylesheets/discourse-lazy-videos_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="/stylesheets/discourse-local-dates_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="/stylesheets/discourse-narrative-bot_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="/stylesheets/discourse-solved_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="discourse-solved"  />
    <link href="/stylesheets/discourse-templates_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="discourse-templates"  />
    <link href="/stylesheets/discourse-topic-voting_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="discourse-topic-voting"  />
    <link href="/stylesheets/docker_manager_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="/stylesheets/footnote_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="/stylesheets/poll_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="/stylesheets/spoiler-alert_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="/stylesheets/discourse-topic-voting_desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="discourse-topic-voting_desktop"  />
    <link href="/stylesheets/poll_desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="/stylesheets/common_theme_12_608350f9691b80d810a6d8eaf4a08f6acc589e94.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="12" data-theme-name="erpnext"/>
    <link href="/stylesheets/desktop_theme_12_1843eada91b7bd1c5a6c17799765c3af197a4c6e.css?__ws=discuss.coworker365.com" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="12" data-theme-name="erpnext"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Payroll: Can we have employee-wise deduction in Payroll Journal Entry?&#39;" href="https://discuss.coworker365.com/t/payroll-can-we-have-employee-wise-deduction-in-payroll-journal-entry/149500.rss" />
    <meta property="og:site_name" content="Frappe Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://discuss.coworker365.com/uploads/default/original/3X/0/b/0b28794440eb26973e11119effb9e80dcb726e09.png" />
<meta property="og:image" content="https://discuss.coworker365.com/uploads/default/original/3X/0/b/0b28794440eb26973e11119effb9e80dcb726e09.png" />
<meta property="og:url" content="https://discuss.coworker365.com/t/payroll-can-we-have-employee-wise-deduction-in-payroll-journal-entry/149500" />
<meta name="twitter:url" content="https://discuss.coworker365.com/t/payroll-can-we-have-employee-wise-deduction-in-payroll-journal-entry/149500" />
<meta property="og:title" content="Payroll: Can we have employee-wise deduction in Payroll Journal Entry?" />
<meta name="twitter:title" content="Payroll: Can we have employee-wise deduction in Payroll Journal Entry?" />
<meta property="og:description" content="In Payroll Settings if  “Process Payroll Accounting Entry based on Employee” then Payroll Payable will be booked against each employee in the Journal Entry.  Can we do the same for a deduction component, say for Provident Fund deduction so that in the journal the Provident Fund deductions will be posted against each employee?  Usecase: for Provident Fund deductions, as only one single Journal gets created for each payroll, it is difficult to understand how much is deducted for each employee!  We..." />
<meta name="twitter:description" content="In Payroll Settings if  “Process Payroll Accounting Entry based on Employee” then Payroll Payable will be booked against each employee in the Journal Entry.  Can we do the same for a deduction component, say for Provident Fund deduction so that in the journal the Provident Fund deductions will be posted against each employee?  Usecase: for Provident Fund deductions, as only one single Journal gets created for each payroll, it is difficult to understand how much is deducted for each employee!  We..." />
<meta property="og:article:section" content="Frappe HR" />
<meta property="og:article:section:color" content="ffd478" />
<meta property="og:article:tag" content="hr" />
<meta property="og:article:tag" content="salary" />
<meta property="og:article:tag" content="payroll" />
<meta property="og:article:tag" content="customization" />
<meta property="article:published_time" content="2025-07-08T09:22:34+00:00" />
<meta property="og:ignore_canonical" content="true" />


    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"Payroll: Can we have employee-wise deduction in Payroll Journal Entry?","mainEntity":{"@type":"Question","name":"Payroll: Can we have employee-wise deduction in Payroll Journal Entry?","text":"In Payroll Settings if  “Process Payroll Accounting Entry based on Employee” then Payroll Payable will be booked against each employee in the Journal Entry.\n\nCan we do the same for a deduction component, say for Provident Fund deduction so that in the journal the Provident Fund deductions will be po&hellip;","upvoteCount":0,"answerCount":0,"datePublished":"2025-07-08T09:22:34.130Z","author":{"@type":"Person","name":"fnrfarid","url":"https://discuss.coworker365.com/u/fnrfarid"}}}</script>
  </head>
  <body class="crawler ">
    <div class="erpnext-header">
    <a href="https://coworker365.com" target="_blank">coworker365.com</a>
    <a href="https://frappecloud.com" target="_blank">Frappe Cloud</a>
    <a href="https://docs.coworker365.com/" target="_blank">Documentation</a>
    <a href="https://coworker365.com/partners" target="_blank">Partners</a>
    <a href="https://frappe.school" target="_blank">Frappe School</a>
    <a href="https://frappecloud.com/marketplace" target="_blank">Marketplace</a>
    <a href="https://t.me/erpnext_public" target="_blank">Public Chat</a>
</div>

    <header>
  <a href="/">Frappe Forum</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="/t/payroll-can-we-have-employee-wise-deduction-in-payroll-journal-entry/149500">Payroll: Can we have employee-wise deduction in Payroll Journal Entry?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="/c/hr/22" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #ffd478'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Frappe HR</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='https://discuss.coworker365.com/tag/hr' class='discourse-tag' rel="tag">hr</a>, 
            <a href='https://discuss.coworker365.com/tag/salary' class='discourse-tag' rel="tag">salary</a>, 
            <a href='https://discuss.coworker365.com/tag/payroll' class='discourse-tag' rel="tag">payroll</a>, 
            <a href='https://discuss.coworker365.com/tag/customization' class='discourse-tag' rel="tag">customization</a>
        </div>
      </div>
  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Payroll: Can we have employee-wise deduction in Payroll Journal Entry?'>
      <link itemprop='url' href='https://discuss.coworker365.com/t/payroll-can-we-have-employee-wise-deduction-in-payroll-journal-entry/149500'>
      <meta itemprop='datePublished' content='2025-07-08T09:22:34Z'>
        <meta itemprop='articleSection' content='Frappe HR'>
      <meta itemprop='keywords' content='hr, salary, payroll, customization'>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='Frappe'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://discuss.coworker365.com/uploads/default/original/3X/e/1/e1295d1f76ba489dd58f8c9b55eee88286fc9a31.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.coworker365.com/u/fnrfarid'><span itemprop='name'>fnrfarid</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="https://discuss.coworker365.com/t/payroll-can-we-have-employee-wise-deduction-in-payroll-journal-entry/149500">


              <span class="crawler-post-infos">
                  <time  datetime='2025-07-08T09:22:34Z' class='post-time'>
                    July 8, 2025,  9:22am
                  </time>
                  <meta itemprop='dateModified' content='2025-07-08T09:22:34Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>In Payroll Settings if  “Process Payroll Accounting Entry based on Employee” then Payroll Payable will be booked against each employee in the Journal Entry.</p>
<p>Can we do the same for a deduction component, say for Provident Fund deduction so that in the journal the Provident Fund deductions will be posted against each employee?</p>
<p>Usecase: for Provident Fund deductions, as only one single Journal gets created for each payroll, it is difficult to understand how much is deducted for each employee!</p>
<p>We could use salary register for this, but what if we are migrating from another system, then we will have to look for two reports in order to figure out the total amount when someone is leaving and we need to settle their PF amounts.</p>
<p>It would have been nice if we could implement the same like employee-wise liabilities in journal posting</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.coworker365.com/u/peterg'><span itemprop='name'>peterg</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-07-08T12:17:55Z' class='post-time'>
                    July 8, 2025, 12:17pm
                  </time>
                  <meta itemprop='dateModified' content='2025-07-08T12:17:55Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hi there,</p>
<p>There’s no built-in way to do this, but it’s possible with event hook scripting.</p>
<p>I’ve got a server script that runs on the Journal Entry’s <code>before_insert</code> event, which splits payable account entries lines down by party.</p>
<pre data-code-wrap="python"><code class="lang-python">payroll_entries = [ x.reference_name for x in doc.accounts if x.reference_type =="Payroll Entry" ]
payroll_entry = frappe.get_doc("Payroll Entry", payroll_entries[0]) if len(payroll_entries) &gt; 0 else None

print(payroll_entry)
print(payroll_entries)
if payroll_entry:
    # get slips, accounts, and payability details
    slips = [ frappe.get_doc("Salary Slip", name) for name in frappe.db.get_all("Salary Slip", filters={"docstatus": ["!=", 2], "payroll_entry": payroll_entry.name }, pluck="name") ]
    component_accounts = { x.parent:x.account for x in frappe.db.get_all("Salary Component Account", fields=['parent', 'account'], filters={'company': doc.company}) }
    payable_accounts = frappe.db.get_all("Account", filters={"company": doc.company, "account_type": "Payable"}, pluck="name")

    # go through each account one by one
    for account in doc.accounts[:]:
        replacements = []
        print(f"{account.account} - {payroll_entry.payroll_payable_account}")
        isPayable = account.account in payable_accounts
        for slip in slips:
            if account.account == payroll_entry.payroll_payable_account:
                print("PAYABLE ACCOUNT!")
                print(slip.net_pay)
                replacements.append({
                    'account': account.account, 
                    'exchange_rate': account.exchange_rate, 
                    'cost_center': account.cost_center, 
                    'project': account.project, 
                    'credit_in_account_currency': slip.net_pay,
                    'department': slip.department, 
                    'doctype': 'Journal Entry Account',
                    'party_type': 'Employee',
                    'party': slip.employee
                })
                pass
            else:
                for component in slip.earnings:
                    if component_accounts[component.salary_component] == account.account:
                        replacements.append({
                            'account': account.account, 
                            'exchange_rate': account.exchange_rate, 
                            'cost_center': account.cost_center, 
                            'project': account.project, 
                            'debit_in_account_currency': component.amount, 
                            'department': slip.department, 
                            'doctype': 'Journal Entry Account',
                            # 'party_type': 'Employee' if isPayable else None, # removed because these should never be payable?
                            # 'party': slip.employee if isPayable else None,
                            'reference_type': "Payroll Entry",
                            'reference_name': payroll_entry.name
                        })
                for component in slip.deductions:
                    if component_accounts[component.salary_component] == account.account:
                        replacements.append({
                            'account': account.account, 
                            'exchange_rate': account.exchange_rate, 
                            'cost_center': account.cost_center, 
                            'project': account.project, 
                            'credit_in_account_currency': component.amount, 
                            'department': slip.department, 
                            'doctype': 'Journal Entry Account',
                            'party_type': 'Employee' if isPayable else None,
                            'party': slip.employee if isPayable else None,
                        })
                    
                
        if len(replacements):
            print("replacement time")
            print(replacements)
            doc.accounts.remove(account)
            for replacement in replacements:
                doc.append('accounts', replacement)
            
print("---@@@---")
for account in doc.accounts:
    print(f"{account.account} - {account.debit_in_account_currency} - {account.credit_in_account_currency} ({account.party}, {account.department})")
</code></pre>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    <div class="erpnext-footer">
    <a href="https://coworker365.com">Frappe</a>
</div>
    
  </body>
  
</html>
