<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Default print format based on condition? - Print Formats - Frappe Forum</title>
    <meta name="description" content="I’ve tried a client script on the Sales Invoice doctype to automatically set the default print format based on condition. It used to work perfectly before, but recently it does not always set the correct print format whe&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.2 - https://github.com/discourse/discourse version 44986e4c0c3acf127ce03216227dd11cc78f4466">
<link rel="icon" type="image/png" href="https://discuss.frappe.io/uploads/default/optimized/3X/a/5/a5e946e67fbe05a61d1c33d08894876d4d9dea7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="https://discuss.frappe.io/uploads/default/optimized/3X/a/5/a5e946e67fbe05a61d1c33d08894876d4d9dea7a_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="https://discuss.frappe.io/t/default-print-format-based-on-condition/156678" />

<link rel="search" type="application/opensearchdescription+xml" href="https://discuss.frappe.io/opensearch.xml" title="Frappe Forum Search">

    <link href="/stylesheets/color_definitions_light_8_12_296e8563dbd3c739bd4eafc35307bea3d2a15178.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" class="light-scheme" data-scheme-id="8"/>

<link href="/stylesheets/common_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="common"  />

  <link href="/stylesheets/desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="/stylesheets/checklist_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="checklist"  />
    <link href="/stylesheets/discourse-details_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="/stylesheets/discourse-lazy-videos_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="/stylesheets/discourse-local-dates_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="/stylesheets/discourse-narrative-bot_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="/stylesheets/discourse-solved_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-solved"  />
    <link href="/stylesheets/discourse-templates_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-templates"  />
    <link href="/stylesheets/discourse-topic-voting_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-topic-voting"  />
    <link href="/stylesheets/docker_manager_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="/stylesheets/footnote_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="/stylesheets/poll_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="poll"  />
    <link href="/stylesheets/spoiler-alert_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="/stylesheets/discourse-topic-voting_desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-topic-voting_desktop"  />
    <link href="/stylesheets/poll_desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="/stylesheets/common_theme_12_608350f9691b80d810a6d8eaf4a08f6acc589e94.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="12" data-theme-name="erpnext"/>
    <link href="/stylesheets/desktop_theme_12_1843eada91b7bd1c5a6c17799765c3af197a4c6e.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="12" data-theme-name="erpnext"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Default print format based on condition?&#39;" href="https://discuss.frappe.io/t/default-print-format-based-on-condition/156678.rss" />
    <meta property="og:site_name" content="Frappe Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://discuss.frappe.io/uploads/default/original/3X/0/b/0b28794440eb26973e11119effb9e80dcb726e09.png" />
<meta property="og:image" content="https://discuss.frappe.io/uploads/default/original/3X/0/b/0b28794440eb26973e11119effb9e80dcb726e09.png" />
<meta property="og:url" content="https://discuss.frappe.io/t/default-print-format-based-on-condition/156678" />
<meta name="twitter:url" content="https://discuss.frappe.io/t/default-print-format-based-on-condition/156678" />
<meta property="og:title" content="Default print format based on condition?" />
<meta name="twitter:title" content="Default print format based on condition?" />
<meta property="og:description" content="I’ve tried a client script on the Sales Invoice doctype to automatically set the default print format based on condition. It used to work perfectly before, but recently it does not always set the correct print format when I open or create new Sales Invoices. Sometimes the print format updates correctly, but other times it doesn’t.  How to consistently update default custom print format based on condition every time the form loads ?  frappe.ui.form.on(“Sales Invoice”, {      onload: function(frm)..." />
<meta name="twitter:description" content="I’ve tried a client script on the Sales Invoice doctype to automatically set the default print format based on condition. It used to work perfectly before, but recently it does not always set the correct print format when I open or create new Sales Invoices. Sometimes the print format updates correctly, but other times it doesn’t.  How to consistently update default custom print format based on condition every time the form loads ?  frappe.ui.form.on(“Sales Invoice”, {      onload: function(frm)..." />
<meta property="og:article:section" content="Frappe Framework" />
<meta property="og:article:section:color" content="F7941D" />
<meta property="og:article:section" content="Print Formats" />
<meta property="og:article:section:color" content="AB9364" />
<meta property="og:article:tag" content="print_format" />
<meta property="og:article:tag" content="bug" />
<meta property="article:published_time" content="2025-11-11T06:52:59+00:00" />
<meta property="og:ignore_canonical" content="true" />


    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"Default print format based on condition?","mainEntity":{"@type":"Question","name":"Default print format based on condition?","text":"I’ve tried a client script on the Sales Invoice doctype to automatically set the default print format based on condition. It used to work perfectly before, but recently it does not always set the correct print format when I open or create new Sales Invoices. Sometimes the print format updates correc&hellip;","upvoteCount":0,"answerCount":0,"datePublished":"2025-11-11T06:52:59.155Z","author":{"@type":"Person","name":"just_inquiring","url":"https://discuss.frappe.io/u/just_inquiring"}}}</script>
  </head>
  <body class="crawler ">
    <div class="erpnext-header">
    <a href="https://frappe.io" target="_blank">Frappe.io</a>
    <a href="https://frappecloud.com" target="_blank">Frappe Cloud</a>
    <a href="https://docs.frappe.io/" target="_blank">Documentation</a>
    <a href="https://frappe.io/partners" target="_blank">Partners</a>
    <a href="https://frappe.school" target="_blank">Frappe School</a>
    <a href="https://frappecloud.com/marketplace" target="_blank">Marketplace</a>
    <a href="https://t.me/erpnext_public" target="_blank">Public Chat</a>
</div>

    <header>
  <a href="/">Frappe Forum</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="/t/default-print-format-based-on-condition/156678">Default print format based on condition?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="/c/framework/5" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F7941D'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Frappe Framework</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="/c/framework/print-formats/12" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Print Formats</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='https://discuss.frappe.io/tag/print_format' class='discourse-tag' rel="tag">print_format</a>, 
            <a href='https://discuss.frappe.io/tag/bug' class='discourse-tag' rel="tag">bug</a>
        </div>
      </div>
  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Default print format based on condition?'>
      <link itemprop='url' href='https://discuss.frappe.io/t/default-print-format-based-on-condition/156678'>
      <meta itemprop='datePublished' content='2025-11-11T06:52:59Z'>
        <meta itemprop='articleSection' content='Print Formats'>
      <meta itemprop='keywords' content='print_format, bug'>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='Frappe'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://discuss.frappe.io/uploads/default/original/3X/e/1/e1295d1f76ba489dd58f8c9b55eee88286fc9a31.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/just_inquiring'><span itemprop='name'>just_inquiring</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="https://discuss.frappe.io/t/default-print-format-based-on-condition/156678">


              <span class="crawler-post-infos">
                  <time  datetime='2025-11-11T06:52:59Z' class='post-time'>
                    November 11, 2025,  6:52am
                  </time>
                  <meta itemprop='dateModified' content='2025-11-11T06:58:41Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I’ve tried a client script on the <strong>Sales Invoice</strong> doctype to automatically set the default print format based on condition. It used to work perfectly before, but recently it does not always set the correct print format when I open or create new Sales Invoices. Sometimes the print format updates correctly, but other times it doesn’t.</p>
<p>How to consistently update default custom print format based on condition every time the form loads ?</p>
<p><code>frappe.ui.form.on(“Sales Invoice”, {</code><br>
<code>    onload: function(frm) {</code><br>
<code>        if (frm.doc.naming_series === “25-26/SI/.#”) {</code><br>
<code>            frm.meta.default_print_format = “Custom Print”;</code><br>
<code>        }</code><br>
<code>        else {</code><br>
<code>            frm.meta.default_print_format = “Standard”;</code><br>
<code>        }</code><br>
<code>    }</code><br>
<code>});</code></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/rtdany10'><span itemprop='name'>rtdany10</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-11-12T07:42:34Z' class='post-time'>
                    November 12, 2025,  7:42am
                  </time>
                  <meta itemprop='dateModified' content='2025-11-12T07:42:34Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Try changing it to refresh instead of onload.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/AjmalRoshan'><span itemprop='name'>AjmalRoshan</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-11-12T09:10:03Z' class='post-time'>
                    November 12, 2025,  9:10am
                  </time>
                  <meta itemprop='dateModified' content='2025-11-12T09:10:03Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="just_inquiring" data-post="1" data-topic="156678">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://discuss.frappe.io/letter_avatar_proxy/v4/letter/j/bcef8e/48.png" class="avatar"> just_inquiring:</div>
<blockquote>
<p>I’ve tried a client script on the <strong>Sales Invoice</strong> doctype to automatically set the default print format based on condition. It used to work perfectly before, but recently it does not always set the correct print format when I open or create new Sales Invoices. Sometimes the print format updates correctly, but other times it doesn’t.</p>
<p>How to consistently update default custom print format based on condition every time the form loads ?</p>
<p><code>frappe.ui.form.on(“Sales Invoice”, {</code><br>
<code>    onload: function(frm) {</code><br>
<code>        if (frm.doc.naming_series === “25-26/SI/.#”) {</code><br>
<code>            frm.meta.default_print_format = “Custom Print”;</code><br>
<code>        }</code><br>
<code>        else {</code><br>
<code>            frm.meta.default_print_format = “Standard”;</code><br>
<code>        }</code><br>
<code>    }</code><br>
<code>});</code></p>
</blockquote>
</aside>
<p>try with this your problem might be solved.</p>
<p>refresh : -	Triggered when the form is loaded and rendered.<br>
onload_post_render : -	Triggered after the form is loaded and rendered</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/just_inquiring'><span itemprop='name'>just_inquiring</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-11-12T15:18:04Z' class='post-time'>
                    November 12, 2025,  3:18pm
                  </time>
                  <meta itemprop='dateModified' content='2025-11-12T15:18:04Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Yes. I’ve already tried using refresh, onload and onload_post_render, but the issue still persists.</p>
<p>The problem seems to be that after reloading, the print format of the first Sales Invoice I open is applied to all subsequent invoices I open afterwards unless I reload again — even if they have a different naming series.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_5' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/nikitadattapawar06'><span itemprop='name'>nikitadattapawar06</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-11-13T05:45:57Z' class='post-time'>
                    November 13, 2025,  5:45am
                  </time>
                  <meta itemprop='dateModified' content='2025-11-13T05:45:57Z'>
              <span itemprop='position'>5</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>“frm.doc.print_format” try using this instead of “frm.meta.default_print_format”</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_6' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/just_inquiring'><span itemprop='name'>just_inquiring</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-12-02T11:03:10Z' class='post-time'>
                    December 2, 2025, 11:03am
                  </time>
                  <meta itemprop='dateModified' content='2025-12-02T11:03:10Z'>
              <span itemprop='position'>6</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p><code>frm.doc.print_format</code> didn’t fix it.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_7' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/volkswagner'><span itemprop='name'>volkswagner</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-12-02T13:18:57Z' class='post-time'>
                    December 2, 2025,  1:18pm
                  </time>
                  <meta itemprop='dateModified' content='2025-12-02T13:18:57Z'>
              <span itemprop='position'>7</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I think you may need to troubleshoot when/why it works vs when/why it doesn’t work. For example; does it matter how the user has Sales Invoice list filters set, does it happen for all users, etc.</p>
<p>Finding the why/when usually leads to the fix.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    <div class="erpnext-footer">
    <a href="https://frappe.io">Frappe</a>
</div>
    
  </body>
  
</html>
