<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Monkey patch customization - ignored path from hooks.py - Frappe Cloud - Frappe Forum</title>
    <meta name="description" content="Hello, 
I have an easy monkey patch customization in hooks.py: 
import frappe.integrations.utils
import js_utils.utils.utils

frappe.integrations.utils.make_request = js_utils.utils.utils.make_request_js

It is working p&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.2 - https://github.com/discourse/discourse version 44986e4c0c3acf127ce03216227dd11cc78f4466">
<link rel="icon" type="image/png" href="https://discuss.frappe.io/uploads/default/optimized/3X/a/5/a5e946e67fbe05a61d1c33d08894876d4d9dea7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="https://discuss.frappe.io/uploads/default/optimized/3X/a/5/a5e946e67fbe05a61d1c33d08894876d4d9dea7a_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="https://discuss.frappe.io/t/monkey-patch-customization-ignored-path-from-hooks-py/116689" />

<link rel="search" type="application/opensearchdescription+xml" href="https://discuss.frappe.io/opensearch.xml" title="Frappe Forum Search">

    <link href="/stylesheets/color_definitions_light_8_12_296e8563dbd3c739bd4eafc35307bea3d2a15178.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" class="light-scheme" data-scheme-id="8"/>

<link href="/stylesheets/common_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="common"  />

  <link href="/stylesheets/desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="/stylesheets/checklist_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="checklist"  />
    <link href="/stylesheets/discourse-details_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="/stylesheets/discourse-lazy-videos_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="/stylesheets/discourse-local-dates_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="/stylesheets/discourse-narrative-bot_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="/stylesheets/discourse-solved_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-solved"  />
    <link href="/stylesheets/discourse-templates_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-templates"  />
    <link href="/stylesheets/discourse-topic-voting_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-topic-voting"  />
    <link href="/stylesheets/docker_manager_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="/stylesheets/footnote_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="/stylesheets/poll_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="poll"  />
    <link href="/stylesheets/spoiler-alert_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="/stylesheets/discourse-topic-voting_desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-topic-voting_desktop"  />
    <link href="/stylesheets/poll_desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="/stylesheets/common_theme_12_608350f9691b80d810a6d8eaf4a08f6acc589e94.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="12" data-theme-name="erpnext"/>
    <link href="/stylesheets/desktop_theme_12_1843eada91b7bd1c5a6c17799765c3af197a4c6e.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="12" data-theme-name="erpnext"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Monkey patch customization - ignored path from hooks.py&#39;" href="https://discuss.frappe.io/t/monkey-patch-customization-ignored-path-from-hooks-py/116689.rss" />
    <meta property="og:site_name" content="Frappe Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://discuss.frappe.io/uploads/default/original/3X/0/b/0b28794440eb26973e11119effb9e80dcb726e09.png" />
<meta property="og:image" content="https://discuss.frappe.io/uploads/default/original/3X/0/b/0b28794440eb26973e11119effb9e80dcb726e09.png" />
<meta property="og:url" content="https://discuss.frappe.io/t/monkey-patch-customization-ignored-path-from-hooks-py/116689" />
<meta name="twitter:url" content="https://discuss.frappe.io/t/monkey-patch-customization-ignored-path-from-hooks-py/116689" />
<meta property="og:title" content="Monkey patch customization - ignored path from hooks.py" />
<meta name="twitter:title" content="Monkey patch customization - ignored path from hooks.py" />
<meta property="og:description" content="Hello,  I have an easy monkey patch customization in hooks.py:  import frappe.integrations.utils import js_utils.utils.utils  frappe.integrations.utils.make_request = js_utils.utils.utils.make_request_js  It is working perfect on devel custom ubuntu server.  But here is a problem on frappecloud server.  Patch works for standard doc event, but in scheduled event this patch is ignored and the original function is used.  Is it here any speciality for frappecloud server, please?  Jiri Sir" />
<meta name="twitter:description" content="Hello,  I have an easy monkey patch customization in hooks.py:  import frappe.integrations.utils import js_utils.utils.utils  frappe.integrations.utils.make_request = js_utils.utils.utils.make_request_js  It is working perfect on devel custom ubuntu server.  But here is a problem on frappecloud server.  Patch works for standard doc event, but in scheduled event this patch is ignored and the original function is used.  Is it here any speciality for frappecloud server, please?  Jiri Sir" />
<meta property="og:article:section" content="Frappe Cloud" />
<meta property="og:article:section:color" content="0088CC" />
<meta property="og:article:tag" content="frappecloud" />
<meta property="og:article:tag" content="frappe" />
<meta property="og:article:tag" content="customization" />
<meta property="article:published_time" content="2024-02-03T11:44:27+00:00" />
<meta property="og:ignore_canonical" content="true" />


    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"Monkey patch customization - ignored path from hooks.py","mainEntity":{"@type":"Question","name":"Monkey patch customization - ignored path from hooks.py","text":"Hello,\n\nI have an easy monkey patch customization in hooks.py:\n\nimport frappe.integrations.utils\n\nimport js_utils.utils.utils\n\nfrappe.integrations.utils.make_request = js_utils.utils.utils.make_request_js\n\nIt is working perfect on devel custom ubuntu server.\n\nBut here is a problem on frappecloud serv&hellip;","upvoteCount":0,"answerCount":0,"datePublished":"2024-02-03T11:44:27.217Z","author":{"@type":"Person","name":"Jiri_Sir","url":"https://discuss.frappe.io/u/Jiri_Sir"}}}</script>
  </head>
  <body class="crawler ">
    <div class="erpnext-header">
    <a href="https://frappe.io" target="_blank">Frappe.io</a>
    <a href="https://frappecloud.com" target="_blank">Frappe Cloud</a>
    <a href="https://docs.frappe.io/" target="_blank">Documentation</a>
    <a href="https://frappe.io/partners" target="_blank">Partners</a>
    <a href="https://frappe.school" target="_blank">Frappe School</a>
    <a href="https://frappecloud.com/marketplace" target="_blank">Marketplace</a>
    <a href="https://t.me/erpnext_public" target="_blank">Public Chat</a>
</div>

    <header>
  <a href="/">Frappe Forum</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="/t/monkey-patch-customization-ignored-path-from-hooks-py/116689">Monkey patch customization - ignored path from hooks.py</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="/c/frappe-cloud/77" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #0088CC'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Frappe Cloud</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='https://discuss.frappe.io/tag/frappecloud' class='discourse-tag' rel="tag">frappecloud</a>, 
            <a href='https://discuss.frappe.io/tag/frappe' class='discourse-tag' rel="tag">frappe</a>, 
            <a href='https://discuss.frappe.io/tag/customization' class='discourse-tag' rel="tag">customization</a>
        </div>
      </div>
  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Monkey patch customization - ignored path from hooks.py'>
      <link itemprop='url' href='https://discuss.frappe.io/t/monkey-patch-customization-ignored-path-from-hooks-py/116689'>
      <meta itemprop='datePublished' content='2024-02-03T11:44:27Z'>
        <meta itemprop='articleSection' content='Frappe Cloud'>
      <meta itemprop='keywords' content='frappecloud, frappe, customization'>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='Frappe'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://discuss.frappe.io/uploads/default/original/3X/e/1/e1295d1f76ba489dd58f8c9b55eee88286fc9a31.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/Jiri_Sir'><span itemprop='name'>Jiri_Sir</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="https://discuss.frappe.io/t/monkey-patch-customization-ignored-path-from-hooks-py/116689">


              <span class="crawler-post-infos">
                  <time  datetime='2024-02-03T11:44:27Z' class='post-time'>
                    February 3, 2024, 11:44am
                  </time>
                  <meta itemprop='dateModified' content='2024-02-03T11:44:27Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hello,<br>
I have an easy monkey patch customization in hooks.py:</p>
<pre><code class="lang-auto">import frappe.integrations.utils
import js_utils.utils.utils

frappe.integrations.utils.make_request = js_utils.utils.utils.make_request_js
</code></pre>
<p>It is working perfect on devel custom ubuntu server.</p>
<p>But here is a problem on frappecloud server.</p>
<p>Patch works for standard doc event, but in scheduled event this patch is ignored and the original function is used.</p>
<p>Is it here any speciality for frappecloud server, please?</p>
<p>Jiri Sir</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="https://discuss.frappe.io/t/how-to-override-normal-def-function/122509/2">How to override normal def function</a>
                        <meta itemprop='position' content='1'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="https://discuss.frappe.io/t/how-to-override-get-gl-entries-in-general-ledger-in-my-custom-app/129189/2">How to override get_gl_entries in general ledger in my custom app?</a>
                        <meta itemprop='position' content='2'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="https://discuss.frappe.io/t/v15-how-to-override-attach-print-and-or-get-pdf/140746/2">V15: How to override attach_print and or get_pdf</a>
                        <meta itemprop='position' content='3'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="https://discuss.frappe.io/t/implementing-custom-changes-to-frappe-utils-pdf-without-modifying-core-code/139755/2">Implementing Custom Changes to frappe.utils.pdf Without Modifying Core Code</a>
                        <meta itemprop='position' content='4'>
                      </div>
                </div>
          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/Dhruvin-Bhaliya'><span itemprop='name'>Dhruvin-Bhaliya</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-02-03T12:41:22Z' class='post-time'>
                    February 3, 2024, 12:41pm
                  </time>
                  <meta itemprop='dateModified' content='2024-02-03T12:41:22Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hi <a class="mention" href="/u/jiri_sir">@Jiri_Sir</a> ,</p>
<p>Can you please explain which scheduled event you want to running this function. You monkey patch is absolutely correct. We have also written lots of monkey patches for clients but all monkey patches are running correctly in local server even also on a frappe cloud server.</p>
<p>Thank You !</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/Jiri_Sir'><span itemprop='name'>Jiri_Sir</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-02-03T13:17:21Z' class='post-time'>
                    February 3, 2024,  1:17pm
                  </time>
                  <meta itemprop='dateModified' content='2024-02-03T13:17:21Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hi <a class="mention" href="/u/dhruvin-bhaliya">@Dhruvin-Bhaliya</a> ,<br>
thanks for quick replay.</p>
<p>I used it in the server script.</p>
<p>First has this setup:</p>
<ul>
<li>Doctype Event</li>
<li>Before Save</li>
<li>Code</li>
</ul>
<blockquote>
<p>frappe.make_delete_request(f‚Äô<a href="https://graph.microsoft.com/v1.0/me/events/AQMkAG" rel="noopener nofollow ugc">https://graph.microsoft.com/v1.0/me/events/AQMkAG</a> ', headers = headers, response_body = False)</p>
</blockquote>
<p>When a I save the doc the monkey patch functions is called =&gt; Ok.</p>
<p>Second one:</p>
<ul>
<li>Scheduled Event</li>
<li>Hourly</li>
<li>Code: the same as above.</li>
</ul>
<p>When the second one is executed than here is this error in Scheduled Job Log:</p>
<blockquote>
<p>Traceback (most recent call last):<br>
File ‚Äúapps/frappe/frappe/core/doctype/scheduled_job_type/scheduled_job_type.py‚Äù, line 97, in execute<br>
frappe.get_doc(‚ÄúServer Script‚Äù, script_name).execute_scheduled_method()<br>
File ‚Äúapps/frappe/frappe/core/doctype/server_script/server_script.py‚Äù, line 117, in execute_scheduled_method<br>
safe_exec(self.script)<br>
File ‚Äúapps/frappe/frappe/utils/safe_exec.py‚Äù, line 85, in safe_exec<br>
exec(<br>
File ‚Äú‚Äù, line 22, in <br>
File ‚Äúapps/frappe/frappe/integrations/utils.py‚Äù, line 49, in make_delete_request<br>
return make_request(‚ÄúDELETE‚Äù, url, **kwargs)<br>
TypeError: make_request() got an unexpected keyword argument ‚Äòresponse_body‚Äô</p>
</blockquote>
<p>Here I can find that the original path is used (apps/frappe/frappe/integrations/utils.py).</p>
<p>Maybe this is the issue of combinations: frappe cloud, server script and scheduled event.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/kittiu'><span itemprop='name'>kittiu</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-09-05T06:44:25Z' class='post-time'>
                    September 5, 2024,  6:44am
                  </time>
                  <meta itemprop='dateModified' content='2024-09-05T06:44:25Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I also came across the same issue. This is a known issue with supervisor (production setup), but I also can‚Äôt find the solution either.</p>
<p>I.e., <a href="https://discuss.frappe.io/t/monkey-patch-again-only-this-function-wont-be-patched/104608" class="inline-onebox">Monkey patch again: only this function won't be patched</a></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="https://discuss.frappe.io/t/summary-of-all-ways-to-extend-server-side-logics-in-frappe-framework/139256/9">Summary of all ways to extend server side logics in Frappe Framework</a>
                        <meta itemprop='position' content='2'>
                      </div>
                </div>
          </div>
          <div id='post_5' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/kittiu'><span itemprop='name'>kittiu</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-09-05T08:07:19Z' class='post-time'>
                    September 5, 2024,  8:07am
                  </time>
                  <meta itemprop='dateModified' content='2024-09-05T08:07:19Z'>
              <span itemprop='position'>5</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I just move the monkey patch code from hooks.py to __ init __.py in the same folder and it works now!</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_6' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/kittiu'><span itemprop='name'>kittiu</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-10-15T01:18:34Z' class='post-time'>
                    October 15, 2024,  1:18am
                  </time>
                  <meta itemprop='dateModified' content='2024-10-15T01:18:34Z'>
              <span itemprop='position'>6</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Now, problem is that, __ init __.py is called (and patch is working) even though that app is not installed in the desired site.</p>
<p>Anyone has correct way to do the monkey patching for Frappe?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_7' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/Prathyusha'><span itemprop='name'>Prathyusha</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-06-27T10:24:28Z' class='post-time'>
                    June 27, 2025, 10:24am
                  </time>
                  <meta itemprop='dateModified' content='2025-06-27T10:24:28Z'>
              <span itemprop='position'>7</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p><a class="mention" href="/u/kittiu">@kittiu</a> , <a class="mention" href="/u/jiri_sir">@Jiri_Sir</a> , <a class="mention" href="/u/dhruvin-bhaliya">@Dhruvin-Bhaliya</a></p>
<p>hi all,<br>
Currently i wrote one monkey patch to change the session expiry msg and heading.</p>
<p>Override the is_whitelisted function in the path:<br>
<code>apps/frappe/frappe/__init__.py </code></p>
<p><strong>monkey_patch.py:</strong></p>
<pre><code class="lang-auto">import frappe
from frappe import _

def custom_is_whitelisted(method):
    from frappe.utils import sanitize_html

    is_guest = frappe.session["user"] == "Guest"
    if method not in frappe.whitelisted or is_guest and method not in frappe.guest_methods:
        summary = _("üö´ Your session has expired. Please log in again to continue.")
        # detail = _("Function {0} is not whitelisted.").format(frappe.bold(f"{method.__module__}.{method.__name__}"))
        # msg = f"&lt;details&gt;&lt;summary&gt;{summary}&lt;/summary&gt;{detail}&lt;/details&gt;"

        msg = summary  # Use summary directly as message without any HTML tags
        
        frappe.throw(msg, frappe.PermissionError, title=_("Session Expired"))

    if is_guest and method not in frappe.xss_safe_methods:
        # strictly sanitize form_dict
        # escapes html characters like &lt;&gt; except for predefined tags like a, b, ul etc.
        for key, value in frappe.form_dict.items():
            if isinstance(value, str):
                frappe.form_dict[key] = sanitize_html(value)

# Apply the monkey patch
frappe.is_whitelisted = custom_is_whitelisted
</code></pre>
<p>In my custom app  <strong>__ init __.py:</strong><br>
<code>from .monkey_patch import custom_is_whitelisted</code></p>
<p>this patch is working correctly in the local but not in the frappe cloud server why??<br>
please sugguest any other ways !</p>
<p>Thanks in advance.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    <div class="erpnext-footer">
    <a href="https://frappe.io">Frappe</a>
</div>
    
  </body>
  
</html>
