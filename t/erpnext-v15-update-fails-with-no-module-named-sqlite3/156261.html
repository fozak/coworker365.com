<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>ERPnext v15 Update fails with &quot;No module named &#39;_sqlite3&#39;&quot; - Setup - Frappe Forum</title>
    <meta name="description" content="Dear all, 
for the first time in years the update a minor update of our ERPnext v15 installation failed. Update runs smoothly at first like always but then crashes when starting to patch sites: 
... 
Patching sites… 
Tra&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.2 - https://github.com/discourse/discourse version 44986e4c0c3acf127ce03216227dd11cc78f4466">
<link rel="icon" type="image/png" href="https://discuss.frappe.io/uploads/default/optimized/3X/a/5/a5e946e67fbe05a61d1c33d08894876d4d9dea7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="https://discuss.frappe.io/uploads/default/optimized/3X/a/5/a5e946e67fbe05a61d1c33d08894876d4d9dea7a_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="https://discuss.frappe.io/t/erpnext-v15-update-fails-with-no-module-named-sqlite3/156261" />

<link rel="search" type="application/opensearchdescription+xml" href="https://discuss.frappe.io/opensearch.xml" title="Frappe Forum Search">

    <link href="/stylesheets/color_definitions_light_8_12_296e8563dbd3c739bd4eafc35307bea3d2a15178.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" class="light-scheme" data-scheme-id="8"/>

<link href="/stylesheets/common_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="common"  />

  <link href="/stylesheets/desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="/stylesheets/checklist_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="checklist"  />
    <link href="/stylesheets/discourse-details_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="/stylesheets/discourse-lazy-videos_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="/stylesheets/discourse-local-dates_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="/stylesheets/discourse-narrative-bot_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="/stylesheets/discourse-solved_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-solved"  />
    <link href="/stylesheets/discourse-templates_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-templates"  />
    <link href="/stylesheets/discourse-topic-voting_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-topic-voting"  />
    <link href="/stylesheets/docker_manager_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="/stylesheets/footnote_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="/stylesheets/poll_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="poll"  />
    <link href="/stylesheets/spoiler-alert_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="/stylesheets/discourse-topic-voting_desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-topic-voting_desktop"  />
    <link href="/stylesheets/poll_desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="/stylesheets/common_theme_12_608350f9691b80d810a6d8eaf4a08f6acc589e94.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="12" data-theme-name="erpnext"/>
    <link href="/stylesheets/desktop_theme_12_1843eada91b7bd1c5a6c17799765c3af197a4c6e.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="12" data-theme-name="erpnext"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;ERPnext v15 Update fails with &quot;No module named &#39;_sqlite3&#39;&quot;&#39;" href="https://discuss.frappe.io/t/erpnext-v15-update-fails-with-no-module-named-sqlite3/156261.rss" />
    <meta property="og:site_name" content="Frappe Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://discuss.frappe.io/uploads/default/original/3X/0/b/0b28794440eb26973e11119effb9e80dcb726e09.png" />
<meta property="og:image" content="https://discuss.frappe.io/uploads/default/original/3X/0/b/0b28794440eb26973e11119effb9e80dcb726e09.png" />
<meta property="og:url" content="https://discuss.frappe.io/t/erpnext-v15-update-fails-with-no-module-named-sqlite3/156261" />
<meta name="twitter:url" content="https://discuss.frappe.io/t/erpnext-v15-update-fails-with-no-module-named-sqlite3/156261" />
<meta property="og:title" content="ERPnext v15 Update fails with &quot;No module named &#39;_sqlite3&#39;&quot;" />
<meta name="twitter:title" content="ERPnext v15 Update fails with &quot;No module named &#39;_sqlite3&#39;&quot;" />
<meta property="og:description" content="Dear all,  for the first time in years the update a minor update of our ERPnext v15 installation failed. Update runs smoothly at first like always but then crashes when starting to patch sites:  ...  Patching sites…  Traceback (most recent call last):  File “/usr/local/lib/python3.10/runpy.py”, line 196, in _run_module_as_main  return _run_code(code, main_globals, None,  File “/usr/local/lib/python3.10/runpy.py”, line 86, in _run_code  exec(code, run_globals)  File “/home/erp/frappe-bench/apps/f..." />
<meta name="twitter:description" content="Dear all,  for the first time in years the update a minor update of our ERPnext v15 installation failed. Update runs smoothly at first like always but then crashes when starting to patch sites:  ...  Patching sites…  Traceback (most recent call last):  File “/usr/local/lib/python3.10/runpy.py”, line 196, in _run_module_as_main  return _run_code(code, main_globals, None,  File “/usr/local/lib/python3.10/runpy.py”, line 86, in _run_code  exec(code, run_globals)  File “/home/erp/frappe-bench/apps/f..." />
<meta property="og:article:section" content="Install / Update" />
<meta property="og:article:section:color" content="B3B5B4" />
<meta property="og:article:section" content="Setup" />
<meta property="og:article:section:color" content="F7941D" />
<meta property="article:published_time" content="2025-10-31T16:41:55+00:00" />
<meta property="og:ignore_canonical" content="true" />


    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"ERPnext v15 Update fails with \"No module named '_sqlite3'\"","mainEntity":{"@type":"Question","name":"ERPnext v15 Update fails with \"No module named '_sqlite3'\"","text":"Dear all,\n\nfor the first time in years the update a minor update of our ERPnext v15 installation failed. Update runs smoothly at first like always but then crashes when starting to patch sites:\n\n...\n\nPatching sites…\n\nTraceback (most recent call last):\n\nFile “/usr/local/lib/python3.10/runpy.py”, line&hellip;","upvoteCount":0,"answerCount":0,"datePublished":"2025-10-31T16:41:55.832Z","author":{"@type":"Person","name":"smw","url":"https://discuss.frappe.io/u/smw"}}}</script>
  </head>
  <body class="crawler ">
    <div class="erpnext-header">
    <a href="https://frappe.io" target="_blank">Frappe.io</a>
    <a href="https://frappecloud.com" target="_blank">Frappe Cloud</a>
    <a href="https://docs.frappe.io/" target="_blank">Documentation</a>
    <a href="https://frappe.io/partners" target="_blank">Partners</a>
    <a href="https://frappe.school" target="_blank">Frappe School</a>
    <a href="https://frappecloud.com/marketplace" target="_blank">Marketplace</a>
    <a href="https://t.me/erpnext_public" target="_blank">Public Chat</a>
</div>

    <header>
  <a href="/">Frappe Forum</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="/t/erpnext-v15-update-fails-with-no-module-named-sqlite3/156261">ERPnext v15 Update fails with &quot;No module named &#39;_sqlite3&#39;&quot;</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="/c/bench/13" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #B3B5B4'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Install / Update</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="/c/bench/setup/33" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F7941D'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Setup</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='ERPnext v15 Update fails with &quot;No module named &#39;_sqlite3&#39;&quot;'>
      <link itemprop='url' href='https://discuss.frappe.io/t/erpnext-v15-update-fails-with-no-module-named-sqlite3/156261'>
      <meta itemprop='datePublished' content='2025-10-31T16:41:55Z'>
        <meta itemprop='articleSection' content='Setup'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='Frappe'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://discuss.frappe.io/uploads/default/original/3X/e/1/e1295d1f76ba489dd58f8c9b55eee88286fc9a31.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/smw'><span itemprop='name'>smw</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="https://discuss.frappe.io/t/erpnext-v15-update-fails-with-no-module-named-sqlite3/156261">


              <span class="crawler-post-infos">
                  <time  datetime='2025-10-31T16:41:55Z' class='post-time'>
                    October 31, 2025,  4:41pm
                  </time>
                  <meta itemprop='dateModified' content='2025-10-31T16:41:55Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Dear all,</p>
<p>for the first time in years the update a minor update of our ERPnext v15 installation failed. Update runs smoothly at first like always but then crashes when starting to patch sites:</p>
<p><code>...</code><br>
<code>Patching sites…</code><br>
<code>Traceback (most recent call last):</code><br>
<code>File “/usr/local/lib/python3.10/runpy.py”, line 196, in _run_module_as_main</code><br>
<code>return _run_code(code, main_globals, None,</code><br>
<code>File “/usr/local/lib/python3.10/runpy.py”, line 86, in _run_code</code><br>
<code>exec(code, run_globals)</code><br>
<code>File “/home/erp/frappe-bench/apps/frappe/frappe/utils/bench_helper.py”, line 114, in </code><br>
<code>main()</code><br>
<code>File “/home/erp/frappe-bench/apps/frappe/frappe/utils/bench_helper.py”, line 20, in main</code><br>
<code>click.Group(commands=commands)(prog_name=“bench”)</code><br>
<code>File “/home/erp/frappe-bench/env/lib/python3.10/site-packages/click/core.py”, line 1442, in </code><strong><code>call</code></strong><br>
<code>return self.main(*args, **kwargs)</code><br>
<code>File “/home/erp/frappe-bench/env/lib/python3.10/site-packages/click/core.py”, line 1363, in main</code><br>
<code>rv = self.invoke(ctx)</code><br>
<code>File “/home/erp/frappe-bench/env/lib/python3.10/site-packages/click/core.py”, line 1830, in invoke</code><br>
<code>return _process_result(sub_ctx.command.invoke(sub_ctx))</code><br>
<code>File “/home/erp/frappe-bench/env/lib/python3.10/site-packages/click/core.py”, line 1830, in invoke</code><br>
<code>return _process_result(sub_ctx.command.invoke(sub_ctx))</code><br>
<code>File “/home/erp/frappe-bench/env/lib/python3.10/site-packages/click/core.py”, line 1226, in invoke</code><br>
<code>return ctx.invoke(self.callback, **ctx.params)</code><br>
<code>File “/home/erp/frappe-bench/env/lib/python3.10/site-packages/click/core.py”, line 794, in invoke</code><br>
<code>return callback(*args, **kwargs)</code><br>
<code>File “/home/erp/frappe-bench/env/lib/python3.10/site-packages/click/decorators.py”, line 34, in new_func</code><br>
<code>return f(get_current_context(), *args, **kwargs)</code><br>
<code>File “/home/erp/frappe-bench/apps/frappe/frappe/commands/</code><strong><code>init</code></strong><code>.py”, line 29, in _func</code><br>
<code>ret = f(frappe._dict(ctx.obj), *args, **kwargs)</code><br>
<code>File “/home/erp/frappe-bench/apps/frappe/frappe/commands/site.py”, line 678, in migrate</code><br>
<code>from frappe.migrate import SiteMigration</code><br>
<code>File “/home/erp/frappe-bench/apps/frappe/frappe/migrate.py”, line 24, in </code><br>
<code>from frappe.search.website_search import build_index_for_all_routes</code><br>
<code>File “/home/erp/frappe-bench/apps/frappe/frappe/search/</code><strong><code>init</code></strong><code>.py”, line 6, in </code><br>
<code>from frappe.search.sqlite_search import SQLiteSearch</code><br>
<code>File “/home/erp/frappe-bench/apps/frappe/frappe/search/sqlite_search.py”, line 8, in </code><br>
<code>import sqlite3</code><br>
<code>File “/usr/local/lib/python3.10/sqlite3/</code><strong><code>init</code></strong><code>.py”, line 23, in </code><br>
<code>from sqlite3.dbapi2 import *</code><br>
<code>File “/usr/local/lib/python3.10/sqlite3/dbapi2.py”, line 27, in </code><br>
<code>from _sqlite3 import *</code><br>
<code>ModuleNotFoundError: No module named ‘_sqlite3’</code></p>
<p>Can anyone suggest a recovery strategy?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/smino'><span itemprop='name'>smino</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-11-01T01:57:10Z' class='post-time'>
                    November 1, 2025,  1:57am
                  </time>
                  <meta itemprop='dateModified' content='2025-11-01T01:57:10Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hi,</p>
<p>You can verify the sqlite3 module is missing using <code>bench –(sitename) console</code> , then <code>import sqlite3</code>.</p>
<p>Try <code>bench setup requirements</code> as a possible repair.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/smw'><span itemprop='name'>smw</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-11-01T10:23:03Z' class='post-time'>
                    November 1, 2025, 10:23am
                  </time>
                  <meta itemprop='dateModified' content='2025-11-01T10:23:03Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Thank you, smino, for your reply!</p>
<p>It turned out that for some reason my python binary no longer was able to access its built in sqlite3 library. Reinstalling that fixed the root cause and made the update run smoothly again.</p>
<p>Best,<br>
smw</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    <div class="erpnext-footer">
    <a href="https://frappe.io">Frappe</a>
</div>
    
  </body>
  
</html>
