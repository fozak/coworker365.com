<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>How to trigger a client-side popup from a Frappe workflow button? - ERPNext - Frappe Forum</title>
    <meta name="description" content="Hi all, 
I‚Äôm working on a Frappe app for managing PF Applications. Here‚Äôs my scenario: 


I have a workflow for PF Applications with standard states: Draft ‚Üí Submitted ‚Üí Approved ‚Üí Rejected. 


I want to keep the standar&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.2 - https://github.com/discourse/discourse version 44986e4c0c3acf127ce03216227dd11cc78f4466">
<link rel="icon" type="image/png" href="https://discuss.frappe.io/uploads/default/optimized/3X/a/5/a5e946e67fbe05a61d1c33d08894876d4d9dea7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="https://discuss.frappe.io/uploads/default/optimized/3X/a/5/a5e946e67fbe05a61d1c33d08894876d4d9dea7a_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="https://discuss.frappe.io/t/how-to-trigger-a-client-side-popup-from-a-frappe-workflow-button/155942" />

<link rel="search" type="application/opensearchdescription+xml" href="https://discuss.frappe.io/opensearch.xml" title="Frappe Forum Search">

    <link href="/stylesheets/color_definitions_light_8_12_296e8563dbd3c739bd4eafc35307bea3d2a15178.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" class="light-scheme" data-scheme-id="8"/>

<link href="/stylesheets/common_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="common"  />

  <link href="/stylesheets/desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="/stylesheets/checklist_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="checklist"  />
    <link href="/stylesheets/discourse-details_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="/stylesheets/discourse-lazy-videos_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="/stylesheets/discourse-local-dates_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="/stylesheets/discourse-narrative-bot_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="/stylesheets/discourse-solved_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-solved"  />
    <link href="/stylesheets/discourse-templates_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-templates"  />
    <link href="/stylesheets/discourse-topic-voting_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-topic-voting"  />
    <link href="/stylesheets/docker_manager_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="/stylesheets/footnote_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="/stylesheets/poll_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="poll"  />
    <link href="/stylesheets/spoiler-alert_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="/stylesheets/discourse-topic-voting_desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-topic-voting_desktop"  />
    <link href="/stylesheets/poll_desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="/stylesheets/common_theme_12_608350f9691b80d810a6d8eaf4a08f6acc589e94.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="12" data-theme-name="erpnext"/>
    <link href="/stylesheets/desktop_theme_12_1843eada91b7bd1c5a6c17799765c3af197a4c6e.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="12" data-theme-name="erpnext"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;How to trigger a client-side popup from a Frappe workflow button?&#39;" href="https://discuss.frappe.io/t/how-to-trigger-a-client-side-popup-from-a-frappe-workflow-button/155942.rss" />
    <meta property="og:site_name" content="Frappe Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://discuss.frappe.io/uploads/default/original/3X/0/b/0b28794440eb26973e11119effb9e80dcb726e09.png" />
<meta property="og:image" content="https://discuss.frappe.io/uploads/default/original/3X/0/b/0b28794440eb26973e11119effb9e80dcb726e09.png" />
<meta property="og:url" content="https://discuss.frappe.io/t/how-to-trigger-a-client-side-popup-from-a-frappe-workflow-button/155942" />
<meta name="twitter:url" content="https://discuss.frappe.io/t/how-to-trigger-a-client-side-popup-from-a-frappe-workflow-button/155942" />
<meta property="og:title" content="How to trigger a client-side popup from a Frappe workflow button?" />
<meta name="twitter:title" content="How to trigger a client-side popup from a Frappe workflow button?" />
<meta property="og:description" content="Hi all,  I‚Äôm working on a Frappe app for managing PF Applications. Here‚Äôs my scenario:    I have a workflow for PF Applications with standard states: Draft ‚Üí Submitted ‚Üí Approved ‚Üí Rejected.    I want to keep the standard workflow buttons (e.g., the ‚ÄúApprove‚Äù button) and not replace them with custom buttons.    When a user clicks Approve, I want a popup dialog to appear before finalizing the approval, where the user can fill in additional fields like UI Number and Number ID.    Currently, Frappe..." />
<meta name="twitter:description" content="Hi all,  I‚Äôm working on a Frappe app for managing PF Applications. Here‚Äôs my scenario:    I have a workflow for PF Applications with standard states: Draft ‚Üí Submitted ‚Üí Approved ‚Üí Rejected.    I want to keep the standard workflow buttons (e.g., the ‚ÄúApprove‚Äù button) and not replace them with custom buttons.    When a user clicks Approve, I want a popup dialog to appear before finalizing the approval, where the user can fill in additional fields like UI Number and Number ID.    Currently, Frappe..." />
<meta property="og:article:section" content="ERPNext" />
<meta property="og:article:section:color" content="BF1E2E" />
<meta property="og:article:tag" content="developer" />
<meta property="og:article:tag" content="erpnext" />
<meta property="og:article:tag" content="frappe" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ‚ù§" />
<meta property="article:published_time" content="2025-10-24T07:31:21+00:00" />
<meta property="og:ignore_canonical" content="true" />


    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"How to trigger a client-side popup from a Frappe workflow button?","mainEntity":{"@type":"Question","name":"How to trigger a client-side popup from a Frappe workflow button?","text":"Hi all,\n\nI‚Äôm working on a Frappe app for managing PF Applications. Here‚Äôs my scenario:\n\nI have a workflow for PF Applications with standard states: Draft ‚Üí Submitted ‚Üí Approved ‚Üí Rejected.\n\nI want to keep the standard workflow buttons (e.g., the ‚ÄúApprove‚Äù button) and not replace them with custom&hellip;","upvoteCount":0,"answerCount":0,"datePublished":"2025-10-24T07:31:21.175Z","author":{"@type":"Person","name":"Frappe795","url":"https://discuss.frappe.io/u/Frappe795"}}}</script>
  </head>
  <body class="crawler ">
    <div class="erpnext-header">
    <a href="https://frappe.io" target="_blank">Frappe.io</a>
    <a href="https://frappecloud.com" target="_blank">Frappe Cloud</a>
    <a href="https://docs.frappe.io/" target="_blank">Documentation</a>
    <a href="https://frappe.io/partners" target="_blank">Partners</a>
    <a href="https://frappe.school" target="_blank">Frappe School</a>
    <a href="https://frappecloud.com/marketplace" target="_blank">Marketplace</a>
    <a href="https://t.me/erpnext_public" target="_blank">Public Chat</a>
</div>

    <header>
  <a href="/">Frappe Forum</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="/t/how-to-trigger-a-client-side-popup-from-a-frappe-workflow-button/155942">How to trigger a client-side popup from a Frappe workflow button?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="/c/erpnext/6" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #BF1E2E'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>ERPNext</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='https://discuss.frappe.io/tag/developer' class='discourse-tag' rel="tag">developer</a>, 
            <a href='https://discuss.frappe.io/tag/erpnext' class='discourse-tag' rel="tag">erpnext</a>, 
            <a href='https://discuss.frappe.io/tag/frappe' class='discourse-tag' rel="tag">frappe</a>
        </div>
      </div>
  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='How to trigger a client-side popup from a Frappe workflow button?'>
      <link itemprop='url' href='https://discuss.frappe.io/t/how-to-trigger-a-client-side-popup-from-a-frappe-workflow-button/155942'>
      <meta itemprop='datePublished' content='2025-10-24T07:31:21Z'>
        <meta itemprop='articleSection' content='ERPNext'>
      <meta itemprop='keywords' content='developer, erpnext, frappe'>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='Frappe'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://discuss.frappe.io/uploads/default/original/3X/e/1/e1295d1f76ba489dd58f8c9b55eee88286fc9a31.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/Frappe795'><span itemprop='name'>Frappe795</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="https://discuss.frappe.io/t/how-to-trigger-a-client-side-popup-from-a-frappe-workflow-button/155942">


              <span class="crawler-post-infos">
                  <time  datetime='2025-10-24T07:31:21Z' class='post-time'>
                    October 24, 2025,  7:31am
                  </time>
                  <meta itemprop='dateModified' content='2025-10-24T07:31:21Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hi all,</p>
<p>I‚Äôm working on a <strong>Frappe app</strong> for managing PF Applications. Here‚Äôs my scenario:</p>
<ul>
<li>
<p>I have a <strong>workflow for PF Applications</strong> with standard states: Draft ‚Üí Submitted ‚Üí Approved ‚Üí Rejected.</p>
</li>
<li>
<p>I want to <strong>keep the standard workflow buttons</strong> (e.g., the ‚ÄúApprove‚Äù button) and <strong>not replace them with custom buttons</strong>.</p>
</li>
<li>
<p>When a user clicks <strong>Approve</strong>, I want a <strong>popup dialog</strong> to appear <strong>before finalizing the approval</strong>, where the user can fill in additional fields like <code>UI Number</code> and <code>Number ID</code>.</p>
</li>
<li>
<p>Currently, Frappe workflows allow <strong>Update Field ‚Üí approve = 1</strong> when a workflow transition occurs. My idea was to <strong>depend on a checkbox field</strong> updated by the workflow and trigger the popup client-side based on that field.</p>
</li>
</ul>
<p><strong>Problem:</strong></p>
<ul>
<li>
<p>Field triggers (<code>approve: function(frm){}</code>) do not fire when the workflow updates the field server-side.</p>
</li>
<li>
<p>MutationObservers or DOM hacks fail because workflow buttons are handled internally by Frappe‚Äôs JS.</p>
</li>
<li>
<p>Server-side hooks (<code>before_workflow_action</code>, <code>on_update</code>) work for automatic field updates, emails, or logs, but <strong>cannot show client-side popups</strong>.</p>
</li>
</ul>
<p><strong>Concept / Requirement:</strong></p>
<ol>
<li>
<p>Workflow button must stay <strong>as-is</strong>.</p>
</li>
<li>
<p>Popup must appear <strong>client-side</strong> when the workflow approves, allowing users to input required fields.</p>
</li>
<li>
<p>Workflow must proceed normally after the popup.</p>
</li>
<li>
<p>Prefer a <strong>solution that combines workflow automation with optional popup input</strong>.</p>
</li>
</ol>
<p>I‚Äôd love advice on:</p>
<ul>
<li>
<p>Best practices for <strong>integrating client-side popups with Frappe workflow buttons</strong>.</p>
</li>
<li>
<p>Whether relying on a <strong>checkbox field updated by workflow</strong> is the most reliable approach.</p>
</li>
<li>
<p>Any alternative patterns that let me <strong>keep workflow buttons while capturing user input before approval</strong>.</p>
</li>
</ul>
<p>Thanks in advance for your guidance!</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/peterg'><span itemprop='name'>peterg</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-10-25T07:13:36Z' class='post-time'>
                    October 25, 2025,  7:13am
                  </time>
                  <meta itemprop='dateModified' content='2025-10-25T07:13:36Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hi there,</p>
<p>I‚Äôm not aware of any built-in way to do this. As I understand it, the client-side <code>before_workflow_action</code> hook doesn‚Äôt allow you to prevent default behavior.</p>
<p>You could do it with a client script, however. On refresh, you‚Äôd just clear out the workflow actions made by default and then replace them with whatever code you want. For reference, the default behavior is defined here:</p>
<aside class="onebox githubblob" data-onebox-src="https://github.com/frappe/frappe/blob/2f06d8a7c74b903c27f741c1a1e520647e122ed0/frappe/public/js/frappe/form/workflow.js#L99">
  <header class="source">

      <a href="https://github.com/frappe/frappe/blob/2f06d8a7c74b903c27f741c1a1e520647e122ed0/frappe/public/js/frappe/form/workflow.js#L99" target="_blank" rel="noopener">github.com/frappe/frappe</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/frappe/frappe/blob/2f06d8a7c74b903c27f741c1a1e520647e122ed0/frappe/public/js/frappe/form/workflow.js#L99" target="_blank" rel="noopener">frappe/public/js/frappe/form/workflow.js</a></h4>

<div class="git-blob-info">
  <a href="https://github.com/frappe/frappe/blob/2f06d8a7c74b903c27f741c1a1e520647e122ed0/frappe/public/js/frappe/form/workflow.js#L99" rel="noopener"><code>2f06d8a7c</code></a>
</div>



    <pre class="onebox"><code class="lang-js">
      <ol class="start lines" start="89" style="counter-reset: li-counter 88 ;">
          <li>			if (</li>
          <li>				user === "Administrator" ||</li>
          <li>				transition.allow_self_approval ||</li>
          <li>				user !== me.frm.doc.owner</li>
          <li>			) {</li>
          <li>				approval_access = true;</li>
          <li>			}</li>
          <li>			return approval_access;</li>
          <li>		}</li>
          <li></li>
          <li class="selected">		frappe.workflow.get_transitions(this.frm.doc).then((transitions) =&gt; {</li>
          <li>			this.frm.page.clear_actions_menu();</li>
          <li>			transitions.forEach((d) =&gt; {</li>
          <li>				if (frappe.user_roles.includes(d.allowed) &amp;&amp; has_approval_access(d)) {</li>
          <li>					added = true;</li>
          <li>					me.frm.page.add_action_item(__(d.action), function () {</li>
          <li>						// set the workflow_action for use in form scripts</li>
          <li>						frappe.dom.freeze();</li>
          <li>						me.frm.selected_workflow_action = d.action;</li>
          <li>						me.frm.script_manager.trigger("before_workflow_action").then(() =&gt; {</li>
          <li>							frappe</li>
      </ol>
    </code></pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/Frappe795'><span itemprop='name'>Frappe795</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-10-25T07:26:41Z' class='post-time'>
                    October 25, 2025,  7:26am
                  </time>
                  <meta itemprop='dateModified' content='2025-10-25T07:26:41Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Helps a lot thank you</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    <div class="erpnext-footer">
    <a href="https://frappe.io">Frappe</a>
</div>
    
  </body>
  
</html>
