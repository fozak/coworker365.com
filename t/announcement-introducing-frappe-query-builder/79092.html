<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>[Announcement] Introducing Frappe Query Builder - Community - Frappe Forum</title>
    <meta name="description" content="We‚Äôve wanted to add a more Pythonic way to manage queries in Frappe for a while. So, we finally got around and did it this month :smile: . 
So you want to fetch some data from your database, but you need something more p&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.2 - https://github.com/discourse/discourse version 44986e4c0c3acf127ce03216227dd11cc78f4466">
<link rel="icon" type="image/png" href="https://discuss.frappe.io/uploads/default/optimized/3X/a/5/a5e946e67fbe05a61d1c33d08894876d4d9dea7a_2_32x32.png">
<link rel="apple-touch-icon" type="image/png" href="https://discuss.frappe.io/uploads/default/optimized/3X/a/5/a5e946e67fbe05a61d1c33d08894876d4d9dea7a_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="https://discuss.frappe.io/t/announcement-introducing-frappe-query-builder/79092" />

<link rel="search" type="application/opensearchdescription+xml" href="https://discuss.frappe.io/opensearch.xml" title="Frappe Forum Search">

    <link href="/stylesheets/color_definitions_light_8_12_296e8563dbd3c739bd4eafc35307bea3d2a15178.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" class="light-scheme" data-scheme-id="8"/>

<link href="/stylesheets/common_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="common"  />

  <link href="/stylesheets/desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="/stylesheets/checklist_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="checklist"  />
    <link href="/stylesheets/discourse-details_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="/stylesheets/discourse-lazy-videos_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="/stylesheets/discourse-local-dates_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="/stylesheets/discourse-narrative-bot_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="/stylesheets/discourse-solved_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-solved"  />
    <link href="/stylesheets/discourse-templates_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-templates"  />
    <link href="/stylesheets/discourse-topic-voting_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-topic-voting"  />
    <link href="/stylesheets/docker_manager_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="/stylesheets/footnote_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="/stylesheets/poll_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="poll"  />
    <link href="/stylesheets/spoiler-alert_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="/stylesheets/discourse-topic-voting_desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="discourse-topic-voting_desktop"  />
    <link href="/stylesheets/poll_desktop_eec39e19a85cf59c80446f577a88d854b2ec7e58.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="/stylesheets/common_theme_12_608350f9691b80d810a6d8eaf4a08f6acc589e94.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="12" data-theme-name="erpnext"/>
    <link href="/stylesheets/desktop_theme_12_1843eada91b7bd1c5a6c17799765c3af197a4c6e.css?__ws=discuss.frappe.io" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="12" data-theme-name="erpnext"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;[Announcement] Introducing Frappe Query Builder&#39;" href="https://discuss.frappe.io/t/announcement-introducing-frappe-query-builder/79092.rss" />
    <meta property="og:site_name" content="Frappe Forum" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://discuss.frappe.io/uploads/default/original/3X/0/b/0b28794440eb26973e11119effb9e80dcb726e09.png" />
<meta property="og:image" content="https://discuss.frappe.io/uploads/default/original/3X/0/b/0b28794440eb26973e11119effb9e80dcb726e09.png" />
<meta property="og:url" content="https://discuss.frappe.io/t/announcement-introducing-frappe-query-builder/79092" />
<meta name="twitter:url" content="https://discuss.frappe.io/t/announcement-introducing-frappe-query-builder/79092" />
<meta property="og:title" content="[Announcement] Introducing Frappe Query Builder" />
<meta name="twitter:title" content="[Announcement] Introducing Frappe Query Builder" />
<meta property="og:description" content="We‚Äôve wanted to add a more Pythonic way to manage queries in Frappe for a while. So, we finally got around and did it this month üòÑ .  So you want to fetch some data from your database, but you need something more powerful than frappe.get_all? This is when most resort to using frappe.db.sql, and the brave-hearts use multiple frappe.get_all calls along with pandas, along with a for loop or two. With our query builder, we aim to ease this pain a bit. Here‚Äôs how it‚Äôd look like to run a select ..." />
<meta name="twitter:description" content="We‚Äôve wanted to add a more Pythonic way to manage queries in Frappe for a while. So, we finally got around and did it this month üòÑ .  So you want to fetch some data from your database, but you need something more powerful than frappe.get_all? This is when most resort to using frappe.db.sql, and the brave-hearts use multiple frappe.get_all calls along with pandas, along with a for loop or two. With our query builder, we aim to ease this pain a bit. Here‚Äôs how it‚Äôd look like to run a select ..." />
<meta property="og:article:section" content="Community" />
<meta property="og:article:section:color" content="BF1E2E" />
<meta property="og:article:tag" content="sql" />
<meta property="og:article:tag" content="developer" />
<meta property="og:article:tag" content="frappe" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="8 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="106 ‚ù§" />
<meta property="article:published_time" content="2021-08-13T17:17:26+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="next" href="/t/announcement-introducing-frappe-query-builder/79092?page=2">

    <script type="application/ld+json">{"@context":"http://schema.org","@type":"QAPage","name":"[Announcement] Introducing Frappe Query Builder","mainEntity":{"@type":"Question","name":"[Announcement] Introducing Frappe Query Builder","text":"We‚Äôve wanted to add a more Pythonic way to manage queries in Frappe for a while. So, we finally got around and did it this month :smile: .\n\nSo you want to fetch some data from your database, but you need something more powerful than frappe.get_all? This is when most resort to using frappe.db.sql, an&hellip;","upvoteCount":49,"answerCount":0,"datePublished":"2021-08-13T17:17:26.462Z","author":{"@type":"Person","name":"gavindsouza","url":"https://discuss.frappe.io/u/gavindsouza"}}}</script>
  </head>
  <body class="crawler ">
    <div class="erpnext-header">
    <a href="https://frappe.io" target="_blank">Frappe.io</a>
    <a href="https://frappecloud.com" target="_blank">Frappe Cloud</a>
    <a href="https://docs.frappe.io/" target="_blank">Documentation</a>
    <a href="https://frappe.io/partners" target="_blank">Partners</a>
    <a href="https://frappe.school" target="_blank">Frappe School</a>
    <a href="https://frappecloud.com/marketplace" target="_blank">Marketplace</a>
    <a href="https://t.me/erpnext_public" target="_blank">Public Chat</a>
</div>

    <header>
  <a href="/">Frappe Forum</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="/t/announcement-introducing-frappe-query-builder/79092">[Announcement] Introducing Frappe Query Builder</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="/c/community/37" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #BF1E2E'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Community</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='https://discuss.frappe.io/tag/sql' class='discourse-tag' rel="tag">sql</a>, 
            <a href='https://discuss.frappe.io/tag/developer' class='discourse-tag' rel="tag">developer</a>, 
            <a href='https://discuss.frappe.io/tag/frappe' class='discourse-tag' rel="tag">frappe</a>
        </div>
      </div>
  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='[Announcement] Introducing Frappe Query Builder'>
      <link itemprop='url' href='https://discuss.frappe.io/t/announcement-introducing-frappe-query-builder/79092'>
      <meta itemprop='datePublished' content='2021-08-13T17:17:26Z'>
        <meta itemprop='articleSection' content='Community'>
      <meta itemprop='keywords' content='sql, developer, frappe'>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='Frappe'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://discuss.frappe.io/uploads/default/original/3X/e/1/e1295d1f76ba489dd58f8c9b55eee88286fc9a31.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/gavindsouza'><span itemprop='name'>gavindsouza</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="https://discuss.frappe.io/t/announcement-introducing-frappe-query-builder/79092">


              <span class="crawler-post-infos">
                  <time  datetime='2021-08-13T17:17:26Z' class='post-time'>
                    August 13, 2021,  5:17pm
                  </time>
                  <meta itemprop='dateModified' content='2021-08-13T17:48:14Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>We‚Äôve wanted to add a more Pythonic way to manage queries in Frappe for a while. So, we finally got around and did it this month <img src="https://discuss.frappe.io/images/emoji/twitter/smile.png?v=12" title=":smile:" class="emoji" alt=":smile:" loading="lazy" width="20" height="20"> .</p>
<p>So you want to fetch some data from your database, but you need something more powerful than <code>frappe.get_all</code>? This is when most resort to using <code>frappe.db.sql</code>, and the brave-hearts use multiple <code>frappe.get_all</code> calls along with <code>pandas</code>, along with a <code>for</code> loop or two. With our query builder, we aim to ease this pain a bit. Here‚Äôs how it‚Äôd look like to run a select with <strong>or</strong>, and <strong>and</strong> filters:</p>
<pre><code class="lang-python">customer = frappe.qb.DocType('Customer')
filtered_data = (
    frappe.qb.from_(customer)
        .select(customer.name, customer.fname, customer.lname, customer.phone)
        .where((customer.fname == 'Max') | customer.id.like('RA%'))
        .where(customer.lname == 'Mustermann')
).run(as_dict=True)
</code></pre>
<p>Okay, this is a relatively simpler query. But, you could write much complex queries; subqueries, CTEs, recursive, joins too. I didn‚Äôt add an example for those here because that‚Äôd get a bit too much for this light-hearted post.</p>
<p>One particularly neat thing about our query builder is that it evaluates your queries to whatever DBMS your site‚Äôs running on. Yup, you can write cross-database apps without having to use <code>frappe.db.multisql</code>. In fact, we tried to get rid of all the multisql calls in Frappe itself‚Ä¶there‚Äôs still a couple left though.</p>
<p>The above query object, evaluates differently on Postgres and MariaDB as you can see here:</p>
<pre><code class="lang-sql"># Postgres query
SELECT "name","fname","lname","phone" FROM "tabCustomer" WHERE ("fname"='Max' OR "id" LIKE 'RA%') AND "lname"='Mustermann'

# MariaDB query
SELECT `name`,`fname`,`lname`,`phone` FROM `tabCustomer` WHERE (`fname`='Max' OR `id` LIKE 'RA%') AND `lname`='Mustermann'
</code></pre>
<p>We‚Äôve documented the available APIs so that you can get started writing queries with <code>frappe.qb</code>. You can read further about it here:</p>
<p><a href="https://frappeframework.com/docs/user/en/api/query-builder" class="onebox" target="_blank" rel="noopener">https://frappeframework.com/docs/user/en/api/query-builder</a></p>
<p>Once you‚Äôve familiarised yourself with what Frappe sugar is available, you can find comprehensive docs about all possible usages, check out PyPika‚Äôs <a href="https://pypika.readthedocs.io/en/latest/">official docs</a> and their even more comprehensive README:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://github.com/kayak/pypika">
  <header class="source">
      <img src="https://github.githubassets.com/favicons/favicon.svg" class="site-icon" width="32" height="32">

      <a href="https://github.com/kayak/pypika" target="_blank" rel="noopener">GitHub</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/345;"><img src="https://opengraph.githubassets.com/b6587dcf87a2cd7ac43c9df07133f063c29f23dce10bd343c9d97358c2e296b5/kayak/pypika" class="thumbnail" width="690" height="345"></div>

<h3><a href="https://github.com/kayak/pypika" target="_blank" rel="noopener">GitHub - kayak/pypika: PyPika is a python SQL query builder that exposes the...</a></h3>

  <p>PyPika is a python SQL query builder that exposes the full richness of the SQL language using a syntax that reflects the resulting query. PyPika excels at all sorts of SQL queries but is especially...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<hr>
<p>Here‚Äôs the PRs that introduced this feature in Frappe. <strong>It‚Äôs currently on <code>develop</code> and will be a part of Frappe Version 14</strong>. Meanwhile, we‚Äôre going to try and convert as many raw queries to this notation.</p>
<p><a href="https://github.com/frappe/frappe/pull/13705" class="onebox" target="_blank" rel="noopener">https://github.com/frappe/frappe/pull/13705</a></p>
<p><a href="https://github.com/frappe/frappe/pull/13841" class="onebox" target="_blank" rel="noopener">https://github.com/frappe/frappe/pull/13841</a></p>
<hr>
<p>Apart from PyPika, we considered a few other query builders and ORMs. SQLAlchemy seemed to be a strong contender in the early stages. We soon faced a barrage of issues as we started implementing it. Some of our work on it is documented in this PR:</p>
<p><a href="https://github.com/frappe/frappe/pull/13732" class="onebox" target="_blank" rel="noopener">https://github.com/frappe/frappe/pull/13732</a></p>
<hr>
<p>Apart from these, we‚Äôve been making active efforts in extending the existing Database APIs to make them more powerful. We aim to make it easier for everyone to write Frappe Apps, and reduce the interfaces for bugs while we‚Äôre at it <img src="https://discuss.frappe.io/images/emoji/twitter/wink.png?v=12" title=":wink:" class="emoji" alt=":wink:" loading="lazy" width="20" height="20"> .</p>
<p>We converted close to 80 raw queries to use the Database APIs. This enabled us to further improve on the low level <code>frappe.db.delete</code> API and introduce a new <code>frappe.db.truncate</code> too.</p>
<p><a href="https://github.com/frappe/frappe/pull/13753" class="onebox" target="_blank" rel="noopener">https://github.com/frappe/frappe/pull/13753</a></p>
<p>We‚Äôre also trying to expand the feature set in <code>DatabaseQuery</code> it‚Äôs the engine that supports <code>frappe.get_list</code>, <code>frappe.get_all</code>, list views, etc. Support for pure column or data comparisons, and more Pythonic APIs for using Pseudo columns and better handling for SQL functions is <em>coming soon‚Ä¶</em></p>
<p><a href="https://github.com/frappe/frappe/pull/13845" class="onebox" target="_blank" rel="noopener">https://github.com/frappe/frappe/pull/13845</a></p>
<hr>
<p>Feel free to drop your suggestions or ideas for improvements <img src="https://discuss.frappe.io/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="49" />
              <span class='post-likes'>49 Likes</span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="https://discuss.frappe.io/t/erpnext-and-vitess/81820/4">ERPNext and Vitess</a>
                        <meta itemprop='position' content='9'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="https://discuss.frappe.io/t/erpnext-postgresql-support/67069/6">ERPNext PostgreSQL Support</a>
                        <meta itemprop='position' content='10'>
                      </div>
                </div>
          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/laurence'><span itemprop='name'>laurence</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-14T04:02:49Z' class='post-time'>
                    August 14, 2021,  4:02am
                  </time>
                  <meta itemprop='dateModified' content='2021-08-14T04:02:49Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Exciting stuff! Will this be available on <a href="http://ERPNext.com" rel="noopener nofollow ugc">ERPNext.com</a> and Frappe.cloud?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/peterg'><span itemprop='name'>peterg</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-14T10:52:34Z' class='post-time'>
                    August 14, 2021, 10:52am
                  </time>
                  <meta itemprop='dateModified' content='2021-08-14T10:52:34Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="gavindsouza" data-post="1" data-topic="79092">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://discuss.frappe.io/user_avatar/discuss.frappe.io/gavindsouza/48/55161_2.png" class="avatar"> gavindsouza:</div>
<blockquote>
<p>Support for pure column or data comparisons, and more Pythonic APIs for using Pseudo columns and better handling for SQL functions is <em>coming soon‚Ä¶</em></p>
</blockquote>
</aside>
<p>This is an enormously huge step for Frappe as a data framework. Please allow Pseudo-columns (virtual fields?) to initiate joins and simple computations. ERPNext frequently struggles with <a href="https://en.wikipedia.org/wiki/Don't_repeat_yourself">data normalization</a>, and this kind of change will make life so much better for developers and users both!</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="4" />
              <span class='post-likes'>4 Likes</span>
            </div>

          </div>
          <div id='post_6' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/mujeerhashmi'><span itemprop='name'>mujeerhashmi</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-14T15:03:59Z' class='post-time'>
                    August 14, 2021,  3:03pm
                  </time>
                  <meta itemprop='dateModified' content='2021-08-14T15:03:59Z'>
              <span itemprop='position'>6</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>This is so impressive. It is going to help people build awesome customized reports with ease. Why don‚Äôt we merge this to v13 as well?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="3" />
              <span class='post-likes'>3 Likes</span>
            </div>

          </div>
          <div id='post_7' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/Suresh_Thakor'><span itemprop='name'>Suresh_Thakor</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-14T16:34:15Z' class='post-time'>
                    August 14, 2021,  4:34pm
                  </time>
                  <meta itemprop='dateModified' content='2021-08-14T16:34:15Z'>
              <span itemprop='position'>7</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Thanks for your effort and contribution towards ERPNext. This will save lot of time those who struggling to achieve MIS Report.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
          <div id='post_8' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/SubhajitDey'><span itemprop='name'>SubhajitDey</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-15T11:25:07Z' class='post-time'>
                    August 15, 2021, 11:25am
                  </time>
                  <meta itemprop='dateModified' content='2021-08-15T11:25:07Z'>
              <span itemprop='position'>8</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Will this frappe query builder also consider data restrictions that set from user permissions,  field permissions, etc. ?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="8" />
              <span class='post-likes'>8 Likes</span>
            </div>

          </div>
          <div id='post_9' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/khushal_t'><span itemprop='name'>khushal_t</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-16T07:15:46Z' class='post-time'>
                    August 16, 2021,  7:15am
                  </time>
                  <meta itemprop='dateModified' content='2021-08-16T07:15:46Z'>
              <span itemprop='position'>9</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Syntactically previous ORM was better to use but if a new one provides better performance and complex queries then its good to have it <img src="https://discuss.frappe.io/images/emoji/twitter/slightly_smiling_face.png?v=12" title=":slightly_smiling_face:" class="emoji" alt=":slightly_smiling_face:" loading="lazy" width="20" height="20"></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

          </div>
          <div id='post_10' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/gavindsouza'><span itemprop='name'>gavindsouza</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-17T06:08:09Z' class='post-time'>
                    August 17, 2021,  6:08am
                  </time>
                  <meta itemprop='dateModified' content='2021-08-17T06:08:09Z'>
              <span itemprop='position'>10</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="laurence" data-post="2" data-topic="79092">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://discuss.frappe.io/user_avatar/discuss.frappe.io/laurence/48/24525_2.png" class="avatar"> laurence:</div>
<blockquote>
<p>Exciting stuff! Will this be available on <a href="http://ERPNext.com">ERPNext.com</a> and Frappe.cloud?</p>
</blockquote>
</aside>
<p>It‚Äôs currently only on <code>develop</code>, <a href="https://github.com/frappe/frappe/pull/13950">the PR</a> for the v13 backport has been raised and will likely be in the next (v13.10.0) of Frappe. So, both should be available as they‚Äôre deployed on the platforms. Contact support directly to get a clearer deployment plan for <a href="http://ERPNext.com">ERPNext.com</a> and <a href="https://frappe.cloud">frappe.cloud</a> teams.</p>
<aside class="quote no-group" data-username="peterg" data-post="4" data-topic="79092">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://discuss.frappe.io/user_avatar/discuss.frappe.io/peterg/48/55463_2.png" class="avatar"> peterg:</div>
<blockquote>
<p>This is an enormously huge step for Frappe as a data framework. Please allow Pseudo-columns (virtual fields?) to initiate joins and simple computations. ERPNext frequently struggles with <a href="https://en.wikipedia.org/wiki/Don't_repeat_yourself">data normalization </a>, and this kind of change will make life so much better for developers and users both!</p>
</blockquote>
</aside>
<p>So, there‚Äôs nothing restricting us from using pseudo columns in the current implementation. You can import pseudo columns from the <code>pypika.pseudocolumns</code> module and use them freely with the query builder attached to <code>frappe.qb</code>. Checkout the examples under the Pypika tests for them via the link below. The only difference is <code>Query</code> is replaced with <code>frappe.qb</code>. Also, we‚Äôre planning on making all the imports relative from <code>pypika</code> to <code>frappe.query_builder</code>, but it‚Äôs not implemented yet. The general idea is that <code>from pypika.pseudocolumns import SysDate</code> would be the same as <code>from frappe.query_builder.pseudocolumns import SysDate</code>.</p>
<aside class="onebox githubblob" data-onebox-src="https://github.com/kayak/pypika/blob/master/pypika/tests/test_pseudocolumns.py#L39-L51">
  <header class="source">

      <a href="https://github.com/kayak/pypika/blob/master/pypika/tests/test_pseudocolumns.py#L39-L51" target="_blank" rel="noopener">github.com</a>
  </header>

  <article class="onebox-body">
    <h4><a href="https://github.com/kayak/pypika/blob/master/pypika/tests/test_pseudocolumns.py#L39-L51" target="_blank" rel="noopener">kayak/pypika/blob/master/pypika/tests/test_pseudocolumns.py#L39-L51</a></h4>



    <pre class="onebox"><code class="lang-py">
      <ol class="start lines" start="39" style="counter-reset: li-counter 38 ;">
          <li>def test_can_be_used_in_a_select_statement(self):</li>
          <li>    query = Query.from_(self.table1).where(self.table1.is_active == 1).select(PseudoColumn("abcde"))</li>
          <li></li>
          <li>    self.assertEqual(str(query), 'SELECT abcde FROM "table1" WHERE "is_active"=1')</li>
          <li></li>
          <li>def test_can_be_used_in_a_where_clause(self):</li>
          <li>    query = Query.from_(self.table1).where(PseudoColumn("abcde") &gt; 1).select(self.table1.is_active)</li>
          <li></li>
          <li>    self.assertEqual(str(query), 'SELECT "is_active" FROM "table1" WHERE abcde&gt;1')</li>
          <li></li>
          <li>def test_can_be_used_in_orderby(self):</li>
          <li>    query = Query.from_(self.table1).select(self.table1.abcde.as_("some_name")).orderby(PseudoColumn("some_name"))</li>
          <li>    self.assertEqual(str(query), 'SELECT "abcde" "some_name" FROM "table1" ORDER BY some_name')</li>
      </ol>
    </code></pre>



  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="mujeerhashmi" data-post="6" data-topic="79092" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://discuss.frappe.io/user_avatar/discuss.frappe.io/mujeerhashmi/48/27999_2.png" class="avatar"> mujeerhashmi:</div>
<blockquote>
<p>This is so impressive. It is going to help people build awesome customized reports with ease. Why don‚Äôt we merge this to v13 as well?</p>
</blockquote>
</aside>
<p>A PR is open for the same. It would likely be introduced in the v13.10.0 release, if all goes well <img src="https://discuss.frappe.io/images/emoji/twitter/sweat_smile.png?v=12" title=":sweat_smile:" class="emoji" alt=":sweat_smile:" loading="lazy" width="20" height="20"></p>
<aside class="onebox githubpullrequest" data-onebox-src="https://github.com/frappe/frappe/pull/13950">
  <header class="source">

      <a href="https://github.com/frappe/frappe/pull/13950" target="_blank" rel="noopener">github.com/frappe/frappe</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">



    <div class="github-icon-container" title="Pull Request">
      <svg width="60" height="60" class="github-icon" viewBox="0 0 12 16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
    </div>

  <div class="github-info-container">



      <h4>
        <a href="https://github.com/frappe/frappe/pull/13950" target="_blank" rel="noopener">feat: Frappe Query Builder (v13 backport)</a>
      </h4>

    <div class="branches">
      <code>frappe:version-13-hotfix</code> ‚Üê <code>frappe:mergify/bp/version-13-hotfix/pr-13705</code>
    </div>

      <div class="github-info">
        <div class="date">
          opened <span class="discourse-local-date" data-format="ll" data-date="2021-08-17" data-time="05:06:49" data-timezone="UTC">05:06AM - 17 Aug 21 UTC</span>
        </div>

        <div class="user">
          <a href="https://github.com/apps/mergify" target="_blank" rel="noopener">
            <img alt="mergify[bot]" src="https://avatars.githubusercontent.com/in/10562?v=4" class="onebox-avatar-inline" width="20" height="20">
            mergify[bot]
          </a>
        </div>

        <div class="lines" title="28 commits changed 20 files with 526 additions and 125 deletions">
          <a href="https://github.com/frappe/frappe/pull/13950/files" target="_blank" rel="noopener">
            <span class="added">+526</span>
            <span class="removed">-125</span>
          </a>
        </div>
      </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">v13 port of #13705

Initial plan was to backport only the query builder (`frap<span class="show-more-container"><a href="https://github.com/frappe/frappe/pull/13950" target="_blank" rel="noopener" class="show-more">‚Ä¶</a></span><span class="excerpt hidden">pe.qb`) and it's utils, tests and `frappe.db` enhancements but it got a bit complicated. So decided to backport the whole PR because it seems to be working just fine anyway.

So, this PR adds a query builder (current latest from `develop`) and changes implementations for previously written `frappe.db.multisql` queries, `frappe.db.delete` and `frappe.db.truncate` too.

Docs: https://github.com/frappe/frappe_docs/pull/169</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<aside class="quote no-group" data-username="Suresh_Thakor" data-post="7" data-topic="79092" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://discuss.frappe.io/user_avatar/discuss.frappe.io/suresh_thakor/48/55088_2.png" class="avatar"> Suresh_Thakor:</div>
<blockquote>
<p>Thanks for your effort and contribution towards ERPNext. This will save lot of time those who struggling to achieve MIS Report.</p>
</blockquote>
</aside>
<p>Looking forward to see all the ways this query builder gets used in the future <img src="https://discuss.frappe.io/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>
<aside class="quote no-group" data-username="SubhajitDey" data-post="8" data-topic="79092" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://discuss.frappe.io/user_avatar/discuss.frappe.io/subhajitdey/48/27950_2.png" class="avatar"> SubhajitDey:</div>
<blockquote>
<p>Will this frappe query builder also consider data restrictions that set from user permissions, field permissions, etc. ?</p>
</blockquote>
</aside>
<p>Not currently. At current implementation, it works purely as a more Pythonic <code>frappe.db.sql</code> and <code>frappe.db.multisql</code> replacement. But, it‚Äôs something that did come up while developing this. At this point, I‚Äôm looking into the possibilities of permission management through the query builder. Would be able to say something solid about this after the upcoming <code>DatabaseQuery</code> updates.</p>
<aside class="quote no-group" data-username="khushal_t" data-post="9" data-topic="79092">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://discuss.frappe.io/user_avatar/discuss.frappe.io/khushal_t/48/55125_2.png" class="avatar"> khushal_t:</div>
<blockquote>
<p>Syntactically previous ORM was better to use but if a new one provides better performance and complex queries then its good to have it <img src="https://discuss.frappe.io/images/emoji/twitter/slightly_smiling_face.png?v=12" title=":slightly_smiling_face:" class="emoji" alt=":slightly_smiling_face:" loading="lazy" width="20" height="20"></p>
</blockquote>
</aside>
<p>Being the raw sql replacement it is, I doubt  you‚Äôd see any performance improvement. The motivations for this were to ease development and extend Frappe‚Äôs capabilities to run complex queries without resorting to <code>frappe.db.sql</code>.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="6" />
              <span class='post-likes'>6 Likes</span>
            </div>

          </div>
          <div id='post_11' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/kisg'><span itemprop='name'>kisg</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-17T06:11:26Z' class='post-time'>
                    August 17, 2021,  6:11am
                  </time>
                  <meta itemprop='dateModified' content='2021-08-17T06:11:26Z'>
              <span itemprop='position'>11</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>This is great stuff! Thank you!</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
          <div id='post_12' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/szufisher'><span itemprop='name'>szufisher</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-17T07:09:34Z' class='post-time'>
                    August 17, 2021,  7:09am
                  </time>
                  <meta itemprop='dateModified' content='2021-08-17T07:09:34Z'>
              <span itemprop='position'>12</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="gavindsouza" data-post="10" data-topic="79092">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://discuss.frappe.io/user_avatar/discuss.frappe.io/gavindsouza/48/55161_2.png" class="avatar"> gavindsouza:</div>
<blockquote>
<p>possibilities of permission management through the query builder</p>
</blockquote>
</aside>
<p>Looking forward to see it implemented.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_13' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/peterg'><span itemprop='name'>peterg</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-17T09:32:44Z' class='post-time'>
                    August 17, 2021,  9:32am
                  </time>
                  <meta itemprop='dateModified' content='2021-08-17T09:32:44Z'>
              <span itemprop='position'>13</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="gavindsouza" data-post="10" data-topic="79092">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://discuss.frappe.io/user_avatar/discuss.frappe.io/gavindsouza/48/55161_2.png" class="avatar"> gavindsouza:</div>
<blockquote>
<p>So, there‚Äôs nothing restricting us from using pseudo columns in the current implementation.</p>
</blockquote>
</aside>
<p>I‚Äôm not familiar enough with pypika yet, so I‚Äôm not quite sure what these demos are doing. Would the pseudo columns described here allow for table joins?</p>
<p>I.e., on sales invoice, I‚Äôd like to be able to create a virtual field that links the phone number field in a linked customer document. This is similar to what the ‚ÄúFetch From‚Äù property does in form customization, but taking place at the database rather than UI level. Is this going to be possible?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_14' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/brian_pond'><span itemprop='name'>brian_pond</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-18T21:27:58Z' class='post-time'>
                    August 18, 2021,  9:27pm
                  </time>
                  <meta itemprop='dateModified' content='2021-08-18T21:27:58Z'>
              <span itemprop='position'>14</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I‚Äôve got mixed feelings on this.</p>
<p><strong>Pros:</strong></p>
<ul>
<li>
<p>ERPNext has needed an ORM-type feature for a very long time.  This was definitely a missing piece that separated ERPNext from well-known, commercial products.</p>
</li>
<li>
<p>Instead of reinventing the wheel, it will use PyPika.  Over 1,300 GitHub stars is quite a <strong>lot</strong>.  Which hopefully means the package has some longevity and support.</p>
</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>
<p>Again, the ERPNext learning curve increases.  We‚Äôre now forced to learn <em>another</em> vendor-specific syntax.  At a glance, it does not appear ‚Äútoo‚Äù difficult.  Still, that‚Äôs one more thing to master.  <strong>1</strong></p>
</li>
<li>
<p><em>Limited Added Value</em> :  I can name a lot of features that would bring immediate help or improvement to ERPNext.  Introducing a new ORM‚Ä¶is not one.  Will it help <em>new</em> development?  Probably.  But given everything else that -could- be fixed/achieved with similar effort, I question the priority.</p>
</li>
<li>
<p><em>Surprise, Surprise</em>:   Once again, the community is surprised to hear about the latest invention.  Introducing an ORM was not on the publicly shared Roadmap.  And to my knowledge, it‚Äôs been implemented without any community feedback.</p>
<p>Here in the USA, I would use the sports phrase <a href="https://www.collinsdictionary.com/dictionary/english/par-for-the-course">‚Äòpar for the course‚Äô</a>.</p>
</li>
</ul>
<hr>
<p><strong>1</strong><br>
<em>Q</em>:  Okay Brian, you‚Äôre not being fair.  SQL has a learning curve too!<br>
<em>A</em>:  For sure.  But here‚Äôs the thing.  Does learning PyPika <em>replace</em> our need to learn SQL?  No.    It‚Äôs an additional tool.  Not a replacement for SQL.</p>
<p>Many report authors, developers, and business analysts will <em>still</em> need SQL language skills in their toolbelt.  Sooner or later, you want to query the database with a client tool.  Debug issues.  Perform ad-hoc data exploration.  Or write queries that are too-complex for an ORM to handle.  Tools like PyPika <em>supplement</em> SQL; they never supplant it.  So my point is now you must learn SQL <em>and</em> PyPika (2 things instead of 1)</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="5" />
              <span class='post-likes'>5 Likes</span>
            </div>

          </div>
          <div id='post_15' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/peterg'><span itemprop='name'>peterg</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-19T03:58:40Z' class='post-time'>
                    August 19, 2021,  3:58am
                  </time>
                  <meta itemprop='dateModified' content='2021-08-19T03:58:40Z'>
              <span itemprop='position'>15</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="brian_pond" data-post="14" data-topic="79092">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://discuss.frappe.io/user_avatar/discuss.frappe.io/brian_pond/48/55153_2.png" class="avatar"> brian_pond:</div>
<blockquote>
<p><em>Limited Added Value</em> : I can name a lot of features that would bring immediate help or improvement to ERPNext. Introducing a new ORM‚Ä¶is not one. Will it help <em>new</em> development? Probably. But given everything else that -could- be fixed/achieved with similar effort, I question the priority.</p>
</blockquote>
</aside>
<p>I disagree. The importance of this change is not syntax; it‚Äôs programmability. With frappe.db.sql, query composition has always been done via string concatenation. This is an absolute anti-pattern, prone to error and very difficult to scale in complexity. By giving queries an object structure, much more complex queries become possible.</p>
<p>The implications for this are important. At the moment, doctypes and sql tables are more or less one-to-one mapped. More complex data schema, I‚Äôd argue, really require a proper ORM. This has important implications for how data is normalized in the system between doctypes and in one-to-many relations. If you‚Äôre frustrated by how limited child docs currently are, for example, this is the necessary backend work to a more flexible system.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_16' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/brian_pond'><span itemprop='name'>brian_pond</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-19T15:47:15Z' class='post-time'>
                    August 19, 2021,  3:47pm
                  </time>
                  <meta itemprop='dateModified' content='2021-08-19T15:47:15Z'>
              <span itemprop='position'>16</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>If I knew for certain that future, important improvements (like first-class Child Docs) were the <em>-reason-</em> Frappe Query Builder was introduced in the first place?  Then I might have a different opinion.</p>
<p>But there‚Äôs no Road Map.  No discussions and community collaboration.  Everything happens behind-closed-doors.</p>
<p>So until then.  Until ORM yields <em>Indirect</em> Added Value?  By itself, I don‚Äôt see <em>Direct</em> Added Value.  I cannot think of anything it can accomplish, that I cannot already via ordinary SQL.  There‚Äôs no limit to the quantity or complexity of my statements.  Even more-advanced syntax like CTEs work just fine, with a tiny tweak to <code>'database.sql'</code>.</p>
<p>I admire your optimism and faith, Peter.  I really do.  I think I‚Äôve just reached a breaking point, in terms of the lack of transparency and collaboration in this project.  I‚Äôm already scrambling to deal with the latest catastrophe with Web Forms and Easy Install.   Then I read this, and I‚Äôm like ‚Äú<em>great‚Ä¶will this be another half-implemented feature that I‚Äôm fixing for the next 6 months?</em>‚Äù</p>
<p>Probably not a great attitude on my part.  But hard to argue it‚Äôs not justified, given 5 years of history.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

          </div>
          <div id='post_17' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/peterg'><span itemprop='name'>peterg</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-19T17:23:25Z' class='post-time'>
                    August 19, 2021,  5:23pm
                  </time>
                  <meta itemprop='dateModified' content='2021-08-19T17:23:25Z'>
              <span itemprop='position'>17</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I think we have very different understandings of how open source can and should work.</p>
<p>The kind of centralized planning you‚Äôre describing certainly exists in the open source world. Apart from ERPNext, I have some minimal understanding of two other projects, Drupal and Moodle. Both are similar to ERPNext in scale and complexity, but unlike ERPNext those two projects have very formal development cycles. Roadmaps go out two, three, four years into the future, and decisions are made through painstaking negotiations among a wide range of boards and stakeholders.</p>
<p>There are advantages to that approach, to be sure, but there are disadvantages too. For starters, development is slooooooow. If you compare Drupal or Moodle to what they looked like 5 years ago, really very little has changed. And those stakeholder negotiations? Unless your organization can commit 1000 hours+ of professional developer time annually, you simply don‚Äôt have a seat at the table.</p>
<p>With Frappe/ERPNext, things are very different. There‚Äôs no roadmap, I strongly suspect, because there‚Äôs no central plan. There‚Äôs no corporate overseer deciding who should do what next as part of a long-term strategy, but rather there are a bunch of talented and generous individuals chasing after whatever next thing seems interesting or important. Things get built because somebody with the skills to make it happen decided that it should be built. Nothing more, and nothing less. You can see that as a bad thing if you want, but I‚Äôd argue it‚Äôs the project‚Äôs central strength.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="3" />
              <span class='post-likes'>3 Likes</span>
            </div>

          </div>
          <div id='post_18' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/brian_pond'><span itemprop='name'>brian_pond</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-19T17:42:40Z' class='post-time'>
                    August 19, 2021,  5:42pm
                  </time>
                  <meta itemprop='dateModified' content='2021-08-19T17:42:40Z'>
              <span itemprop='position'>18</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>If the talented contributors were a diverse group of individuals, operating independently, and volunteering their time?  I‚Äôd probably be more sympathetic.  However, the vast majority are in-fact employees of the very corporate overseer you described.  Given that we‚Äôre dealing with a corporation, I naturally expect things like roadmaps, strategy, and plans to exist.</p>
<p>I‚Äôm certain they do.  However, that information isn‚Äôt shared.  Which is quite fine!  It‚Äôs their prerogative.  Private corporation.  No one is obligated or required to do <em>anything</em>.  It is, as you say, an open source project.</p>
<p>On the other hand.  When this organization decides (occasionally) to share information publicly?  With no obvious benefit, and I‚Äôm not privvy to their long-term plans?</p>
<p>Well.  It shouldn‚Äôt be surprising that I‚Äôm not entirely thrilled.  For myself, my clients, my business partners, and prospects?  This is a near-term burden.  We can <em>hope</em> for future dividends.  But since when has hope been an effective business strategy?</p>
<p>I think you and I must agree to disagree on this, Peter. <img src="https://discuss.frappe.io/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_19' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/peterg'><span itemprop='name'>peterg</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-19T17:47:06Z' class='post-time'>
                    August 19, 2021,  5:47pm
                  </time>
                  <meta itemprop='dateModified' content='2021-08-19T18:06:32Z'>
              <span itemprop='position'>19</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="brian_pond" data-post="18" data-topic="79092">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://discuss.frappe.io/user_avatar/discuss.frappe.io/brian_pond/48/55153_2.png" class="avatar"> brian_pond:</div>
<blockquote>
<p>Given that we‚Äôre dealing with a corporation, I naturally expect things like roadmaps, strategy, and plans to exist.</p>
</blockquote>
</aside>
<p>If that‚Äôs your expectation, you and I have very different experiences of how decisions are made in corporations <img src="https://discuss.frappe.io/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>
<p>Edited to add: I understand that most new code is being written by employees of Frappe Inc. What I‚Äôm objecting to is the idea that development priorities are being driven by an abstract plan like the kind had by Drupal and Moodle.</p>
<p>Instead, I‚Äôm sure there‚Äôs an enormous wishlist, which probably doesn‚Äôt look that different from yours or mine. So how is one priority chosen over another? Having followed the repos for a few years now, I strongly suspect that the answer, at least 90% of the time, is ‚Äúbecause a client wanted it and was willing to pay for it‚Äù.</p>
<p>To be clear, I don‚Äôt think this is a bad thing, and I am grateful that Frappe is committed to sharing this work with me for free. But, in the end, all discussions on these forums about development priorities really should begin and end with the economic realities of the people doing the work.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
          <div id='post_20' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/rmehta'><span itemprop='name'>rmehta</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-20T07:06:13Z' class='post-time'>
                    August 20, 2021,  7:06am
                  </time>
                  <meta itemprop='dateModified' content='2021-08-20T07:06:13Z'>
              <span itemprop='position'>20</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="peterg" data-post="17" data-topic="79092">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://discuss.frappe.io/user_avatar/discuss.frappe.io/peterg/48/55463_2.png" class="avatar"> peterg:</div>
<blockquote>
<p>With Frappe/ERPNext, things are very different. There‚Äôs no roadmap, I strongly suspect, because there‚Äôs no central plan. There‚Äôs no corporate overseer deciding who should do what next as part of a long-term strategy, but rather there are a bunch of talented and generous individuals chasing after whatever next thing seems interesting or important. Things get built because somebody with the skills to make it happen decided that it should be built. Nothing more, and nothing less. You can see that as a bad thing if you want, but I‚Äôd argue it‚Äôs the project‚Äôs central strength.</p>
</blockquote>
</aside>
<p>This is exactly how it works at Frappe</p>
<aside class="quote no-group" data-username="brian_pond" data-post="18" data-topic="79092">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="https://discuss.frappe.io/user_avatar/discuss.frappe.io/brian_pond/48/55153_2.png" class="avatar"> brian_pond:</div>
<blockquote>
<p>If the talented contributors were a diverse group of individuals, operating independently, and volunteering their time? I‚Äôd probably be more sympathetic. However, the vast majority are in-fact employees of the very corporate overseer you described. Given that we‚Äôre dealing with a corporation, I naturally expect things like roadmaps, strategy, and plans to exist.</p>
<p>I‚Äôm certain they do. However, that information isn‚Äôt shared. Which is quite fine! It‚Äôs their prerogative. Private corporation. No one is obligated or required to do <em>anything</em> . It is, as you say, an open source project.</p>
<p>On the other hand. When this organization decides (occasionally) to share information publicly? With no obvious benefit, and I‚Äôm not privvy to their long-term plans?</p>
<p>Well. It shouldn‚Äôt be surprising that I‚Äôm not entirely thrilled. For myself, my clients, my business partners, and prospects? This is a near-term burden. We can <em>hope</em> for future dividends. But since when has hope been an effective business strategy?</p>
</blockquote>
</aside>
<p>This is a completely speculative and in a way accusatory.</p>
<p>If you and your clients depend on ERPNext, then either you could choose to work with Frappe or become a contributor or run your own thing. Expecting people to do what you like for free is unethical.</p>
<p>I don‚Äôt know if you chanced upon the <a href="https://frappe.io/blog/management/rights-and-responsibilities-of-a-frappe-team-member">Frappe Blog</a>. Things are very much individual driven.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="7" />
              <span class='post-likes'>7 Likes</span>
            </div>

          </div>
          <div id='post_21' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://discuss.frappe.io/u/brian_pond'><span itemprop='name'>brian_pond</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-08-20T13:55:48Z' class='post-time'>
                    August 20, 2021,  1:55pm
                  </time>
                  <meta itemprop='dateModified' content='2021-08-20T13:55:48Z'>
              <span itemprop='position'>21</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>This entire line of discussion can be summarized as follows:</p>
<ol>
<li>Gavin announced the Frappe Query Builder</li>
<li>Various forum members chimed in, expressing enthusiasm.</li>
<li>I chimed in and basically said:  ‚Äú<em>eh, it‚Äôs okay, but I‚Äôm not thrilled.</em>‚Äù  That‚Äôs just my opinion.</li>
<li>Peter tried to convince me otherwise.</li>
<li>We‚Äôve both agreed to disagree.</li>
</ol>
<p>The only thing I‚Äôve ‚Äúaccused‚Äù you of are the following:</p>
<ul>
<li>Sharing information less-often than <strong>I</strong> would prefer you did.</li>
<li>Prioritzing things differently than I would.</li>
<li>Acting in your own best, self-interests.  (<em>don‚Äôt we all?</em>)</li>
<li>Not sharing all your plans with the community.  (<em>you‚Äôre certainly not obligated to</em>).</li>
<li>Disappointing me.</li>
</ul>
<p>I don‚Äôt expect you to do what I like, for free.  However, the opposite is also true.</p>
<p>Just because it‚Äôs free?  That doesn‚Äôt mean I <em>have</em> to like it.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="4" />
              <span class='post-likes'>4 Likes</span>
            </div>

          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
            <span itemprop='name'><b><a rel="next" itemprop="url" href="/t/announcement-introducing-frappe-query-builder/79092?page=2">next page ‚Üí</a></b></span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    <div class="erpnext-footer">
    <a href="https://frappe.io">Frappe</a>
</div>
    
  </body>
  
</html>
